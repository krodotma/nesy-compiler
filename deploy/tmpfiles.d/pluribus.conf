# Pluribus tmpfiles.d configuration
# Limits /tmp and /var/tmp to prevent boot hangs
# Place in /etc/tmpfiles.d/pluribus.conf

# Clean /tmp files older than 1 hour
d /tmp 1777 root root 1h

# Clean /var/tmp files older than 6 hours
d /var/tmp 1777 root root 6h

# Pluribus-specific temp directories
d /tmp/pluribus_sessions 1777 root root 1h
d /pluribus/.pluribus/tmp 1777 root root 1h

# Aggressive cleanup of known offenders
R /tmp/npm-* - - - 10m
R /tmp/vite-* - - - 10m
R /tmp/.vite-* - - - 10m
R /tmp/playwright-* - - - 10m
R /tmp/puppeteer-* - - - 10m
R /tmp/chromium-* - - - 10m
R /tmp/core.* - - - 0
R /var/tmp/npm-* - - - 1h
R /var/tmp/vite-* - - - 1h

# Bus backup files
R /pluribus/.pluribus/bus/*.bak - - - 30m
R /pluribus/.pluribus/bus/*.old - - - 30m

# Log rotation cleanup
R /tmp/*.log.*.gz - - - 10m
R /var/log/*.old - - - 1d
