import{d as D,_,a as E,i as p,u as B,e as g,k as e,l as i,F as ue,g as b,m as W,n as rs,o as Ie,S as xe,p as y,q as a,r as N,s as h,c as os,f as an,t as El,w as wt,x as Me,b as is,y as us}from"./q-CjCWtRhd.js";import{clsx as cs}from"clsx";import{twMerge as ds}from"tailwind-merge";import"@material/web/button/filled-button.js";import"@material/web/button/filled-tonal-button.js";import"@material/web/button/outlined-button.js";import"@material/web/button/text-button.js";import"@material/web/iconbutton/icon-button.js";import"@material/web/fab/fab.js";import"@material/web/icon/icon.js";import"@material/web/elevation/elevation.js";import"@material/web/slider/slider.js";import"@material/web/ripple/ripple.js";import"@material/web/progress/circular-progress.js";import"@material/web/chips/assist-chip.js";import"@material/web/switch/switch.js";import"@material/web/dialog/dialog.js";import"@material/web/tabs/tabs.js";import"@material/web/tabs/primary-tab.js";import{u as ps,V as ms}from"./q-DmW8REv0.js";import"@material/web/textfield/filled-text-field.js";import"@material/web/textfield/outlined-text-field.js";import"@material/web/chips/filter-chip.js";import"@material/web/progress/linear-progress.js";import"@material/web/focus/md-focus-ring.js";import{spawn as ut}from"child_process";import{randomUUID as gs}from"crypto";function Pe(l){D(_("s_YpivDNXzo3c",[l]))}const kt=["needs_login","needs_code","needs_onboarding","blocked_bot"],vs=()=>{},bs=async()=>{const[l,t]=b();try{const s=await fetch("/api/browser/status");if(s.ok){const r=await s.json();t.running=!!r.running,t.vncMode=!!r.vnc_mode,t.issueCount=Object.values(r.tabs||{}).filter(o=>kt.includes(o.status||"unknown")).length,t.lastRefresh=new Date().toISOString();return}}catch{}const n={};for(const s of["chatgpt-web","claude-web","gemini-web"]){const r=(l.providerStatus??{})[s];if(!r)continue;const o=(r.error||"").toLowerCase();let c=r.available?"ready":"unknown";o.includes("2fa")||o.includes("otp")||o.includes("verification code")||o.includes("needs_code")?c="needs_code":o.includes("login")||o.includes("auth")?c="needs_login":o.includes("bot")||o.includes("challenge")?c="blocked_bot":o.includes("onboarding")||o.includes("welcome")?c="needs_onboarding":!r.available&&r.error&&(c="error"),n[s]={status:c}}t.running=!1,t.vncMode=!1,t.issueCount=Object.values(n||{}).filter(s=>kt.includes(s.status||"unknown")).length,t.lastRefresh=new Date().toISOString()},fs=async()=>{const[l]=b();try{const t=await fetch("/api/browser/gemini_clean/status");if(t.ok){const n=await t.json();l.geminiCleanOk=typeof n?.ok=="boolean"?n.ok:null,l.geminiCleanLastRefresh=new Date().toISOString()}}catch{l.geminiCleanOk=null}},xs=l=>{const t=B({issueCount:0,vncMode:!1,running:!1,lastRefresh:null,geminiCleanOk:null,geminiCleanLastRefresh:null,hovered:!1}),n=p(vs,"s_UcW00w2bH24"),s=l.onOpen$??n;D(_("s_aJ63xD0aV4k",[p(bs,"s_0b1upVJ6Haw",[l,t]),p(fs,"s_evd2apTk8jM",[t]),t]));const c=t.issueCount>0,u=l.inline??!1?"relative":"fixed bottom-5 right-5 z-50",m=c?{bg:"bg-gradient-to-br from-amber-500/30 to-orange-600/20",border:"border-amber-400/60",text:"text-amber-100",shadow:"0 4px 20px rgba(245, 158, 11, 0.4), 0 0 40px rgba(245, 158, 11, 0.2)",shadowHover:"0 6px 30px rgba(245, 158, 11, 0.6), 0 0 60px rgba(245, 158, 11, 0.3)",glow:"rgba(245, 158, 11, 0.7)"}:{bg:"bg-gradient-to-br from-cyan-500/20 to-blue-600/10",border:"border-cyan-400/40",text:"text-cyan-200",shadow:"0 4px 15px rgba(34, 211, 238, 0.2), 0 0 30px rgba(34, 211, 238, 0.1)",shadowHover:"0 6px 25px rgba(34, 211, 238, 0.4), 0 0 50px rgba(34, 211, 238, 0.2)",glow:"rgba(34, 211, 238, 0.6)"};return g(ue,{children:[e("style",{dangerouslySetInnerHTML:`
        @keyframes fab-pulse-glow {
          0% {
            transform: scale(1);
            box-shadow: ${m.shadow}, 0 0 0 0 ${m.glow};
          }
          50% {
            transform: scale(1.02);
            box-shadow: ${m.shadowHover}, 0 0 0 8px rgba(245, 158, 11, 0);
          }
          100% {
            transform: scale(1);
            box-shadow: ${m.shadow}, 0 0 0 0 ${m.glow};
          }
        }
        @keyframes fab-float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-3px); }
        }
        @keyframes fab-shine {
          0% { background-position: -200% center; }
          100% { background-position: 200% center; }
        }
        @keyframes cloud-bounce {
          0%, 100% { transform: scale(1) rotate(0deg); }
          25% { transform: scale(1.1) rotate(-5deg); }
          75% { transform: scale(1.1) rotate(5deg); }
        }
        .fab-cloud-auth {
          transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
          will-change: transform, box-shadow;
        }
        .fab-cloud-auth:hover {
          transform: scale(1.08) translateY(-2px);
        }
        .fab-cloud-auth:active {
          transform: scale(0.95);
        }
        .fab-cloud-auth.has-issues {
          animation: fab-pulse-glow 2s ease-in-out infinite;
        }
        .fab-cloud-auth:not(.has-issues) {
          animation: fab-float 3s ease-in-out infinite;
        }
        .fab-cloud-icon {
          display: inline-block;
          transition: transform 0.3s ease;
          filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        .fab-cloud-auth:hover .fab-cloud-icon {
          animation: cloud-bounce 0.6s ease-in-out;
        }
        .fab-badge {
          background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.05));
          backdrop-filter: blur(4px);
          box-shadow: inset 0 1px 0 rgba(255,255,255,0.2), 0 2px 4px rgba(0,0,0,0.2);
        }
        .fab-shine-effect {
          background: linear-gradient(
            90deg,
            transparent,
            rgba(255,255,255,0.1),
            transparent
          );
          background-size: 200% 100%;
        }
        .fab-cloud-auth:hover .fab-shine-effect {
          animation: fab-shine 0.8s ease;
        }
      `},null,null,3,null),e("button",{title:c?`${t.issueCount} provider(s) need auth`:"Browser Auth",class:[u,"fab-cloud-auth",c?"has-issues":"","rounded-full border-2 backdrop-blur-md","px-4 py-2.5","flex items-center gap-2.5 text-sm font-medium","cursor-pointer select-none",m.bg,m.border,m.text].join(" "),style:{boxShadow:t.hovered?m.shadowHover:m.shadow},onClick$:s,onMouseEnter$:_("s_DlyYpB0g2RM",[t]),onMouseLeave$:_("s_0h905xfqJuc",[t])},{type:"button","data-testid":"auth-fab"},[e("div",null,{class:"fab-shine-effect absolute inset-0 rounded-full pointer-events-none"},null,3,null),e("span",null,{class:"fab-cloud-icon text-lg relative"},["â˜ï¸",c&&e("span",null,{class:"absolute -top-1 -right-1 w-2 h-2 bg-amber-400 rounded-full animate-ping"},null,3,"tR_0")],1,null),c?e("span",null,{class:"fab-badge px-2 py-0.5 rounded-full text-xs font-bold"},i(d=>d.issueCount,[t],"p0.issueCount"),3,"tR_1"):e("span",null,{class:"hidden sm:inline font-medium tracking-wide"},"Auth",3,null),e("div",null,{class:"flex items-center gap-1"},[t.geminiCleanOk===!1&&e("span",null,{class:"fab-badge px-1.5 py-0.5 rounded text-[10px] text-amber-200"},"GC",3,"tR_2"),t.vncMode&&e("span",null,{class:"fab-badge px-1.5 py-0.5 rounded text-[10px] opacity-90"},"VNC",3,"tR_3"),t.running&&e("span",null,{class:"w-1.5 h-1.5 bg-green-400 rounded-full shadow-lg shadow-green-400/50"},null,3,"tR_4")],1,null)],0,null)]},1,"tR_5")},hs=E(p(xs,"s_vbbVCu9HnPI")),ys=["--background","--foreground","--card","--card-foreground","--popover","--popover-foreground","--primary","--primary-foreground","--secondary","--secondary-foreground","--muted","--muted-foreground","--accent","--accent-foreground","--destructive","--destructive-foreground","--border","--input","--ring"],tt={"--background":"hsl(220 20% 8%)","--foreground":"hsl(200 20% 95%)","--card":"hsl(220 18% 12%)","--card-foreground":"hsl(200 20% 95%)","--popover":"hsl(220 18% 14%)","--popover-foreground":"hsl(200 20% 95%)","--primary":"hsl(185 100% 50%)","--primary-foreground":"hsl(220 20% 8%)","--secondary":"hsl(270 70% 60%)","--secondary-foreground":"hsl(200 20% 95%)","--muted":"hsl(220 15% 18%)","--muted-foreground":"hsl(220 15% 65%)","--accent":"hsl(325 85% 55%)","--accent-foreground":"hsl(200 20% 95%)","--destructive":"hsl(0 80% 55%)","--destructive-foreground":"hsl(0 0% 100%)","--border":"hsl(220 15% 22%)","--input":"hsl(220 15% 16%)","--ring":"hsl(185 100% 50%)"},nt={"--background":"hsl(210 30% 98%)","--foreground":"hsl(222 35% 12%)","--card":"hsl(0 0% 100%)","--card-foreground":"hsl(222 35% 12%)","--popover":"hsl(0 0% 100%)","--popover-foreground":"hsl(222 35% 12%)","--primary":"hsl(210 90% 45%)","--primary-foreground":"hsl(0 0% 100%)","--secondary":"hsl(275 70% 60%)","--secondary-foreground":"hsl(0 0% 100%)","--muted":"hsl(210 24% 90%)","--muted-foreground":"hsl(215 18% 35%)","--accent":"hsl(330 85% 55%)","--accent-foreground":"hsl(0 0% 100%)","--destructive":"hsl(0 75% 52%)","--destructive-foreground":"hsl(0 0% 100%)","--border":"hsl(210 20% 86%)","--input":"hsl(210 20% 92%)","--ring":"hsl(210 90% 45%)"},St=(l,t,n)=>Math.min(n,Math.max(t,l)),Oe=l=>{const t=l%360;return t<0?t+360:t},te=(l,t,n)=>`hsl(${Math.round(Oe(l))} ${Math.round(St(t,0,100))}% ${Math.round(St(n,0,100))}%)`,_s=l=>{if(l==null)return Math.random;let t=l;l>0&&l<1&&(t=l*4294967295);let n=t>>>0||1831565813;return()=>{n+=1831565813;let s=Math.imul(n^n>>>15,1|n);return s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296}},ws=(l,t)=>{const n=Math.abs(Oe(l)-Oe(t))%360;return Math.min(n,360-n)},rn=l=>{const t=_s(l),n=[200,220,250,280,320,20,40,90,140,170],s=n[Math.floor(t()*n.length)],r=Oe(s+(t()-.5)*14),o=(t()<.5?1:-1)*(28+t()*18),c=Oe(r+o);let u=Oe(r+150+t()*45);ws(u,c)<28&&(u=Oe(u+40));const m=Oe(r+210+t()*20),d=12+t()*8,f=10+t()*6,v=f+4,x=f+18,S=f+10,M=74+t()*14,$=58+t()*8,w=62+t()*16,k=56+t()*8,I=70+t()*18,T=60+t()*10;return{"--background":te(m,d,f),"--foreground":te(m,18,96),"--card":te(m,d+4,v),"--card-foreground":te(m,16,96),"--popover":te(m,d+4,v),"--popover-foreground":te(m,16,96),"--primary":te(r,M,$),"--primary-foreground":te(m,20,12),"--secondary":te(c,w,k),"--secondary-foreground":te(m,20,12),"--muted":te(m,d+8,S),"--muted-foreground":te(m,12,72),"--accent":te(u,I,T),"--accent-foreground":te(m,18,12),"--destructive":"0 85% 60%","--destructive-foreground":"0 0% 100%","--border":te(m,d+6,x),"--input":te(m,d+6,x-2),"--ring":te(r,M,$)}},st=l=>l&&l("(prefers-color-scheme: light)").matches?"light":"dark",ks=(l,t)=>l==="light"?{...nt}:l==="dark"?{...tt}:l==="chroma"?rn(t?.seed):st(t?.matchMedia)==="light"?{...nt}:{...tt},Ss=(l,t)=>{Object.entries(t).forEach(([n,s])=>{l.style.setProperty(n,s)})},Cs=l=>{ys.forEach(t=>{l.style.removeProperty?l.style.removeProperty(t):l.style.setProperty(t,"")})},$s=(l,t)=>{const n=t?.root??(typeof document<"u"?document.documentElement:void 0);if(!n)return{mode:l,resolvedMode:l==="system"?st(t?.matchMedia):l,tokens:ks(l,t)};if(l==="chroma"){const o=rn(t?.seed);return n.dataset&&(n.dataset.theme="chroma"),Ss(n,o),{mode:l,resolvedMode:"chroma",tokens:o}}const s=l==="system"?st(t?.matchMedia):l;n.dataset&&(n.dataset.theme=s),Cs(n);const r=s==="light"?{...nt}:{...tt};return{mode:l,resolvedMode:s,tokens:r}};function Is(...l){return ds(cs(l))}const Ts=l=>{W();const t=rs(l,["variant","icon","class","onClick$","disabled","type","title"]);return(l.variant??"primary")==="icon"?Ie("md-icon-button",{get class(){return l.class},get disabled(){return l.disabled},get title(){return l.title},...t,children:e("md-icon",null,null,l.icon||g(xe,null,3,"Ao_0"),1,null),onClick$:l.onClick$},{class:i(n=>n.class,[l],"p0.class"),disabled:i(n=>n.disabled,[l],"p0.disabled"),title:i(n=>n.title,[l],"p0.title")},0,"Ao_1"):(l.variant??"primary")==="fab"?Ie("md-fab",{get class(){return l.class},get disabled(){return l.disabled},get title(){return l.title},get label(){return l.icon?void 0:"Action"},...t,children:l.icon&&e("md-icon",null,{slot:"icon"},i(n=>n.icon,[l],"p0.icon"),3,"Ao_2"),onClick$:l.onClick$},{class:i(n=>n.class,[l],"p0.class"),disabled:i(n=>n.disabled,[l],"p0.disabled"),title:i(n=>n.title,[l],"p0.title"),label:i(n=>n.icon?void 0:"Action",[l],'p0.icon?undefined:"Action"')},0,"Ao_3"):(l.variant??"primary")==="text"?Ie("md-text-button",{get class(){return l.class},get disabled(){return l.disabled},get type(){return l.type},get title(){return l.title},...t,children:[l.icon&&e("md-icon",null,{slot:"icon"},i(n=>n.icon,[l],"p0.icon"),3,"Ao_4"),g(xe,null,3,"Ao_5")],onClick$:l.onClick$},{class:i(n=>n.class,[l],"p0.class"),disabled:i(n=>n.disabled,[l],"p0.disabled"),type:i(n=>n.type,[l],"p0.type"),title:i(n=>n.title,[l],"p0.title")},0,"Ao_6"):(l.variant??"primary")==="secondary"?Ie("md-outlined-button",{get class(){return l.class},get disabled(){return l.disabled},get type(){return l.type},get title(){return l.title},...t,children:[l.icon&&e("md-icon",null,{slot:"icon"},i(n=>n.icon,[l],"p0.icon"),3,"Ao_7"),g(xe,null,3,"Ao_8")],onClick$:l.onClick$},{class:i(n=>n.class,[l],"p0.class"),disabled:i(n=>n.disabled,[l],"p0.disabled"),type:i(n=>n.type,[l],"p0.type"),title:i(n=>n.title,[l],"p0.title")},0,"Ao_9"):(l.variant??"primary")==="tonal"?Ie("md-filled-tonal-button",{get class(){return l.class},get disabled(){return l.disabled},get type(){return l.type},get title(){return l.title},...t,children:[l.icon&&e("md-icon",null,{slot:"icon"},i(n=>n.icon,[l],"p0.icon"),3,"Ao_10"),g(xe,null,3,"Ao_11")],onClick$:l.onClick$},{class:i(n=>n.class,[l],"p0.class"),disabled:i(n=>n.disabled,[l],"p0.disabled"),type:i(n=>n.type,[l],"p0.type"),title:i(n=>n.title,[l],"p0.title")},0,"Ao_12"):Ie("md-filled-button",{get class(){return l.class},get disabled(){return l.disabled},get type(){return l.type},get title(){return l.title},...t,children:[l.icon&&e("md-icon",null,{slot:"icon"},i(n=>n.icon,[l],"p0.icon"),3,"Ao_13"),g(xe,null,3,"Ao_14")],onClick$:l.onClick$},{class:i(n=>n.class,[l],"p0.class"),disabled:i(n=>n.disabled,[l],"p0.disabled"),type:i(n=>n.type,[l],"p0.type"),title:i(n=>n.title,[l],"p0.title")},0,"Ao_15")},L=E(p(Ts,"s_90hSrHFjA4Q")),Es="pluribus.dashboard.theme",Ct="pluribus.dashboard.chroma_seed",As=(l,t)=>{try{localStorage.setItem(Es,l),t==null?localStorage.removeItem(Ct):localStorage.setItem(Ct,String(t))}catch{}},Ms=l=>{const[t,n,s]=b();let r=t.value;l==="chroma"?(r=Math.random(),t.value=r,typeof window<"u"&&window.dispatchEvent(new CustomEvent("pluribus:art:request",{detail:{reason:"user_chroma_toggle"}}))):r=null,n.value=l,$s(l,{seed:r??void 0,matchMedia}),s(l,r)},Os=()=>{const[l]=b();return l("light")},Ps=()=>{const[l]=b();return l("dark")},Ls=()=>{const[l]=b();return l("chroma")},Ds=()=>{const l=y("chroma"),t=y(null);D(_("s_75g3I0FrJfw",[t,l]));const s=p(Ms,"s_8TnkRenWaaM",[t,l,p(As,"s_WKrLdAupJno")]);return e("div",null,{class:"flex items-center gap-1 rounded-full border border-border bg-muted/40 p-1 backdrop-blur-md backdrop-saturate-150 shadow-lg"},[g(L,{get variant(){return l.value==="light"?"tonal":"text"},onClick$:p(Os,"s_HOgkIBsKR04",[s]),class:"h-6 text-[11px] px-3 rounded-full",children:"Light",[a]:{variant:i(r=>r.value==="light"?"tonal":"text",[l],'p0.value==="light"?"tonal":"text"'),onClick$:a,class:a}},3,"oW_0"),g(L,{get variant(){return l.value==="dark"?"tonal":"text"},onClick$:p(Ps,"s_w6KqM3lkNNU",[s]),class:"h-6 text-[11px] px-3 rounded-full",children:"Dark",[a]:{variant:i(r=>r.value==="dark"?"tonal":"text",[l],'p0.value==="dark"?"tonal":"text"'),onClick$:a,class:a}},3,"oW_1"),g(L,{get variant(){return l.value==="chroma"?"tonal":"text"},onClick$:p(Ls,"s_n1qlaKdnPNM",[s]),class:"h-6 text-[11px] px-3 rounded-full",children:"Random Chroma",[a]:{variant:i(r=>r.value==="chroma"?"tonal":"text",[l],'p0.value==="chroma"?"tonal":"text"'),onClick$:a,class:a}},3,"oW_2")],1,"oW_3")},Rs=E(p(Ds,"s_1YjTQoL0d64")),Ns={xs:"glass-title-neon-xs",sm:"glass-title-neon-sm",base:"glass-title-neon-base",lg:"glass-title-neon-lg",xl:"glass-title-neon-xl","2xl":"glass-title-neon-2xl","3xl":"glass-title-neon-3xl"},on={cyan:"glass-title-neon",magenta:"glass-title-neon-magenta",amber:"glass-title-neon-amber",purple:"glass-title-neon-purple",emerald:"glass-title-neon-emerald",rose:"glass-title-neon-rose"},js={none:"",flicker:"glass-title-neon-animated",pulse:"glass-title-neon-pulse",breathe:"glass-title-neon-breathe"},zs=l=>{const t=[on[l.color??"cyan"],Ns[l.size??"sm"],js[l.animation??"none"],(l.uppercase??!0)&&"uppercase",(l.underline??!1)&&"glass-title-underline-neon",l.class].filter(Boolean).join(" ");return g(l.level??"span",{class:t,children:g(xe,null,3,"Gg_0")},1,"Gg_1")},q=E(p(zs,"s_SEbomYdp6GQ")),Bs=l=>{const t=["inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold uppercase tracking-wider",on[l.color??"cyan"],(l.glow??!1)&&"glass-border-glow",(l.pulse??!1)&&"glass-title-neon-pulse",l.class].filter(Boolean).join(" ");return e("span",{class:t},null,g(xe,null,3,"Gg_2"),1,"Gg_3")},X=E(p(Bs,"s_csXvBsmotCQ")),Us=l=>{const t={cyan:"var(--glass-accent-cyan)",magenta:"var(--glass-accent-magenta)",amber:"var(--glass-accent-amber)",purple:"var(--glass-accent-purple)",emerald:"var(--glass-accent-emerald)",rose:"var(--glass-accent-rose)"}[l.color??"cyan"];return e("div",null,{class:i(n=>["flex items-center gap-3 mb-3",n.class].filter(Boolean).join(" "),[l],'["flex items-center gap-3 mb-3",p0.class].filter(Boolean).join(" ")')},[g(q,{level:"h3",get color(){return l.color??"cyan"},get size(){return l.size??"sm"},get animation(){return l.animation??"none"},children:i(n=>n.title,[l],"p0.title"),[a]:{level:a,color:i(n=>n.color??"cyan",[l],'p0.color??"cyan"'),size:i(n=>n.size??"sm",[l],'p0.size??"sm"'),animation:i(n=>n.animation??"none",[l],'p0.animation??"none"')}},3,"Gg_4"),e("div",{style:{background:`linear-gradient(90deg, ${t}, transparent)`,boxShadow:`0 0 8px ${t}`}},{class:"flex-1 h-px"},null,3,null)],1,"Gg_5")},ct=E(p(Us,"s_OxYgDE1qdOE"));function Fs(l){const t=(l||"").trim();return t?t.length>12?t.slice(0,12):t:"dev"}const qs=["calm","focused","hyper","anxious","chaotic","dormant"],Gs=()=>{const[l]=b();return l.onClose$?.()},Vs=()=>{const[l,t]=b(),n=t.value.toLowerCase();return l.value.filter(s=>s.name.toLowerCase().includes(n)||s.tags.some(r=>r.toLowerCase().includes(n)))},Hs=()=>{const[l,t]=b();return l.value.slice(0,t.value)},Ws=()=>{const[l]=b();l.value+=12},Ys=async l=>{const[t,n,s]=b();t.value=!0,s.value="Requesting new scene...";try{const r=typeof crypto<"u"&&crypto.getRandomValues?crypto.getRandomValues(new Uint32Array(1))[0]:Math.floor(Math.random()*4294967296);await fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:"art.scene.request",kind:"request",level:"info",actor:"gestalt-overlay",data:{source:"GestaltOverlay",seed:r,reason:l,mood:n.value,at:new Date().toISOString()}})}),s.value="Scene request sent. Waiting for art director..."}catch{s.value="Failed to request scene"}finally{t.value=!1}},Js=async l=>{const[t,n,s]=b();n.value=!0,s.value=`Loading ${l.name}...`;try{const r=await fetch(`/api/fs/${l.code_path}`);if(!r.ok)throw new Error("Failed to load shader");const o=await r.text(),c={...l,glsl:o};window.__PLURIBUS_LAST_ART_SCENE__={topic:"art.scene.change",data:{scene:c}},window.dispatchEvent(new CustomEvent("pluribus:art",{detail:{topic:"art.scene.change",data:{scene:c,tokens:{}}}})),t.value=c,s.value=`Applied: ${l.name}`}catch(r){s.value=`Error: ${String(r)}`}finally{n.value=!1}},Ks=async()=>{const[l,t,n]=b();if(t.value.length===0){n.value="No shaders in registry";return}const s=t.value.filter(o=>o.type==="shader"),r=s[Math.floor(Math.random()*s.length)];await l(r)},Qs=l=>{const t=p(Gs,"s_Q5N2vUq06ic",[l]),n=y([]),s=y(null);y(null);const r=y(!1),o=y(l.mood||"calm"),c=y(""),u=y(""),m=y(12),d=N(p(Vs,"s_3muZkWOpp0U",[n,u])),f=N(p(Hs,"s_yfBeHG08gsg",[d,m])),v=typeof l.entropy=="number"?Math.max(0,Math.min(1,l.entropy)):null,x=p(Ws,"s_YDdt4KQp5Lg",[m]);D(_("s_nfOqIPW1kko",[s,l,n,c]));const S=p(Ys,"s_v2YpPftHkYg",[r,o,c]),M=p(Js,"s_g4o4QXoWe8c",[s,r,c]),$=p(Ks,"s_fpZnS00eM0w",[M,n,c]);return e("div",null,{class:i(w=>`fixed inset-0 z-[55] ${w.open?"glass-animate-enter":"hidden"}`,[l],'`fixed inset-0 z-[55] ${p0.open?"glass-animate-enter":"hidden"}`'),"data-testid":"gestalt-overlay","aria-modal":"true",role:"dialog"},[e("div",null,{class:"absolute inset-0 glass-surface-overlay",onClick$:t},null,3,null),e("div",null,{class:"absolute right-4 top-4 left-4 md:left-auto md:w-[720px] rounded-xl glass-surface-elevated shadow-glass-elevated overflow-hidden glass-animate-enter",style:{"--stagger":1}},[e("div",null,{class:"p-3 border-b border-glass-border-subtle flex items-center gap-2 glass-surface-subtle"},[e("span",null,{class:"text-lg"},"ðŸŽ¨",3,null),g(q,{level:"div",color:"magenta",size:"lg",animation:"flicker",children:"Gestalt Art Director",[a]:{level:a,color:a,size:a,animation:a}},3,"tj_0"),g(X,{color:"purple",glow:!0,class:"ml-2",children:[i(w=>w.value.length,[n],"p0.value.length")," shaders"],[a]:{color:a,glow:a,class:a}},3,"tj_1"),e("button",null,{type:"button",class:"ml-auto text-xs px-3 py-1.5 rounded bg-primary text-primary-foreground hover:bg-primary/90",onClick$:t},"Close",3,null)],1,null),e("div",null,{class:"p-3 text-xs space-y-3 max-h-[80vh] overflow-y-auto"},[c.value&&e("div",null,{class:"rounded border border-primary/30 bg-primary/10 px-3 py-2 text-primary"},i(w=>w.value,[c],"p0.value"),3,"tj_2"),e("div",null,{class:"rounded-lg glass-surface glass-animate-enter",style:{"--stagger":2}},[e("div",null,{class:"px-3 py-2 border-b border-glass-border-subtle"},g(q,{level:"div",color:"cyan",size:"sm",children:"System Evolution",[a]:{level:a,color:a,size:a}},3,"tj_3"),1,null),e("div",null,{class:"p-3 grid grid-cols-2 gap-x-3 gap-y-2 text-muted-foreground"},[e("div",null,{class:"font-mono"},"BUILD",3,null),e("div",null,{class:"font-mono text-foreground"},i(w=>w.buildTimeIso,[l],"p0.buildTimeIso"),3,null),e("div",null,{class:"font-mono"},"COMMIT",3,null),e("div",null,{class:"font-mono text-foreground"},Fs(l.buildCommit),1,null),e("div",null,{class:"font-mono"},"GEN",3,null),e("div",null,{class:"font-mono text-foreground"},i(w=>typeof w.generation=="number"?w.generation:"â€”",[l],'typeof p0.generation==="number"?p0.generation:"â€”"'),3,null),e("div",null,{class:"font-mono"},"LINEAGE",3,null),e("div",null,{class:"font-mono text-foreground truncate"},i(w=>w.lineageId||"â€”",[l],'p0.lineageId||"â€”"'),3,null),e("div",null,{class:"font-mono"},"DAG",3,null),e("div",null,{class:"font-mono text-foreground truncate"},i(w=>w.dagId||"â€”",[l],'p0.dagId||"â€”"'),3,null)],1,null)],1,null),e("div",null,{class:"rounded-lg glass-surface glass-animate-enter",style:{"--stagger":3}},[e("div",null,{class:"px-3 py-2 border-b border-glass-border-subtle"},g(q,{level:"div",color:"amber",size:"sm",children:"Current Scene",[a]:{level:a,color:a,size:a}},3,"tj_4"),1,null),e("div",null,{class:"p-3 space-y-2"},s.value?g(ue,{children:[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"font-mono text-foreground"},i(w=>w.value.name||w.value.id,[s],"p0.value.name||p0.value.id"),3,null),s.value.tags&&e("div",null,{class:"flex gap-1"},s.value.tags.slice(0,3).map(w=>e("span",null,{class:"px-1.5 py-0.5 rounded bg-accent/20 text-accent text-[10px]"},w,1,w)),1,"tj_5")],1,null),e("div",null,{class:"font-mono text-muted-foreground text-[10px]"},i(w=>w.value.code_path||"â€”",[s],'p0.value.code_path||"â€”"'),3,null)]},1,"tj_6"):e("div",null,{class:"text-muted-foreground"},"No scene active",3,null),1,null)],1,null),e("div",null,{class:"rounded-lg glass-surface glass-animate-enter",style:{"--stagger":4}},[e("div",null,{class:"px-3 py-2 border-b border-glass-border-subtle"},g(q,{level:"div",color:"purple",size:"sm",children:"Art Controls",[a]:{level:a,color:a,size:a}},3,"tj_7"),1,null),e("div",null,{class:"p-3 space-y-3"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"font-mono text-muted-foreground w-16"},"MOOD",3,null),e("div",null,{class:"flex gap-1 flex-wrap"},qs.map(w=>e("button",{class:`px-2 py-1 rounded text-[10px] transition-colors ${o.value===w?"bg-primary text-primary-foreground":"bg-secondary/50 text-secondary-foreground hover:bg-secondary"}`,onClick$:_("s_mxtePUsOUeU",[w,o])},{type:"button"},w,0,w)),1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"font-mono text-muted-foreground w-16"},"ENTROPY",3,null),e("div",null,{class:"flex-1 h-2 bg-muted rounded overflow-hidden"},e("div",{style:{width:`${(v??.5)*100}%`}},{class:"h-full bg-gradient-to-r from-primary to-accent transition-all"},null,3,null),1,null),e("span",null,{class:"font-mono text-foreground w-12 text-right"},v===null?"â€”":v.toFixed(2),1,null)],1,null),e("div",null,{class:"flex gap-2 flex-wrap"},[e("button",null,{type:"button",class:i(w=>`px-3 py-1.5 rounded bg-primary text-primary-foreground hover:bg-primary/90 text-xs ${w.value?"opacity-50 cursor-not-allowed":""}`,[r],'`px-3 py-1.5 rounded bg-primary text-primary-foreground hover:bg-primary/90 text-xs ${p0.value?"opacity-50 cursor-not-allowed":""}`'),disabled:i(w=>w.value,[r],"p0.value"),onClick$:_("s_o7dTe7Ou06Q",[S])},i(w=>w.value?"Requesting...":"Request New Scene",[r],'p0.value?"Requesting...":"Request New Scene"'),3,null),e("button",null,{type:"button",class:i(w=>`px-3 py-1.5 rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 text-xs ${w.value?"opacity-50 cursor-not-allowed":""}`,[r],'`px-3 py-1.5 rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 text-xs ${p0.value?"opacity-50 cursor-not-allowed":""}`'),disabled:i(w=>w.value,[r],"p0.value"),onClick$:$},"Random Shader",3,null)],3,null)],1,null)],1,null),e("div",null,{class:"rounded-lg glass-surface glass-animate-enter",style:{"--stagger":5}},[e("div",null,{class:"px-3 py-2 border-b border-glass-border-subtle flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-2"},[g(q,{level:"span",color:"emerald",size:"sm",children:"Shader Gallery",[a]:{level:a,color:a,size:a}},3,"tj_8"),g(X,{color:"emerald",glow:!0,children:i(w=>w.value.length,[d],"p0.value.length"),[a]:{color:a,glow:a}},3,"tj_9")],1,null),e("input",null,{type:"text",placeholder:"Search shaders...",class:"bg-background border border-[var(--glass-border)] rounded px-2 py-0.5 text-[10px] w-32 focus:outline-none focus:ring-1 focus:ring-primary",onInput$:_("s_dM29Dkv7h0M",[u])},null,3,null)],1,null),e("div",null,{class:"p-3 max-h-80 overflow-y-auto custom-scrollbar",onScroll$:_("s_2N7j34IkPyQ",[x])},[e("div",null,{class:"columns-2 md:columns-3 gap-3 space-y-3"},f.value.map(w=>e("button",{class:`w-full text-left rounded-xl p-3 glass-transition-all break-inside-avoid glass-surface glass-hover-scale ${s.value?.id===w.id?"ring-1 ring-glass-accent/50 shadow-glass-glow":"glass-hover-glow"}`,onClick$:_("s_RBM01HiLtig",[M,w])},{type:"button"},[e("div",null,{class:"flex items-center gap-2 mb-1.5"},[e("span",null,{class:"text-[10px] opacity-50"},"#",3,null),e("div",null,{class:"font-bold truncate text-[11px] uppercase tracking-wider text-foreground"},h(w,"name"),1,null)],1,null),e("div",null,{class:"flex flex-wrap gap-1"},w.tags?.slice(0,3).map(k=>e("span",null,{class:"text-[8px] px-1.5 py-0.5 rounded-full bg-[var(--glass-bg-card)] border border-[var(--glass-border)] text-[var(--glass-text-tertiary)]"},k,1,k)),1,null)],0,w.id)),1,null),m.value<d.value.length&&e("div",null,{class:"mt-3 text-center"},e("button",null,{type:"button",class:"text-[10px] text-primary hover:underline",onClick$:x},["Load More (+",i((w,k)=>w.value.length-k.value,[d,m],"p0.value.length-p1.value"),")"],3,null),3,"tj_10")],1,null)],1,null),e("div",null,{class:"text-[11px] text-muted-foreground"},["Tip: press ",e("span",null,{class:"font-mono"},"Esc",3,null)," to close. Art Director continuously studies kroma.live for inspiration."],3,null)],1,null)],1,null)],1,"tj_11")},Xs=E(p(Qs,"s_YFsCC2uWtyU"));function Zs(l){const t=new Date(l);if(Number.isNaN(t.getTime()))return"--:--";const n=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0");return`${n}:${s}`}function ea(l){switch((l||"").toLowerCase()){case"focused":return"bg-cyan-400";case"anxious":return"bg-amber-300";case"chaotic":case"hyper":return"bg-fuchsia-400";case"dormant":return"bg-gray-400";case"calm":default:return"bg-green-400"}}const la=()=>Zs("2026-01-23T22:37:35.155Z"),ta=()=>{const[l]=b();l.value=!l.value},na=()=>{const[l]=b();l.value=!1},sa=async()=>{const[l]=b();try{const n=await(await fetch("/api/fs/.pluribus/lineage.json",{cache:"no-store"})).json().catch(()=>({}));l.generation=typeof n?.generation=="number"?n.generation:null,l.lineageId=typeof n?.lineage_id=="string"?n.lineage_id:null,l.dagId=typeof n?.dag_id=="string"?n.dag_id:null,l.loaded=!0}catch{l.loaded=!0}},aa=()=>{const[l]=b();return ea(l.mood??null)},ra=()=>{const[l]=b();return typeof l.generation=="number"?`GEN:${l.generation}`:"GEN:â€”"},oa=()=>{const[l,t]=b(),n=((t.mood??null)||"unknown").toString();return`Gestalt snapshot, ${l.value}, mood ${n}. Click to expand.`},ia=l=>{const t=y(!1),n=B({generation:null,lineageId:null,dagId:null,loaded:!1}),s=N(p(la,"s_Cdz9rW7RIv4")),r=p(ta,"s_b7a21XcdjX0",[t]),o=p(na,"s_BO0jvTb3Ybg",[t]);D(_("s_0pVs2d8KmH8",[p(sa,"s_DwKbh6Rmh04",[n]),t]));const u=N(p(aa,"s_0UjOmzrRGME",[l])),m=N(p(ra,"s_oaKovBu4S08",[n])),d=N(p(oa,"s_vlak0IJysjQ",[m,l]));return g(ue,{children:[e("button",null,{type:"button",class:"flex items-center gap-2 text-xs px-3 py-1.5 rounded-full border border-border bg-muted/30 hover:bg-muted/50 transition-colors","data-testid":"gestalt-pill","aria-label":i(f=>f.value,[d],"p0.value"),onClick$:r},[e("span",null,{class:"text-sm"},"ðŸ“„",3,null),e("span",null,{class:"mono"},i(f=>f.value,[m],"p0.value"),3,null),e("span",null,{class:"text-muted-foreground"},"|",3,null),e("span",null,{class:"mono"},i(f=>f.value,[s],"p0.value"),3,null),e("span",null,{class:"text-muted-foreground"},"|",3,null),e("span",null,{class:i(f=>`inline-block w-2 h-2 rounded-full ${f.value}`,[u],"`inline-block w-2 h-2 rounded-full ${p0.value}`")},null,3,null),e("span",null,{class:"mono"},((l.mood??null)||"calm").toString(),1,null)],1,null),g(Xs,{get open(){return t.value},onClose$:o,get buildTimeIso(){return"2026-01-23T22:37:35.155Z"},get buildCommit(){return"dev"},get generation(){return n.generation},get lineageId(){return n.lineageId},get dagId(){return n.dagId},get mood(){return l.mood??null},get entropy(){return l.entropy??null},[a]:{open:i(f=>f.value,[t],"p0.value"),onClose$:a,buildTimeIso:a,buildCommit:a,generation:i(f=>f.generation,[n],"p0.generation"),lineageId:i(f=>f.lineageId,[n],"p0.lineageId"),dagId:i(f=>f.dagId,[n],"p0.dagId"),mood:i(f=>f.mood??null,[l],"p0.mood??null"),entropy:i(f=>f.entropy??null,[l],"p0.entropy??null")}},3,"pk_0")]},1,"pk_1")},ua=E(p(ia,"s_HCaEHZnm8ao")),ca=async()=>{const[l,t,n,s,r,o]=b();if(!(!o.value||!n.value))try{const c=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1});o.value.srcObject=c,l.value=!0,r.value="Buffering...";const u=n.value.getContext("2d");if(!u)return;const m=setInterval(()=>{if(!o.value||!l.value){clearInterval(m);return}const d=o.value.videoWidth/2,f=o.value.videoHeight/2;if(d&&f){n.value.width=d,n.value.height=f,u.drawImage(o.value,0,0,d,f);const v=n.value.toDataURL("image/jpeg",.7),x=[...s.value];x.length>=60&&x.shift(),x.push({ts:Date.now(),data:v}),s.value=x,t.value=x.length}},1e3);c.getVideoTracks()[0].onended=()=>{l.value=!1,clearInterval(m),r.value="Stream ended"}}catch(c){console.error(c),r.value="Error: "+c}},da=async()=>{const[l,t]=b();t.value="Sending...";try{const n={timestamp:Date.now(),frames:l.value.map(o=>o.data),meta:{count:l.value.length}},r=await(await fetch("http://localhost:8080/v1/eyes/ingest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();t.value=`Sent ${r.count} frames`}catch(n){t.value="Upload Failed",console.error(n)}},pa=()=>{const l=y(),t=y(),n=y(!1),s=y(0),r=y("Ready"),o=y([]),c=p(ca,"s_UzXXeNwgqWE",[n,s,t,o,r,l]),u=p(da,"s_fR7gFrSquOI",[o,r]);return e("div",null,{class:"flex items-center gap-2 px-3 py-1 bg-slate-800/50 rounded-full border border-slate-700/50 backdrop-blur-sm"},[e("div",null,{class:"relative"},[e("div",null,{class:i(m=>`w-2 h-2 rounded-full ${m.value?"bg-green-500":"bg-slate-500"}`,[n],'`w-2 h-2 rounded-full ${p0.value?"bg-green-500":"bg-slate-500"}`')},null,3,null),n.value&&e("div",null,{class:"absolute inset-0 w-2 h-2 rounded-full bg-green-500 animate-ping opacity-75"},null,3,"5h_0")],1,null),n.value?e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-[10px] font-bold text-green-400 animate-pulse tracking-wider"},"ANALYZING",3,null),e("span",null,{class:"text-xs text-slate-400 font-mono"},[i(m=>m.value,[s],"p0.value"),"f"],3,null),e("button",null,{class:"text-xs font-bold text-blue-400 hover:text-blue-300 transition-colors",onClick$:u},"SNAPSHOT",3,null)],3,null):e("button",null,{class:"text-xs font-semibold text-slate-300 hover:text-white transition-colors",onClick$:c},"Enable Vision",3,"5h_1"),e("video",{ref:l},{autoPlay:!0,playsInline:!0,muted:!0,class:"hidden"},null,3,null),e("canvas",{ref:t},{class:"hidden"},null,3,null)],1,"5h_2")},ma=E(p(pa,"s_TeNnHxWUL08")),ga=()=>{const[l]=b();if(l.value)return;l.value=!0;const t=new BroadcastChannel("pluribus-shadow");t.postMessage({type:"PREFETCH",payload:{views:["sota","git","browser"]}}),t.close(),window.dispatchEvent(new CustomEvent("pluribus:art:request",{detail:{reason:"manual_refresh"}}));try{sessionStorage.removeItem("pluribus_art_injected_session")}catch{}setTimeout(()=>{l.value=!1},1500)},va=l=>{const t=y(!1);Pe("comp:header"),D(_("s_cdi0H16nG7Y"));const n=p(ga,"s_QdCR3wa0xxo",[t]);return e("header",null,{class:"header-omega-agency relative z-50 h-20"},[e("div",null,{class:"header-glass-agency absolute inset-0 border-b border-[var(--glass-border)] shadow-2xl backdrop-blur-xl"},null,3,null),e("div",null,{class:"header-content-agency relative h-full flex items-center justify-between px-8 max-w-[1920px] mx-auto"},[e("div",null,{class:"header-left-agency flex items-center"},[e("h1",null,{class:"header-title glass-chromatic-subtle"},[e("span",null,{class:"title-text"},"Pluribus",3,null),e("span",null,{class:"title-accent","aria-hidden":"true"},"Pluribus",3,null),e("span",null,{class:"title-glow","aria-hidden":"true"},"Pluribus",3,null)],3,null),e("div",null,{class:"header-branding-agency ml-6 flex flex-col opacity-80 border-l border-[var(--glass-border)] pl-4"},[g(q,{level:"span",color:"cyan",size:"xs",class:"header-tagline-agency text-xs font-bold uppercase tracking-widest text-[var(--glass-accent-cyan)] shadow-[var(--glass-accent-cyan-subtle)]",children:"AIOS: Evolutionary Code Agency",[a]:{level:a,color:a,size:a,class:a}},3,"6t_0"),e("span",null,{class:"header-subtitle-agency text-[0.7rem] text-[var(--glass-text-secondary)]"},"Multi-Agent Autonomous Orchestration",3,null)],1,null)],1,null),e("div",null,{class:"header-right-agency flex items-center gap-6"},[e("div",null,{class:"header-stat-agency flex items-center gap-2 font-mono text-xs bg-[var(--glass-bg-card)] px-3 py-1.5 rounded-full border border-[var(--glass-border)]"},[g(q,{level:"span",color:"cyan",size:"xs",children:"Workers",[a]:{level:a,color:a,size:a}},3,"6t_1"),g(X,{get color(){return l.workerCount>0?"emerald":"amber"},glow:!0,children:i(s=>s.workerCount,[l],"p0.workerCount"),[a]:{color:i(s=>s.workerCount>0?"emerald":"amber",[l],'p0.workerCount>0?"emerald":"amber"'),glow:a}},3,"6t_2")],1,null),e("div",null,{class:"header-stat-agency flex items-center gap-2 font-mono text-xs bg-[var(--glass-bg-card)] px-3 py-1.5 rounded-full border border-[var(--glass-border)]"},[e("span",null,{class:i(s=>`status-dot glass-status-dot ${s.connected?"glass-status-dot-success":"glass-status-dot-error"}`,[l],'`status-dot glass-status-dot ${p0.connected?"glass-status-dot-success":"glass-status-dot-error"}`')},null,3,null),g(X,{get color(){return l.connected?"emerald":"rose"},glow:!0,get pulse(){return!l.connected},children:i(s=>s.connected?"Live":"Offline",[l],'p0.connected?"Live":"Offline"'),[a]:{color:i(s=>s.connected?"emerald":"rose",[l],'p0.connected?"emerald":"rose"'),glow:a,pulse:i(s=>!s.connected,[l],"!p0.connected")}},3,"6t_3")],1,null),e("div",null,{class:"header-stat-agency hidden sm:flex items-center gap-2 font-mono text-xs bg-[var(--glass-bg-card)] px-3 py-1.5 rounded-full border border-[var(--glass-border)]"},[g(q,{level:"span",color:"cyan",size:"xs",children:"Verifiable",[a]:{level:a,color:a,size:a}},3,"6t_4"),g(X,{color:"emerald",glow:!0,children:"100%",[a]:{color:a,glow:a}},3,"6t_5")],1,null),e("md-icon-button",null,{class:i(s=>`header-refresh-btn glass-interactive glass-hover-scale glass-focus-ring ${s.value?"refreshing":""}`,[t],'`header-refresh-btn glass-interactive glass-hover-scale glass-focus-ring ${p0.value?"refreshing":""}`'),title:"Refresh data & scene","aria-label":"Refresh",onClick$:n},[e("md-ripple",null,null,null,3,null),e("svg",null,{slot:"icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-[var(--glass-text-primary)]"},[e("path",null,{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},null,3,null),e("path",null,{d:"M3 3v5h5"},null,3,null),e("path",null,{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"},null,3,null),e("path",null,{d:"M16 21h5v-5"},null,3,null)],3,null)],3,null),g(Rs,null,3,"6t_6"),g(ua,{get mood(){return l.mood},get entropy(){return l.entropy},[a]:{mood:i(s=>s.mood,[l],"p0.mood"),entropy:i(s=>s.entropy,[l],"p0.entropy")}},3,"6t_7"),g(ma,null,3,"6t_8"),g(hs,{get providerStatus(){return l.providerStatus},onOpen$:l.onOpenAuth$,inline:!0,[a]:{providerStatus:i(s=>s.providerStatus,[l],"p0.providerStatus"),inline:a}},2,"6t_9")],1,null)],1,null),e("style",null,null,`
        .header-glass-agency {
          background: var(--glass-bg-dark);
        }
      `,3,null)],1,"6t_10")},ba=E(p(va,"s_063Dx24OMIE")),dt=os("dashboard-layout-context"),cl={cyan:{track:"bg-gradient-to-r from-cyan-500/30 to-cyan-400/50",thumb:"bg-cyan-400 shadow-[0_0_10px_rgba(0,255,255,0.6),0_0_20px_rgba(0,255,255,0.3)]",glow:"shadow-[0_0_8px_rgba(0,255,255,0.4)]",text:"text-cyan-400"},magenta:{track:"bg-gradient-to-r from-fuchsia-500/30 to-fuchsia-400/50",thumb:"bg-fuchsia-400 shadow-[0_0_10px_rgba(255,0,255,0.6),0_0_20px_rgba(255,0,255,0.3)]",glow:"shadow-[0_0_8px_rgba(255,0,255,0.4)]",text:"text-fuchsia-400"},amber:{track:"bg-gradient-to-r from-amber-500/30 to-amber-400/50",thumb:"bg-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.6),0_0_20px_rgba(251,191,36,0.3)]",glow:"shadow-[0_0_8px_rgba(251,191,36,0.4)]",text:"text-amber-400"},emerald:{track:"bg-gradient-to-r from-emerald-500/30 to-emerald-400/50",thumb:"bg-emerald-400 shadow-[0_0_10px_rgba(16,185,129,0.6),0_0_20px_rgba(16,185,129,0.3)]",glow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",text:"text-emerald-400"},purple:{track:"bg-gradient-to-r from-purple-500/30 to-purple-400/50",thumb:"bg-purple-400 shadow-[0_0_10px_rgba(168,85,247,0.6),0_0_20px_rgba(168,85,247,0.3)]",glow:"shadow-[0_0_8px_rgba(168,85,247,0.4)]",text:"text-purple-400"},rose:{track:"bg-gradient-to-r from-rose-500/30 to-rose-400/50",thumb:"bg-rose-400 shadow-[0_0_10px_rgba(244,63,94,0.6),0_0_20px_rgba(244,63,94,0.3)]",glow:"shadow-[0_0_8px_rgba(244,63,94,0.4)]",text:"text-rose-400"},orange:{track:"bg-gradient-to-r from-orange-500/30 to-orange-400/50",thumb:"bg-orange-400 shadow-[0_0_10px_rgba(251,146,60,0.6),0_0_20px_rgba(251,146,60,0.3)]",glow:"shadow-[0_0_8px_rgba(251,146,60,0.4)]",text:"text-orange-400"}},fa=l=>{const t=l.showValue??!0,n=l.formatValue??(o=>o.toString()),s=l.compact??!1,r=(l.value-l.min)/(l.max-l.min)*100;return e("label",null,{class:i(o=>`
        flex flex-col gap-1
        ${o.disabled?"opacity-50 cursor-not-allowed":""}
        ${o.class||""}
      `,[l],'`\n        flex flex-col gap-1\n        ${p0.disabled?"opacity-50 cursor-not-allowed":""}\n        ${p0.class||""}\n      `')},[(l.label||t)&&e("div",{class:`flex items-center justify-between ${s?"text-[9px]":"text-[10px]"} font-mono`},null,[l.label&&e("span",null,{class:"text-slate-400 uppercase tracking-wider"},i(o=>o.label,[l],"p0.label"),3,"VM_0"),t&&e("span",{class:`${cl[l.color||"cyan"].text} font-medium`},null,n(l.value),1,"VM_1")],1,"VM_2"),e("div",null,{class:"relative w-full h-6 flex items-center"},[e("div",null,{class:"absolute inset-x-0 h-1.5 rounded-full bg-slate-800/80 border border-slate-700/50"},null,3,null),e("div",{class:`absolute left-0 h-1.5 rounded-full ${cl[l.color||"cyan"].track} ${cl[l.color||"cyan"].glow}`,style:{width:`${r}%`}},null,null,3,null),e("input",null,{type:"range",min:i(o=>o.min,[l],"p0.min"),max:i(o=>o.max,[l],"p0.max"),step:i(o=>o.step??1,[l],"p0.step??1"),value:i(o=>o.value,[l],"p0.value"),disabled:i(o=>o.disabled,[l],"p0.disabled"),class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed z-10",onInput$:_("s_005auhXbnTE",[l])},null,3,null),e("div",{class:`
            absolute top-1/2 -translate-y-1/2 -translate-x-1/2
            ${s?"w-3 h-3":"w-4 h-4"}
            rounded-full
            ${cl[l.color||"cyan"].thumb}
            transition-all duration-150
            pointer-events-none
            ${l.disabled?"":"hover:scale-110"}
          `,style:{left:`${r}%`}},null,null,3,null)],1,null)],1,"VM_3")},Te=E(p(fa,"s_00PFPtk6BmM")),Fl={cyan:{checked:"bg-cyan-500/90",border:"border-cyan-500/60",glow:"shadow-[0_0_8px_rgba(0,255,255,0.5)]"},magenta:{checked:"bg-fuchsia-500/90",border:"border-fuchsia-500/60",glow:"shadow-[0_0_8px_rgba(255,0,255,0.5)]"},amber:{checked:"bg-amber-500/90",border:"border-amber-500/60",glow:"shadow-[0_0_8px_rgba(251,191,36,0.5)]"},emerald:{checked:"bg-emerald-500/90",border:"border-emerald-500/60",glow:"shadow-[0_0_8px_rgba(16,185,129,0.5)]"},purple:{checked:"bg-purple-500/90",border:"border-purple-500/60",glow:"shadow-[0_0_8px_rgba(168,85,247,0.5)]"},rose:{checked:"bg-rose-500/90",border:"border-rose-500/60",glow:"shadow-[0_0_8px_rgba(244,63,94,0.5)]"},orange:{checked:"bg-orange-500/90",border:"border-orange-500/60",glow:"shadow-[0_0_8px_rgba(251,146,60,0.5)]"}},xa=l=>{const t=l.compact??!1,n=t?"w-3 h-3":"w-4 h-4",s=t?"w-2 h-2":"w-2.5 h-2.5";return e("label",{class:`
        inline-flex items-center gap-2 cursor-pointer select-none
        ${t?"text-[9px]":"text-[10px]"}
        ${l.disabled?"opacity-50 cursor-not-allowed":""}
        ${l.class||""}
      `},null,[e("div",null,{class:"relative"},[e("input",null,{type:"checkbox",checked:i(r=>r.checked,[l],"p0.checked"),disabled:i(r=>r.disabled,[l],"p0.disabled"),class:"sr-only",onChange$:_("s_8DwJuoZY6bU",[l])},null,3,null),e("div",{class:`
            ${n} rounded
            border transition-all duration-150
            flex items-center justify-center
            ${l.checked?`${Fl[l.color||"cyan"].checked} ${Fl[l.color||"cyan"].border} ${Fl[l.color||"cyan"].glow}`:"bg-slate-800/80 border-slate-600/50 hover:border-slate-500/70"}
          `},null,l.checked&&e("svg",{class:`${s} text-white`},{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e("path",null,{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,3,null),3,"VM_4"),1,null)],1,null),l.label&&e("span",null,{class:"text-slate-400 font-mono uppercase tracking-wider"},i(r=>r.label,[l],"p0.label"),3,"VM_5")],1,"VM_6")},Re=E(p(xa,"s_dmezDTnuPFU")),dl={cyan:{active:"bg-cyan-500/20",border:"border-cyan-400/60",glow:"shadow-[0_0_12px_rgba(0,255,255,0.4)]",text:"text-cyan-300"},magenta:{active:"bg-fuchsia-500/20",border:"border-fuchsia-400/60",glow:"shadow-[0_0_12px_rgba(255,0,255,0.4)]",text:"text-fuchsia-300"},amber:{active:"bg-amber-500/20",border:"border-amber-400/60",glow:"shadow-[0_0_12px_rgba(251,191,36,0.4)]",text:"text-amber-300"},emerald:{active:"bg-emerald-500/20",border:"border-emerald-400/60",glow:"shadow-[0_0_12px_rgba(16,185,129,0.4)]",text:"text-emerald-300"},purple:{active:"bg-purple-500/20",border:"border-purple-400/60",glow:"shadow-[0_0_12px_rgba(168,85,247,0.4)]",text:"text-purple-300"},rose:{active:"bg-rose-500/20",border:"border-rose-400/60",glow:"shadow-[0_0_12px_rgba(244,63,94,0.4)]",text:"text-rose-300"},orange:{active:"bg-orange-500/20",border:"border-orange-400/60",glow:"shadow-[0_0_12px_rgba(251,146,60,0.4)]",text:"text-orange-300"}},ha=l=>{const t=l.compact??!1;return e("button",{class:`
        ${t?"px-2 py-0.5":"px-3 py-1"} ${t?"text-[8px]":"text-[9px]"}
        font-mono uppercase tracking-wider
        rounded border transition-all duration-150
        ${l.active?`${dl[l.color||"cyan"].active} ${dl[l.color||"cyan"].border} ${dl[l.color||"cyan"].text} ${dl[l.color||"cyan"].glow}`:"bg-slate-800/60 border-slate-600/50 text-slate-300 hover:border-slate-500/70 hover:bg-slate-700/60"}
        ${l.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        ${l.class||""}
      `,onClick$:l.onClick$},{disabled:i(r=>r.disabled,[l],"p0.disabled")},i(r=>r.children,[l],"p0.children"),2,"VM_7")},$t=E(p(ha,"s_wXSPzrcULts")),pl={ok:{bg:"bg-emerald-500/20",border:"border-emerald-500/40",text:"text-emerald-300",glow:"shadow-[0_0_8px_rgba(16,185,129,0.3)]"},warn:{bg:"bg-amber-500/20",border:"border-amber-500/40",text:"text-amber-300",glow:"shadow-[0_0_8px_rgba(251,191,36,0.3)]"},crit:{bg:"bg-red-500/20",border:"border-red-500/40",text:"text-red-300",glow:"shadow-[0_0_8px_rgba(239,68,68,0.3)]"},info:{bg:"bg-cyan-500/20",border:"border-cyan-500/40",text:"text-cyan-300",glow:"shadow-[0_0_8px_rgba(0,255,255,0.3)]"}},ya=l=>{const t=l.compact??!1;return e("span",{class:`
        inline-flex items-center justify-center
        ${t?"px-1.5 py-0.5 text-[7px]":"px-2 py-1 text-[8px]"}
        font-mono uppercase tracking-wider
        rounded border
        ${pl[l.status].bg} ${pl[l.status].border} ${pl[l.status].text} ${pl[l.status].glow}
        ${l.pulse?"animate-pulse":""}
        ${l.class||""}
      `},null,i(n=>n.children,[l],"p0.children"),3,"VM_8")},_a=E(p(ya,"s_PtVk2rjRf5w")),Fe=120,wa=({track:l})=>{const[t,n]=b();l(()=>n.flowMode.value)==="A"&&!t.auto&&(t.auto=!0)},ka=()=>{const[l,t]=b();l||(t.auto=!t.auto)},Sa=l=>{const[t]=b();return t.eventMax=l},Ca=l=>{const[t]=b();return t.workerScale=l},$a=l=>{const[t]=b();return t.leverageScale=l},Ia=l=>{const[t]=b();return t.pressureScale=l},Ta=l=>{const[t]=b();return t.memWarn=l},Ea=l=>{const[t]=b();return t.memCrit=l},Aa=l=>{const[t]=b();return t.dynamicsGain=l},Ma=l=>{const[t]=b();return t.toleranceBias=l},Oa=l=>{const[t]=b();return t.showPulse=l},Pa=l=>{const[t]=b();return t.showPerf=l},La=l=>{const[t]=b();return t.showPressure=l},Da=l=>{const[t]=b();return t.showCapacity=l},Ra=l=>{const[t]=b();return t.showDynamics=l},Na=l=>{const[t]=b();return t.showLeverage=l},ja=l=>{const[t]=b();return t.showTolerances=l},za=()=>{const[l,t]=b();return l.focusLane=t},Ba=()=>{W();const l=an(dt),t=y(),n=y(),s=y(!1),r=y({beat:0,entropy:.1,rings:[1,1,1,1],metrics:{eventRate:0,workerCount:0,lastError:null,memory:{usedPct:0,swapUsedPct:0,psiSome:0,psiFull:0,pressure:"unknown"}}}),o=B({eventRate:new Array(Fe).fill(0),pressure:new Array(Fe).fill(0),capacity:new Array(Fe).fill(0),dynamics:new Array(Fe).fill(0),leverage:new Array(Fe).fill(0),pulse:new Array(Fe).fill(0)}),c=B({auto:!0,eventMax:18,workerScale:8,pressureScale:1,leverageScale:6,memWarn:85,memCrit:92,dynamicsGain:1,toleranceBias:1,showTolerances:!0,showPulse:!0,showPerf:!0,showPressure:!0,showCapacity:!0,showDynamics:!0,showLeverage:!0,focusLane:"all"}),u=B({perf:{value:0,delta:0,status:"ok"},pressure:{value:0,delta:0,status:"ok"},capacity:{value:0,delta:0,status:"ok"},dynamics:{value:0,delta:0,status:"ok"},leverage:{value:0,delta:0,status:"ok"},pulse:{value:0,delta:0,status:"ok"}});El(p(wa,"s_hVD9lqhbOH4",[c,l])),D(_("s_rlP8i24heWw",[t,c,s,o,u,r,n]));const m=r.value.metrics.memory,d=Math.round(m.usedPct),f=m.pressure==="unknown"?"idle":m.pressure,v=r.value.metrics.workerCount>0?r.value.metrics.eventRate/r.value.metrics.workerCount:r.value.metrics.eventRate,x=Math.min(1,r.value.rings[3]*.7+(r.value.metrics.eventRate>0?.3:0)),M=l.flowMode.value==="A",$=M?"AUTO (FLOW)":c.auto?"AUTO":"MANUAL",w=c.auto||M,k=O=>`${Math.round(O*100)}%`,I=O=>`${O.toFixed(2)}x`,T=(O,J)=>{const ne=O>=0?"+":"-",Z=Math.abs(O);return J==="ratio"?`${ne}${Z.toFixed(2)}x`:`${ne}${Math.round(Z*100)}%`},z=[{key:"pulse",label:"Pulse",value:u.pulse.value,delta:u.pulse.delta,status:u.pulse.status,visible:c.showPulse,focusKey:"all",mode:"percent"},{key:"perf",label:"Perf",value:u.perf.value,delta:u.perf.delta,status:u.perf.status,visible:c.showPerf,focusKey:"perf",mode:"percent"},{key:"press",label:"Press",value:u.pressure.value,delta:u.pressure.delta,status:u.pressure.status,visible:c.showPressure,focusKey:"press",mode:"percent"},{key:"cap",label:"Cap",value:u.capacity.value,delta:u.capacity.delta,status:u.capacity.status,visible:c.showCapacity,focusKey:"cap",mode:"percent"},{key:"dyn",label:"Dyn",value:u.dynamics.value,delta:u.dynamics.delta,status:u.dynamics.status,visible:c.showDynamics,focusKey:"dyn",mode:"percent"},{key:"lev",label:"Lvg",value:u.leverage.value,delta:u.leverage.delta,status:u.leverage.status,visible:c.showLeverage,focusKey:"perf",mode:"ratio"}];return e("div",{class:`relative overflow-hidden transition-all duration-500 ease-in-out ${s.value?"h-80":"h-14"} cursor-pointer bg-card border-t border-[var(--glass-border)] group`},{onClick$:_("s_pBOV0d9PA3I",[s])},[e("canvas",{ref:t},{class:"w-full h-full block"},null,3,null),e("div",null,{class:"absolute top-0 left-0 p-3 text-xs font-mono text-slate-300/80 pointer-events-none flex flex-col gap-1.5"},[e("div",null,{class:"uppercase tracking-[0.15em] text-[11px] text-cyan-400/80 font-medium"},"Stability Loom",3,null),e("div",null,{class:"flex items-center gap-3 text-[11px]"},[e("span",null,null,["Î© ",r.value.beat.toFixed(2)],1,null),e("span",null,null,["Ent ",r.value.entropy.toFixed(2)],1,null),e("span",null,{class:"text-emerald-400/90"},["W ",i(O=>O.value.metrics.workerCount,[r],"p0.value.metrics.workerCount")],3,null)],1,null),e("div",null,{class:"text-amber-400/90 text-[11px]"},["Mem ",d,"% / Psi ",m.psiFull.toFixed(2)," / ",f],1,null)],1,null),e("div",null,{class:"absolute top-0 right-0 p-3 text-[11px] font-mono text-slate-300/70 pointer-events-none flex flex-col items-end gap-1.5"},[e("div",null,null,[$," / ER ",r.value.metrics.eventRate.toFixed(1)],1,null),e("div",null,null,["Lvg ",v.toFixed(2)," / T ",x.toFixed(2)],1,null)],1,null),s.value&&e("div",null,{class:"absolute bottom-2 left-2 right-2 rounded-lg bg-slate-950/85 backdrop-blur-sm border border-cyan-500/20 shadow-[0_0_20px_rgba(0,255,255,0.1)] p-3 text-[10px] font-mono text-slate-200 pointer-events-auto",onClick$:_("s_7A1tm2cs9hE")},[e("div",null,{class:"flex items-center justify-between mb-3 pb-2 border-b border-cyan-500/10"},[e("span",null,{class:"uppercase tracking-[0.25em] text-[10px] text-cyan-400/80 font-medium"},"Stability Loom Controls",3,null),g($t,{get color(){return c.auto?"emerald":"amber"},get active(){return c.auto},compact:!0,disabled:M,onClick$:p(ka,"s_5u2qjnKqTyM",[M,c]),children:M?"AUTO (FLOW)":c.auto?"AUTO OBSERVE":"MANUAL TUNE",[a]:{color:i(O=>O.auto?"emerald":"amber",[c],'p0.auto?"emerald":"amber"'),active:i(O=>O.auto,[c],"p0.auto"),compact:a}},1,"g2_0")],1,null),e("div",null,{class:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3"},[g(Te,{label:"Perf max",get value(){return c.eventMax},min:6,max:60,color:"cyan",compact:!0,disabled:w,formatValue:O=>`${O}/s`,onChange$:p(Sa,"s_hLBvFZfK6wI",[c]),[a]:{label:a,value:i(O=>O.eventMax,[c],"p0.eventMax"),min:a,max:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_1"),g(Te,{label:"Capacity",get value(){return c.workerScale},min:2,max:24,color:"emerald",compact:!0,disabled:w,formatValue:O=>`${O}w`,onChange$:p(Ca,"s_s8YVFWk3yz8",[c]),[a]:{label:a,value:i(O=>O.workerScale,[c],"p0.workerScale"),min:a,max:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_2"),g(Te,{label:"Leverage",get value(){return c.leverageScale},min:1,max:12,step:.5,color:"purple",compact:!0,disabled:w,formatValue:O=>`${O.toFixed(1)}x`,onChange$:p($a,"s_xd5MjOB7tQA",[c]),[a]:{label:a,value:i(O=>O.leverageScale,[c],"p0.leverageScale"),min:a,max:a,step:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_3"),g(Te,{label:"Pressure",get value(){return c.pressureScale},min:.6,max:1.6,step:.05,color:"amber",compact:!0,disabled:w,formatValue:O=>`${O.toFixed(2)}x`,onChange$:p(Ia,"s_Q8Fae5UZ2uY",[c]),[a]:{label:a,value:i(O=>O.pressureScale,[c],"p0.pressureScale"),min:a,max:a,step:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_4"),g(Te,{label:"Mem warn",get value(){return c.memWarn},min:70,max:95,color:"amber",compact:!0,disabled:w,formatValue:O=>`${O}%`,onChange$:p(Ta,"s_YrVWAnOGCFs",[c]),[a]:{label:a,value:i(O=>O.memWarn,[c],"p0.memWarn"),min:a,max:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_5"),g(Te,{label:"Mem crit",get value(){return c.memCrit},min:80,max:98,color:"rose",compact:!0,disabled:w,formatValue:O=>`${O}%`,onChange$:p(Ea,"s_KE0b6FI6HgA",[c]),[a]:{label:a,value:i(O=>O.memCrit,[c],"p0.memCrit"),min:a,max:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_6"),g(Te,{label:"Dynamics",get value(){return c.dynamicsGain},min:.5,max:2,step:.05,color:"magenta",compact:!0,disabled:w,formatValue:O=>`${O.toFixed(2)}x`,onChange$:p(Aa,"s_kaNELvOQvlc",[c]),[a]:{label:a,value:i(O=>O.dynamicsGain,[c],"p0.dynamicsGain"),min:a,max:a,step:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_7"),g(Te,{label:"Tolerance",get value(){return c.toleranceBias},min:.75,max:1.35,step:.05,color:"cyan",compact:!0,disabled:w,formatValue:O=>`${O.toFixed(2)}x`,onChange$:p(Ma,"s_no9haNUcz0w",[c]),[a]:{label:a,value:i(O=>O.toleranceBias,[c],"p0.toleranceBias"),min:a,max:a,step:a,color:a,compact:a,formatValue:a,onChange$:a}},3,"g2_8")],1,null),e("div",null,{class:"grid grid-cols-3 md:grid-cols-6 gap-2 mb-3"},z.map(O=>{const J=O.mode==="ratio"?I(O.value):k(O.value),ne=T(O.delta,O.mode),Z=c.focusLane===O.focusKey,he=O.visible?"":"opacity-30",A={ok:"ok",warn:"warn",crit:"crit"};return e("button",{class:`
                    flex flex-col gap-0.5 rounded-md px-2 py-1.5 text-left
                    bg-slate-900/60 border transition-all
                    ${O.status==="crit"?"border-red-500/40 shadow-[0_0_8px_rgba(239,68,68,0.2)]":O.status==="warn"?"border-amber-500/40 shadow-[0_0_8px_rgba(251,191,36,0.2)]":"border-emerald-500/30 shadow-[0_0_6px_rgba(16,185,129,0.15)]"}
                    ${he}
                    ${Z?"ring-1 ring-cyan-400/60 shadow-[0_0_12px_rgba(0,255,255,0.3)]":""}
                    hover:bg-slate-800/60
                  `,onClick$:_("s_HurelCBFxEM",[O,c])},null,[e("div",null,{class:"flex items-center justify-between text-[7px] uppercase tracking-[0.15em]"},[e("span",{class:O.status==="crit"?"text-red-300":O.status==="warn"?"text-amber-300":"text-emerald-300"},null,h(O,"label"),1,null),e("span",null,{class:"text-slate-400"},ne,1,null)],1,null),e("div",null,{class:"flex items-baseline justify-between"},[e("span",null,{class:"text-[11px] font-semibold text-slate-100"},J,1,null),g(_a,{status:A[O.status],compact:!0,children:h(O,"status"),[a]:{compact:a}},1,"g2_9")],1,null)],0,O.key)}),1,null),e("div",null,{class:"flex flex-wrap items-center gap-3 mb-2 pb-2 border-b border-slate-700/30"},[e("span",null,{class:"uppercase tracking-[0.2em] text-[8px] text-cyan-500/60"},"Lanes",3,null),g(Re,{label:"Pulse",color:"orange",compact:!0,get checked(){return c.showPulse},onChange$:p(Oa,"s_y9r98DIRNDQ",[c]),[a]:{label:a,color:a,compact:a,checked:i(O=>O.showPulse,[c],"p0.showPulse"),onChange$:a}},3,"g2_10"),g(Re,{label:"Perf",color:"cyan",compact:!0,get checked(){return c.showPerf},onChange$:p(Pa,"s_Whg4JiYEzjY",[c]),[a]:{label:a,color:a,compact:a,checked:i(O=>O.showPerf,[c],"p0.showPerf"),onChange$:a}},3,"g2_11"),g(Re,{label:"Press",color:"amber",compact:!0,get checked(){return c.showPressure},onChange$:p(La,"s_J5WdYlqbjzA",[c]),[a]:{label:a,color:a,compact:a,checked:i(O=>O.showPressure,[c],"p0.showPressure"),onChange$:a}},3,"g2_12"),g(Re,{label:"Cap",color:"emerald",compact:!0,get checked(){return c.showCapacity},onChange$:p(Da,"s_ohpgq6J2Qhc",[c]),[a]:{label:a,color:a,compact:a,checked:i(O=>O.showCapacity,[c],"p0.showCapacity"),onChange$:a}},3,"g2_13"),g(Re,{label:"Dyn",color:"magenta",compact:!0,get checked(){return c.showDynamics},onChange$:p(Ra,"s_nI4OQJEg01s",[c]),[a]:{label:a,color:a,compact:a,checked:i(O=>O.showDynamics,[c],"p0.showDynamics"),onChange$:a}},3,"g2_14"),g(Re,{label:"Lvg",color:"purple",compact:!0,get checked(){return c.showLeverage},onChange$:p(Na,"s_DSLV6f1Urn8",[c]),[a]:{label:a,color:a,compact:a,checked:i(O=>O.showLeverage,[c],"p0.showLeverage"),onChange$:a}},3,"g2_15"),g(Re,{label:"Tol",color:"cyan",compact:!0,get checked(){return c.showTolerances},onChange$:p(ja,"s_T1Oi14wlG3M",[c]),[a]:{label:a,color:a,compact:a,checked:i(O=>O.showTolerances,[c],"p0.showTolerances"),onChange$:a}},3,"g2_16")],1,null),e("div",null,{class:"flex flex-wrap items-center gap-2"},[e("span",null,{class:"uppercase tracking-[0.2em] text-[8px] text-cyan-500/60"},"Focus",3,null),["all","perf","press","cap","dyn"].map(O=>g($t,{color:O==="all"||O==="perf"?"cyan":O==="press"?"amber":O==="cap"?"emerald":"magenta",active:c.focusLane===O,compact:!0,onClick$:p(za,"s_t2PXNE1mau8",[c,O]),children:O.toUpperCase(),[a]:{compact:a}},1,O))],1,null)],1,"g2_17"),e("div",null,{class:"absolute bottom-0 left-0 p-2 px-3 text-[11px] text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity"},i(O=>O.value?"CLICK TO CONDENSE":"CLICK TO EXPAND",[s],'p0.value?"CLICK TO CONDENSE":"CLICK TO EXPAND"'),3,null)],1,"g2_18")},Ua=E(p(Ba,"s_GQdohAYpC14")),Fa=l=>{Pe("comp:agent-avatar");const t=l.status==="busy"||l.status==="thinking",n=l.status==="active"||l.status==="running",s=l.status==="error",r=n?"agent-avatar-status-active":s?"agent-avatar-status-error":t?"agent-avatar-status-busy":"agent-avatar-status-idle",o=(l.size??"md")==="sm"?"agent-avatar-sm":(l.size??"md")==="lg"?"agent-avatar-lg":"agent-avatar-md";return e("div",{class:`agent-avatar ${o} ${r}`},null,[e("md-ripple",null,{class:"agent-avatar-ripple"},null,3,null),e("div",null,{class:"agent-avatar-circle"},l.actor.slice(0,2).toUpperCase(),1,null),t&&e("md-circular-progress",null,{indeterminate:!0,class:"agent-avatar-progress"},null,3,"e1_0"),!t&&e("div",null,{class:"agent-avatar-status-dot"},null,3,"e1_1"),e("div",null,{class:"agent-avatar-tooltip"},[e("div",null,{class:"agent-avatar-tooltip-actor"},i(c=>c.actor,[l],"p0.actor"),3,null),e("div",null,{class:"agent-avatar-tooltip-task"},i(c=>c.task||"Idle",[l],'p0.task||"Idle"'),3,null),e("div",null,{class:"agent-avatar-tooltip-status"},i(c=>c.status,[l],"p0.status"),3,null)],3,null)],1,"e1_2")},qa=E(p(Fa,"s_0kb0Nlj4jlA")),ml={ring0:"KERNEL",ring1:"PROTECTED",ring2:"AGENT",ring3:"EPHEMERAL"},It=["1. Map sqlite-vec to Associative Cortex","2. Map graphiti to Hippocampus","3. Map mem0 to Working Memory","4. Map tensorzero to The Gatekeeper","5. Map agent-lightning to The Dojo","6. Visualize Awakening Progress","7. Launch Self-Aware Boot Mode"],Ga=()=>{W(),Pe("comp:supermotd");const l=y({hostname:"pluribus",uptime_s:0,rings:{ring0:{status:"sealed",pqc_algorithm:"ML-DSA-65"},ring1:{lineage_id:"core.genesis",generation:1,transfer_type:"VGT"},ring2:{infercells_active:0},ring3:{omega_healthy:!0,omega_cycle:0,providers_available:[],providers_total:6}},bus:{events:0,last_event:""},insights:["System Online. Monitoring bus traffic..."],modules:{system:["kernel","zfs","net"],pluribus:["auom","sextet","kroma","rhizome","bus"],sota:["yt-dlp","tesseract","sqlite-vec","isomorphic-git"]}}),t=y(0),n=y(!1),s=y([]),r=y(0);D(_("s_0PCl5THW6tY",[r,s,t,l]));const c=(s.value.length>0?s.value:l.value.insights)[t.value]||"System Ready";return e("div",null,{class:"glass-footer font-mono text-sm select-none flex flex-col"},[g(Ua,null,3,"xv_0"),e("div",null,{class:"glass-footer-interactive px-4 py-2 flex items-center justify-between border-t border-[var(--glass-border)]",onClick$:_("s_7RRnuhC2mcU",[n])},[e("div",null,{class:"flex items-center gap-3"},[g(qa,{actor:"OM",get status(){return l.value.rings.ring3.omega_healthy?"active":"error"},size:"sm",[a]:{actor:a,status:i(u=>u.value.rings.ring3.omega_healthy?"active":"error",[l],'p0.value.rings.ring3.omega_healthy?"active":"error"'),size:a}},3,"xv_1"),e("span",null,{class:"text-xs glass-text-muted"},["GEN:",i(u=>u.value.rings.ring1.generation,[l],"p0.value.rings.ring1.generation")," â€¢ Î©:",i(u=>u.value.rings.ring3.omega_cycle,[l],"p0.value.rings.ring3.omega_cycle")," â€¢ P:",i(u=>u.value.rings.ring3.providers_available?.length||0,[l],"p0.value.rings.ring3.providers_available?.length||0")],3,null)],1,null),e("span",null,{class:"text-xs glass-text-cyan truncate max-w-md animate-pulse ml-auto"},c,1,null),e("span",null,{class:i(u=>`glass-text-muted transition-transform duration-200 ease-out ml-2 ${u.value?"rotate-180":""}`,[n],'`glass-text-muted transition-transform duration-200 ease-out ml-2 ${p0.value?"rotate-180":""}`')},"â–²",3,null)],1,null),n.value&&e("div",null,{class:"glass-animate-enter border-t border-[var(--glass-border)] bg-[var(--glass-bg-dark)]"},[e("div",null,{class:"px-4 py-2 bg-cyan-950/20 flex items-center justify-center border-b border-[var(--glass-border)]"},e("div",null,{class:"flex items-center gap-2 text-xs"},[e("span",null,{class:"text-amber-400 animate-pulse font-bold"},"âš¡ COGNITIVE BOOT:",3,null),e("span",null,{class:"text-cyan-100 transition-opacity duration-500 key={activeEnsoulmentStep.value}"},It[r.value],1,null),e("span",null,{class:"text-muted-foreground ml-2"},["[",i(u=>u.value+1,[r],"p0.value+1"),"/",It.length,"]"],3,null)],1,null),1,null),e("div",null,{class:"px-4 py-3 border-b border-[var(--glass-border)]"},[g(ct,{title:"ACTIVE NEURAL MODULES",color:"cyan",size:"xs",[a]:{title:a,color:a,size:a}},3,"xv_2"),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[e("div",null,null,[g(q,{level:"div",color:"cyan",size:"xs",class:"opacity-70 mb-1",children:"SYSTEM",[a]:{level:a,color:a,size:a,class:a}},3,"xv_3"),e("div",null,{class:"flex flex-wrap gap-1"},l.value.modules?.system.map(u=>g(X,{color:"cyan",children:u,[a]:{color:a}},1,u)),1,null)],1,null),e("div",null,null,[g(q,{level:"div",color:"purple",size:"xs",class:"opacity-70 mb-1",children:"PLURIBUS",[a]:{level:a,color:a,size:a,class:a}},3,"xv_4"),e("div",null,{class:"flex flex-wrap gap-1"},l.value.modules?.pluribus.map(u=>g(X,{color:"purple",children:u,[a]:{color:a}},1,u)),1,null)],1,null),e("div",null,null,[g(q,{level:"div",color:"magenta",size:"xs",class:"opacity-70 mb-1",children:"SOTA INTEGRATED",[a]:{level:a,color:a,size:a,class:a}},3,"xv_5"),e("div",null,{class:"flex flex-wrap gap-1"},l.value.modules?.sota.map(u=>g(X,{color:"magenta",children:u,[a]:{color:a}},1,u)),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"px-4 py-3 grid grid-cols-4 gap-4"},[e("div",null,{class:"space-y-1"},[g(q,{level:"div",color:"rose",size:"xs",children:["[RING 0 :: ",ml.ring0,"]"],[a]:{level:a,color:a,size:a}},3,"xv_6"),e("div",null,{class:"glass-text-muted flex items-center gap-1"},[e("span",null,{class:"glass-text-emerald"},"â—",3,null),"Constitution: ",i(u=>u.value.rings.ring0.status,[l],"p0.value.rings.ring0.status")],3,null),e("div",null,{class:"glass-text-muted flex items-center gap-1"},[e("span",null,{class:"glass-text-emerald"},"â—",3,null),"PQC: ",i(u=>u.value.rings.ring0.pqc_algorithm,[l],"p0.value.rings.ring0.pqc_algorithm")],3,null)],1,null),e("div",null,{class:"space-y-1"},[g(q,{level:"div",color:"amber",size:"xs",children:["[RING 1 :: ",ml.ring1,"]"],[a]:{level:a,color:a,size:a}},3,"xv_7"),e("div",null,{class:"glass-text-muted"},["Lineage: ",i(u=>u.value.rings.ring1.lineage_id,[l],"p0.value.rings.ring1.lineage_id")],3,null),e("div",null,{class:"glass-text-muted"},["Type: ",i(u=>u.value.rings.ring1.transfer_type,[l],"p0.value.rings.ring1.transfer_type")],3,null)],1,null),e("div",null,{class:"space-y-1"},[g(q,{level:"div",color:"emerald",size:"xs",children:["[RING 2 :: ",ml.ring2,"]"],[a]:{level:a,color:a,size:a}},3,"xv_8"),e("div",null,{class:"glass-text-muted"},["Active Cells: ",i(u=>u.value.rings.ring2.infercells_active,[l],"p0.value.rings.ring2.infercells_active")],3,null),e("div",null,{class:"glass-text-muted"},"Topology: Star/Mesh",3,null)],1,null),e("div",null,{class:"space-y-1"},[g(q,{level:"div",color:"cyan",size:"xs",children:["[RING 3 :: ",ml.ring3,"]"],[a]:{level:a,color:a,size:a}},3,"xv_9"),e("div",null,{class:"glass-text-muted"},["Cycles: ",i(u=>u.value.rings.ring3.omega_cycle,[l],"p0.value.rings.ring3.omega_cycle")],3,null),e("div",null,{class:"glass-text-muted text-xs"},i(u=>u.value.rings.ring3.providers_available?.join(" ")||"seeking...",[l],'p0.value.rings.ring3.providers_available?.join(" ")||"seeking..."'),3,null)],1,null)],1,null)],1,"xv_10")],1,"xv_11")},Va=E(p(Ga,"s_2t04VjVxufI")),Ha=l=>{const t=l.variant||"elevated",n=l.interactive??!!l.onClick$,s={elevated:"bg-md-surface-container-low shadow-md hover:shadow-lg border-none",filled:"bg-md-surface-container-highest border-none",outlined:"bg-md-surface border border-md-outline hover:border-md-outline-variant bg-transparent"},r=t==="elevated"?"glass-card-elevated":t==="filled"?"glass-card-filled":"glass-card-outlined",o=l.padding||"p-4";return e("div",{class:Is("relative rounded-xl overflow-hidden transition-all duration-300",s[t],o,"glass-card",r,l.class,n?"cursor-pointer":""),onClick$:l.onClick$},{style:i(c=>c.style,[l],"p0.style")},[e("md-elevation",null,{class:"glass-card-elevation"},null,3,null),n&&e("md-ripple",null,{class:"glass-card-ripple"},null,3,"OI_0"),g(xe,null,3,"OI_1")],0,"OI_2")},H=E(p(Ha,"s_90ibe2xZ0y8")),Wa=l=>{const t=l.available?(l.latency??0)<200?"bg-green-400 shadow-[0_0_8px_rgba(74,222,128,0.6)]":(l.latency??0)<1e3?"bg-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.6)]":"bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.6)]":"bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.6)]",n=l.available?Math.max(10,100-(l.latency??0)/2e3*100):5;return e("div",null,{class:"flex items-center gap-2"},[e("div",null,{class:"h-1 w-12 glass-surface-subtle rounded-full overflow-hidden"},e("div",{class:`h-full ${t} glass-transition-all`,style:{width:`${n}%`}},null,null,3,null),1,null),e("span",null,{class:i(s=>`text-[9px] font-mono ${s.available?"text-glass-text-muted":"text-red-400"}`,[l],'`text-[9px] font-mono ${p0.available?"text-glass-text-muted":"text-red-400"}`')},i(s=>s.available?`${s.latency??0}ms`:"OFF",[l],'p0.available?`${p0.latency??0}ms`:"OFF"'),3,null)],1,"nz_0")},Ya=E(p(Wa,"s_01tWIvprw0o")),qe={ready:{color:"green",icon:"âœ“",label:"Ready",urgency:"low"},busy:{color:"yellow",icon:"â³",label:"Busy",urgency:"low"},initializing:{color:"blue",icon:"âš™ï¸",label:"Starting",urgency:"low"},needs_login:{color:"amber",icon:"ðŸ”",label:"Auth Required",urgency:"high"},needs_code:{color:"amber",icon:"ðŸ“²",label:"2FA Code",urgency:"high"},needs_onboarding:{color:"orange",icon:"ðŸŽ¯",label:"Onboarding",urgency:"medium"},blocked_bot:{color:"red",icon:"ðŸ¤–",label:"Bot Blocked",urgency:"high"},expired:{color:"gray",icon:"âŒ›",label:"Expired",urgency:"medium"},error:{color:"red",icon:"âŒ",label:"Error",urgency:"high"},closed:{color:"gray",icon:"â—‹",label:"Closed",urgency:"low"},unknown:{color:"gray",icon:"?",label:"Unknown",urgency:"low"}},un={"chatgpt-web":{name:"ChatGPT",icon:"ðŸ’¬",authUrl:"https://chatgpt.com/",instructions:"Sign in with your OpenAI account. Complete any Cloudflare challenges."},"claude-web":{name:"Claude",icon:"ðŸŸ£",authUrl:"https://claude.ai/",instructions:"Sign in with your Anthropic account. May require email verification."},"gemini-web":{name:"Gemini",icon:"âœ¨",authUrl:"https://aistudio.google.com/",instructions:"Sign in with Google. Complete AI Studio onboarding if prompted."}},Ja=async()=>{const[l,t,n,s,r]=b(),o=new AbortController,c=setTimeout(()=>o.abort(),5e3);try{const u=await fetch("/api/browser/status",{signal:o.signal});if(clearTimeout(c),u.ok){const m=await u.json();l.running=m.running??!1,l.pid=m.pid??null,l.browser_pid=m.browser_pid??null,l.started_at=m.started_at??null,l.tabs=m.tabs??{},l.vnc_mode=m.vnc_mode??!1,l.vnc_info=m.vnc_info,m.vnc_info?.vnc_port&&(s.value="/vnc/vnc.html?resize=scale&path=vnc/websockify")}}catch(u){clearTimeout(c),console.error("Failed to fetch browser daemon status:",u),["chatgpt-web","claude-web","gemini-web"].forEach(d=>{const f=(r.providerStatus??{})[d];if(f){const v=f.error?.toLowerCase()||"";let x=f.available?"ready":"unknown";v.includes("login")||v.includes("auth")?x="needs_login":v.includes("2fa")||v.includes("otp")||v.includes("verification code")||v.includes("needs_code")?x="needs_code":v.includes("bot")||v.includes("challenge")?x="blocked_bot":v.includes("onboarding")||v.includes("welcome")?x="needs_onboarding":!f.available&&f.error&&(x="error"),l.tabs[d]={provider_id:d,tab_id:"inferred",url:un[d]?.authUrl||"",status:x,error:f.error}}})}(r.fullScreen??!1)&&!s.value&&(s.value="/vnc/vnc.html?resize=scale&path=vnc/websockify"),n.value=new Date().toISOString(),t.value=!1},Ka=async(l,t)=>{const[n,s,r]=b(),o=t==="focus_tab"?"/api/browser/vnc/focus_tab":t==="navigate_login"?"/api/browser/vnc/navigate_login":"/api/browser/vnc/check_login";s.value={provider:l,action:t};const c=new AbortController,u=setTimeout(()=>c.abort(),6e3);try{const m=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:l,actor:"dashboard",wait:!0,timeout_s:5}),signal:c.signal});clearTimeout(u);const d=await m.json();r[l]={action:t,at:new Date().toISOString(),data:d}}catch(m){clearTimeout(u),r[l]={action:t,at:new Date().toISOString(),data:{success:!1,error:`Failed to call ${o}: ${String(m)}`}}}finally{s.value=null,await n()}},Qa=()=>{const[l]=b();return l.value=!l.value},Xa=()=>{const[l,t]=b();return t(l,"focus_tab")},Za=()=>{const[l,t]=b();return t(l,"navigate_login")},er=()=>{const[l,t]=b();return t(l,"check_login")},lr=l=>{W();const t=B({running:!1,pid:null,browser_pid:null,started_at:null,tabs:{},vnc_mode:!1}),n=y(!0),s=y(null),r=y(!1),o=y(l.fullScreen??!1?"/vnc/vnc.html?resize=scale&path=vnc/websockify":null),c=y(!0),u=y(null),m=y(null),d=B({}),f=p(Ja,"s_8oVqFGX0gtc",[t,n,s,o,l]),v=p(Ka,"s_4cFsqtgz95k",[f,m,d]);D(_("s_5RonjyTMBxU",[c,f]));const x=Object.values(t.tabs).filter(k=>["needs_login","needs_code","needs_onboarding","blocked_bot"].includes(k.status)),S=x.length>0,M=Object.values(t.tabs).every(k=>k.status==="ready"),$=k=>{const I=qe[k]||qe.unknown;return{green:"bg-green-500/20 text-green-400 border-green-500/30",yellow:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",amber:"bg-amber-500/20 text-amber-400 border-amber-500/30",orange:"bg-orange-500/20 text-orange-400 border-orange-500/30",red:"bg-red-500/20 text-red-400 border-red-500/30",blue:"bg-blue-500/20 text-blue-400 border-blue-500/30",gray:"bg-gray-500/20 text-gray-400 border-gray-500/30"}[I.color]||"bg-gray-500/20 text-gray-400 border-gray-500/30"},w=k=>{const I=qe[k]||qe.unknown,T=I.urgency==="high"?"animate-pulse":"";return{green:`bg-green-400 ${T}`,yellow:`bg-yellow-400 ${T}`,amber:`bg-amber-400 ${T}`,orange:`bg-orange-400 ${T}`,red:`bg-red-400 ${T}`,blue:`bg-blue-400 ${T}`,gray:`bg-gray-400 ${T}`}[I.color]||"bg-gray-400"};return l.compact??!1?e("div",null,{class:"flex items-center gap-2"},S?e("span",null,{class:"text-[10px] px-2 py-1 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1"},[e("span",null,{class:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"},null,3,null),h(x,"length")," Browser",x.length>1?"s":""," Need Auth"],1,"G5_0"):M?e("span",null,{class:"text-[10px] px-2 py-1 rounded bg-green-500/20 text-green-400 border border-green-500/30 flex items-center gap-1"},[e("span",null,{class:"w-1.5 h-1.5 rounded-full bg-green-400"},null,3,null),"Browsers Ready"],3,"G5_1"):e("span",null,{class:"text-[10px] px-2 py-1 rounded bg-gray-500/20 text-gray-400 border border-gray-500/30"},"Browser Status",3,null),1,"G5_2"):g(H,{get class(){return`flex flex-col ${l.fullScreen??!1?"h-full":""}`},children:[e("div",null,{class:"p-4 border-b border-border flex items-center justify-between flex-shrink-0"},[e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"text-xl"},"ðŸŒ",3,null),e("div",null,null,[e("h2",null,{class:"text-sm font-semibold"},"Browser Authentication",3,null),e("p",null,{class:"text-[10px] text-muted-foreground"},"VNC access for manual OAuth login",3,null)],3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("label",null,{class:"flex items-center gap-2 cursor-pointer",title:"Auto-refresh status every 30s"},[e("span",null,{class:"text-[10px] text-muted-foreground font-mono uppercase"},"Auto",3,null),e("md-switch",null,{selected:i(k=>k.value,[c],"p0.value"),"aria-label":"Toggle auto-refresh",icons:!0,onClick$:_("s_lYmzPVHLBZE",[c])},null,3,null)],3,null),g(L,{variant:"tonal",onClick$:f,get disabled(){return n.value},class:"h-8 text-[10px]",children:"Refresh",[a]:{variant:a,onClick$:a,disabled:i(k=>k.value,[n],"p0.value"),class:a}},3,"G5_3")],1,null)],1,null),e("div",{class:`px-4 py-2 text-xs flex items-center justify-between flex-shrink-0 ${t.running?"bg-green-500/10 border-b border-green-500/20":"bg-red-500/10 border-b border-red-500/20"}`},null,[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:i(k=>`w-2 h-2 rounded-full ${k.running?"bg-green-400":"bg-red-400"}`,[t],'`w-2 h-2 rounded-full ${p0.running?"bg-green-400":"bg-red-400"}`')},null,3,null),e("span",null,{class:i(k=>k.running?"text-green-400":"text-red-400",[t],'p0.running?"text-green-400":"text-red-400"')},["Browser Daemon: ",i(k=>k.running?"Running":"Stopped",[t],'p0.running?"Running":"Stopped"')],3,null),(t.pid||t.browser_pid)&&e("span",null,{class:"text-muted-foreground font-mono"},["(",i(k=>k.pid?`Daemon PID: ${k.pid}`:"",[t],'p0.pid?`Daemon PID: ${p0.pid}`:""'),i(k=>k.browser_pid?`${k.pid?", ":""}Browser PID: ${k.browser_pid}`:"",[t],'p0.browser_pid?`${p0.pid?", ":""}Browser PID: ${p0.browser_pid}`:""'),")"],3,"G5_4")],1,null),t.vnc_mode&&e("span",null,{class:"px-2 py-0.5 rounded bg-purple-500/20 text-purple-400 border border-purple-500/30 text-[10px]"},"VNC Mode Active",3,"G5_5")],1,null),t.vnc_info&&!(l.fullScreen??!1)&&e("div",null,{class:"px-4 py-3 bg-purple-500/5 border-b border-purple-500/20 flex-shrink-0"},e("div",null,{class:"flex items-start justify-between"},[e("div",null,null,[g(q,{level:"h3",color:"purple",size:"xs",class:"mb-1",children:"VNC Connection",[a]:{level:a,color:a,size:a,class:a}},3,"G5_6"),e("div",null,{class:"space-y-1"},[e("div",null,{class:"text-[11px] font-mono text-muted-foreground"},[e("span",null,{class:"text-purple-400"},"Host:",3,null)," ",i(k=>k.vnc_info.connection_string,[t],"p0.vnc_info.connection_string")],3,null),e("div",null,{class:"text-[11px] font-mono text-muted-foreground"},[e("span",null,{class:"text-purple-400"},"Display:",3,null)," ",i(k=>k.vnc_info.display||":1",[t],'p0.vnc_info.display||":1"')],3,null),e("div",null,{class:"text-[10px] text-muted-foreground italic mt-1"},["Password: see ",e("code",null,null,"/pluribus/.pluribus/vnc_password.txt",3,null)," on the VPS (short PINs are OK)."],3,null)],3,null)],1,null),o.value&&g(L,{variant:"secondary",onClick$:p(Qa,"s_1hSFQV3htvk",[r]),class:"h-6 text-[10px]",children:i(k=>k.value?"Hide noVNC":"Open noVNC",[r],'p0.value?"Hide noVNC":"Open noVNC"'),[a]:{variant:a,onClick$:a,class:a}},3,"G5_7")],1,null),1,"G5_8"),((l.fullScreen??!1)&&o.value||r.value&&o.value)&&e("div",null,{class:i(k=>`border-b border-border ${k.fullScreen??!1?"flex-1 min-h-0":""}`,[l],'`border-b border-border ${p0.fullScreen??false?"flex-1 min-h-0":""}`')},[(l.fullScreen??!1)&&e("div",null,{class:"px-4 py-2 text-[10px] bg-purple-500/5 border-b border-purple-500/20 flex items-center justify-between"},[e("div",null,{class:"text-muted-foreground"},["Click ",e("span",null,{class:"text-purple-400 font-semibold"},"Connect",3,null)," in noVNC â€¢ Password: ",e("code",null,null,"/pluribus/.pluribus/vnc_password.txt",3,null)],3,null),e("a",null,{href:i(k=>k.value,[o],"p0.value"),target:"_blank",rel:"noreferrer",class:"text-cyan-400 hover:underline"},"Open noVNC in new tab",3,null)],3,"G5_9"),e("iframe",null,{src:i(k=>k.value,[o],"p0.value"),class:i(k=>`w-full bg-black ${k.fullScreen??!1?"h-full":"h-[400px]"}`,[l],'`w-full bg-black ${p0.fullScreen??false?"h-full":"h-[400px]"}`'),title:"noVNC Browser Access"},null,3,null)],1,"G5_10"),e("div",null,{class:i(k=>`p-4 space-y-3 ${k.fullScreen??!1?"h-64 overflow-auto border-t border-border flex-shrink-0":""}`,[l],'`p-4 space-y-3 ${p0.fullScreen??false?"h-64 overflow-auto border-t border-border flex-shrink-0":""}`')},[g(ct,{title:"BROWSER SESSIONS",color:"cyan",size:"xs",[a]:{title:a,color:a,size:a}},3,"G5_11"),Object.entries(t.tabs).length===0?e("div",null,{class:"text-sm text-muted-foreground text-center py-4"},"No browser tabs configured. Start the browser daemon to enable web provider sessions.",3,"G5_12"):e("div",null,{class:"space-y-2"},Object.entries(t.tabs).map(([k,I])=>{W();const T=qe[I.status]||qe.unknown,z=un[k],O=u.value===k;return e("div",{class:`rounded-lg border transition-all ${$(I.status)}`},null,[e("div",{onClick$:_("s_g5rKfH0du7A",[u,O,k])},{class:"p-3 cursor-pointer"},[e("div",null,{class:"flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`w-2 h-2 rounded-full ${w(I.status)}`},null,null,3,null),e("span",null,{class:"text-lg"},z?.icon||"ðŸŒ",1,null),e("span",null,{class:"font-medium text-sm"},z?.name||k,1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`text-[10px] px-2 py-0.5 rounded border ${$(I.status)}`},null,[h(T,"icon")," ",h(T,"label")],1,null),e("span",null,{class:"text-xs text-muted-foreground"},O?"â–²":"â–¼",1,null)],1,null)],1,null),e("div",null,{class:"mt-1 ml-6 mb-1 opacity-80"},g(Ya,{available:["ready","busy"].includes(I.status),latency:120,[a]:{latency:a}},3,"G5_13"),1,null),I.error&&!O&&e("div",null,{class:"text-[10px] text-muted-foreground mt-1 ml-6 truncate"},h(I,"error"),1,"G5_14")],0,null),O&&e("div",null,{class:"px-3 pb-3 border-t border-[var(--glass-border)] mt-0"},e("div",null,{class:"pt-3 space-y-2"},[I.error&&e("div",null,{class:"text-xs text-red-400/80 p-2 rounded bg-red-500/10 border border-red-500/20"},h(I,"error"),1,"G5_15"),["needs_login","needs_onboarding","blocked_bot"].includes(I.status)&&e("div",null,{class:"text-xs p-2 rounded bg-amber-500/10 border border-amber-500/20"},[e("div",null,{class:"font-semibold text-amber-400 mb-1"},"Action Required:",3,null),e("ol",null,{class:"list-decimal list-inside space-y-1 text-amber-400/80"},[e("li",null,null,["Connect to VNC: ",i(J=>J.vnc_info?.connection_string||"Check server config",[t],'p0.vnc_info?.connection_string||"Check server config"')],3,null),e("li",null,null,["Open browser tab for ",z?.name||k],1,null),e("li",null,null,z?.instructions||"Complete the login/authentication flow",1,null),e("li",null,null,"Click Refresh to update status",3,null)],1,null)],1,"G5_16"),e("div",null,{class:"grid grid-cols-2 gap-2 text-[10px]"},[I.current_url&&e("div",null,null,[e("span",null,{class:"text-muted-foreground"},"URL:",3,null),e("button",{disabled:!t.running||m.value?.provider===k,onClick$:_("s_FwzPus9DTFU",[k,v])},{class:"text-cyan-400 hover:underline ml-1 truncate block text-left disabled:opacity-50"},h(I,"current_url"),0,null)],1,"G5_17"),I.last_health_check&&e("div",null,null,[e("span",null,{class:"text-muted-foreground"},"Last Check:",3,null),e("span",null,{class:"ml-1"},new Date(I.last_health_check).toLocaleTimeString(),1,null)],1,"G5_18"),I.session_start&&e("div",null,null,[e("span",null,{class:"text-muted-foreground"},"Session Start:",3,null),e("span",null,{class:"ml-1"},new Date(I.session_start).toLocaleTimeString(),1,null)],1,"G5_19"),I.chat_count!==void 0&&I.chat_count>0&&e("div",null,null,[e("span",null,{class:"text-muted-foreground"},"Chats:",3,null),e("span",null,{class:"ml-1"},h(I,"chat_count"),1,null)],1,"G5_20")],1,null),e("div",null,{class:"flex flex-wrap gap-2"},[g(L,{variant:"secondary",onClick$:p(Xa,"s_wbtDeUENVL8",[k,v]),disabled:!t.running||m.value?.provider===k,class:"h-6 text-[10px]",children:"Focus Tab",[a]:{variant:a,class:a}},3,"G5_21"),g(L,{variant:"tonal",onClick$:p(Za,"s_QEYP0oB2n0A",[k,v]),disabled:!t.running||m.value?.provider===k,class:"h-6 text-[10px]",children:"Login via VNC",[a]:{variant:a,class:a}},3,"G5_22"),g(L,{variant:"tonal",onClick$:p(er,"s_l6oRlx0CkgI",[k,v]),disabled:!t.running||m.value?.provider===k,class:"h-6 text-[10px]",children:"Check Login",[a]:{variant:a,class:a}},3,"G5_23")],1,null),d[k]&&e("div",{class:`text-[10px] p-2 rounded border ${d[k].data?.success?"bg-green-500/10 border-green-500/20 text-green-400/80":"bg-red-500/10 border-red-500/20 text-red-400/80"}`},null,[e("div",null,{class:"font-semibold"},["Last VNC Action: ",h(d[k],"action"),e("span",null,{class:"text-muted-foreground font-normal ml-1"},["(",new Date(d[k].at).toLocaleTimeString(),")"],1,null)],1,null),e("div",null,{class:"mt-1"},d[k].data?.message||d[k].data?.error||"No message",1,null)],1,"G5_24")],1,null),1,"G5_25")],1,k)}),1,null)],1,null),e("div",null,{class:"px-4 py-2 border-t border-border bg-muted/20 flex items-center justify-between text-[10px] text-muted-foreground"},[e("span",null,null,s.value&&`Last updated: ${new Date(s.value).toLocaleTimeString()}`,1,null),e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"flex items-center gap-1"},[e("span",null,{class:"w-1.5 h-1.5 rounded-full bg-green-400"},null,3,null),h(Object.values(t.tabs).filter(k=>k.status==="ready"),"length")," Ready"],1,null),x.length>0&&e("span",null,{class:"flex items-center gap-1"},[e("span",null,{class:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"},null,3,null),h(x,"length")," Need Auth"],1,"G5_26")],1,null)],1,null)],[a]:{class:i(k=>`flex flex-col ${k.fullScreen??!1?"h-full":""}`,[l],'`flex flex-col ${p0.fullScreen??false?"h-full":""}`')}},1,"G5_27")},cn=E(p(lr,"s_02iofl0hbiA")),tr=()=>{const[l]=b();l.onClose$?.()},nr=async(l,t)=>{try{await fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:l,kind:"metric",level:"info",actor:"dashboard",data:t})})}catch{}},sr=async()=>{const[l,t]=b();t.bootstrapping=!0,t.bootstrapError=null;try{await l("dashboard.browser.bootstrap.requested",{source:"auth-overlay",at:new Date().toISOString()});const s=await(await fetch("/api/browser/bootstrap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actor:"dashboard",wait:!1})})).json().catch(()=>({}));t.bootstrapResult=s,t.lastBootstrap=new Date().toISOString(),await l("dashboard.browser.bootstrap.result",{ok:!!s?.success,started:!!s?.started,queued:(s?.queued||[]).length})}catch(n){t.bootstrapError=String(n),await l("dashboard.browser.bootstrap.result",{ok:!1,error:String(n)})}finally{t.bootstrapping=!1}},ar=async()=>{const[l]=b();l.geminiCleanLoading=!0;try{const n=await(await fetch("/api/browser/gemini_clean/status")).json().catch(()=>({}));l.geminiCleanStatus=n}catch(t){l.geminiCleanStatus={ok:!1,stderr:String(t)}}finally{l.geminiCleanLoading=!1}},rr=l=>{W();const t=B({bootstrapping:!1,bootstrapError:null,bootstrapResult:null,lastBootstrap:null,geminiCleanStatus:null,geminiCleanLoading:!1}),n=p(tr,"s_yrmbjR2cZP8",[l]),s=p(nr,"s_0pgCObqBUaI"),r=p(sr,"s_i64YM6TWTEw",[s,t]),o=p(ar,"s_v5zyxgE626c",[t]);if(D(_("s_00WJJSF04Ww",[r,s,l,o])),!l.open)return null;const c=Object.values((l.providerStatus??{})||{}).filter(u=>!u.available&&(u.error||"").length>0).length;return e("div",null,{class:"fixed inset-0 z-[60]","data-testid":"auth-overlay"},[e("div",null,{class:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick$:n},null,3,null),e("div",null,{class:"absolute inset-4 md:inset-10 rounded-xl border border-border bg-card shadow-2xl overflow-hidden flex flex-col"},[e("div",null,{class:"p-3 border-b border-border flex items-center gap-3"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-lg"},"â˜ï¸",3,null),e("div",null,null,[e("div",null,{class:"text-sm font-semibold"},"Auth / Providers",3,null),e("div",null,{class:"text-[11px] text-muted-foreground"},"Autonomy: env creds + VNC only for OTP/CAPTCHA",3,null)],3,null)],3,null),e("div",null,{class:"ml-auto flex items-center gap-2"},[e("button",null,{type:"button",disabled:i(u=>u.bootstrapping,[t],"p0.bootstrapping"),class:"text-xs px-3 py-1.5 rounded border border-border bg-muted/30 hover:bg-muted/50 disabled:opacity-50",title:"Re-run bootstrap (start daemon + enqueue login checks)",onClick$:r},i(u=>u.bootstrapping?"Bootstrappingâ€¦":"Bootstrap",[t],'p0.bootstrapping?"Bootstrappingâ€¦":"Bootstrap"'),3,null),e("button",null,{type:"button",class:"text-xs px-3 py-1.5 rounded bg-primary text-primary-foreground hover:bg-primary/90",onClick$:n},"Close",3,null)],3,null)],3,null),(t.bootstrapError||t.lastBootstrap)&&e("div",null,{class:"px-3 py-2 border-b border-border bg-muted/20 text-[11px] text-muted-foreground flex items-center gap-3"},[t.lastBootstrap&&e("span",null,null,["Last bootstrap: ",i(u=>u.lastBootstrap,[t],"p0.lastBootstrap")],3,"Dx_0"),t.bootstrapError&&e("span",null,{class:"text-red-300"},["Error: ",i(u=>u.bootstrapError,[t],"p0.bootstrapError")],3,"Dx_1"),c>0&&e("span",null,{class:"ml-auto"},["Provider issues detected: ",c],1,"Dx_2")],1,"Dx_3"),e("div",null,{class:"flex-1 overflow-auto"},g(cn,{get providerStatus(){return l.providerStatus??{}},fullScreen:!0,[a]:{providerStatus:i(u=>u.providerStatus??{},[l],"p0.providerStatus??{}"),fullScreen:a}},3,"Dx_4"),1,null),e("div",null,{class:"p-3 border-t border-border bg-muted/10 text-[11px] text-muted-foreground space-y-2"},[e("div",null,null,["Tip: if you see ",e("span",null,{class:"text-amber-200"},"2FA Code",3,null),", enter the code via VNC and then click â€œCheck Loginâ€."],3,null),e("details",null,{class:"rounded border border-border bg-muted/20 p-2"},[e("summary",null,{class:"cursor-pointer select-none flex items-center justify-between gap-2"},[e("span",null,null,"gemini_clean status (server-side)",3,null),e("span",null,{class:"text-[10px] opacity-80"},i(u=>u.geminiCleanLoading?"loadingâ€¦":"refreshable",[t],'p0.geminiCleanLoading?"loadingâ€¦":"refreshable"'),3,null)],3,null),e("div",null,{class:"mt-2 flex items-center gap-2"},[e("button",null,{type:"button",disabled:i(u=>u.geminiCleanLoading,[t],"p0.geminiCleanLoading"),class:"text-[10px] px-2 py-1 rounded border border-border bg-muted/30 hover:bg-muted/50 disabled:opacity-50",onClick$:o},"Refresh",3,null),t.geminiCleanStatus&&e("span",null,{class:i(u=>`text-[10px] ${u.geminiCleanStatus.ok?"text-green-300":"text-amber-200"}`,[t],'`text-[10px] ${p0.geminiCleanStatus.ok?"text-green-300":"text-amber-200"}`')},i(u=>u.geminiCleanStatus.ok?"ok":"needs attention",[t],'p0.geminiCleanStatus.ok?"ok":"needs attention"'),3,"Dx_5")],1,null),e("pre",null,{class:"mt-2 text-[10px] whitespace-pre-wrap text-muted-foreground max-h-56 overflow-auto"},(t.geminiCleanStatus?.stdout||t.geminiCleanStatus?.stderr||"").trim()||"no output",1,null)],1,null)],1,null)],1,null)],1,"Dx_6")},or=E(p(rr,"s_dZ16bC1hdeE")),Ee=l=>{const t=l.a!==void 0?` / ${l.a}`:"";return`oklch(${l.l.toFixed(3)} ${l.c.toFixed(3)} ${l.h.toFixed(1)}${t})`},ir=(l,t="dark")=>{const n=t==="dark",s={l:n?.12:.98,c:.01,h:l},r={l:n?.65:.55,c:.15,h:l},o={l:n?.7:.6,c:.12,h:(l+120)%360},c={l:n?.08:.95,c:.02,h:l},u={l:n?.05:.9,c:.03,h:(l+40)%360};return{surface:s,primary:r,secondary:o,bgStart:c,bgEnd:u}},le=(l,t,n)=>`hsl(${l} ${t}% ${n}%)`,_e=l=>Math.round(l/30)*30,ur=(l,t,n)=>{t/=100,n/=100;const s=u=>(u+l/30)%12,r=t*Math.min(n,1-n),o=u=>n-r*Math.max(-1,Math.min(s(u)-3,Math.min(9-s(u),1))),c=u=>u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4);return{r:c(o(0)),g:c(o(8)),b:c(o(4))}},Tt=(l,t,n)=>{const{r:s,g:r,b:o}=ur(l,t,n);return .2126*s+.7152*r+.0722*o},cr=(l,t)=>{const n=Math.max(l,t),s=Math.min(l,t);return(n+.05)/(s+.05)},hl=(l,t,n,s)=>{const r=Tt(l,t,n),o=Tt(0,0,s);return cr(r,o)>=4.5},Et=["Obsidian","Cyber","Neon","Quantum","Void","Solar","Lunar","Astral","Hyper","Deep","Mist","Iron","Crystal","Ghost","Echo","Flux","Zero","Dark","Light","Pale","Onyx","Velvet","Carbon","Smoke","Ash"],Ge=["Haze","Glass","Shard","Core","Wave","Pulse","Drift","Glow","Ray","Beam","Signal","Static","Noise","Dust","Vapor","Rain","Storm","Silence","Bloom","Wisp","Veil","Mirage","Aura","Nexus"],dr=()=>{let l,t,n,s,r,o=0;do{const u=Math.floor(Math.random()*360);l=_e(u),t=70+Math.random()*30,n=50,s=Math.random()*4,r=4+Math.random()*6,o++}while(!hl(l,t,n,r)&&o<10);const c=_e((l+137.5)%360);return{id:`random_${Date.now()}_${Math.floor(Math.random()*1e3)}`,name:"Entropy "+Math.floor(Math.random()*1e3),category:"random",description:"Procedurally generated entropy.",colors:{primary:le(l,t,n),secondary:le(c,60+Math.random()*30,55),bgGradientStart:le(l,s,r),bgGradientEnd:le(_e((l+60)%360),s+2,r-2),surface:le(l,s,r+4)},glass:{blur:10+Math.random()*15,opacity:.6+Math.random()*.3,noiseOpacity:.05+Math.random()*.05,noiseIntensity:.4+Math.random()*.4,gradientAngle:Math.floor(Math.random()*360)}}},pr=()=>{const l=[];for(let t=0;t<200;t++){const n=Math.floor(Math.random()*360),s=_e(n),r=`${Et[Math.floor(Math.random()*Et.length)]} ${Ge[Math.floor(Math.random()*Ge.length)]}`,o=60,c=60,u=6+Math.random()*2;hl(s,o,c,u)&&l.push({id:`smoked_${t}`,name:r,category:"void",description:"A deep, smoked glass aesthetic with faint chromatic aberration.",colors:{primary:le(s,o,c),secondary:le(_e((s+180)%360),50,50),bgGradientStart:le(s,2+Math.random()*2,u),bgGradientEnd:le(_e((s+40)%360),3+Math.random()*2,u-2),surface:le(s,2,10)},glass:{blur:12+Math.random()*8,opacity:.7+Math.random()*.2,noiseOpacity:.07,noiseIntensity:.5,gradientAngle:135+Math.floor(Math.random()*90)}})}for(let t=0;t<100;t++){const n=Math.floor(Math.random()*360),s=_e(n),r=`Neon ${Ge[Math.floor(Math.random()*Ge.length)]}`,o=100,c=50,u=5;hl(s,o,c,u)&&l.push({id:`cyber_${t}`,name:r,category:"cyber",description:"High contrast, saturated neon against black.",colors:{primary:le(s,o,c),secondary:le(_e((s+120)%360),90,60),bgGradientStart:le(s,60,u),bgGradientEnd:le(_e((s+180)%360),80,2),surface:le(s,30,10)},glass:{blur:4,opacity:.8,noiseOpacity:.08,noiseIntensity:.6,gradientAngle:45}})}for(let t=0;t<50;t++){const n=Math.floor(Math.random()*360),s=_e(n),r=`Iron ${Ge[Math.floor(Math.random()*Ge.length)]}`,o=10,c=60,u=15;hl(s,o,c,u)&&l.push({id:`industrial_${t}`,name:r,category:"industrial",description:"Metallic, monochrome, precise.",colors:{primary:le(s,o,c),secondary:le(s,5,40),bgGradientStart:le(s,5,u),bgGradientEnd:le(s,0,5),surface:le(s,2,12)},glass:{blur:20,opacity:.9,noiseOpacity:.12,noiseIntensity:.8,gradientAngle:180}})}return l};let ql=null;const mr=()=>(ql||(ql=pr()),ql),gr=()=>{const l=mr();return Math.random()<.1?dr():l[Math.floor(Math.random()*l.length)]},vr=l=>({id:l.id,name:l.name,category:l.category,colors:{surface:l.colors.surface,primary:l.colors.primary,secondary:l.colors.secondary,bgStart:l.colors.bgGradientStart,bgEnd:l.colors.bgGradientEnd,text:"oklch(0.95 0.01 240)",muted:"oklch(0.60 0.01 240)",border:l.colors.primary.replace(")"," / 0.2)")},glass:{blur:l.glass.blur,roughness:.5,refraction:1,gradientAngle:l.glass.gradientAngle,noiseIntensity:l.glass.noiseIntensity},shader:{noiseSpeed:.2,noiseScale:1,bloomStrength:.5}}),br=l=>{try{const r=gr();if(r)return vr(r)}catch(r){console.warn("[VisualEngine] Failed to use chroma registry, falling back to procedural",r)}const t=l??Math.random(),n=Math.floor(t*360),s=ir(n,"dark");return{id:`mat_${Date.now()}`,name:"Procedural Smoked Glass",colors:{surface:Ee({...s.surface,a:.6}),primary:Ee(s.primary),secondary:Ee(s.secondary),bgStart:Ee(s.bgStart),bgEnd:Ee(s.bgEnd),text:Ee({l:.95,c:.01,h:n}),muted:Ee({l:.6,c:.01,h:n}),border:Ee({...s.primary,a:.2})},glass:{blur:16,roughness:.4+Math.random()*.4,refraction:1+Math.random()*.1,gradientAngle:135+Math.floor(Math.random()*90),noiseIntensity:.4+Math.random()*.4},shader:{noiseSpeed:.2+Math.random()*.5,noiseScale:1+Math.random()*2,bloomStrength:.5}}},fr=l=>{if(typeof document>"u")return;const t=document.documentElement;t.style.setProperty("--mat-surface",l.colors.surface),t.style.setProperty("--mat-primary",l.colors.primary),t.style.setProperty("--mat-secondary",l.colors.secondary),t.style.setProperty("--mat-bg-start",l.colors.bgStart),t.style.setProperty("--mat-bg-end",l.colors.bgEnd),t.style.setProperty("--mat-text",l.colors.text),t.style.setProperty("--mat-muted",l.colors.muted),t.style.setProperty("--mat-border",l.colors.border),t.style.setProperty("--mat-blur",`${l.glass.blur}px`),t.style.setProperty("--art-gradient-angle",`${l.glass.gradientAngle}deg`),t.style.setProperty("--art-noise-intensity",String(l.glass.noiseIntensity)),t.style.setProperty("--background",l.colors.bgStart),t.style.setProperty("--foreground",l.colors.text),t.style.setProperty("--primary",l.colors.primary)},xr=(l,t)=>{l!=="explicit"&&fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:"art.preference.implicit",kind:"metric",level:"info",actor:"ArtInjector",data:{status:l,id:t.id,name:t.name,ts:Date.now()}})}).catch(()=>{}),fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:"user.preference.update",kind:"request",level:"info",actor:"dashboard-user",payload:{chroma_id:t.id,noise_intensity:t.glass.noiseIntensity,gradient_angle:t.glass.gradientAngle,material:t}})}).catch(()=>{})},hr=l=>{const t=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><circle cx="16" cy="16" r="14" fill="${l}" /></svg>`,n=new Blob([t],{type:"image/svg+xml"}),s=URL.createObjectURL(n);let r=document.querySelector('link[rel="icon"]');r||(r=document.createElement("link"),r.rel="icon",document.head.appendChild(r)),r.setAttribute("href",s)},yr=l=>{const[t,n,s,r,o,c]=b(),u=br(l);o.value&&Date.now()-r.value<3e5&&n("skipped",u),fr(u),o.value=t.value,t.value=u.id,r.value=Date.now(),s.value=!1;const m=document.documentElement;m.style.setProperty("--agent-main-color",u.colors.text),m.style.setProperty("--agent-claude-color",u.colors.primary),m.style.setProperty("--agent-qwen-color",u.colors.secondary),m.style.setProperty("--agent-gemini-color",u.colors.primary),m.style.setProperty("--agent-codex-color",u.colors.secondary),localStorage.setItem("pluribus_visual_material",JSON.stringify(u)),n("explicit",u),c(u.colors.primary),console.log(`[ArtInjector] Injected Material: ${u.name} (${u.id})`)},_r=()=>{const l=y(""),t=y(Date.now()),n=y(""),s=y(!1),r=y(135);D(_("s_Tj0hhLs0ZBw",[r]));const o=p(xr,"s_HGgfVakZBwU"),u=p(yr,"s_JIDSUJ6WfqI",[l,o,s,t,n,p(hr,"s_QdqBWQTwO34")]);return D(_("s_dVJIebMwyFg",[l,o,s])),D(_("s_eO0OOWIg3zg",[l,u,t])),e("div",null,{style:{display:"none"},"data-material-id":i(m=>m.value,[l],"p0.value")},null,3,"11_0")},wr=E(p(_r,"s_l6cSb8Lr3mA")),Xe=[];function kr(){if(Xe.length===0){console.log("%c[TIMING] No component timings recorded","color: #888;");return}const l=Xe.reduce((n,s)=>n+s.duration,0),t=[...Xe].sort((n,s)=>s.duration-n.duration);console.group("%c[TIMING SUMMARY] Component Load Times","color: #9b59b6; font-weight: bold;"),console.log("%cComponent Breakdown:","font-weight: bold;");for(const n of t){const s=(n.duration/l*100).toFixed(1),r="â–ˆ".repeat(Math.round(Number(s)/5)),o=n.duration<500?"#2ecc71":n.duration<2e3?"#f39c12":"#e74c3c";console.log(`%c  ${n.name.padEnd(25)} ${(n.duration/1e3).toFixed(2)}s ${r} ${s}%`,`color: ${o}; font-family: monospace;`)}console.log(`%c  ${"â”€".repeat(50)}`,"color: #888;"),console.log(`%c  TOTAL: ${(l/1e3).toFixed(2)}s across ${Xe.length} components`,"font-weight: bold;"),console.groupEnd()}typeof window<"u"&&window.addEventListener("load",()=>{setTimeout(()=>{Xe.length>0&&kr()},5e3)});const Sr=l=>{const t=y(!1),n=y(null),s=y(null);return D(_("s_01NdTir0nYo",[n,t,s]),{strategy:"document-idle"}),t.value?n.value?g(n.value,{get entropy(){return l.entropy??.1},get mood(){return l.mood??"calm"},get enabled(){return l.enabled??!0},get wsUrl(){return l.wsUrl},get requestScene(){return l.requestScene??!1},[a]:{entropy:i(r=>r.entropy??.1,[l],"p0.entropy??.1"),mood:i(r=>r.mood??"calm",[l],'p0.mood??"calm"'),enabled:i(r=>r.enabled??!0,[l],"p0.enabled??true"),wsUrl:i(r=>r.wsUrl,[l],"p0.wsUrl"),requestScene:i(r=>r.requestScene??!1,[l],"p0.requestScene??false")}},3,"iI_1"):null:e("div",{style:{background:"radial-gradient(ellipse at center, rgba(30, 20, 50, 0.8) 0%, rgba(10, 10, 20, 0.95) 100%)",opacity:l.enabled??!0?1:0,transition:"opacity 0.5s ease"}},{class:"fixed inset-0 -z-10 pointer-events-none"},null,3,"iI_0")},Cr=E(p(Sr,"s_LdlSstaAn8U")),dn="pluribus_shader_prefs",Gl={version:1,shaders:{},blacklist:[]};function pt(){try{const l=localStorage.getItem(dn);if(!l)return{...Gl};const t=JSON.parse(l);return{...Gl,...t}}catch{return{...Gl}}}function mt(l){try{localStorage.setItem(dn,JSON.stringify(l))}catch{}}function $r(l){const t=pt();return t.shaders[l]?(t.shaders[l].likes++,t.blacklist=t.blacklist.filter(n=>n!==l),mt(t),t.shaders[l]):null}function Ir(l){const t=pt();return t.shaders[l]?(t.shaders[l].dislikes++,mt(t),t.shaders[l]):null}function Tr(l){const t=pt();t.blacklist.includes(l)||t.blacklist.push(l),mt(t)}const Er=()=>{const[l,t,n]=b();if(!l.value)return;const s=$r(l.value);s&&(t.value={...s},n.value="+1",setTimeout(()=>n.value="",1e3))},Ar=()=>{const[l,t,n]=b();if(!l.value)return;const s=Ir(l.value);s&&(t.value={...s},n.value="-1",setTimeout(()=>n.value="",1e3))},Mr=()=>{const[l,t]=b();l.value&&(Tr(l.value),t.value="Blacklisted",window.dispatchEvent(new CustomEvent("pluribus:art:request",{detail:{reason:"blacklist_current"}})),setTimeout(()=>t.value="",1500))},Or=()=>{const[l]=b();window.dispatchEvent(new CustomEvent("pluribus:art:request",{detail:{reason:"manual_next"}})),l.value="Loading...",setTimeout(()=>l.value="",1500)},Pr=()=>{const l=y(""),t=y("Default"),n=y(null),s=y(!1),r=y("");D(_("s_HnpPfOrLcy4",[l,t,n]));const o=p(Er,"s_jUmxByxeJaw",[l,n,r]),c=p(Ar,"s_8i6rNnGUgFY",[l,n,r]),u=p(Mr,"s_ijXq370X0Os",[l,r]),m=p(Or,"s_5aBjqM0doLg",[r]);return e("div",null,{class:i(d=>`fixed bottom-4 right-4 z-50 transition-all duration-300 ${d.value?"w-64":"w-auto"}`,[s],'`fixed bottom-4 right-4 z-50 transition-all duration-300 ${p0.value?"w-64":"w-auto"}`')},[!s.value&&e("button",null,{class:"bg-black/50 backdrop-blur-sm border border-[var(--glass-border)] rounded-full p-2 hover:bg-black/70 transition-colors",title:"Shader Controls",onClick$:_("s_l1xESHNCAZQ",[s])},e("svg",null,{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",null,{cx:"12",cy:"12",r:"10"},null,3,null),e("path",null,{d:"M12 2a10 10 0 0 1 0 20"},null,3,null),e("path",null,{d:"M12 2a10 10 0 0 0 0 20",opacity:"0.5"},null,3,null)],3,null),3,"ji_0"),s.value&&e("div",null,{class:"bg-black/70 backdrop-blur-md border border-[var(--glass-border)] rounded-lg p-3 shadow-xl"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-xs text-white/50 uppercase tracking-wider"},"Shader",3,null),e("button",null,{class:"text-white/50 hover:text-white",onClick$:_("s_FOuup6vgYA8",[s])},e("svg",null,{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},e("path",null,{d:"M18 6L6 18M6 6l12 12"},null,3,null),3,null),3,null)],3,null),e("div",null,{class:"text-sm text-white font-medium truncate mb-2",title:i(d=>d.value,[t],"p0.value")},i(d=>d.value,[t],"p0.value"),3,null),n.value&&e("div",null,{class:"text-xs text-white/40 mb-3 flex gap-3"},[e("span",null,{title:"Likes"},["+",i(d=>d.value.likes,[n],"p0.value.likes")],3,null),e("span",null,{title:"Dislikes"},["-",i(d=>d.value.dislikes,[n],"p0.value.dislikes")],3,null),e("span",null,{title:"Times seen"},["#",i(d=>d.value.seen,[n],"p0.value.seen")],3,null)],3,"ji_1"),r.value&&e("div",null,{class:"text-xs text-cyan-400 mb-2 animate-pulse"},i(d=>d.value,[r],"p0.value"),3,"ji_2"),e("div",null,{class:"flex gap-2"},[e("button",null,{class:"flex-1 py-1.5 px-2 bg-green-600/20 border border-green-500/30 rounded text-green-400 text-xs hover:bg-green-600/30 transition-colors",title:"Like this shader",onClick$:o},"Like",3,null),e("button",null,{class:"flex-1 py-1.5 px-2 bg-red-600/20 border border-red-500/30 rounded text-red-400 text-xs hover:bg-red-600/30 transition-colors",title:"Dislike this shader",onClick$:c},"Dislike",3,null),e("button",null,{class:"flex-1 py-1.5 px-2 bg-blue-600/20 border border-blue-500/30 rounded text-blue-400 text-xs hover:bg-blue-600/30 transition-colors",title:"Show next shader",onClick$:m},"Next",3,null)],3,null),e("button",null,{class:"w-full mt-2 py-1 text-xs text-white/30 hover:text-red-400 transition-colors",title:"Never show this shader again",onClick$:u},"Never show again",3,null)],1,"ji_3")],1,"ji_4")},Lr=E(p(Pr,"s_nofNZybbYvc")),Dr=()=>{const l=y([{id:"synapse",label:"Checking Synapses...",status:"pending",icon:"âš¡"},{id:"memory",label:"Mounting Hippocampus...",status:"pending",icon:"ðŸ§ "},{id:"persona",label:"Ingesting Personas...",status:"pending",icon:"ðŸŽ­"},{id:"skills",label:"Hydrating Skills...",status:"pending",icon:"ðŸ¦¾"},{id:"awareness",label:"Self-Awareness Check...",status:"pending",icon:"ðŸ‘ï¸"}]);return D(_("s_yrMZv0PrjBo",[l])),e("div",null,{class:"w-full max-w-md mx-auto p-4 bg-black/40 backdrop-blur-md rounded-lg border border-cyan-500/20"},[e("div",null,{class:"mb-4 text-center"},g(q,{level:"h3",color:"cyan",size:"sm",children:"Cognitive Boot Sequence",[a]:{level:a,color:a,size:a}},3,"VJ_0"),1,null),e("div",null,{class:"space-y-3"},l.value.map(t=>e("div",null,{class:"flex items-center gap-3"},[e("div",{class:`w-6 h-6 flex items-center justify-center rounded-full transition-all duration-300 ${t.status==="complete"?"bg-cyan-500/20 text-cyan-400":t.status==="active"?"bg-amber-500/20 text-amber-400 animate-pulse":"bg-muted/10 text-muted-foreground"}`},null,e("span",null,{class:"text-xs"},h(t,"icon"),1,null),1,null),e("div",null,{class:"flex-1"},[e("div",{class:`text-xs font-mono transition-colors ${t.status==="active"?"text-cyan-100":t.status==="complete"?"text-muted-foreground line-through opacity-50":"text-muted-foreground/50"}`},null,h(t,"label"),1,null),t.status==="active"&&e("div",null,{class:"h-0.5 w-full bg-cyan-900/30 mt-1 rounded-full overflow-hidden"},e("div",null,{class:"h-full bg-cyan-400/50 w-1/2 animate-progress-indeterminate"},null,3,null),3,"VJ_1")],1,null),t.status==="complete"&&e("span",null,{class:"text-[10px] text-emerald-400 font-mono"},"OK",3,"VJ_2")],1,t.id)),1,null)],1,"VJ_3")},Rr=E(p(Dr,"s_lqKFBeCRiJU")),Nr=l=>{W();const t=y(!1);D(_("s_an0i5Fa1Vdk",[t,l]));const n=l.noAnimation??!1?{}:{opacity:t.value?1:0,transform:t.value?"translateY(0)":"translateY(8px)",transition:"opacity 300ms cubic-bezier(0.05, 0.7, 0.1, 1), transform 300ms cubic-bezier(0.05, 0.7, 0.1, 1)"};return e("div",{style:n},{role:"region","aria-label":i(s=>s.ariaLabel||`Loading stage: ${s.id}`,[l],"p0.ariaLabel||`Loading stage: ${p0.id}`"),"aria-busy":i(s=>!s.value,[t],"!p0.value")},[l.id==="comp:supermotd"&&g(Rr,null,3,"Be_0"),g(xe,null,3,"Be_1")],1,"Be_2")},F=E(p(Nr,"s_xc2SO0DB5OM")),pn={"--background":"background","--foreground":"foreground","--card":"card","--card-foreground":"card-foreground","--popover":"popover","--popover-foreground":"popover-foreground","--primary":"primary","--primary-foreground":"primary-foreground","--secondary":"secondary","--secondary-foreground":"secondary-foreground","--muted":"muted","--muted-foreground":"muted-foreground","--accent":"accent","--accent-foreground":"accent-foreground","--destructive":"destructive","--destructive-foreground":"destructive-foreground","--border":"border","--input":"input","--ring":"ring","--chart-1":"chart-1","--chart-2":"chart-2","--chart-3":"chart-3","--chart-4":"chart-4","--chart-5":"chart-5","--sidebar":"sidebar","--sidebar-foreground":"sidebar-foreground","--sidebar-primary":"sidebar-primary","--sidebar-primary-foreground":"sidebar-primary-foreground","--sidebar-accent":"sidebar-accent","--sidebar-accent-foreground":"sidebar-accent-foreground","--sidebar-border":"sidebar-border","--sidebar-ring":"sidebar-ring","--font-sans":"font-sans","--font-serif":"font-serif","--font-mono":"font-mono","--radius":"radius","--spacing":"spacing","--letter-spacing":"letter-spacing","--shadow-color":"shadow-color","--shadow-opacity":"shadow-opacity","--shadow-blur":"shadow-blur","--shadow-spread":"shadow-spread","--shadow-offset-x":"shadow-offset-x","--shadow-offset-y":"shadow-offset-y"},jr=Object.fromEntries(Object.entries(pn).map(([l,t])=>[t,l]));function zr(l,t="dark"){const n={};for(const[s,r]of Object.entries(l.cssVariables)){const o=pn[s];o&&(n[o]=r)}return n}function Br(l){const t={};for(const[n,s]of Object.entries(l)){const r=jr[n];r&&s&&(t[r]=s)}return t}function mn(l,t){const n=Br(t),s=Object.entries(n).map(([r,o])=>`  ${r}: ${o};`).join(`
`);return`[data-ipe-id="${l}"] {
${s}
}`}function at(l){const t=l.match(/(\d+(?:\.\d+)?)\s*(?:deg)?\s+(\d+(?:\.\d+)?)%\s+(\d+(?:\.\d+)?)%/);return t?{h:parseFloat(t[1]),s:parseFloat(t[2]),l:parseFloat(t[3])}:null}function Ur(l,t,n){return`${Math.round(l)} ${Math.round(t)}% ${Math.round(n)}%`}function At(l,t,n){t/=100,n/=100;const s=(1-Math.abs(2*n-1))*t,r=s*(1-Math.abs(l/60%2-1)),o=n-s/2;let c=0,u=0,m=0;return l<60?(c=s,u=r,m=0):l<120?(c=r,u=s,m=0):l<180?(c=0,u=s,m=r):l<240?(c=0,u=r,m=s):l<300?(c=r,u=0,m=s):(c=s,u=0,m=r),{r:Math.round((c+o)*255),g:Math.round((u+o)*255),b:Math.round((m+o)*255)}}function Mt(l,t,n){const s=[l,t,n].map(r=>(r/=255,r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)));return .2126*s[0]+.7152*s[1]+.0722*s[2]}function Fr(l,t){const n=At(l.h,l.s,l.l),s=At(t.h,t.s,t.l),r=Mt(n.r,n.g,n.b),o=Mt(s.r,s.g,s.b),c=Math.max(r,o),u=Math.min(r,o);return(c+.05)/(u+.05)}function qr(l,t,n=!1){const s=at(l),r=at(t);if(!s||!r)return!0;const o=Fr(s,r);return n?o>=3:o>=4.5}const gn="pluribus.ipe",tl=1,rt={version:tl,instances:{},undoStack:[],preferences:{panelPosition:{x:-1,y:-1},panelSize:{width:380,height:520},activeTab:"tokens",togglePosition:{x:-1,y:-1}}};function gt(){try{const l=localStorage.getItem(gn);if(!l)return{...rt};const t=JSON.parse(l);return t.version!==tl?Vr(t):t}catch(l){return console.error("[IPE] Failed to load from storage:",l),{...rt}}}function Gr(l){try{const n={...gt(),...l,version:tl};localStorage.setItem(gn,JSON.stringify(n))}catch(t){console.error("[IPE] Failed to save to storage:",t)}}function Vr(l){return{...rt,...l,version:tl}}function Hr(l){const t=gt();t.instances[l.instanceId]={instanceId:l.instanceId,styles:l.styles,shaderOverride:l.shaderOverride,purpose:l.purpose,updatedAt:l.updatedAt},Gr({instances:t.instances})}function Wr(){return gt().instances}async function Yr(l={}){const{actor:t="ipe",baseUrl:n="/api/rhizome"}=l;try{const s=Wr();return(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"ingest",params:{object_type:"ipe_instances",content:JSON.stringify(s),metadata:{actor:t,timestamp:new Date().toISOString(),version:tl}}})})).ok}catch(s){return console.error("[IPE] Rhizome sync failed:",s),!1}}const Jr="pluribus.ipe.toggle",Vl=["off","inspect","edit"],Kr={off:"âœŽ",inspect:"ðŸ”",edit:"âœï¸"},Qr={off:"bg-black/50 text-muted-foreground border-glass-border hover:bg-black/80 hover:text-white hover:border-glass-border-hover",inspect:"glass-bg-accent-cyan text-black border-glass-accent-cyan shadow-[0_0_15px_rgba(0,255,255,0.4)]",edit:"glass-bg-accent-purple text-white border-glass-accent-purple shadow-[0_0_15px_rgba(168,85,247,0.4)]"},Ot={off:"IPE Off",inspect:"Inspect",edit:"Edit Mode"},Xr=()=>{const[l,t]=b(),s=(Vl.indexOf(l.value)+1)%Vl.length;l.value=Vl[s],t.onModeChange$?.(l.value),typeof window<"u"&&window.dispatchEvent(new CustomEvent("ipe:mode:change",{detail:{mode:l.value}}))},Zr=l=>{const[t,n]=b();if(l.button!==0)return;n.value=!0;const s=l.currentTarget.getBoundingClientRect();t.x=l.clientX-s.left,t.y=l.clientY-s.top},eo=l=>{const[t,n,s]=b();if(!n.value)return;const r=l,o=r.clientX-t.x,c=r.clientY-t.y;s.x=Math.max(0,Math.min(window.innerWidth-56,o)),s.y=Math.max(0,Math.min(window.innerHeight-56,c))},lo=()=>{const[l,t]=b();if(l.value){l.value=!1;try{localStorage.setItem(Jr,JSON.stringify({x:t.x,y:t.y}))}catch{}}},to=l=>{const t=y(l.initialMode??"off"),n=y(!1),s=y(!1),r=B({x:-1,y:-1}),o=B({x:0,y:0});D(_("s_ordfzHPRZiU",[r]));const c=p(Xr,"s_TwTvCy20ne8",[t,l]),u=p(Zr,"s_hq3KANe8UYU",[o,n]);return wt("document:mousemove",p(eo,"s_z890coOR6H8",[o,n,r])),wt("document:mouseup",p(lo,"s_TotNA4QjKFg",[n,r])),e("div",{style:r.x<0||r.y<0?{bottom:"24px",right:"24px"}:{left:`${r.x}px`,top:`${r.y}px`}},{class:i(d=>["fixed z-[9999] select-none",d.value?"cursor-grabbing":"cursor-grab"],[n],'["fixed z-[9999] select-none",p0.value?"cursor-grabbing":"cursor-grab"]')},[e("button",{class:["w-14 h-14 rounded-full shadow-lg transition-all duration-300","flex items-center justify-center text-xl backdrop-blur-md border-2",Qr[t.value],n.value?"scale-110 cursor-grabbing":"cursor-grab hover:scale-105"],title:`${Ot[t.value]} (Ctrl+Shift+I)`},{type:"button",onMouseDown$:u,onClick$:c,onMouseEnter$:_("s_iocTlh0Y0Qw",[s]),onMouseLeave$:_("s_XUrXtc6gsFI",[s])},[e("span",null,{class:"pointer-events-none"},Kr[t.value],1,null),t.value!=="off"&&e("span",null,{class:i(d=>["absolute inset-0 rounded-full border-2 animate-ping",d.value==="inspect"?"border-blue-400":"border-purple-400"],[t],'["absolute inset-0 rounded-full border-2 animate-ping",p0.value==="inspect"?"border-blue-400":"border-purple-400"]'),style:{animationDuration:"2s"}},null,3,"PN_0")],1,null),s.value&&!n.value&&e("div",null,{class:["absolute bottom-full mb-2 left-1/2 -translate-x-1/2","px-3 py-1.5 rounded-lg text-sm whitespace-nowrap","bg-gray-900/95 text-white shadow-xl","border border-[var(--glass-border)] backdrop-blur-sm"]},[e("div",null,{class:"font-medium"},Ot[t.value],1,null),e("div",null,{class:"text-xs text-gray-400 mt-0.5"},"Ctrl+Shift+I to toggle",3,null),e("div",null,{class:"absolute top-full left-1/2 -translate-x-1/2 -mt-px",style:{borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid rgb(17 24 39 / 0.95)"}},null,3,null)],1,"PN_1"),t.value!=="off"&&e("div",{class:["absolute -top-1 -right-1 px-2 py-0.5 rounded-full text-xs font-bold","shadow-lg border border-[var(--glass-border-active)]",t.value==="inspect"?"bg-blue-500 text-white":"bg-purple-500 text-white"]},null,i(d=>d.value==="inspect"?"I":"E",[t],'p0.value==="inspect"?"I":"E"'),3,"PN_2")],1,"PN_3")},no=E(p(to,"s_zVmVoLGTUzk")),so={visible:!1,x:0,y:0,width:0,height:0,tagName:"",componentName:"",instanceId:"",tokenCount:0,isShader:!1},ao=l=>{const t=B({...so}),n=B({visible:!1,x:0,y:0}),s=y(null),r=y(null);if(D(_("s_kXPu00W0wEc",[s,r,t,l,n])),l.mode==="off")return null;const o=l.mode==="inspect"?"border-[var(--glass-accent-cyan)]":"border-[var(--glass-accent-purple)]",c=l.mode==="inspect"?"bg-[var(--glass-accent-cyan-subtle)]":"bg-[var(--glass-accent-purple-bg)]";return e("div",null,{"data-ipe-ui":!0,class:"pointer-events-none fixed inset-0 z-[9998]"},[t.visible&&e("div",{class:["absolute border-2 transition-all duration-75 shadow-[0_0_20px_rgba(0,0,0,0.3)]",o,c]},{style:i(u=>({left:`${u.x}px`,top:`${u.y}px`,width:`${u.width}px`,height:`${u.height}px`}),[t],"{left:`${p0.x}px`,top:`${p0.y}px`,width:`${p0.width}px`,height:`${p0.height}px`}")},[e("div",{class:`absolute -top-1 -left-1 w-2 h-2 ${o.replace("border-","bg-")}`},null,null,3,null),e("div",{class:`absolute -top-1 -right-1 w-2 h-2 ${o.replace("border-","bg-")}`},null,null,3,null),e("div",{class:`absolute -bottom-1 -left-1 w-2 h-2 ${o.replace("border-","bg-")}`},null,null,3,null),e("div",{class:`absolute -bottom-1 -right-1 w-2 h-2 ${o.replace("border-","bg-")}`},null,null,3,null),e("div",null,{class:["absolute -bottom-6 left-0 px-1.5 py-0.5 text-xs font-mono","rounded bg-gray-900/90 text-gray-300"]},[Math.round(t.width)," Ã— ",Math.round(t.height)],1,null)],1,"TF_0"),n.visible&&t.visible&&e("div",null,{class:["absolute px-3 py-2 rounded-lg shadow-xl","glass-panel bg-black/80 text-white text-sm","border border-[var(--glass-border)] backdrop-blur-md","max-w-xs z-[9999]"],style:i(u=>({left:`${Math.min(u.x,window.innerWidth-200)}px`,top:`${Math.min(u.y,window.innerHeight-120)}px`}),[n],"{left:`${Math.min(p0.x,window.innerWidth-200)}px`,top:`${Math.min(p0.y,window.innerHeight-120)}px`}")},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"font-mono text-[var(--glass-accent-cyan)]"},["<",i(u=>u.tagName,[t],"p0.tagName"),">"],3,null),t.componentName&&e("span",null,{class:"px-1.5 py-0.5 rounded bg-[var(--glass-accent-purple-bg)] text-[var(--glass-accent-purple)] text-xs"},i(u=>u.componentName,[t],"p0.componentName"),3,"TF_1")],1,null),e("div",null,{class:"text-xs text-gray-400 mt-1 font-mono"},i(u=>u.instanceId,[t],"p0.instanceId"),3,null),e("div",null,{class:"flex gap-3 mt-2 text-xs"},[t.tokenCount>0&&e("span",null,{class:"text-green-400"},[i(u=>u.tokenCount,[t],"p0.tokenCount")," tokens"],3,"TF_2"),t.isShader&&e("span",null,{class:"text-orange-400"},"WebGL Shader",3,"TF_3")],1,null),l.mode==="edit"&&e("div",null,{class:"mt-2 pt-2 border-t border-[var(--glass-border)] text-xs text-gray-400"},"Click to edit",3,"TF_4")],1,"TF_5"),e("div",{class:["fixed top-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full","text-sm font-medium shadow-lg backdrop-blur-sm","border border-[var(--glass-border-active)]",l.mode==="inspect"?"bg-blue-600/90 text-white":"bg-purple-600/90 text-white"]},null,["IPE: ",i(u=>u.mode==="inspect"?"Inspect Mode":"Edit Mode",[l],'p0.mode==="inspect"?"Inspect Mode":"Edit Mode"'),e("span",null,{class:"ml-2 text-white/60 text-xs"},i(u=>u.mode==="inspect"?"Hover to inspect":"Click to edit",[l],'p0.mode==="inspect"?"Hover to inspect":"Click to edit"'),3,null)],3,null)],1,"TF_6")},ro=E(p(ao,"s_z6DIjhwrjlE")),oo=[{label:"Core Colors",tokens:[{key:"background",label:"Background",pair:"foreground"},{key:"foreground",label:"Foreground",pair:"background"},{key:"primary",label:"Primary",pair:"primary-foreground"},{key:"primary-foreground",label:"Primary FG",pair:"primary"},{key:"secondary",label:"Secondary",pair:"secondary-foreground"},{key:"secondary-foreground",label:"Secondary FG",pair:"secondary"}]},{label:"UI Colors",tokens:[{key:"muted",label:"Muted",pair:"muted-foreground"},{key:"muted-foreground",label:"Muted FG",pair:"muted"},{key:"accent",label:"Accent",pair:"accent-foreground"},{key:"accent-foreground",label:"Accent FG",pair:"accent"},{key:"destructive",label:"Destructive",pair:"destructive-foreground"},{key:"border",label:"Border"},{key:"ring",label:"Ring"}]},{label:"Card & Popover",tokens:[{key:"card",label:"Card",pair:"card-foreground"},{key:"card-foreground",label:"Card FG",pair:"card"},{key:"popover",label:"Popover",pair:"popover-foreground"},{key:"popover-foreground",label:"Popover FG",pair:"popover"}]},{label:"Dimensions",tokens:[{key:"radius",label:"Border Radius"},{key:"letter-spacing",label:"Letter Spacing"}]}],io=l=>{const[t]=b();t[l]=!t[l]},uo=(l,t)=>{const[n,s]=b();s[l]=t,n.onTokenChange$?.(l,t)},co=l=>{const[t,n]=b();return t(n.key,l)},po=l=>{const[t,n]=b();return t(n.key,l)},mo=l=>{const t=B(()=>zr(l.context));D(_("s_NLyi0U4kxiI",[l,t]));const n=B({"Core Colors":!0,"UI Colors":!1,"Card & Popover":!1,Dimensions:!1}),s=y(null),r=p(io,"s_zm92OnsLCaY",[n]),o=p(uo,"s_jbOA0Lud7MY",[l,t]);return e("div",null,{class:"space-y-4"},[e("div",{class:["px-3 py-2 rounded-lg text-sm",l.scope==="global"?"bg-orange-500/10 border border-orange-500/30 text-orange-300":"bg-blue-500/10 border border-blue-500/30 text-blue-300"]},null,i(c=>c.scope==="global"?"ðŸŒ Editing global design tokens":`ðŸ“ Editing instance: ${c.context.instanceId}`,[l],'p0.scope==="global"?"ðŸŒ Editing global design tokens":`ðŸ“ Editing instance: ${p0.context.instanceId}`'),3,null),oo.map(c=>e("div",null,{class:"rounded-lg bg-white/5 overflow-hidden"},[e("button",{onClick$:_("s_OJHacp9aO8M",[c,r])},{type:"button",class:"w-full flex items-center justify-between px-3 py-2 hover:bg-white/5 transition-colors"},[e("span",null,{class:"text-sm font-medium text-gray-300"},h(c,"label"),1,null),e("span",null,{class:"text-gray-500"},n[c.label]?"â–¼":"â–¶",1,null)],0,null),n[c.label]&&e("div",null,{class:"px-3 pb-3 space-y-2"},c.tokens.map(u=>{W();const m=t[u.key]||"",d=!["radius","letter-spacing","spacing"].includes(u.key),f=u.pair?t[u.pair]:void 0,v=d&&u.pair&&f?!qr(m,f):!1;return e("div",{class:["rounded-lg p-2 transition-colors",s.value===u.key?"bg-blue-500/20 ring-1 ring-blue-500/50":"bg-white/5 hover:bg-white/10"],onClick$:_("s_tHlHAacoHcs",[s,u])},null,[e("div",null,{class:"flex items-center justify-between mb-1"},[e("span",null,{class:"text-xs text-gray-400"},h(u,"label"),1,null),v&&e("span",null,{class:"text-xs text-yellow-400",title:"Low contrast ratio with paired color"},"âš ï¸ Low contrast",3,"gu_0")],1,null),d?g(fo,{value:m,onChange$:p(co,"s_hVi1gwwR08w",[o,u])},3,"gu_1"):g(yo,{value:m,onChange$:p(po,"s_TSsekP0oDuw",[o,u]),get tokenKey(){return u.key},[a]:{tokenKey:Me(u,"key")}},3,"gu_2")],0,u.key)}),1,"gu_3")],1,c.label)),Object.keys(t).length===0&&e("div",null,{class:"text-center py-8 text-gray-500"},["No design tokens found for this element.",e("br",null,null,null,3,null),e("span",null,{class:"text-xs"},"Try selecting an element that uses CSS variables.",3,null)],3,"gu_4")],1,"gu_5")},go=E(p(mo,"s_nwfO8QNqsF4")),vo=()=>{const[l,t,n,s]=b(),r=Ur(l.value,s.value,t.value);n.onChange$(r)},bo=l=>{const t=at(l.value),n=y(t?.h??0),s=y(t?.s??50),r=y(t?.l??50);D(_("s_diDfbNkKTWc",[n,r,l,s]));const o=p(vo,"s_jqAfwMK1IRs",[n,r,l,s]),c=`hsl(${n.value} ${s.value}% ${r.value}%)`;return e("div",null,{class:"space-y-2"},[e("div",null,{class:"flex items-center gap-2"},[e("div",{style:{backgroundColor:c}},{class:"w-8 h-8 rounded border border-[var(--glass-border-active)]"},null,3,null),e("input",null,{type:"text",value:i(u=>u.value,[l],"p0.value"),class:["flex-1 px-2 py-1 rounded text-xs font-mono","bg-black/30 border border-[var(--glass-border)] text-gray-300","focus:outline-none focus:border-blue-500/50"],onInput$:_("s_5n0xeFG0aJ8",[l])},null,3,null)],1,null),e("div",null,{class:"space-y-1"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-4 text-xs text-gray-500"},"H",3,null),e("input",null,{type:"range",min:"0",max:"360",value:i(u=>u.value,[n],"p0.value"),class:"flex-1 h-1.5 rounded appearance-none bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 via-cyan-500 via-blue-500 via-purple-500 to-red-500",onInput$:_("s_7xmUIA05FUw",[o,n])},null,3,null),e("span",null,{class:"w-8 text-xs text-gray-400 text-right"},[Math.round(n.value),"Â°"],1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-4 text-xs text-gray-500"},"S",3,null),e("input",null,{type:"range",min:"0",max:"100",value:i(u=>u.value,[s],"p0.value"),class:"flex-1 h-1.5 rounded appearance-none bg-gradient-to-r from-gray-500 to-blue-500",onInput$:_("s_qfn222M7LyQ",[o,s])},null,3,null),e("span",null,{class:"w-8 text-xs text-gray-400 text-right"},[Math.round(s.value),"%"],1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-4 text-xs text-gray-500"},"L",3,null),e("input",null,{type:"range",min:"0",max:"100",value:i(u=>u.value,[r],"p0.value"),class:"flex-1 h-1.5 rounded appearance-none bg-gradient-to-r from-black via-gray-500 to-white",onInput$:_("s_E23IPczmgEo",[o,r])},null,3,null),e("span",null,{class:"w-8 text-xs text-gray-400 text-right"},[Math.round(r.value),"%"],1,null)],1,null)],1,null)],1,"gu_6")},fo=E(p(bo,"s_guxNFn9lZV0")),xo=()=>{const[l,t,n]=b(),s=`${l.value}${n.value}`;t.onChange$(s)},ho=l=>{const t=l.value.match(/^([\d.]+)(.*)/),n=y(t?parseFloat(t[1]):0),s=y(t?.[2]||(l.tokenKey==="radius"?"rem":"")),r=l.tokenKey==="radius"?{min:0,max:2,step:.125,defaultUnit:"rem"}:{min:-.1,max:.2,step:.01,defaultUnit:"em"},o=p(xo,"s_unBYy05WDvc",[n,l,s]);return e("div",null,{class:"space-y-2"},[e("div",null,{class:"flex items-center gap-2"},[e("input",{step:h(r,"step")},{type:"number",value:i(c=>c.value,[n],"p0.value"),class:["w-20 px-2 py-1 rounded text-xs font-mono","bg-black/30 border border-[var(--glass-border)] text-gray-300","focus:outline-none focus:border-blue-500/50"],onInput$:_("s_lnBeoGg4Czw",[o,n])},null,3,null),e("select",null,{value:i(c=>c.value,[s],"p0.value"),class:["px-2 py-1 rounded text-xs","bg-black/30 border border-[var(--glass-border)] text-gray-300","focus:outline-none focus:border-blue-500/50"],onChange$:_("s_b0GxWZ68CQk",[o,s])},[e("option",null,{value:"rem"},"rem",3,null),e("option",null,{value:"px"},"px",3,null),e("option",null,{value:"em"},"em",3,null),e("option",null,{value:""},"none",3,null)],3,null)],1,null),e("input",{min:h(r,"min"),max:h(r,"max"),step:h(r,"step")},{type:"range",value:i(c=>c.value,[n],"p0.value"),class:"w-full h-1.5 rounded appearance-none bg-white/20",onInput$:_("s_4W4CUFTCA4U",[o,n])},null,3,null),l.tokenKey==="radius"&&e("div",null,{class:"flex justify-center"},e("div",null,{class:"w-12 h-12 bg-blue-500",style:i((c,u)=>({borderRadius:`${c.value}${u.value}`}),[n,s],"{borderRadius:`${p0.value}${p1.value}`}")},null,3,null),3,"gu_7")],1,"gu_8")},yo=E(p(ho,"s_Jgnco1JFAzA")),_o=l=>{const[t,n]=b();n.value=l,t.onShaderChange$?.(l)},wo=l=>{W();const t=y("uniforms"),n=y(l.context.shaderContext?.fragmentSource||""),s=y(null),r=l.context.elementType==="shader"||l.context.elementType==="canvas",o=l.context.shaderContext?.uniforms||{};return r?e("div",null,{class:"space-y-4"},[e("div",null,{class:"flex items-center justify-between p-3 rounded-lg bg-white/5"},[e("div",null,null,[e("div",null,{class:"text-sm font-medium text-gray-300"},"WebGL Shader",3,null),e("div",null,{class:"text-xs text-gray-500"},[i(c=>c.context.shaderContext?.canvasSize?.[0],[l],"p0.context.shaderContext?.canvasSize?.[0]")," Ã— ",i(c=>c.context.shaderContext?.canvasSize?.[1],[l],"p0.context.shaderContext?.canvasSize?.[1]")," â€¢ ","WebGL ",i(c=>c.context.shaderContext?.webglVersion,[l],"p0.context.shaderContext?.webglVersion")],3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},e("span",null,{class:"px-2 py-1 rounded bg-orange-500/20 text-orange-300 text-xs"},[h(Object.keys(o),"length")," uniforms"],1,null),1,null)],1,null),e("div",null,{class:"flex gap-1 p-1 rounded-lg bg-white/5"},["preview","uniforms","code"].map(c=>e("button",{class:["flex-1 px-3 py-1.5 rounded text-sm font-medium transition-colors",t.value===c?"bg-white/10 text-white":"text-gray-400 hover:text-white"],onClick$:_("s_n0BwaNzmCbI",[t,c])},{type:"button"},[c==="preview"&&"ðŸ‘ï¸ Preview",c==="uniforms"&&"ðŸŽ›ï¸ Uniforms",c==="code"&&"ðŸ“ GLSL"],0,c)),1,null),e("div",null,{class:"min-h-[200px]"},[t.value==="preview"&&g(Co,{get context(){return l.context},[a]:{context:i(c=>c.context,[l],"p0.context")}},3,"JF_1"),t.value==="uniforms"&&g(To,{uniforms:o,onUniformChange$:l.onUniformChange$},2,"JF_2"),t.value==="code"&&g(Oo,{get code(){return n.value},get error(){return s.value},onCodeChange$:p(_o,"s_Ihc59DjvD7M",[l,n]),[a]:{code:i(c=>c.value,[n],"p0.value"),error:i(c=>c.value,[s],"p0.value"),onCodeChange$:a}},3,"JF_3")],1,null),s.value&&e("div",null,{class:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 text-red-300 text-xs font-mono"},i(c=>c.value,[s],"p0.value"),3,"JF_4")],1,"JF_5"):e("div",null,{class:"text-center py-8 text-gray-500"},[e("div",null,{class:"text-4xl mb-4"},"ðŸŽ¨",3,null),e("div",null,null,"This element is not a shader/canvas.",3,null),e("div",null,{class:"text-xs mt-2"},"Select a WebGL canvas element to edit its shader.",3,null)],3,"JF_0")},ko=E(p(wo,"s_diUhpEfT4Fg")),So=l=>e("div",null,{class:"space-y-4"},[e("div",null,{class:"text-sm text-gray-400"},"Live shader preview coming in Phase 3",3,null),e("div",null,{class:"p-3 rounded-lg bg-black/30 space-y-2 text-xs"},[e("div",null,{class:"flex justify-between"},[e("span",null,{class:"text-gray-500"},"Canvas size:",3,null),e("span",null,{class:"text-gray-300 font-mono"},[i(t=>t.context.shaderContext?.canvasSize?.[0],[l],"p0.context.shaderContext?.canvasSize?.[0]")," Ã— ",i(t=>t.context.shaderContext?.canvasSize?.[1],[l],"p0.context.shaderContext?.canvasSize?.[1]")],3,null)],3,null),e("div",null,{class:"flex justify-between"},[e("span",null,{class:"text-gray-500"},"WebGL version:",3,null),e("span",null,{class:"text-gray-300 font-mono"},i(t=>t.context.shaderContext?.webglVersion,[l],"p0.context.shaderContext?.webglVersion"),3,null)],3,null),e("div",null,{class:"flex justify-between"},[e("span",null,{class:"text-gray-500"},"Active uniforms:",3,null),e("span",null,{class:"text-gray-300 font-mono"},i(t=>t.context.shaderContext?.programInfo?.activeUniforms,[l],"p0.context.shaderContext?.programInfo?.activeUniforms"),3,null)],3,null),e("div",null,{class:"flex justify-between"},[e("span",null,{class:"text-gray-500"},"Active attributes:",3,null),e("span",null,{class:"text-gray-300 font-mono"},i(t=>t.context.shaderContext?.programInfo?.activeAttributes,[l],"p0.context.shaderContext?.programInfo?.activeAttributes"),3,null)],3,null)],3,null),e("div",null,{class:["aspect-video rounded-lg overflow-hidden","bg-gradient-to-br from-purple-900/50 to-blue-900/50","flex items-center justify-center","border border-[var(--glass-border)]"]},e("div",null,{class:"text-center text-gray-500"},[e("div",null,{class:"text-2xl mb-2"},"ðŸŽ­",3,null),e("div",null,{class:"text-xs"},"Shader Preview",3,null)],3,null),3,null)],3,"JF_6"),Co=E(p(So,"s_FfPGcepi0Uo")),$o=l=>{const[t,n]=b();return n.onUniformChange$?.(t,l)},Io=l=>{const t=Object.entries(l.uniforms);return t.length===0?e("div",null,{class:"text-center py-8 text-gray-500"},[e("div",null,null,"No editable uniforms detected.",3,null),e("div",null,{class:"text-xs mt-2"},"Shader introspection may be limited.",3,null)],3,"JF_7"):e("div",null,{class:"space-y-3"},t.map(([n,s])=>g(Ao,{name:n,uniform:s,onChange$:p($o,"s_aie1nk0peLI",[n,l])},3,n)),1,"JF_8")},To=E(p(Io,"s_x4NV1lsLMaE")),Eo=l=>{const t=y(l.uniform.value),n=["vec2","vec3","vec4"].includes(l.uniform.type),s=n&&(l.name.toLowerCase().includes("color")||l.name.toLowerCase().includes("colour"));if(l.uniform.type==="float"||l.uniform.type==="int"){const r=typeof t.value=="number"?t.value:0,o=l.uniform.min??0,c=l.uniform.max??(l.uniform.type==="int"?100:10),u=l.uniform.step??(l.uniform.type==="int"?1:.01);return e("div",null,{class:"p-2 rounded-lg bg-white/5"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-xs font-mono text-orange-400"},i(m=>m.name,[l],"p0.name"),3,null),e("span",null,{class:"text-xs text-gray-500"},i(m=>m.uniform.type,[l],"p0.uniform.type"),3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("input",{min:o,max:c,step:u,value:r},{type:"range",class:"flex-1 h-1.5 rounded appearance-none bg-white/20",onInput$:_("s_A2Ie509AaMo",[l,t])},null,3,null),e("input",{value:r,step:u},{type:"number",class:["w-16 px-2 py-1 rounded text-xs font-mono text-right","bg-black/30 border border-[var(--glass-border)] text-gray-300"],onInput$:_("s_XxXOFxJDqZc",[l,t])},null,3,null)],1,null)],1,"JF_9")}if(n){const r=Array.isArray(t.value)?t.value:[0,0,0,0],o=l.uniform.type==="vec2"?2:l.uniform.type==="vec3"?3:4,c=["X","Y","Z","W"].slice(0,o);if(s&&o>=3){const u=Math.round(r[0]*255),m=Math.round(r[1]*255),d=Math.round(r[2]*255),f=`#${u.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`;return e("div",null,{class:"p-2 rounded-lg bg-white/5"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-xs font-mono text-orange-400"},i(v=>v.name,[l],"p0.name"),3,null),e("span",null,{class:"text-xs text-gray-500"},i(v=>v.uniform.type,[l],"p0.uniform.type"),3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("input",{value:f,onInput$:_("s_6cG1TqHFoMs",[l,t,r])},{type:"color",class:"w-8 h-8 rounded border border-[var(--glass-border-active)] cursor-pointer"},null,2,null),e("span",null,{class:"text-xs font-mono text-gray-300"},f,1,null)],1,null)],1,"JF_10")}return e("div",null,{class:"p-2 rounded-lg bg-white/5"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-xs font-mono text-orange-400"},i(u=>u.name,[l],"p0.name"),3,null),e("span",null,{class:"text-xs text-gray-500"},i(u=>u.uniform.type,[l],"p0.uniform.type"),3,null)],3,null),e("div",null,{class:"space-y-1"},c.map((u,m)=>e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-4 text-xs text-gray-500"},u,1,null),e("input",{value:r[m],onInput$:_("s_Hc8kpcOkIkw",[m,l,t,r])},{type:"range",min:-10,max:10,step:.01,class:"flex-1 h-1 rounded appearance-none bg-white/20"},null,2,null),e("span",null,{class:"w-12 text-xs text-gray-400 text-right font-mono"},r[m].toFixed(2),1,null)],1,u)),1,null)],1,"JF_11")}return e("div",null,{class:"p-2 rounded-lg bg-white/5"},[e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-xs font-mono text-orange-400"},i(r=>r.name,[l],"p0.name"),3,null),e("span",null,{class:"text-xs text-gray-500"},i(r=>r.uniform.type,[l],"p0.uniform.type"),3,null)],3,null),e("div",null,{class:"text-xs text-gray-500 mt-1"},JSON.stringify(l.uniform.value),1,null)],1,"JF_12")},Ao=E(p(Eo,"s_qRmKVOTRqFs")),Mo=l=>e("div",null,{class:"space-y-2"},[e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-xs text-gray-400"},"Fragment Shader (GLSL)",3,null),e("button",null,{type:"button",class:"px-2 py-1 rounded text-xs bg-white/10 hover:bg-white/20 text-gray-300 transition-colors",onClick$:_("s_K8lcODJogzc",[l])},"Copy",3,null)],3,null),e("textarea",{class:["w-full h-64 p-3 rounded-lg font-mono text-xs","bg-black/50 text-green-400","border border-[var(--glass-border)] focus:border-blue-500/50 focus:outline-none","resize-none",l.error?"border-red-500/50":""]},{value:i(t=>t.code,[l],"p0.code"),spellcheck:!1,onInput$:_("s_hOgn098ZHlo",[l])},null,3,null),e("div",null,{class:"p-2 rounded-lg bg-yellow-500/10 border border-yellow-500/30"},[e("div",null,{class:"text-yellow-300 text-xs font-medium"},"CodeMirror integration coming in Phase 3",3,null),e("div",null,{class:"text-yellow-200/70 text-xs mt-1"},"Full syntax highlighting and autocomplete for GLSL",3,null)],3,null)],1,"JF_13"),Oo=E(p(Mo,"s_yQs75rbFIWE")),Po=()=>{const[l,t]=b();navigator.clipboard.writeText(JSON.stringify(t.context,null,2)),l.value=!0,setTimeout(()=>{l.value=!1},2e3)},Lo=l=>{const t=y(!1),n=p(Po,"s_uiUEmlqTtzo",[t,l]);return e("div",null,{class:"space-y-3"},[e("div",null,{class:"flex items-center justify-between"},[e("div",null,{class:"text-sm text-gray-400"},"Raw Context (JSON)",3,null),e("button",null,{type:"button",class:i(s=>["px-3 py-1 rounded text-xs font-medium transition-all",s.value?"bg-green-600 text-white":"bg-white/10 hover:bg-white/20 text-gray-300"],[t],'["px-3 py-1 rounded text-xs font-medium transition-all",p0.value?"bg-green-600 text-white":"bg-white/10 hover:bg-white/20 text-gray-300"]'),onClick$:n},i(s=>s.value?"âœ“ Copied!":"Copy JSON",[t],'p0.value?"âœ“ Copied!":"Copy JSON"'),3,null)],3,null),e("pre",null,{class:["p-4 rounded-lg bg-black/50 overflow-auto","text-xs font-mono text-gray-300 leading-relaxed","max-h-[400px] border border-[var(--glass-border)]"]},g(No,{get data(){return l.context},[a]:{data:i(s=>s.context,[l],"p0.context")}},3,"98_0"),1,null),e("div",null,{class:"grid grid-cols-2 gap-2 text-xs"},[e("div",null,{class:"p-2 rounded bg-white/5"},[e("div",null,{class:"text-gray-500"},"Element Type",3,null),e("div",null,{class:"text-blue-400 font-mono"},i(s=>s.context.elementType,[l],"p0.context.elementType"),3,null)],3,null),e("div",null,{class:"p-2 rounded bg-white/5"},[e("div",null,{class:"text-gray-500"},"Instance ID",3,null),e("div",null,{class:"text-purple-400 font-mono truncate"},i(s=>s.context.instanceId,[l],"p0.context.instanceId"),3,null)],3,null),e("div",null,{class:"p-2 rounded bg-white/5"},[e("div",null,{class:"text-gray-500"},"CSS Variables",3,null),e("div",null,{class:"text-green-400 font-mono"},h(Object.keys(l.context.cssVariables),"length"),1,null)],1,null),e("div",null,{class:"p-2 rounded bg-white/5"},[e("div",null,{class:"text-gray-500"},"Tailwind Classes",3,null),e("div",null,{class:"text-orange-400 font-mono"},i(s=>s.context.tailwindClasses.length,[l],"p0.context.tailwindClasses.length"),3,null)],3,null)],1,null)],1,"98_1")},Do=E(p(Lo,"s_gcymipQXnOg")),Ro=l=>{const n=JSON.stringify(l.data,null,2).replace(/"([^"]+)":/g,'<span class="text-blue-400">"$1"</span>:').replace(/: "([^"]*?)"/g,': <span class="text-green-400">"$1"</span>').replace(/: (\d+\.?\d*)/g,': <span class="text-yellow-400">$1</span>').replace(/: (true|false)/g,': <span class="text-purple-400">$1</span>').replace(/: null/g,': <span class="text-gray-500">null</span>');return e("span",{dangerouslySetInnerHTML:n},null,null,3,"98_2")},No=E(p(Ro,"s_8woQURc9rC8")),jo="pluribus.ipe.panel",zo=[{id:"tokens",label:"Tokens",icon:"ðŸŽ¨"},{id:"artdept",label:"Art Dept",icon:"ðŸ–¼ï¸"},{id:"raw",label:"Raw",icon:"{ }"}],Bo=()=>{const[l]=b();try{localStorage.setItem(jo,JSON.stringify({x:l.x,y:l.y,width:l.width,height:l.height,activeTab:l.activeTab}))}catch{}},Uo=l=>{const[t,n]=b();l.target.closest("[data-no-drag]")||(n.isDragging=!0,t.x=l.clientX-n.x,t.y=l.clientY-n.y)},Fo=l=>{const[t,n]=b();n.isDragging&&(n.x=Math.max(0,Math.min(window.innerWidth-n.width,l.clientX-t.x)),n.y=Math.max(0,Math.min(window.innerHeight-50,l.clientY-t.y)))},qo=()=>{const[l,t]=b();t.isDragging&&(t.isDragging=!1,l())},Go=l=>{const[t,n]=b();l.stopPropagation(),n.isResizing=!0,t.x=l.clientX,t.y=l.clientY},Vo=l=>{const[t,n]=b();if(!n.isResizing)return;const s=l.clientX-t.x,r=l.clientY-t.y;n.width=Math.max(300,Math.min(800,n.width+s)),n.height=Math.max(400,Math.min(900,n.height+r)),t.x=l.clientX,t.y=l.clientY},Ho=()=>{const[l,t]=b();t.isResizing&&(t.isResizing=!1,l())},Wo=l=>{const[t,n]=b();n.activeTab=l,t()},Yo=()=>{const[l]=b();l.scope=l.scope==="global"?"instance":"global"},Jo=()=>{const[l]=b();l.onClose$?.()},Ko=()=>{const[l,t,n]=b();n.value={verdict:"PASSED",messages:["All checks passed"]},l.onSave$?.(t.scope,{}),t.hasChanges=!1},Qo=()=>{const[l]=b();l.hasChanges=!1},Xo=(l,t)=>{const[n]=b();n.hasChanges=!0,console.log("[IPE] Token changed:",l,t)},Zo=l=>{const[t]=b();t.hasChanges=!0,console.log("[IPE] Shader changed")},ei=(l,t)=>{const[n]=b();n.hasChanges=!0,console.log("[IPE] Uniform changed:",l,t)},li=l=>{W();const t=B({activeTab:"tokens",scope:"instance",isDragging:!1,isResizing:!1,x:-1,y:-1,width:380,height:520,hasChanges:!1}),n=B({x:0,y:0}),s=y(null);D(_("s_EClR44qYZ0M",[t]));const r=p(Bo,"s_sSTrpHSNNtI",[t]),o=p(Uo,"s_0ua4EmkAofs",[n,t]),c=p(Fo,"s_lrbnvFRdHqo",[n,t]),u=p(qo,"s_iQ18SYX24pY",[r,t]),m=p(Go,"s_5TFc903gEJg",[n,t]),d=p(Vo,"s_VAYI3X0B81A",[n,t]),f=p(Ho,"s_6vax9rrUi2k",[r,t]),v=p(Wo,"s_oAJSF080sD8",[r,t]),x=p(Yo,"s_uERQdmCPHrk",[t]),S=p(Jo,"s_kPEPv9z9zAE",[l]),M=p(Ko,"s_uDqyOhG9KBo",[l,t,s]),$=p(Qo,"s_2u65T5u0ZR0",[t]);return e("div",null,{"data-ipe-ui":!0,class:i(w=>["fixed z-[9999] flex flex-col","bg-gray-900/95 backdrop-blur-md rounded-xl shadow-2xl","border border-white/10",w.isDragging?"cursor-grabbing":""],[t],'["fixed z-[9999] flex flex-col","bg-gray-900/95 backdrop-blur-md rounded-xl shadow-2xl","border border-white/10",p0.isDragging?"cursor-grabbing":""]'),style:i(w=>({left:`${w.x}px`,top:`${w.y}px`,width:`${w.width}px`,height:`${w.height}px`}),[t],"{left:`${p0.x}px`,top:`${p0.y}px`,width:`${p0.width}px`,height:`${p0.height}px`}"),"document:onMouseMove$":[c,d],"document:onMouseUp$":[u,f]},[e("div",null,{class:["flex items-center justify-between px-4 py-3","border-b border-white/10 rounded-t-xl","bg-gray-800/50 cursor-grab"],onMouseDown$:o},[e("div",null,{class:"flex items-center gap-2 overflow-hidden"},[e("span",null,{class:"font-mono text-blue-400 text-sm"},["<",l.context.selector.split(" > ").pop(),">"],1,null),l.context.componentName&&e("span",null,{class:"px-2 py-0.5 rounded bg-purple-500/30 text-purple-300 text-xs truncate"},i(w=>w.context.componentName,[l],"p0.context.componentName"),3,"aQ_0")],1,null),e("button",null,{"data-no-drag":!0,type:"button",class:"p-1 rounded hover:bg-white/10 text-gray-400 hover:text-white transition-colors",title:"Close (Esc)",onClick$:S},e("svg",null,{class:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor"},e("path",null,{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,3,null),3,null),3,null)],1,null),e("div",null,{class:"flex gap-1 px-3 py-2 border-b border-white/10"},zo.map(w=>e("button",{class:["px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",t.activeTab===w.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-white/10"],onClick$:_("s_6CEC0YVkeGo",[v,w])},{type:"button"},[e("span",null,{class:"mr-1.5"},h(w,"icon"),1,null),h(w,"label")],0,w.id)),1,null),e("div",null,{class:"flex-1 overflow-auto p-4"},[t.activeTab==="tokens"&&g(go,{get context(){return l.context},get scope(){return t.scope},onTokenChange$:p(Xo,"s_25VjoYU4bUE",[t]),[a]:{context:i(w=>w.context,[l],"p0.context"),scope:i(w=>w.scope,[t],"p0.scope"),onTokenChange$:a}},3,"aQ_1"),t.activeTab==="artdept"&&g(ko,{get context(){return l.context},onShaderChange$:p(Zo,"s_LEoDqXP4nqU",[t]),onUniformChange$:p(ei,"s_gTtc5X6K9DQ",[t]),[a]:{context:i(w=>w.context,[l],"p0.context"),onShaderChange$:a,onUniformChange$:a}},3,"aQ_2"),t.activeTab==="raw"&&g(Do,{get context(){return l.context},[a]:{context:i(w=>w.context,[l],"p0.context")}},3,"aQ_3")],1,null),e("div",null,{class:"flex items-center justify-between px-4 py-3 border-t border-white/10 bg-gray-800/30"},[e("button",{class:["px-3 py-1.5 rounded-lg text-sm font-medium transition-colors","border border-white/20",t.scope==="global"?"bg-orange-600/30 text-orange-300 border-orange-500/50":"bg-blue-600/30 text-blue-300 border-blue-500/50"]},{"data-no-drag":!0,type:"button",title:"Toggle scope",onClick$:x},i(w=>w.scope==="global"?"ðŸŒ Global":"ðŸ“ Instance",[t],'p0.scope==="global"?"ðŸŒ Global":"ðŸ“ Instance"'),3,null),e("div",null,{class:"flex gap-2"},[e("button",null,{"data-no-drag":!0,type:"button",class:"px-3 py-1.5 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-white/10 transition-colors",disabled:i(w=>!w.hasChanges,[t],"!p0.hasChanges"),onClick$:$},"Reset",3,null),e("button",{class:["px-4 py-1.5 rounded-lg text-sm font-medium transition-colors",t.hasChanges?"bg-green-600 text-white hover:bg-green-500":"bg-gray-700 text-gray-400 cursor-not-allowed"]},{"data-no-drag":!0,type:"button",disabled:i(w=>!w.hasChanges,[t],"!p0.hasChanges"),onClick$:M},"Save",3,null)],1,null)],1,null),s.value&&e("div",{class:["absolute bottom-16 left-4 right-4 px-3 py-2 rounded-lg text-sm",s.value.verdict==="PASSED"?"bg-green-600/20 text-green-300 border border-green-500/30":s.value.verdict==="WARNED"?"bg-yellow-600/20 text-yellow-300 border border-yellow-500/30":"bg-red-600/20 text-red-300 border border-red-500/30"]},null,[e("div",null,{class:"font-medium"},["Sextet: ",i(w=>w.value.verdict,[s],"p0.value.verdict")],3,null),e("div",null,{class:"text-xs mt-1 opacity-80"},s.value.messages.join(" â€¢ "),1,null)],1,"aQ_4"),e("div",null,{"data-no-drag":!0,class:"absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown$:m},e("svg",null,{class:"w-4 h-4 text-gray-600",viewBox:"0 0 16 16",fill:"currentColor"},e("path",null,{d:"M14 14v-2h-2v2h2zm-4 0v-2h-2v2h2zm4-4v-2h-2v2h2z"},null,3,null),3,null),3,null)],1,"aQ_5")},ti=E(p(li,"s_Y0eIE2re0tI")),ni=l=>{const[t,n]=b();t.value=l,l==="off"&&(n.value=null)},si=l=>{const[t]=b();t.value=l},ai=()=>{const[l]=b();l.value=null},ri=(l,t)=>{const[n]=b();if(!n.value)return;const{styles:s}=t;if(!s)return;const r=n.value.instanceId,o=mn(r,s),c="ipe-preview";let u=document.getElementById(c);u||(u=document.createElement("style"),u.id=c,document.head.appendChild(u)),u.textContent=o},oi=(l,t)=>{const[n]=b();console.log("[IPE] Save:",{scope:l,changes:t});const{styles:s,purpose:r}=t;if(n.value&&s){const o=n.value.instanceId;Hr({instanceId:o,selector:n.value.selector,styles:s,purpose:r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});const c=mn(o,s),m=document.getElementById("ipe-overrides");m&&(m.textContent+=c),Yr({actor:"ipe-user"}).catch(d=>console.error("[IPE] Rhizome sync failed:",d))}typeof window<"u"&&window.dispatchEvent(new CustomEvent("ipe:save",{detail:{scope:l,changes:t,context:n.value}})),n.value=null},ii=l=>{W();const t=y("off"),n=y(null);D(_("s_Kar5U7MSEJ4")),D(_("s_45jLcdbed00",[t,n]));const s=p(ni,"s_UqC4r5VRLgg",[t,n]),r=p(si,"s_KX0uPhYzacA",[n]),o=p(ai,"s_DgwNRd35VB8",[n]),c=p(ri,"s_tUNcCAr0LyI",[n]),u=p(oi,"s_CiGxBo10F08",[n]);return l.enabled??!0?g(ue,{children:[g(no,{get initialMode(){return t.value},onModeChange$:s,[a]:{initialMode:i(m=>m.value,[t],"p0.value"),onModeChange$:a}},3,"7k_0"),g(ro,{get mode(){return t.value},onSelect$:r,[a]:{mode:i(m=>m.value,[t],"p0.value"),onSelect$:a}},3,"7k_1"),n.value&&g(ti,{get context(){return n.value},onClose$:o,onSave$:u,onPreview$:c,[a]:{context:i(m=>m.value,[n],"p0.value"),onClose$:a,onSave$:a,onPreview$:a}},3,"7k_2")]},1,"7k_3"):null},ui=E(p(ii,"s_q0phtz9n0UE")),ci=()=>{const l=ps(),t=y(null);return D(_("s_Ugdd0J0kQBE",[t,l])),l.state.isConsoleOpen?e("div",null,{class:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-md p-8 animate-in fade-in duration-200",onClick$:_("s_wP1WXoy2E3Q",[l])},e("div",null,{class:"w-full max-w-6xl h-[85vh] bg-background/90 border border-white/10 rounded-2xl shadow-2xl overflow-hidden relative flex flex-col"},[e("button",{onClick$:l.toggleConsole},{class:"absolute top-4 right-4 z-10 p-2 hover:bg-white/10 rounded-full text-white/50 hover:text-white transition-colors"},e("svg",null,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",null,{x1:"18",y1:"6",x2:"6",y2:"18"},null,3,null),e("line",null,{x1:"6",y1:"6",x2:"18",y2:"18"},null,3,null)],3,null),2,null),t.value?g(t.value,null,3,"b2_0"):e("div",null,{class:"flex items-center justify-center h-full text-cyan-400 font-mono tracking-widest animate-pulse"},"INITIALIZING_NEURAL_INTERFACE...",3,null)],1,null),1,"b2_1"):null},vn=E(p(ci,"s_oWCUBIodStk")),di=()=>{const[l]=b();return l.value>2?"focused":"calm"},pi=l=>{const[t]=b();t.value=l},mi=()=>{const[l]=b();return l.value=!0},gi=()=>{const[l]=b();return l.value=!1},vi=()=>{const l=y(!1),t=y(0),n=y(.1),s=y("m"),r=N(p(di,"s_DrEY0wviEA8",[t])),o=y(!1),c=y({});is(dt,{authOverlayOpen:o,providerStatus:c,flowMode:s,setFlowMode$:p(pi,"s_WUnLaEOVRew",[s])}),D(_("s_HIeAz99HJo4",[l,n,t])),D(_("s_OBqzZ1gXJeY"));const u=p(mi,"s_J462MKXhcic",[o]),m=p(gi,"s_TJ7RaykkMNM",[o]),d=B({transitioning:!1,direction:"enter"});return D(_("s_i0eZ0kqEXkA")),g(ms,{children:e("div",null,{class:"h-screen flex flex-col overflow-hidden relative glass-layout-root"},[e("div",null,{class:"glass-aurora-bg fixed inset-0 z-0 pointer-events-none","aria-hidden":"true"},null,3,null),e("div",null,{class:"glass-layout-noise fixed inset-0 z-[1] pointer-events-none opacity-[0.03]","aria-hidden":"true"},null,3,null),e("div",null,{class:"glass-layout-atmosphere fixed inset-0 z-[2] pointer-events-none","aria-hidden":"true"},null,3,null),g(Cr,{get entropy(){return n.value},get mood(){return r.value},requestScene:!0,[a]:{entropy:i(f=>f.value,[n],"p0.value"),mood:i(f=>f.value,[r],"p0.value"),requestScene:a}},3,"4j_0"),g(wr,null,3,"4j_1"),e("div",null,{class:"relative z-10 flex flex-col h-full glass-content-wrapper"},[g(F,{id:"comp:header",children:g(ba,{get connected(){return l.value},get workerCount(){return t.value},get mood(){return r.value},get entropy(){return n.value},get providerStatus(){return c.value},onOpenAuth$:u,[a]:{connected:i(f=>f.value,[l],"p0.value"),workerCount:i(f=>f.value,[t],"p0.value"),mood:i(f=>f.value,[r],"p0.value"),entropy:i(f=>f.value,[n],"p0.value"),providerStatus:i(f=>f.value,[c],"p0.value"),onOpenAuth$:a}},3,"4j_2"),[a]:{id:a}},1,"4j_3"),e("main",{class:["flex-1 min-h-0 overflow-hidden relative","glass-main-content",d.transitioning&&d.direction==="enter"?"glass-page-transition-enter":"",d.transitioning&&d.direction==="exit"?"glass-page-transition-exit":""].filter(Boolean).join(" ")},null,g(xe,null,3,"4j_4"),1,null),g(Va,null,3,"4j_5")],1,null),g(ui,{enabled:!0,[a]:{enabled:a}},3,"4j_6"),g(vn,null,3,"4j_7"),g(or,{get open(){return o.value},get providerStatus(){return c.value},onClose$:m,[a]:{open:i(f=>f.value,[o],"p0.value"),providerStatus:i(f=>f.value,[c],"p0.value"),onClose$:a}},3,"4j_8"),g(Lr,null,3,"4j_9")],1,null)},1,"4j_10")},bi=E(p(vi,"s_yOoNGD0OrVA")),fi=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"}));function nl(l){return typeof l!="string"?{valid:!1,error:"serviceId must be a string"}:l.length===0?{valid:!1,error:"serviceId cannot be empty"}:l.length>128?{valid:!1,error:"serviceId cannot exceed 128 characters"}:/^[a-zA-Z0-9_-]+$/.test(l)?{valid:!0}:{valid:!1,error:"serviceId can only contain alphanumeric characters, hyphens, and underscores"}}function xi(l){return l==null?{valid:!0,value:50}:typeof l!="number"||!Number.isInteger(l)?{valid:!1,value:50,error:"lines must be an integer"}:l<1?{valid:!1,value:50,error:"lines must be at least 1"}:l>1e4?{valid:!1,value:50,error:"lines cannot exceed 10000"}:{valid:!0,value:l}}function bn(l){if(l==null)return{valid:!0,value:[]};if(!Array.isArray(l))return{valid:!1,value:[],error:"args must be an array"};for(let t=0;t<l.length;t++){if(typeof l[t]!="string")return{valid:!1,value:[],error:`args[${t}] must be a string`};if(l[t].length>1e3)return{valid:!1,value:[],error:`args[${t}] exceeds maximum length of 1000`}}return{valid:!0,value:l}}function fn(l){if(l==null)return{valid:!0,value:"auto"};if(typeof l!="string")return{valid:!1,value:"auto",error:"provider must be a string"};const t=["auto","mock","gemini-web","claude-web","chatgpt-web","codex","codex-cli","gemini","gemini-cli","claude","claude-api","claude-cli","vertex","vertex-curl","vertex-gemini","vertex-gemini-curl","vllm-local","ollama-local","tensorzero"];return t.includes(l)?{valid:!0,value:l}:{valid:!1,value:"auto",error:`provider must be one of: ${t.join(", ")}`}}function hi(l,t={}){const n={bus:l,actor:t.actor||"dashboard",responseTimeoutMs:t.responseTimeoutMs||3e4,pendingResponses:new Map};return l.onResponse,{"service.start":wi(n),"service.stop":ki(n),"service.restart":Si(n),"service.logs":Ci(n),"composition.run":$i(n),"curation.trigger":Ii(n),"worker.spawn":Ti(n),"verify.run":Ei(n),"command.send":Ai(n),"sota.distill":yi(n),"sota.kg.add":_i(n)}}function xn(l){return typeof l!="string"||l.length===0?{valid:!1,error:"itemId must be a non-empty string"}:l.length>128?{valid:!1,error:"itemId cannot exceed 128 characters"}:{valid:!0}}function yi(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=xn(u.itemId);if(!m.valid){r({type:"error",content:`Validation error: ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=u.itemId,f=fn(u.provider),v=f.valid?f.value:"chatgpt-web";c("streaming"),r({type:"text",content:`Queueing SOTA distill: ${d}`,timestamp:Date.now()});try{await me(l,"catalog.action","request",{request_id:t.id,kind:"sota.distill",item_id:d,provider_hint:v,actor:l.actor,timestamp:Date.now()},s?.timeout),r({type:"json",content:{status:"queued",itemId:d,provider:v},timestamp:Date.now(),metadata:{title:"SOTA Distill Queued"}}),o()}catch(x){const S=x instanceof Error?x.message:String(x);r({type:"error",content:`Failed to queue distill: ${S}`,timestamp:Date.now()}),o(S)}}}function _i(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=xn(u.itemId);if(!m.valid){r({type:"error",content:`Validation error: ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=u.itemId;if(typeof u.ref!="string"||u.ref.length===0){r({type:"error",content:"Validation error: ref is required",timestamp:Date.now()}),o("ref is required");return}c("streaming"),r({type:"text",content:`Linking SOTA item to KG: ${d}`,timestamp:Date.now()});try{await me(l,"catalog.action","request",{request_id:t.id,kind:"sota.kg.add",item_id:d,ref:u.ref,actor:l.actor,timestamp:Date.now()},s?.timeout),r({type:"json",content:{status:"queued",itemId:d},timestamp:Date.now(),metadata:{title:"KG Link Queued"}}),o()}catch(f){const v=f instanceof Error?f.message:String(f);r({type:"error",content:`Failed to link KG: ${v}`,timestamp:Date.now()}),o(v)}}}function wi(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=nl(u.serviceId);if(!m.valid){r({type:"error",content:`Validation error: ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=u.serviceId,f=bn(u.args);if(!f.valid){r({type:"error",content:`Validation error: ${f.error}`,timestamp:Date.now()}),o(f.error);return}c("streaming"),r({type:"text",content:`Starting service: ${d}`,timestamp:Date.now()});try{r({type:"text",content:"Checking service status...",timestamp:Date.now()});const v={service_id:d,request_id:t.id,args:f.value,env:u.env||{},actor:l.actor,timestamp:Date.now()};await me(l,"service.control","start",v,s?.timeout),r({type:"json",content:{status:"starting",serviceId:d,requestId:t.id,args:f.value.length>0?f.value:void 0},timestamp:Date.now(),metadata:{title:"Service Start Request"}}),r({type:"text",content:`Start request sent for ${d}. Service should be available shortly.`,timestamp:Date.now()}),o()}catch(v){const x=v instanceof Error?v.message:String(v);r({type:"error",content:`Failed to start service: ${x}`,timestamp:Date.now()}),o(x)}}}function ki(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=nl(u.serviceId);if(!m.valid){r({type:"error",content:`Validation error: ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=u.serviceId;c("streaming"),r({type:"text",content:`Stopping service: ${d}${u.force?" (force)":""}`,timestamp:Date.now()});try{const f={service_id:d,request_id:t.id,force:!!u.force,grace_period_ms:u.gracePeriodMs||5e3,actor:l.actor,timestamp:Date.now()};await me(l,"service.control","stop",f,s?.timeout),r({type:"json",content:{status:"stopping",serviceId:d,force:u.force||!1},timestamp:Date.now(),metadata:{title:"Service Stop Request"}}),r({type:"text",content:`Stop request sent for ${d}.`,timestamp:Date.now()}),o()}catch(f){const v=f instanceof Error?f.message:String(f);r({type:"error",content:`Failed to stop service: ${v}`,timestamp:Date.now()}),o(v)}}}function Si(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=nl(u.serviceId);if(!m.valid){r({type:"error",content:`Validation error: ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=u.serviceId;c("streaming"),r({type:"text",content:`Restarting service: ${d}`,timestamp:Date.now()});try{r({type:"progress",content:"Stopping service...",timestamp:Date.now(),metadata:{progress:25,total:100}}),await me(l,"service.control","stop",{service_id:d,request_id:`${t.id}-stop`,actor:l.actor,timestamp:Date.now()},s?.timeout),await Pt(500),r({type:"progress",content:"Service stopped, starting...",timestamp:Date.now(),metadata:{progress:50,total:100}}),await me(l,"service.control","start",{service_id:d,request_id:`${t.id}-start`,actor:l.actor,timestamp:Date.now()},s?.timeout),r({type:"progress",content:"Service starting...",timestamp:Date.now(),metadata:{progress:75,total:100}}),await Pt(500),r({type:"progress",content:"Restart complete",timestamp:Date.now(),metadata:{progress:100,total:100}}),r({type:"json",content:{status:"restarted",serviceId:d,requestId:t.id},timestamp:Date.now(),metadata:{title:"Service Restarted"}}),o()}catch(f){const v=f instanceof Error?f.message:String(f);r({type:"error",content:`Failed to restart service: ${v}`,timestamp:Date.now()}),o(v)}}}function Ci(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=nl(u.serviceId);if(!m.valid){r({type:"error",content:`Validation error: ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=u.serviceId,f=xi(u.lines);if(!f.valid){r({type:"error",content:`Validation error: ${f.error}`,timestamp:Date.now()}),o(f.error);return}c("streaming"),r({type:"text",content:`Fetching logs for ${d} (last ${f.value} lines)`,timestamp:Date.now()});try{await me(l,"service.control","logs",{service_id:d,request_id:t.id,lines:f.value,follow:!!u.follow,actor:l.actor,timestamp:Date.now()},s?.timeout),r({type:"code",content:`[Waiting for log stream from ${d}...]
[Logs will appear here when service responds]`,timestamp:Date.now(),metadata:{language:"log",title:`${d} logs`}}),o()}catch(v){const x=v instanceof Error?v.message:String(v);r({type:"error",content:`Failed to fetch logs: ${x}`,timestamp:Date.now()}),o(x)}}}function $i(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=nl(u.compositionId);if(!m.valid){r({type:"error",content:`Validation error: compositionId - ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=u.compositionId,f=bn(u.args);if(!f.valid){r({type:"error",content:`Validation error: ${f.error}`,timestamp:Date.now()}),o(f.error);return}c("streaming"),r({type:"text",content:`Running composition: ${d}${u.dryRun?" (dry-run)":""}`,timestamp:Date.now()}),f.value.length>0&&r({type:"json",content:{args:f.value},timestamp:Date.now(),metadata:{title:"Arguments"}});try{r({type:"progress",content:"Initializing composition...",timestamp:Date.now(),metadata:{progress:0,total:100}}),await me(l,"composition.control","run",{composition_id:d,request_id:t.id,args:f.value,dry_run:!!u.dryRun,actor:l.actor,timestamp:Date.now()},s?.timeout||6e4),r({type:"progress",content:"Composition started",timestamp:Date.now(),metadata:{progress:10,total:100}}),r({type:"json",content:{status:"running",compositionId:d,requestId:t.id,dryRun:u.dryRun||!1},timestamp:Date.now(),metadata:{title:"Composition Started"}}),o()}catch(v){const x=v instanceof Error?v.message:String(v);r({type:"error",content:`Failed to run composition: ${x}`,timestamp:Date.now()}),o(x)}}}function Ii(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload;c("streaming"),r({type:"text",content:`Triggering curation workflow${u.source?` (source: ${u.source})`:""}`,timestamp:Date.now()});try{await me(l,"curation","trigger",{request_id:t.id,source:u.source||"dashboard",force:!!u.force,actor:l.actor,timestamp:Date.now()},s?.timeout),r({type:"json",content:{status:"triggered",requestId:t.id,source:u.source||"dashboard",timestamp:new Date().toISOString()},timestamp:Date.now(),metadata:{title:"Curation Triggered"}}),r({type:"text",content:"Curation workflow triggered. Results will appear in event stream.",timestamp:Date.now()}),o()}catch(m){const d=m instanceof Error?m.message:String(m);r({type:"error",content:`Failed to trigger curation: ${d}`,timestamp:Date.now()}),o(d)}}}function Ti(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload,m=fn(u.provider);if(!m.valid){r({type:"error",content:`Validation error: ${m.error}`,timestamp:Date.now()}),o(m.error);return}const d=typeof u.count=="number"&&u.count>=1&&u.count<=10?Math.floor(u.count):1;c("streaming"),r({type:"text",content:`Spawning ${d} worker${d>1?"s":""} with provider: ${m.value}`,timestamp:Date.now()});try{await me(l,"worker","spawn",{request_id:t.id,provider:m.value,topic:u.topic,count:d,actor:l.actor,timestamp:Date.now()},s?.timeout),r({type:"json",content:{status:"spawning",provider:m.value,topic:u.topic,count:d,requestId:t.id},timestamp:Date.now(),metadata:{title:"Worker Spawn Request"}}),r({type:"text",content:"Worker spawn request sent. Worker(s) will appear in agent status.",timestamp:Date.now()}),o()}catch(f){const v=f instanceof Error?f.message:String(f);r({type:"error",content:`Failed to spawn worker: ${v}`,timestamp:Date.now()}),o(v)}}}function Ei(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload;c("streaming"),r({type:"text",content:u.target?`Running verification on: ${u.target}`:"Running full system verification...",timestamp:Date.now()});try{r({type:"progress",content:"Initializing verification...",timestamp:Date.now(),metadata:{progress:0,total:100}}),await me(l,"verify","run",{request_id:t.id,target:u.target,quick:!!u.quick,actor:l.actor,timestamp:Date.now()},s?.timeout||12e4),r({type:"progress",content:"Verification in progress...",timestamp:Date.now(),metadata:{progress:10,total:100}}),r({type:"json",content:{status:"running",target:u.target||"all",quick:u.quick||!1,requestId:t.id},timestamp:Date.now(),metadata:{title:"Verification Started"}}),r({type:"text",content:"Verification started. Results will stream via VOR reports.",timestamp:Date.now()}),o()}catch(m){const d=m instanceof Error?m.message:String(m);r({type:"error",content:`Failed to run verification: ${d}`,timestamp:Date.now()}),o(d)}}}function Ai(l){return async(t,n,s)=>{const{onOutput:r,onComplete:o,onStatusChange:c}=n,u=t.payload;if(typeof u.topic!="string"||u.topic.length===0){r({type:"error",content:"Validation error: topic is required and must be a non-empty string",timestamp:Date.now()}),o("topic is required");return}if(u.topic.length>128){r({type:"error",content:"Validation error: topic cannot exceed 128 characters",timestamp:Date.now()}),o("topic too long");return}if(typeof u.kind!="string"||u.kind.length===0){r({type:"error",content:"Validation error: kind is required and must be a non-empty string",timestamp:Date.now()}),o("kind is required");return}const m=typeof u.data=="object"&&u.data!==null?u.data:{};c("streaming"),r({type:"text",content:`Sending command: ${u.topic}/${u.kind}`,timestamp:Date.now()}),r({type:"json",content:m,timestamp:Date.now(),metadata:{title:"Payload"}});try{await me(l,u.topic,u.kind,{request_id:t.id,...m,actor:l.actor,timestamp:Date.now()},s?.timeout),r({type:"text",content:`Command sent successfully to ${u.topic}/${u.kind}`,timestamp:Date.now()}),r({type:"json",content:{status:"sent",topic:u.topic,kind:u.kind,requestId:t.id},timestamp:Date.now(),metadata:{title:"Command Sent"}}),o()}catch(d){const f=d instanceof Error?d.message:String(d);r({type:"error",content:`Failed to send command: ${f}`,timestamp:Date.now()}),o(f)}}}async function me(l,t,n,s,r){const o=r||l.responseTimeoutMs,c=Promise.resolve(l.bus.emit(t,n,s)),u=new Promise((m,d)=>{setTimeout(()=>{d(new Error(`Bus emit timed out after ${o}ms`))},o)});await Promise.race([c,u])}function Pt(l){return new Promise(t=>setTimeout(t,l))}const Mi={idle:"bg-gray-500",pending:"bg-yellow-500 animate-pulse",streaming:"bg-blue-500 animate-pulse",success:"bg-green-500",error:"bg-red-500"},Oi={text:"ðŸ“",code:"ðŸ’»",json:"ðŸ“¦",table:"ðŸ“Š",progress:"â³",error:"âŒ"},Pi=()=>{const[l]=b();return l.cell.result?.status||"idle"},Li=()=>{const[l]=b();return l.cell.result?.outputs||[]},Di=()=>{const[l]=b();return l.cell.result?.events||[]},Ri=()=>{const[l]=b();return l.value.filter(t=>t.kind==="artifact"||t.data&&typeof t.data=="object"&&"file_path"in t.data)},Ni=()=>{const[l]=b();return l.cell.result?.startedAt?(((l.cell.result.completedAt||Date.now())-l.cell.result.startedAt)/1e3).toFixed(2):null},ji=l=>{const t=N(p(Pi,"s_LlVNI0Yb7y4",[l])),n=N(p(Li,"s_AGpTBG9Zw74",[l])),s=N(p(Di,"s_sqyJPCDBjUU",[l])),r=N(p(Ri,"s_0IkUlIpsQow",[s])),o=N(p(Ni,"s_nwm4Jzmdb0M",[l]));return e("div",null,{class:"output-cell glass-surface glass-border-card rounded-lg mb-4 overflow-hidden"},[e("div",{onClick$:l.onToggleCollapse$},{class:"cell-header flex items-center justify-between px-4 py-2 bg-[var(--glass-bg-card)] border-b border-[var(--glass-border)] cursor-pointer hover:bg-[var(--glass-bg-hover)] transition-colors"},[e("div",null,{class:"flex items-center gap-3"},[e("div",{class:`w-2 h-2 rounded-full ${Mi[t.value]}`},null,null,3,null),e("span",null,{class:"text-xs font-mono bg-cyan-500/20 text-cyan-300 px-2 py-0.5 rounded"},i(c=>c.cell.request.type,[l],"p0.cell.request.type"),3,null),e("span",null,{class:"text-xs text-[var(--glass-text-tertiary)]"},new Date(l.cell.request.timestamp).toLocaleTimeString(),1,null)],1,null),e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"text-[11px] px-2 py-0.5 rounded bg-[var(--glass-bg-card)] border border-[var(--glass-border)] text-[var(--glass-text-secondary)]"},i(c=>c.cell.activeTab,[l],"p0.cell.activeTab"),3,null),o.value&&e("span",null,{class:"text-xs text-[var(--glass-text-tertiary)]"},[i(c=>c.value,[o],"p0.value"),"s"],3,"3C_0"),e("span",null,{class:"text-xs text-[var(--glass-text-tertiary)]"},[i(c=>c.value.length,[n],"p0.value.length")," output",i(c=>c.value.length!==1?"s":"",[n],'p0.value.length!==1?"s":""')],3,null),r.value.length>0&&e("span",null,{class:"text-xs text-yellow-500/60"},[i(c=>c.value.length,[r],"p0.value.length")," artifact",i(c=>c.value.length!==1?"s":"",[r],'p0.value.length!==1?"s":""')],3,"3C_1"),e("span",null,{class:"text-xs text-[var(--glass-text-tertiary)]"},[i(c=>c.value.length,[s],"p0.value.length")," event",i(c=>c.value.length!==1?"s":"",[s],'p0.value.length!==1?"s":""')],3,null),e("span",null,{class:"text-[var(--glass-text-tertiary)]"},i(c=>c.cell.collapsed?"â–¶":"â–¼",[l],'p0.cell.collapsed?"â–¶":"â–¼"'),3,null)],1,null)],0,null),!l.cell.collapsed&&e("div",null,{class:"cell-body"},[e("div",null,{class:"px-4 py-2 border-b border-[var(--glass-border)] bg-[var(--glass-bg-card)] flex items-center justify-between gap-3"},[e("div",null,{class:"flex items-center gap-2"},[e("button",{class:`text-xs px-2 py-1 rounded border transition-colors ${l.cell.activeTab==="outputs"?"bg-cyan-500/20 border-[var(--glass-accent-cyan-subtle)] text-cyan-200":"bg-[var(--glass-bg-card)] border-[var(--glass-border)] text-[var(--glass-text-secondary)] hover:bg-[var(--glass-bg-hover)]"}`},{onClick$:_("s_6TVztywrSZQ",[l])},"Outputs",3,null),e("button",{class:`text-xs px-2 py-1 rounded border transition-colors ${l.cell.activeTab==="artifacts"?"bg-yellow-500/20 border-[var(--glass-accent-amber-subtle)] text-yellow-200":"bg-[var(--glass-bg-card)] border-[var(--glass-border)] text-[var(--glass-text-secondary)] hover:bg-[var(--glass-bg-hover)]"}`},{onClick$:_("s_H5XNLdVS0hQ",[l])},"Artifacts",3,null),e("button",{class:`text-xs px-2 py-1 rounded border transition-colors ${l.cell.activeTab==="trace"?"bg-purple-500/20 border-[var(--glass-accent-purple-subtle)] text-purple-200":"bg-[var(--glass-bg-card)] border-[var(--glass-border)] text-[var(--glass-text-secondary)] hover:bg-[var(--glass-bg-hover)]"}`},{onClick$:_("s_Q0pdwUHPm0s",[l])},"Trace",3,null),e("button",{class:`text-xs px-2 py-1 rounded border transition-colors ${l.cell.activeTab==="request"?"bg-[var(--glass-bg-hover)] border-[var(--glass-border-hover)] text-[var(--glass-text-primary)]":"bg-[var(--glass-bg-card)] border-[var(--glass-border)] text-[var(--glass-text-secondary)] hover:bg-[var(--glass-bg-hover)]"}`},{onClick$:_("s_2cXQXggHx4g",[l])},"Request",3,null)],1,null),e("div",null,{class:"flex items-center gap-2"},e("button",null,{class:"text-xs px-2 py-1 rounded bg-[var(--glass-bg-card)] border border-[var(--glass-border)] text-[var(--glass-text-secondary)] hover:bg-[var(--glass-bg-hover)]",title:"Copy request JSON",onClick$:_("s_8etXBbGrLyc",[l])},"Copy",3,null),3,null)],1,null),l.cell.activeTab==="request"&&e("div",null,{class:"p-4"},e("pre",null,{class:"text-xs text-[var(--glass-text-secondary)] font-mono whitespace-pre-wrap"},JSON.stringify(l.cell.request.payload,null,2),1,null),1,"3C_2"),l.cell.activeTab==="artifacts"&&e("div",null,{class:"p-4 space-y-2"},r.value.length===0?e("div",null,{class:"text-[var(--glass-text-tertiary)] text-sm italic"},"No artifacts produced.",3,"3C_3"):r.value.map((c,u)=>e("div",null,{class:"rounded border border-yellow-500/20 bg-yellow-500/5 px-3 py-2 flex items-start justify-between"},[e("div",null,null,[e("div",null,{class:"flex items-center gap-2 text-xs mb-1"},[e("span",null,{class:"text-yellow-400 font-mono"},c.data?.file_path||c.data?.id||"Artifact",1,null),e("span",null,{class:"text-[var(--glass-text-tertiary)]"},["(",h(c,"kind"),")"],1,null)],1,null),e("div",null,{class:"text-xs text-[var(--glass-text-secondary)] line-clamp-2"},JSON.stringify(c.data),1,null)],1,null),e("button",{onClick$:_("s_p8vMCXoCQ6o",[c])},{class:"text-xs bg-[var(--glass-bg-active)] hover:bg-white/20 px-2 py-1 rounded text-[var(--glass-text-primary)]"},"Copy",2,null)],1,u)),1,"3C_4"),l.cell.activeTab==="trace"&&e("div",null,{class:"p-4 space-y-2"},s.value.length===0?e("div",null,{class:"text-[var(--glass-text-tertiary)] text-sm italic"},"No correlated bus events yet.",3,"3C_5"):s.value.slice(-100).map((c,u)=>e("div",null,{class:"rounded border border-[var(--glass-border)] bg-[var(--glass-bg-card)] px-3 py-2"},[e("div",null,{class:"flex items-center gap-2 text-xs"},[e("span",null,{class:"text-white/50 font-mono"},new Date(c.ts).toLocaleTimeString(),1,null),e("span",null,{class:"text-[var(--glass-text-secondary)]"},h(c,"actor"),1,null),e("span",null,{class:"text-cyan-300 font-mono"},h(c,"topic"),1,null),c.level&&e("span",null,{class:"text-[var(--glass-text-tertiary)]"},["(",h(c,"level"),")"],1,"3C_6")],1,null),(c.semantic||c.reasoning)&&e("div",null,{class:"text-xs text-[var(--glass-text-secondary)] mt-1"},c.semantic||c.reasoning,1,"3C_7")],1,u)),1,"3C_8"),l.cell.activeTab==="outputs"&&e("div",null,{class:"outputs p-4 space-y-3"},[n.value.length===0&&t.value==="pending"&&e("div",null,{class:"text-[var(--glass-text-tertiary)] text-sm italic"},"Waiting for response...",3,"3C_9"),n.value.map((c,u)=>g(Fi,{output:c},3,u)),l.cell.result?.error&&e("div",null,{class:"error-output bg-red-500/10 border border-red-500/30 rounded p-3"},e("div",null,{class:"text-red-400 font-mono text-sm"},i(c=>c.cell.result.error,[l],"p0.cell.result.error"),3,null),3,"3C_10")],1,"3C_11")],1,"3C_12")],1,"3C_13")},zi=E(p(ji,"s_tI4pKRFFz70")),Bi=()=>{const[l]=b();switch(l.output.type){case"text":return e("div",null,{class:"text-output text-[var(--glass-text-primary)] text-sm whitespace-pre-wrap"},String(l.output.content),1,"3C_14");case"code":return e("div",null,{class:"code-output bg-black/60 rounded p-3 overflow-x-auto"},[l.output.metadata?.title&&e("div",null,{class:"text-xs text-[var(--glass-text-tertiary)] mb-2"},i(c=>c.output.metadata.title,[l],"p0.output.metadata.title"),3,"3C_15"),e("pre",null,{class:"text-sm font-mono text-green-400"},e("code",null,null,String(l.output.content),1,null),1,null),l.output.metadata?.language&&e("div",null,{class:"text-xs text-[var(--glass-text-tertiary)] mt-2 text-right"},i(c=>c.output.metadata.language,[l],"p0.output.metadata.language"),3,"3C_16")],1,null);case"json":return e("div",null,{class:"json-output bg-black/60 rounded p-3 overflow-x-auto"},e("pre",null,{class:"text-sm font-mono text-yellow-400"},typeof l.output.content=="string"?l.output.content:JSON.stringify(l.output.content,null,2),1,null),1,null);case"table":const t=l.output.content;if(!Array.isArray(t)||t.length===0)return e("div",null,{class:"text-[var(--glass-text-tertiary)] text-sm"},"No data",3,"3C_17");const n=Object.keys(t[0]);return e("div",null,{class:"table-output overflow-x-auto"},e("table",null,{class:"w-full text-sm"},[e("thead",null,null,e("tr",null,{class:"border-b border-[var(--glass-border)]"},n.map(c=>e("th",null,{class:"text-left px-3 py-2 text-[var(--glass-text-secondary)] font-medium"},c,1,c)),1,null),1,null),e("tbody",null,null,t.map((c,u)=>e("tr",null,{class:"border-b border-[var(--glass-border-subtle)] hover:bg-[var(--glass-bg-hover)]"},n.map(m=>e("td",null,{class:"px-3 py-2 text-[var(--glass-text-primary)]"},String(c[m]??""),1,m)),1,u)),1,null)],1,null),1,null);case"progress":const s=l.output.metadata?.progress||0,r=l.output.metadata?.total||100,o=Math.round(s/r*100);return e("div",null,{class:"progress-output"},[e("div",null,{class:"flex items-center justify-between text-sm mb-1"},[e("span",null,{class:"text-[var(--glass-text-secondary)]"},String(l.output.content),1,null),e("span",null,{class:"text-[var(--glass-text-tertiary)]"},[o,"%"],1,null)],1,null),e("div",null,{class:"h-2 bg-[var(--glass-bg-active)] rounded-full overflow-hidden"},e("div",{style:{width:`${o}%`}},{class:"h-full bg-gradient-to-r from-cyan-500 to-purple-500 transition-all duration-300"},null,3,null),1,null)],1,null);case"error":return e("div",null,{class:"error-output bg-red-500/10 border border-red-500/30 rounded p-3"},e("div",null,{class:"text-red-400 font-mono text-sm"},String(l.output.content),1,null),1,null);default:return e("div",null,{class:"text-[var(--glass-text-secondary)] text-sm"},["Unknown output type: ",i(c=>c.output.type,[l],"p0.output.type")],3,null)}},Ui=l=>{const t=N(p(Bi,"s_FdRgVyACeJE",[l]));return e("div",null,{class:"output-item"},[e("div",null,{class:"flex items-center gap-2 mb-1"},[e("span",null,{class:"text-xs"},Oi[l.output.type],1,null),e("span",null,{class:"text-xs text-[var(--glass-text-tertiary)]"},new Date(l.output.timestamp).toLocaleTimeString(),1,null)],1,null),i(n=>n.value,[t],"p0.value")],1,"3C_18")},Fi=E(p(Ui,"s_ZhxP4cSlwC4")),qi=l=>{const t=y(!1),n=y(null),s={backgroundColor:"var(--md-sys-color-surface, var(--mat-surface))",borderColor:"var(--md-sys-color-outline-variant, var(--mat-border))"},r={color:"var(--md-sys-color-primary, var(--mat-primary))"},o={backgroundColor:"var(--md-sys-color-primary, var(--mat-primary))"};return D(_("s_p2iymeCWrI0",[n,t])),t.value?n.value?g(n.value,{get height(){return l.height??"300px"},onCommand$:l.onCommand$,[a]:{height:i(c=>c.height??"300px",[l],'p0.height??"300px"')}},2,"ff_1"):null:e("div",{style:{height:l.height??"300px",...s}},{class:"flex items-center justify-center rounded-lg border"},e("div",null,{class:"text-center space-y-3"},[e("div",{style:r},{class:"animate-pulse text-3xl font-mono"},"_",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Loading Terminal...",3,null),e("div",null,{class:"w-32 h-1 bg-muted rounded overflow-hidden mx-auto"},e("div",{style:{width:"30%",...o}},{class:"h-full animate-[loading_1.5s_ease-in-out_infinite]"},null,3,null),1,null)],1,null),1,"ff_0")},Gi=E(p(qi,"s_xocXD4Vnbk0")),Vi=l=>{const t=y(!1),n=y(null),s={backgroundColor:"var(--md-sys-color-surface, var(--mat-surface))",borderColor:"var(--md-sys-color-outline-variant, var(--mat-border))"},r={color:"var(--md-sys-color-secondary, var(--mat-secondary))"};return D(_("s_afmhX4xrG8U",[n,t])),t.value?n.value?g(n.value,{get height(){return l.height??"400px"},[a]:{height:i(o=>o.height??"400px",[l],'p0.height??"400px"')}},3,"ff_3"):null:e("div",{style:{height:l.height??"400px",...s}},{class:"flex items-center justify-center rounded-lg border"},e("div",null,{class:"text-center space-y-3"},[e("div",{style:r},{class:"animate-pulse text-3xl"},"ðŸ’¬",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Loading Chat Terminal...",3,null)],1,null),1,"ff_2")},Hi=E(p(Vi,"s_9DT9qQD2ReY")),Wi=()=>{const l=y(!1),t=y(null);return D(_("s_10WEyQILrxI",[t,l])),l.value?t.value?g(t.value,null,3,"4B_1"):null:e("div",null,{class:"flex items-center justify-center h-full min-h-[300px] bg-black/50 rounded-lg border border-orange-500/20"},e("div",null,{class:"text-center space-y-3"},[e("div",null,{class:"animate-pulse text-3xl"},"ðŸ“Š",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Loading Git View...",3,null),e("div",null,{class:"w-32 h-1 bg-muted rounded overflow-hidden mx-auto"},e("div",null,{class:"h-full bg-orange-500 animate-[loading_1.5s_ease-in-out_infinite]",style:"width: 30%;"},null,3,null),3,null)],3,null),3,"4B_0")},Yi=E(p(Wi,"s_ESG6FgI2c7U")),Ji=l=>{const t=y(!1),n=y(null);return D(_("s_5Ec8K0g8o1g",[n,t])),t.value?n.value?e("div",null,{style:{animation:"fadeIn 0.7s ease-out forwards"}},g(n.value,{get height(){return l.height??"200px"},get width(){return l.width??"100%"},[a]:{height:i(s=>s.height??"200px",[l],'p0.height??"200px"'),width:i(s=>s.width??"100%",[l],'p0.width??"100%"')}},3,"c9_1"),1,"c9_2"):null:e("div",null,{class:"flex items-center justify-center bg-gradient-to-br from-purple-900/20 to-blue-900/20 rounded-lg border border-purple-500/20",style:i(s=>({height:s.height??"200px",width:s.width??"100%"}),[l],'{height:p0.height??"200px",width:p0.width??"100%"}')},e("div",null,{class:"text-center space-y-3"},[e("div",null,{class:"animate-pulse text-3xl"},"ðŸŽ¨",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Loading Canvas...",3,null),e("div",null,{class:"w-24 h-1 bg-muted rounded overflow-hidden mx-auto"},e("div",null,{class:"h-full bg-purple-500 animate-[loading_1.5s_ease-in-out_infinite]",style:"width: 30%;"},null,3,null),3,null)],3,null),3,"c9_0")},Ki=E(p(Ji,"s_1IkdDFDkat4")),Qi=l=>{const t=y(!1),n=y(null);return D(_("s_BJLfW0ob0jI",[n,t]),{strategy:"document-ready"}),t.value?n.value?g(n.value,{get fullScreen(){return l.fullScreen??!1},[a]:{fullScreen:i(s=>s.fullScreen??!1,[l],"p0.fullScreen??false")}},3,"p4_1"):null:e("div",null,{class:"flex items-center justify-center h-full min-h-[200px] bg-black/50 rounded-lg border border-cyan-500/20"},e("div",null,{class:"text-center space-y-3"},[e("div",null,{class:"animate-pulse text-4xl"},"ðŸ§©",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Loading WebLLM...",3,null),e("div",null,{class:"w-32 h-1 bg-muted rounded overflow-hidden mx-auto"},e("div",null,{class:"h-full bg-cyan-500 animate-[loading_1.5s_ease-in-out_infinite]",style:"width: 30%; animation: loading 1.5s ease-in-out infinite;"},null,3,null),3,null)],3,null),3,"p4_0")},Xi=E(p(Qi,"s_OBDZjgSKQjA")),Zi=l=>{const t=y(!1),n=y(null);return D(_("s_gpbl2iHoGcc",[n,t])),t.value?n.value?g(n.value,{get session(){return l.session},emitBus$:l.emitBus$,[a]:{session:i(s=>s.session,[l],"p0.session")}},2,"Tr_1"):null:e("div",null,{class:"flex items-center justify-center h-[420px] rounded-lg border border-amber-500/20 bg-black/60"},e("div",null,{class:"text-center space-y-3"},[e("div",null,{class:"text-xl font-mono text-amber-400"},"AURALUX",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Loading voice engine...",3,null)],3,null),3,"Tr_0")},eu=E(p(Zi,"s_RocyyJ9UTRQ")),Ve={idle:{dot:"bg-gray-400",border:"border-gray-500/30",bg:"bg-gray-500/10"},checking:{dot:"bg-yellow-400 animate-pulse",border:"border-yellow-500/30",bg:"bg-yellow-500/10"},ok:{dot:"bg-green-400",border:"border-green-500/30",bg:"bg-green-500/10"},warn:{dot:"bg-orange-400",border:"border-orange-500/30",bg:"bg-orange-500/10"},error:{dot:"bg-red-400",border:"border-red-500/30",bg:"bg-red-500/10"},forked:{dot:"bg-purple-400 animate-pulse",border:"border-purple-500/30",bg:"bg-purple-500/10"}},Hl={pending:{color:"bg-gray-500/20 text-gray-400",label:"PENDING"},active:{color:"bg-green-500/20 text-green-400",label:"ACTIVE"},paused:{color:"bg-yellow-500/20 text-yellow-400",label:"PAUSED"},complete:{color:"bg-blue-500/20 text-blue-400",label:"COMPLETE"},merged:{color:"bg-purple-500/20 text-purple-400",label:"MERGED"}},lu=async l=>{const[t,n]=b();t.value=l,n.onTrigger$&&await n.onTrigger$(l,n.module),setTimeout(()=>{t.value=null},2e3)},tu=l=>{W();const t=y(!1),n=y(null),s=p(lu,"s_IxYZWvFAkmU",[n,l]);return l.compact??!1?e("div",{class:`rounded border ${Ve[l.status??"idle"].border} ${Ve[l.status??"idle"].bg} p-2 flex items-center gap-2 cursor-pointer hover:brightness-110 transition-all`},{onClick$:_("s_XbSWeFnL0q8",[t])},[e("span",{class:`w-2 h-2 rounded-full ${Ve[l.status??"idle"].dot}`},null,null,3,null),e("div",null,{class:"flex-1 min-w-0"},[e("div",null,{class:"text-xs font-medium truncate"},i(r=>r.module.name,[l],"p0.module.name"),3,null),e("div",null,{class:"text-xs text-muted-foreground mono truncate"},i(r=>r.module.file,[l],"p0.module.file"),3,null)],3,null),l.module.goldenId&&e("span",null,{class:"text-xs font-mono text-primary/60"},i(r=>r.module.goldenId,[l],"p0.module.goldenId"),3,"qr_0")],1,"qr_1"):e("div",{class:`rounded-lg border ${Ve[l.status??"idle"].border} ${Ve[l.status??"idle"].bg} overflow-hidden transition-all`},null,[e("div",null,{class:"p-3 flex items-center gap-3 cursor-pointer hover:bg-[var(--glass-bg-hover)] transition-colors",onClick$:_("s_z8mZf9T0pZ4",[t])},[e("span",{class:`w-3 h-3 rounded-full ${Ve[l.status??"idle"].dot} flex-shrink-0`},null,null,3,null),l.module.icon&&e("span",null,{class:"text-xl"},i(r=>r.module.icon,[l],"p0.module.icon"),3,"qr_2"),e("div",null,{class:"flex-1 min-w-0"},[e("div",null,{class:"flex items-center gap-2"},[l.module.goldenId&&g(X,{color:"cyan",glow:!0,children:i(r=>r.module.goldenId,[l],"p0.module.goldenId"),[a]:{color:a,glow:a}},3,"qr_3"),g(q,{level:"span",color:"cyan",size:"sm",children:i(r=>r.module.name,[l],"p0.module.name"),[a]:{level:a,color:a,size:a}},3,"qr_4")],1,null),e("div",null,{class:"text-xs text-muted-foreground mono"},i(r=>r.module.file,[l],"p0.module.file"),3,null)],1,null),l.session&&e("span",{class:`text-xs px-2 py-0.5 rounded ${Hl[l.session.state]?.color||""}`},null,Hl[l.session.state]?.label||l.session.state,1,"qr_5"),e("span",null,{class:i(r=>`text-muted-foreground transition-transform ${r.value?"rotate-180":""}`,[t],'`text-muted-foreground transition-transform ${p0.value?"rotate-180":""}`')},"â–¼",3,null)],1,null),t.value&&e("div",null,{class:"border-t border-[var(--glass-border)]"},[e("div",null,{class:"p-3 border-b border-[var(--glass-border)] flex flex-wrap gap-2"},[e("button",{class:`text-xs px-3 py-1 rounded border border-green-500/30 bg-green-500/10 hover:bg-green-500/20 transition-colors ${n.value==="verify"?"animate-pulse":""}`},{onClick$:_("s_ncYLnnYY0Go",[s])},"âœ“ Verify",3,null),e("button",null,{class:i(r=>`text-xs px-3 py-1 rounded border border-blue-500/30 bg-blue-500/10 hover:bg-blue-500/20 transition-colors ${r.value==="inspect"?"animate-pulse":""}`,[n],'`text-xs px-3 py-1 rounded border border-blue-500/30 bg-blue-500/10 hover:bg-blue-500/20 transition-colors ${p0.value==="inspect"?"animate-pulse":""}`'),onClick$:_("s_bn3l21IKpLs",[s])},"ðŸ” Inspect",3,null),e("button",{class:`text-xs px-3 py-1 rounded border border-purple-500/30 bg-purple-500/10 hover:bg-purple-500/20 transition-colors ${n.value==="fork"?"animate-pulse":""}`},{onClick$:_("s_kuI4U5Cvugo",[s])},"ðŸ”€ Fork",3,null),e("button",{class:`text-xs px-3 py-1 rounded border border-orange-500/30 bg-orange-500/10 hover:bg-orange-500/20 transition-colors ${n.value==="test"?"animate-pulse":""}`},{onClick$:_("s_9aVZRNJGi4s",[s])},"ðŸ§ª Test",3,null),e("button",null,{class:i(r=>`text-xs px-3 py-1 rounded border border-cyan-500/30 bg-cyan-500/10 hover:bg-cyan-500/20 transition-colors ${r.value==="emit"?"animate-pulse":""}`,[n],'`text-xs px-3 py-1 rounded border border-cyan-500/30 bg-cyan-500/10 hover:bg-cyan-500/20 transition-colors ${p0.value==="emit"?"animate-pulse":""}`'),onClick$:_("s_ogTAsMyJscM",[s])},"ðŸ“¡ Emit Event",3,null)],1,null),l.module.description&&e("div",null,{class:"p-3 border-b border-[var(--glass-border)] text-sm text-muted-foreground"},i(r=>r.module.description,[l],"p0.module.description"),3,"qr_6"),l.liveData&&e("div",null,{class:"p-3 border-b border-[var(--glass-border)] space-y-2"},[g(q,{level:"div",color:"emerald",size:"xs",children:"Live Module Data",[a]:{level:a,color:a,size:a}},3,"qr_7"),e("div",null,{class:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:i(r=>`w-2 h-2 rounded-full ${r.liveData.loaded?"bg-green-400":"bg-red-400"}`,[l],'`w-2 h-2 rounded-full ${p0.liveData.loaded?"bg-green-400":"bg-red-400"}`')},null,3,null),e("span",null,null,i(r=>r.liveData.loaded?"Loaded":"Not Loaded",[l],'p0.liveData.loaded?"Loaded":"Not Loaded"'),3,null)],3,null),l.liveData.lineCount!==void 0&&e("div",null,{class:"text-muted-foreground"},[i(r=>r.liveData.lineCount,[l],"p0.liveData.lineCount")," lines"],3,"qr_8"),l.liveData.testStatus&&e("div",null,{class:i(r=>`${r.liveData.testStatus==="pass"?"text-green-400":r.liveData.testStatus==="fail"?"text-red-400":"text-gray-400"}`,[l],'`${p0.liveData.testStatus==="pass"?"text-green-400":p0.liveData.testStatus==="fail"?"text-red-400":"text-gray-400"}`')},["Test: ",l.liveData.testStatus.toUpperCase()],1,"qr_9"),e("div",null,{class:"text-muted-foreground"},i(r=>r.liveData.lastCheck,[l],"p0.liveData.lastCheck"),3,null)],1,null),l.liveData.exports&&l.liveData.exports.length>0&&e("div",null,{class:"text-xs"},[e("span",null,{class:"text-muted-foreground"},"Exports: ",3,null),e("span",null,{class:"font-mono text-cyan-400"},l.liveData.exports.slice(0,5).join(", "),1,null),l.liveData.exports.length>5&&e("span",null,{class:"text-muted-foreground"},[" +",i(r=>r.liveData.exports.length-5,[l],"p0.liveData.exports.length-5")," more"],3,"qr_10")],1,"qr_11"),l.liveData.errors&&l.liveData.errors.length>0&&e("div",null,{class:"text-xs text-red-400"},["Errors: ",l.liveData.errors.join("; ")],1,"qr_12"),l.liveData.metrics&&Object.keys(l.liveData.metrics).length>0&&e("div",null,{class:"flex flex-wrap gap-2"},Object.entries(l.liveData.metrics).map(([r,o])=>e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-[var(--glass-bg-card)] border border-[var(--glass-border)]"},[r,": ",e("span",null,{class:"text-primary"},o,1,null)],1,r)),1,"qr_13")],1,"qr_14"),l.session&&e("div",null,{class:"p-3 space-y-2"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,null,"ðŸ§¬",3,null),g(q,{level:"span",color:"purple",size:"xs",children:"InferCell Session",[a]:{level:a,color:a,size:a}},3,"qr_15")],1,null),e("div",null,{class:"space-y-1 text-xs font-mono"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-muted-foreground w-24"},"trace_id:",3,null),e("span",null,{class:"text-cyan-400"},[l.session.traceId.slice(0,8),"..."],1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-muted-foreground w-24"},"cell_id:",3,null),e("span",null,{class:"text-purple-400"},[l.session.cellId.slice(0,8),"..."],1,null)],1,null),l.session.parentTraceId&&e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-muted-foreground w-24"},"parent:",3,null),e("span",null,{class:"text-orange-400"},[l.session.parentTraceId.slice(0,8),"..."],1,null)],1,"qr_16"),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-muted-foreground w-24"},"state:",3,null),e("span",{class:Hl[l.session.state]?.color.replace("bg-","text-").replace("/20","")||""},null,i(r=>r.session.state,[l],"p0.session.state"),3,null)],1,null),l.session.children.length>0&&e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-muted-foreground w-24"},"children:",3,null),e("span",null,{class:"text-blue-400"},[i(r=>r.session.children.length,[l],"p0.session.children.length")," forked"],3,null)],3,"qr_17"),l.session.forkReason&&e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-muted-foreground w-24"},"fork_reason:",3,null),e("span",null,null,i(r=>r.session.forkReason,[l],"p0.session.forkReason"),3,null)],3,"qr_18")],1,null),Object.keys(l.session.workingMemory).length>0&&e("div",null,{class:"mt-2 p-2 rounded bg-black/20 border border-[var(--glass-border-subtle)]"},[e("div",null,{class:"text-xs text-muted-foreground mb-1"},"Working Memory",3,null),e("pre",null,{class:"text-xs overflow-x-auto"},[JSON.stringify(l.session.workingMemory,null,2).slice(0,200),JSON.stringify(l.session.workingMemory).length>200&&"..."],1,null)],1,"qr_19"),l.session.lastEvent&&e("div",null,{class:"mt-2 p-2 rounded bg-[var(--glass-bg-card)] border border-[var(--glass-border)]"},[e("div",null,{class:"text-xs text-muted-foreground"},"Last Event",3,null),e("div",null,{class:"text-xs font-mono text-cyan-400"},i(r=>r.session.lastEvent.topic,[l],"p0.session.lastEvent.topic"),3,null),e("div",null,{class:"text-xs text-muted-foreground"},i(r=>r.session.lastEvent.timestamp,[l],"p0.session.lastEvent.timestamp"),3,null),e("div",null,{class:"text-xs mt-1"},i(r=>r.session.lastEvent.summary,[l],"p0.session.lastEvent.summary"),3,null)],3,"qr_20")],1,"qr_21")],1,"qr_22")],1,"qr_23")},hn=E(p(tu,"s_0XradGFU0MU")),nu=l=>{const t={2:"grid-cols-2",3:"grid-cols-2 md:grid-cols-3",4:"grid-cols-2 md:grid-cols-4",5:"grid-cols-2 md:grid-cols-5",6:"grid-cols-2 md:grid-cols-3 lg:grid-cols-6"}[l.columns??5]||"grid-cols-2 md:grid-cols-5";return e("div",{class:`grid ${t} gap-2`},null,l.modules.map(n=>g(hn,{module:n,status:l.statuses?.[n.name]||"idle",session:l.sessions?.[n.name],liveData:l.liveData?.[n.name],onTrigger$:l.onTrigger$,get compact(){return l.compact??!0},[a]:{compact:i(s=>s.compact??!0,[l],"p0.compact??true")}},2,n.name)),1,"qr_24")},su=E(p(nu,"s_anBWhCm7O0U"));function fe(l){return l==="error"?"error":l==="warn"?"warn":"info"}function gl(l){return l&&typeof l=="object"?l:{}}function Ce(l){const t=String(l||"").trim();return t?t.length<=8?t:t.slice(0,8):""}function se(l,t=220){const n=(l||"").replace(/\s+/g," ").trim();return n.length<=t?n:n.slice(0,t-1)+"â€¦"}function au(l){const{connected:t,events:n,session:s}=l;if(!t)return{level:"L0",label:"DISCONNECTED",hint:"bridge offline / pin / ws"};const r=n.slice(-250).map(f=>f.topic),o=r.some(f=>f.startsWith("dialogos.")),c=r.some(f=>f.startsWith("lens.")||f==="plurichat.lens.decision"),u=r.some(f=>f.startsWith("strp.")),m=r.some(f=>f.startsWith("verify.")||f.startsWith("tests.")),d=s?.activeFallback||null;return m?{level:"L5",label:"GATING",hint:"verification / evidence / gates"}:u?{level:"L4",label:"SWARM",hint:"STRp topology active"}:c?{level:"L3",label:"ROUTING",hint:d?`active_fallback=${d}`:"lens/collimator online"}:o?{level:"L2",label:"INFERENCE",hint:d?`active_fallback=${d}`:"dialogos lane"}:{level:"L1",label:"MEMBRANE",hint:"bus online"}}function ru(l){if(!l||!l.topic)return null;const t=gl(l.data),n=l.topic,s=l.iso||"",r=l.actor||"";if(n==="dialogos.cell.output"){const o=String(t.type||"text");if(l.level!=="error"&&o!=="error")return null;const c=se(String(t.content||""));return{iso:s,severity:"error",subsystem:"DIALOGOS",message:c||"cell.output error",topic:n,actor:r}}if(n==="dialogos.cell.end"){const o=!!t.ok,c=String(t.status||(o?"success":"error")),u=Array.isArray(t.providers)?t.providers.map(String).filter(Boolean):[],m=`cell.end status=${c}${u.length?` providers=[${u.join(",")}]`:""}`;return{iso:s,severity:o?"ok":"error",subsystem:"DIALOGOS",message:m,topic:n,actor:r}}if(n==="dialogos.submit"){const o=Array.isArray(t.providers)?t.providers.map(String).filter(Boolean):[];return{iso:s,severity:fe(l.level),subsystem:"DIALOGOS",message:`submit â†’ [${o.join(",")||"auto"}]`,topic:n,actor:r}}if(n==="plurichat.lens.decision"){const o=String(t.depth||""),c=String(t.lane||""),u=String(t.topology||"single"),m=Number(t.fanout||1),d=String(t.selected_provider||t.provider||""),f=String(t.persona||""),v=`LENS depth=${o} lane=${c} topo=${u}Ã—${Number.isFinite(m)?m:1} â†’ ${d||"auto"}${f?` persona=${f}`:""}`;return{iso:s,severity:"info",subsystem:"LENS",message:v,topic:n,actor:r}}if(n==="plurichat.web.connected"){const o=String(t.remote||""),c=String(t.session||"");return{iso:s,severity:"info",subsystem:"PLURICHAT",message:`web connected ${o} session=${c}`,topic:n,actor:r}}if(n.startsWith("service.control/")){const o=String(t.service_id||t.serviceId||""),c=String(t.request_id||t.requestId||"");return{iso:s,severity:"info",subsystem:"SERVICES",message:`${n.replace("service.control/","")} ${o}${c?` req=${c}`:""}`,topic:n,actor:r}}if(n.startsWith("service."))return{iso:s,severity:fe(l.level),subsystem:"SERVICES",message:se(JSON.stringify(t)),topic:n,actor:r};if(n.startsWith("lens.collimator."))return{iso:s,severity:fe(l.level),subsystem:"LENS",message:se(String(l.semantic||l.reasoning||n)),topic:n,actor:r};if(n.startsWith("strp.")){const o=String(t.kind||""),c=String(t.goal||t.goal_summary||""),u=se(`${o?`${o} `:""}${c?`â€” ${c}`:n}`,240);return{iso:s,severity:fe(l.level),subsystem:"STRP",message:u,topic:n,actor:r}}if(n.startsWith("verify.")||n.startsWith("tests.")){const o=se(String(t.summary||t.cmd||l.semantic||n));return{iso:s,severity:fe(l.level),subsystem:"VERIFY",message:o,topic:n,actor:r}}if(n.startsWith("operator.pbflush.")){const o=Ce(t.req_id||t.request_id),c=String(t.intent||""),u=se(String(t.message||t.reason||""),180),m=`${n.replace("operator.pbflush.","pbflush.")} ${o?`req=${o}`:""}${c?` intent=${c}`:""}`.trim(),d=u?`${m} â€” ${u}`:m;return{iso:s,severity:n.endsWith(".request")?"warn":fe(l.level),subsystem:"PBFLUSH",message:d,topic:n,actor:r}}if(n==="ckin.report"){const o=gl(t.pbflush),c=gl(o.latest_request),u=Ce(c.req_id),m=Number(o.acks_window??0),d=Number(o.requests_window??0),v=`CKIN v${String(t.protocol_version||"")||"?"} pbflush(req=${d} acks=${m}${u?` last=${u}`:""})`;return{iso:s,severity:"info",subsystem:"CKIN",message:v,topic:n,actor:r}}if((n==="infer_sync.request"||n==="infer_sync.response")&&String(t.intent||"")==="pbflush"){const o=Ce(t.req_id||t.request_id),c=se(String(t.message||t.reason||""),180),u=`${n} ${o?`req=${o}`:""}`.trim();return{iso:s,severity:fe(l.level),subsystem:"PBFLUSH",message:c?`${u} â€” ${c}`:u,topic:n,actor:r}}if(n==="system.boot.log"){const c=`SLOU Boot Sequence (${(Array.isArray(t.boot_log)?t.boot_log:[]).length} lines)`;return{iso:s,severity:"info",subsystem:"SLOU",message:c,topic:n,actor:r}}if(n.startsWith("supermotd.")){const o=se(String(t.text||l.semantic||JSON.stringify(t)||n));return{iso:s,severity:fe(l.level),subsystem:"SUPERMOTD",message:o,topic:n,actor:r}}if(n.startsWith("mcp.")){if(n==="mcp.host.call"){const c=Ce(t.req_id),u=String(t.server||""),m=String(t.tool||"");return{iso:s,severity:"info",subsystem:"MCP",message:`host.call ${c?`req=${c}`:""} ${u}.${m}`.trim(),topic:n,actor:r}}if(n==="mcp.host.response"){const c=Ce(t.req_id),u=!!t.ok,m=String(t.server||""),d=String(t.tool||"");return{iso:s,severity:u?"ok":"error",subsystem:"MCP",message:`host.response ${c?`req=${c}`:""} ${u?"ok":"err"} ${m}.${d}`.trim(),topic:n,actor:r}}const o=se(String(t.status||t.server||t.tool||t.text||l.semantic||n));return{iso:s,severity:fe(l.level),subsystem:"MCP",message:o,topic:n,actor:r}}if(n.startsWith("a2a.")){const o=Ce(t.req_id||t.request_id);if(n==="a2a.negotiate.request"){const c=String(t.initiator||t.from||r||"").trim(),u=String(t.target||"").trim(),m=gl(t.constraints),d=Array.isArray(m.required_capabilities)?m.required_capabilities:[],f=`negotiate.request ${o?`req=${o}`:""}${c?` from=${c}`:""}${u?` to=${u}`:""}${d.length?` caps=${d.length}`:""}`.trim();return{iso:s,severity:"info",subsystem:"A2A",message:f,topic:n,actor:r}}if(n==="a2a.negotiate.response"){const c=String(t.decision||"").trim(),u=c==="agree"?"ok":c==="negotiate"?"warn":"error",m=`negotiate.response ${o?`req=${o}`:""}${c?` decision=${c}`:""}`.trim();return{iso:s,severity:u,subsystem:"A2A",message:m,topic:n,actor:r}}if(n==="a2a.decline"){const c=se(String(t.reason||"decline"),180),u=`decline ${o?`req=${o}`:""}`.trim();return{iso:s,severity:"warn",subsystem:"A2A",message:c?`${u} â€” ${c}`:u,topic:n,actor:r}}if(n==="a2a.redirect"){const c=String(t.redirect_to||"").trim(),u=se(String(t.reason||"redirect"),180),m=`redirect ${o?`req=${o}`:""}${c?` to=${c}`:""}`.trim();return{iso:s,severity:"info",subsystem:"A2A",message:u?`${m} â€” ${u}`:m,topic:n,actor:r}}return{iso:s,severity:fe(l.level),subsystem:"A2A",message:se(JSON.stringify(t)),topic:n,actor:r}}if(n==="studio.flow.roundtrip"){const o=Ce(t.req_id),c=!!t.ok,u=String(t.in_path||"").trim(),m=`flow.roundtrip ${o?`req=${o}`:""} ${c?"ok":"fail"}${u?` in=${u.split("/").slice(-1)[0]}`:""}`.trim();return{iso:s,severity:c?"ok":"error",subsystem:"STUDIO",message:m,topic:n,actor:r}}if(n.startsWith("crush.")){const o=Ce(t.session_id);if(n==="crush.session.start"){const c=String(t.model||"default");return{iso:s,severity:"info",subsystem:"CRUSH",message:`session.start ${o?`sid=${o}`:""} model=${c}`.trim(),topic:n,actor:r}}if(n==="crush.prompt.submit"){const c=se(String(t.prompt_preview||""),60);return{iso:s,severity:"info",subsystem:"CRUSH",message:`prompt ${o?`sid=${o}`:""} "${c}"`.trim(),topic:n,actor:r}}if(n==="crush.response.end"){const c=!!t.ok,u=Number(t.duration_ms||0);return{iso:s,severity:c?"ok":"error",subsystem:"CRUSH",message:`response.end ${o?`sid=${o}`:""} ${c?"ok":"err"} ${u}ms`.trim(),topic:n,actor:r}}if(n==="crush.error"){const c=se(String(t.error||t.stderr||"error"),100);return{iso:s,severity:"error",subsystem:"CRUSH",message:`error ${o?`sid=${o}`:""} ${c}`.trim(),topic:n,actor:r}}return{iso:s,severity:fe(l.level),subsystem:"CRUSH",message:se(String(t.intent||n)),topic:n,actor:r}}if(n.startsWith("operator.crush.")){const o=Ce(t.req_id),c=String(t.intent||"");if(n==="operator.crush.request")return{iso:s,severity:"info",subsystem:"CRUSH",message:`operator.${c||"request"} ${o?`req=${o}`:""}`.trim(),topic:n,actor:r};if(n==="operator.crush.response"){const u=!!t.ok;return{iso:s,severity:u?"ok":"error",subsystem:"CRUSH",message:`operator.response ${o?`req=${o}`:""} ${c} ${u?"ok":"err"}`.trim(),topic:n,actor:r}}if(n==="operator.crush.status"){const u=!!t.online;return{iso:s,severity:u?"ok":"warn",subsystem:"CRUSH",message:`status ${u?"online":"offline"}`,topic:n,actor:r}}}return null}function ou(l){const t=Math.max(1,Math.min(200,l.limit)),n=[];for(const o of l.events.slice(-800)){const c=ru(o);c&&n.push(c)}const s=n.slice(-t),r=[];for(const o of s){const c=r[r.length-1];c&&c.iso===o.iso&&c.topic===o.topic&&c.message===o.message&&c.subsystem===o.subsystem||r.push(o)}return r}const Lt={ok:{badge:"bg-green-500/20 text-green-400 border-green-500/30",row:"text-green-300",icon:"âœ“"},info:{badge:"bg-muted/40 text-muted-foreground border-border/50",row:"text-muted-foreground",icon:"â„¹"},warn:{badge:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30",row:"text-yellow-200",icon:"âš "},error:{badge:"bg-red-500/20 text-red-300 border-red-500/30",row:"text-red-200",icon:"âœ—"}},Dt={DIALOGOS:"ðŸ’¬",LENS:"ðŸ”",STRP:"ðŸŒ",VERIFY:"âœ…",MCP:"ðŸ”§",A2A:"ðŸ¤",SERVICES:"âš™ï¸",PLURICHAT:"ðŸ’­",CKIN:"ðŸ“Š",PBFLUSH:"ðŸš¿",SLOU:"ðŸ–¥ï¸",SUPERMOTD:"ðŸ“‹",STUDIO:"ðŸŽ¬"},iu=()=>{const[l]=b();return au({connected:l.connected,events:l.events,session:l.session})},uu=()=>{const[l]=b();return ou({events:l.events,limit:48})},cu=async()=>{const[l,t]=b(),n=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`req-${Date.now()}`;l.value=n,t.emitBus$&&await t.emitBus$("supermotd.proposal.request","request",{req_id:n,branch:"SUPERMOTD",intent:"improve_boot_stream",targets:["dashboard","tui"],ask:"Propose idiolect/vocab + event grammar + curated topic filters for a unix-boot-style system stream.",constraints:{append_only:!0,non_blocking:!0,tests_first:!0}})},du=()=>{const[l]=b(),t=new Map;for(const n of l.value){const s=t.get(n.subsystem)||{count:0,errors:0,lastSeverity:"info"};s.count++,n.severity==="error"&&s.errors++,s.lastSeverity=n.severity,t.set(n.subsystem,s)}return Array.from(t.entries()).sort((n,s)=>s[1].count-n[1].count).slice(0,6)},pu=l=>{const t=y(null),n=N(p(iu,"s_0XYI3l7N7d4",[l])),s=N(p(uu,"s_0Q4uKHn1W1Q",[l])),r=p(cu,"s_TSRdRPxSxvY",[t,l]),o=N(p(du,"s_mDcn7tP13qs",[s]));return e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between gap-3"},[e("div",null,{class:"flex items-center gap-3 min-w-0"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-xs font-mono text-muted-foreground"},"SUPERMOTD",3,null),e("span",{class:`text-xs font-mono px-2 py-0.5 rounded border ${n.value.level==="L5"?"border-purple-500/50 bg-purple-500/20 text-purple-400":n.value.level==="L4"?"border-blue-500/50 bg-blue-500/20 text-blue-400":n.value.level==="L3"?"border-cyan-500/50 bg-cyan-500/20 text-cyan-400":n.value.level==="L2"?"border-green-500/50 bg-green-500/20 text-green-400":n.value.level==="L1"?"border-yellow-500/50 bg-yellow-500/20 text-yellow-400":"border-border/50 bg-muted/30 text-muted-foreground"}`},null,[i(c=>c.value.level,[n],"p0.value.level")," ",i(c=>c.value.label,[n],"p0.value.label")],3,null)],1,null),e("div",null,{class:"text-xs text-muted-foreground truncate"},i(c=>c.value.hint,[n],"p0.value.hint"),3,null)],1,null),e("div",null,{class:"flex items-center gap-2 flex-shrink-0"},e("button",null,{class:"text-xs px-2 py-1 rounded bg-primary/15 hover:bg-primary/25 text-primary border border-primary/20",title:"Emit a non-blocking bus request for other agents to propose improvements",onClick$:r},"Request Collab",3,null),3,null)],1,null),e("div",null,{class:"px-3 py-2 border-b border-border/50 flex flex-wrap gap-1"},o.value.map(([c,u])=>{const m=Dt[c]||"ðŸ“¦",d=u.errors>0;return e("span",{class:`text-[9px] px-1.5 py-0.5 rounded flex items-center gap-1 ${d?"bg-red-500/10 text-red-400 border border-red-500/20":"bg-cyan-500/10 text-cyan-400 border border-cyan-500/20"}`,title:`${c}: ${u.count} events, ${u.errors} errors`},null,[e("span",null,null,m,1,null),e("span",null,{class:"font-mono"},c,1,null),e("span",null,{class:"text-[8px] opacity-70"},h(u,"count"),1,null),d&&e("span",null,{class:"text-red-400"},["(",h(u,"errors"),")"],1,"my_0")],1,c)}),1,null),e("div",null,{class:"p-3"},[e("div",null,{class:"text-xs text-muted-foreground mb-2"},["Boot-stream style meta events (curated). Prefer reading this over raw `dialogos.cell.output` noise.",t.value&&e("span",null,{class:"ml-2 font-mono text-primary/80"},["req_id=",i(c=>c.value,[t],"p0.value")],3,"my_1")],1,null),e("div",null,{class:"max-h-[260px] overflow-auto font-mono text-xs space-y-1"},s.value.length===0?e("div",null,{class:"p-2 rounded bg-muted/20 text-muted-foreground"},"No curated meta events yet. Generate activity (e.g. PluriChat `/status`, spawn a worker, run verify).",3,"my_2"):s.value.slice().reverse().map((c,u)=>{const m=Lt[c.severity]||Lt.info,d=Dt[c.subsystem]||"ðŸ“¦",f=c.iso?c.iso.slice(11,19):"--:--:--";return e("div",{class:`flex items-start gap-2 p-1.5 rounded bg-muted/20 border border-border/30 ${m.row} hover:bg-muted/30 transition-colors`},null,[e("span",null,{class:"text-muted-foreground flex-shrink-0"},f,1,null),e("span",{title:h(c,"severity")},{class:"text-[10px] flex-shrink-0"},h(m,"icon"),1,null),e("span",{class:`flex-shrink-0 text-[10px] px-1.5 py-0.5 rounded border flex items-center gap-1 ${m.badge}`},null,[e("span",null,null,d,1,null),e("span",null,null,h(c,"subsystem"),1,null)],1,null),e("span",null,{class:"flex-1 min-w-0 break-words"},h(c,"message"),1,null)],1,u)}),1,null)],1,null)],1,"my_3")},mu=E(p(pu,"s_h0Hc2hJxnHY"));function gu(l){if(!l)return"";let t=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t=t.replace(/\b(import|export|const|let|var|function|class|interface|return|if|else|for|while|await|async|from)\b/g,'<span class="text-secondary neon-token">$&</span>'),t=t.replace(/\b([A-Z][a-zA-Z0-9_]*)\b/g,'<span class="text-accent neon-token">$&</span>'),t=t.replace(/(['`"])(\.*?)\1/g,'<span class="text-green-400">$1$2$1</span>'),t=t.replace(/(\/\/.*$)/gm,'<span class="text-muted-foreground italic">$1</span>'),t=t.replace(/([{}[\].(),;])/g,'<span class="text-primary/70">$1</span>'),t}const vu=()=>{const[l]=b();return gu(l.code).split(`
`)},bu=l=>{const t=N(p(vu,"s_AdwIFjQb0qg",[l]));return e("div",null,{class:"font-mono text-xs overflow-auto h-full bg-[#08080a] relative group"},e("div",null,{class:"flex min-h-full"},[e("div",null,{class:"flex-shrink-0 flex flex-col text-right select-none bg-[#0c0c0e] border-r border-[var(--glass-border-subtle)] py-4 px-2 text-muted-foreground/40 w-10"},t.value.map((n,s)=>e("div",null,{class:"h-5 leading-5"},s+1,1,s)),1,null),e("div",null,{class:"flex-1 py-4"},t.value.map((n,s)=>e("div",null,{class:"h-5 leading-5 px-4 hover:bg-white/5 transition-colors duration-75 flex items-center relative group/line"},[e("div",null,{class:"absolute left-0 top-0 bottom-0 w-0.5 bg-primary opacity-0 group-hover/line:opacity-100 transition-opacity shadow-[0_0_8px_#06b6d4]"},null,3,null),e("span",{dangerouslySetInnerHTML:n||" "},{class:"whitespace-pre"},null,3,null)],1,s)),1,null)],1,null),1,"Q0_0")},fu=E(p(bu,"s_AcRmZMWyjhE")),xu=l=>{const t=l.type==="textarea",n={label:l.label,value:l.value,placeholder:l.placeholder,"error-text":l.error,class:l.class,disabled:l.disabled,onInput$:l.onInput$,onChange$:l.onChange$,onKeyDown$:l.onKeyDown$};return t?Ie("md-outlined-text-field",{type:"textarea",rows:3,...n,children:l.icon&&e("md-icon",null,{slot:"leading-icon"},i(s=>s.icon,[l],"p0.icon"),3,"uR_0")},{type:a,rows:a},0,"uR_1"):l.type==="search"?Ie("md-outlined-text-field",{type:"search",...n,children:e("md-icon",null,{slot:"leading-icon"},"search",3,null)},{type:a},0,"uR_2"):Ie("md-filled-text-field",{get type(){return l.type||"text"},...n,children:l.icon&&e("md-icon",null,{slot:"leading-icon"},i(s=>s.icon,[l],"p0.icon"),3,"uR_3")},{type:i(s=>s.type||"text",[l],'p0.type||"text"')},0,"uR_4")},V=E(p(xu,"s_mR7e8uG0NYg"));function hu(){return new Date().toISOString()}function yu(l,t,n){const s=n[l]?.model?.trim();return s||(t.includes(l)?l:null)}function _u(l,t){return["vllm-local","ollama-local"].filter(s=>t[s]?.available).map(s=>({provider:s,model:yu(s,l,t)})).filter(s=>!!s.model)}const wu=async()=>{const[l]=b();l.loading=!0,l.error=null;try{const[t,n]=await Promise.all([fetch("/api/session",{cache:"no-store"}),fetch("/v1/models",{cache:"no-store"})]);if(t.ok){const o=await t.json().catch(()=>({})),c=(o&&typeof o=="object"?o.providers:null)||{};l.sessionProviders=c}if(!n.ok)throw new Error(`models endpoint returned ${n.status}`);const s=await n.json().catch(()=>({}));if(s?.ok===!1)throw new Error(String(s?.error||"models backend unreachable"));const r=Array.isArray(s?.data)?s.data:[];l.models=r.map(o=>String(o?.id||"").trim()).filter(o=>o.length>0)}catch(t){l.error=t instanceof Error?t.message:String(t)}finally{l.loading=!1}},ku=async()=>{const[l]=b();l.warmError=null,l.warmedProvider=null,l.warmedAtIso=null;const t=Object.entries(l.sessionProviders).filter(([,s])=>s?.available).map(([s])=>s),n=_u(l.models,l.sessionProviders);if(n.length===0){if(t.length===0)return;l.warmError=`No warmable model found for ${t.join(", ")} (missing model name).`;return}for(const s of n)try{const r=new Promise(m=>{setTimeout(()=>m(null),2500)}),o=await Promise.race([fetch("/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:s.model,messages:[{role:"user",content:"ping"}],temperature:0,max_tokens:1,stream:!1})}),r]);if(!o)throw new Error(`${s.provider} warm timed out for ${s.model}`);const c=await o.text().catch(()=>"");if(!o.ok)throw new Error(`${s.provider} warm failed for ${s.model} (${o.status}): ${c.slice(0,200)}`);let u=null;try{u=JSON.parse(c)}catch{u=null}if(u&&typeof u=="object"&&u.ok===!1)throw new Error(String(u.error||"backend_unreachable"));l.warmedProvider=s.provider,l.warmedAtIso=hu();return}catch(r){l.warmError=r instanceof Error?r.message:String(r)}},Su=()=>{const[l,t]=b();return l().then(()=>t())},Cu=()=>{const l=B({loading:!1,error:null,sessionProviders:{},models:[],warmedProvider:null,warmedAtIso:null,warmError:null}),t=p(wu,"s_AOcCbE81rlA",[l]),n=p(ku,"s_4O2y5Oz0PCM",[l]);D(_("s_Ctw5hSZkvIQ",[t,n]),{strategy:"document-idle"});const s=l.sessionProviders["vllm-local"],r=l.sessionProviders["ollama-local"];return g(H,{children:[e("div",null,{class:"flex items-center gap-2 mb-2"},[e("div",null,{class:"text-sm font-semibold text-muted-foreground"},"LOCAL LLM (SERVER)",3,null),l.loading&&e("div",null,{class:"text-[10px] text-muted-foreground"},"checkingâ€¦",3,"m4_0"),e("div",null,{class:"ml-auto flex items-center gap-2"},[l.warmedProvider&&e("span",null,{class:"text-[10px] px-2 py-0.5 rounded bg-green-500/20 text-green-400 border border-green-500/30"},["warmed:",i(o=>o.warmedProvider,[l],"p0.warmedProvider")],3,"m4_1"),g(L,{variant:"text",class:"h-6 text-[10px]",onClick$:p(Su,"s_36mLb7L9Uzs",[t,n]),children:"refresh",[a]:{variant:a,class:a,onClick$:a}},3,"m4_2")],1,null)],1,null),l.error&&e("div",null,{class:"text-xs text-red-400 bg-red-500/10 border border-red-500/20 rounded p-2 mb-2"},i(o=>o.error,[l],"p0.error"),3,"m4_3"),l.warmError&&e("div",null,{class:"text-xs text-amber-300 bg-amber-500/10 border border-amber-500/20 rounded p-2 mb-2"},i(o=>o.warmError,[l],"p0.warmError"),3,"m4_4"),e("div",null,{class:"grid grid-cols-2 gap-2 text-xs"},[g(H,{variant:s?.available?"filled":"outlined",padding:"p-2",interactive:!0,class:`glass-surface ${s?.available?"glass-status-ok":""}`,children:[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`w-2 h-2 rounded-full ${s?.available?"bg-green-400":"bg-gray-400"}`},null,null,3,null),e("span",null,{class:"mono"},"vllm-local",3,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-1"},s?.available?`model: ${s.model||"unknown"}`:s?.error||"not available",1,null)],[a]:{padding:a,interactive:a}},1,"m4_5"),g(H,{variant:r?.available?"filled":"outlined",padding:"p-2",interactive:!0,class:`glass-surface ${r?.available?"glass-status-ok":""}`,children:[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`w-2 h-2 rounded-full ${r?.available?"bg-green-400":"bg-gray-400"}`},null,null,3,null),e("span",null,{class:"mono"},"ollama-local",3,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-1"},r?.available?`model: ${r.model||"unknown"}`:r?.error||"not available",1,null)],[a]:{padding:a,interactive:a}},1,"m4_6")],1,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-2"},"Uses `/v1/models` + `/api/session`, warms via `/v1/chat/completions` with explicit `vllm-local`/`ollama-local` (no cloud fallback).",3,null)]},1,"m4_7")},Rt=E(p(Cu,"s_JaUO7lnWz44")),yn=[{baseId:"Nemotron-Mini-4B-Instruct",name:"Nemotron Mini 4B",vramBase:"2.5GB",vramMB:2500,color:"lime",quants:["q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:4,category:"fast",backend:"webllm",availability:"custom",capabilities:["text"],systemPrompt:"You are Nemotron, a helpful and efficient AI assistant by NVIDIA."},{baseId:"SmolLM2-135M-Instruct",name:"SmolLM2 135M",vramBase:"150MB",vramMB:150,color:"cyan",quants:["q0f16","q0f32","q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:5,category:"ultrafast",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are SmolLM2, a tiny but capable assistant. Be concise."},{baseId:"SmolLM2-360M-Instruct",name:"SmolLM2 360M",vramBase:"400MB",vramMB:400,color:"cyan",quants:["q0f16","q0f32","q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:5,category:"ultrafast",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are SmolLM2, a quick and helpful assistant."},{baseId:"Qwen3-0.6B",name:"Qwen3 0.6B",vramBase:"500MB",vramMB:500,color:"green",quants:["q0f16","q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:5,category:"ultrafast",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are Qwen, a smart and logical assistant."},{baseId:"Llama-3.2-1B-Instruct",name:"Llama 3.2 1B",vramBase:"800MB",vramMB:800,color:"orange",quants:["q0f16","q0f32","q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:4,category:"fast",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are Llama, a helpful and harmless assistant."},{baseId:"gemma-2-2b-it",name:"Gemma 2 2B",vramBase:"1.5GB",vramMB:1500,color:"purple",quants:["q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:4,category:"fast",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are Gemma, a creative and knowledgeable assistant."},{baseId:"Phi-3.5-mini-instruct",name:"Phi 3.5 Mini",vramBase:"2.5GB",vramMB:2500,color:"blue",quants:["q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:3,category:"standard",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are Phi, a reasoning-focused assistant."},{baseId:"Qwen2.5-3B-Instruct",name:"Qwen 2.5 3B",vramBase:"2.5GB",vramMB:2500,color:"green",quants:["q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:3,category:"standard",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are Qwen, an intelligent assistant."},{baseId:"Llama-3.2-3B-Instruct",name:"Llama 3.2 3B",vramBase:"3GB",vramMB:3e3,color:"orange",quants:["q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:3,category:"standard",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are Llama, a helpful assistant."},{baseId:"Phi-3.5-vision-instruct",name:"Phi 3.5 Vision",vramBase:"4GB",vramMB:4e3,color:"purple",quants:["q4f16_1"],defaultQuant:"q4f16_1",speedRating:2,category:"vision",backend:"webllm",availability:"prebuilt",capabilities:["text","vision"],systemPrompt:"You are Phi Vision, capable of analyzing images and text."},{baseId:"gemma-2-9b-it",name:"Gemma 2 9B",vramBase:"6GB",vramMB:6e3,color:"purple",quants:["q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:2,category:"heavy",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are Gemma 9B, a highly capable assistant."},{baseId:"GLM-4-9B-Chat",name:"GLM-4 9B",vramBase:"6GB",vramMB:6e3,color:"blue",quants:["q4f16_1","q4f32_1"],defaultQuant:"q4f16_1",speedRating:2,category:"heavy",backend:"webllm",availability:"prebuilt",capabilities:["text"],systemPrompt:"You are GLM-4, a powerful open model."},{baseId:"Llama-3.2-11B-Vision-Instruct",name:"Llama 3.2 11B Vision",vramBase:"8GB",vramMB:8e3,color:"orange",quants:["q4f16_1"],defaultQuant:"q4f16_1",speedRating:1,category:"heavy",backend:"webllm",availability:"prebuilt",capabilities:["text","vision"],systemPrompt:"You are Llama Vision, an advanced multimodal assistant."}],$u=[{id:"silero-vad-v5",name:"Silero VAD v5",backend:"onnx",availability:"custom",sizeMB:2.2,capabilities:["speech","audio"],notes:"Auralux VAD (Silero) ONNX runtime"},{id:"hubert-soft-quantized",name:"HuBERT Soft (Quantized)",backend:"onnx",availability:"custom",sizeMB:92,capabilities:["speech","audio"],notes:"Auralux SSL encoder"},{id:"vocos-q8",name:"Vocos Q8 Vocoder",backend:"onnx",availability:"custom",sizeMB:52,capabilities:["audio"],notes:"Auralux neural vocoder"},{id:"vllm-llama-3.1-8b-instruct",name:"Llama 3.1 8B (vLLM)",backend:"vllm",availability:"planned",capabilities:["text","reasoning"],notes:"Server-side vLLM baseline"},{id:"vllm-qwen2.5-7b-instruct",name:"Qwen 2.5 7B (vLLM)",backend:"vllm",availability:"planned",capabilities:["text","reasoning"],notes:"Server-side vLLM multilingual"},{id:"vllm-mistral-7b-instruct",name:"Mistral 7B (vLLM)",backend:"vllm",availability:"planned",capabilities:["text","code"],notes:"Server-side vLLM rapid chat"},{id:"vllm-deepseek-coder-6.7b-instruct",name:"DeepSeek Coder 6.7B (vLLM)",backend:"vllm",availability:"planned",capabilities:["code","reasoning"],notes:"Server-side vLLM code focus"},{id:"vllm-gemma-2-9b-it",name:"Gemma 2 9B (vLLM)",backend:"vllm",availability:"planned",capabilities:["text","reasoning"],notes:"Server-side vLLM open model"},{id:"vllm-llama-3.1-70b-instruct",name:"Llama 3.1 70B (vLLM)",backend:"vllm",availability:"planned",capabilities:["text","reasoning"],notes:"Server-side vLLM high-capacity"},{id:"use-lite",name:"Universal Sentence Encoder Lite",backend:"planned",availability:"planned",sizeMB:20,capabilities:["text"],notes:"Planned TFJS embeddings"},{id:"mobilenet-v2",name:"MobileNet V2",backend:"planned",availability:"planned",sizeMB:14,capabilities:["vision","image"],notes:"Planned TFJS vision baseline"}];function Iu(l,t){return`${l}-${t}-MLC`}function Tu(l){return yn.find(t=>l.startsWith(`${t.baseId}-`))}function Eu(){return yn.filter(l=>l.backend==="webllm"&&l.availability==="prebuilt").map(l=>({id:Iu(l.baseId,l.defaultQuant),name:l.name,vram:l.vramBase,vramMB:l.vramMB,color:l.color,baseId:l.baseId,quant:l.defaultQuant,speedRating:l.speedRating,category:l.category}))}function Au(){return $u.slice()}const Mu=()=>{const l=B({loading:!0,error:null,webgpuAvailable:!1,webgpuInfo:null,backends:{},modelCount:0,deviceMemoryGB:null,cores:null});D(_("s_swckt0obncw",[l]),{strategy:"document-idle"});const t=l.backends.tfjs,n=l.backends.onnx;return e("div",null,{class:"rounded-lg border border-border bg-card p-4","data-testid":"edge-inference-status"},[e("div",null,{class:"flex items-center gap-2 mb-2"},[e("div",null,{class:"text-sm font-semibold text-muted-foreground"},"EDGE INFERENCE (BROWSER)",3,null),l.loading&&e("div",null,{class:"text-[10px] text-muted-foreground"},"checkingâ€¦",3,"Ty_0"),e("div",null,{class:"ml-auto text-[10px] text-muted-foreground"},[i(s=>s.modelCount,[l],"p0.modelCount")," WebLLM models"],3,null)],1,null),l.error&&e("div",null,{class:"text-xs text-red-400 bg-red-500/10 border border-red-500/20 rounded p-2 mb-2"},i(s=>s.error,[l],"p0.error"),3,"Ty_1"),e("div",null,{class:"grid grid-cols-2 gap-2 text-xs"},[e("div",null,{class:i(s=>`rounded border border-border/60 p-2 ${s.webgpuAvailable?"bg-cyan-500/5":"bg-muted/20"}`,[l],'`rounded border border-border/60 p-2 ${p0.webgpuAvailable?"bg-cyan-500/5":"bg-muted/20"}`')},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:i(s=>`w-2 h-2 rounded-full ${s.webgpuAvailable?"bg-cyan-400":"bg-gray-400"}`,[l],'`w-2 h-2 rounded-full ${p0.webgpuAvailable?"bg-cyan-400":"bg-gray-400"}`')},null,3,null),e("span",null,{class:"mono"},"webgpu",3,null)],3,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-1"},i(s=>s.webgpuAvailable?s.webgpuInfo||"available":"unavailable",[l],'p0.webgpuAvailable?p0.webgpuInfo||"available":"unavailable"'),3,null)],3,null),e("div",null,{class:"rounded border border-border/60 p-2 bg-muted/20"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-2 h-2 rounded-full bg-green-400"},null,3,null),e("span",null,{class:"mono"},"webllm",3,null)],3,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-1"},"native (prebuilt)",3,null)],3,null),e("div",{class:`rounded border border-border/60 p-2 ${t?.available?"bg-green-500/5":"bg-muted/20"}`},null,[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`w-2 h-2 rounded-full ${t?.available?"bg-green-400":"bg-gray-400"}`},null,null,3,null),e("span",null,{class:"mono"},"tfjs",3,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-1"},t?.available?`v${t.version||"unknown"}`:t?.error||"not loaded",1,null)],1,null),e("div",{class:`rounded border border-border/60 p-2 ${n?.available?"bg-green-500/5":"bg-muted/20"}`},null,[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`w-2 h-2 rounded-full ${n?.available?"bg-green-400":"bg-gray-400"}`},null,null,3,null),e("span",null,{class:"mono"},"onnx",3,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-1"},n?.available?`v${n.version||"unknown"}`:n?.error||"not loaded",1,null)],1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-2"},[i(s=>s.deviceMemoryGB?`${s.deviceMemoryGB}GB`:"device memory unknown",[l],'p0.deviceMemoryGB?`${p0.deviceMemoryGB}GB`:"device memory unknown"'),i(s=>s.cores?` Â· ${s.cores} cores`:"",[l],'p0.cores?` \\xb7 ${p0.cores} cores`:""')],3,null)],1,"Ty_2")},Ou=E(p(Mu,"s_tBERW8s0Ko4"));function vl(l){return!l||l.length===0?null:l.slice(0,3).map(t=>e("span",null,{class:"px-1.5 py-0.5 rounded bg-muted/40 text-[10px] uppercase tracking-wide"},t,1,t))}const Pu=l=>{const t=Eu().map(x=>({model:x,def:Tu(x.id)})).sort((x,S)=>(S.def?.speedRating||0)-(x.def?.speedRating||0)),n=Au(),s=n.filter(x=>x.backend==="vllm"),r=n.filter(x=>x.backend==="onnx"),o=n.filter(x=>x.backend==="tfjs"),c=n.filter(x=>x.backend==="planned"),u=[...o,...c],m=l.compact??!1?t.slice(0,6):t,d=l.compact??!1?s.slice(0,3):s,f=l.compact??!1?r.slice(0,3):r,v=l.compact??!1?u.slice(0,2):u;return e("div",null,{class:"rounded-lg border border-border bg-card p-4","data-testid":"edge-inference-catalog"},[e("div",null,{class:"flex items-center gap-2 mb-3"},[e("div",null,{class:"text-sm font-semibold text-muted-foreground"},"EDGE MODEL CATALOG",3,null),e("div",null,{class:"ml-auto text-[10px] text-muted-foreground"},[h(t,"length")," WebLLM Â· ",h(s,"length")," vLLM Â· ",h(r,"length")," ONNX Â· ",h(u,"length")," TFJS/Planned"],1,null)],1,null),e("div",null,{class:"grid gap-3 lg:grid-cols-4"},[e("div",null,{class:"rounded border border-border/60 p-3 bg-muted/20"},[e("div",null,{class:"text-xs font-semibold text-cyan-400 mb-2"},"WebLLM (WebGPU)",3,null),e("div",null,{class:"space-y-2"},m.map(({model:x,def:S})=>e("div",null,{class:"flex items-center justify-between gap-2"},[e("div",null,null,[e("div",null,{class:"text-xs font-medium"},h(x,"name"),1,null),e("div",null,{class:"flex items-center gap-1 mt-1 text-[10px] text-muted-foreground"},[e("span",null,null,h(x,"vram"),1,null),vl(S?.capabilities)],1,null)],1,null),e("span",null,{class:"text-[10px] px-2 py-0.5 rounded bg-cyan-500/10 text-cyan-300"},"prebuilt",3,null)],1,x.id)),1,null)],1,null),e("div",null,{class:"rounded border border-border/60 p-3 bg-muted/20"},[e("div",null,{class:"text-xs font-semibold text-blue-300 mb-2"},"vLLM (Server)",3,null),e("div",null,{class:"space-y-2"},d.map(x=>e("div",null,{class:"flex items-center justify-between gap-2"},[e("div",null,null,[e("div",null,{class:"text-xs font-medium"},h(x,"name"),1,null),e("div",null,{class:"flex items-center gap-1 mt-1 text-[10px] text-muted-foreground"},vl(x.capabilities),1,null)],1,null),e("span",null,{class:"text-[10px] px-2 py-0.5 rounded bg-blue-500/10 text-blue-300"},h(x,"availability"),1,null)],1,x.id)),1,null)],1,null),e("div",null,{class:"rounded border border-border/60 p-3 bg-muted/20"},[e("div",null,{class:"text-xs font-semibold text-emerald-300 mb-2"},"ONNX Runtime (Browser)",3,null),e("div",null,{class:"space-y-2"},f.map(x=>e("div",null,{class:"flex items-center justify-between gap-2"},[e("div",null,null,[e("div",null,{class:"text-xs font-medium"},h(x,"name"),1,null),e("div",null,{class:"flex items-center gap-1 mt-1 text-[10px] text-muted-foreground"},[typeof x.sizeMB=="number"&&e("span",null,null,[h(x,"sizeMB"),"MB"],1,"w0_0"),vl(x.capabilities)],1,null)],1,null),e("span",null,{class:"text-[10px] px-2 py-0.5 rounded bg-emerald-500/10 text-emerald-300"},"custom",3,null)],1,x.id)),1,null)],1,null),e("div",null,{class:"rounded border border-border/60 p-3 bg-muted/20"},[e("div",null,{class:"text-xs font-semibold text-amber-300 mb-2"},"TFJS (Browser/Planned)",3,null),e("div",null,{class:"space-y-2"},v.map(x=>e("div",null,{class:"flex items-center justify-between gap-2"},[e("div",null,null,[e("div",null,{class:"text-xs font-medium"},h(x,"name"),1,null),e("div",null,{class:"flex items-center gap-1 mt-1 text-[10px] text-muted-foreground"},[typeof x.sizeMB=="number"&&e("span",null,null,[h(x,"sizeMB"),"MB"],1,"w0_1"),vl(x.capabilities)],1,null)],1,null),e("span",null,{class:"text-[10px] px-2 py-0.5 rounded bg-amber-500/10 text-amber-300"},h(x,"availability"),1,null)],1,x.id)),1,null)],1,null)],1,null)],1,"w0_2")},Lu=E(p(Pu,"s_ran2LNNAgBE")),Du=()=>e("div",null,{class:"rounded-lg border border-border bg-card p-4 space-y-3"},[e("div",null,{class:"flex items-center justify-between"},[e("div",null,{class:"font-semibold"},"ðŸ§ª Marimo (WASM) Notebook",3,null),e("div",null,{class:"text-xs text-muted-foreground mono"},"planned",3,null)],3,null),e("div",null,{class:"text-sm text-muted-foreground"},"This panel is a stable placeholder for a future in-browser notebook runtime (Pyodide/WASM). For now, use the SemOps editor + bus evidence to define â€œoperators as interfacesâ€, then promote notebooks into Rhizome artifacts.",3,null),e("div",null,{class:"text-xs text-muted-foreground mono"},"TODO: pyodide bootstrap â€¢ marimo runtime â€¢ rhizome persistence â€¢ ui.render event bridge",3,null)],3,"cq_0"),Ru=E(p(Du,"s_IP6RYxZoXYQ")),Nu=["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.stunprotocol.org:3478","stun:stun.sipgate.net:3478"],ju=[{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"}],zu=[{id:"sota",label:"SOTA Catalog",url:"/api/sota",summarize:l=>`${Array.isArray(l?.items)?l.items.length:0} items`},{id:"metatest",label:"MetaTest Inventory",url:"/api/metatest/inventory",summarize:l=>`${l?.summary?.total_tests||0} tests`},{id:"semops",label:"SemOps Schema",url:"/api/semops",summarize:l=>`${Object.keys(l?.operators||{}).length} ops`},{id:"semops-suggestions",label:"SemOps Suggestions",url:"/api/semops/suggestions",summarize:l=>`${(l?.tool_paths||[]).length} tools`},{id:"falkordb",label:"FalkorDB Health",url:"/api/falkordb/health",summarize:l=>`${l?.status||"unknown"} ${l?.nodes??0}n`},{id:"dialogos",label:"Dialogos Health",url:"/api/dialogos/health",summarize:l=>`${l?.status||"unknown"} ${l?.records_indexed_total??0} rec`},{id:"metrics",label:"Metrics Snapshot",url:"/api/metrics/snapshot?window=60",summarize:l=>`${l?.kpis?.velocity??0} ev/m`},{id:"bus",label:"Bus Events",url:"/api/bus/events?limit=1",summarize:l=>`${Array.isArray(l)?l.length:(l?.events||[]).length} events`},{id:"session",label:"Session State",url:"/api/session",summarize:l=>`${l?.flow_mode||"unknown"} ${l?.active_fallback||"fallback?"}`},{id:"agents",label:"Agents",url:"/api/agents",summarize:l=>`${Array.isArray(l?.agents)?l.agents.length:0} active`},{id:"browser",label:"Browser Daemon",url:"/api/browser/status",summarize:l=>`${l?.running?"running":"stopped"} tabs=${l?.tabs??0}`},{id:"cloud",label:"Cloud Storage",url:"/api/cloud/status",summarize:l=>`${l?.available?"available":"offline"} remotes=${Object.keys(l?.remotes||{}).length}`},{id:"git-log",label:"Git Log",url:"/api/git/log?limit=1",summarize:l=>`${Array.isArray(l?.commits)?l.commits.length:0} commits`}],Bu=[{term:"peer",symbol:"P",category:"topology"},{term:"connection",symbol:"C",category:"topology"},{term:"channel",symbol:"Ch",category:"data"},{term:"stream",symbol:"S",category:"media"},{term:"track",symbol:"T",category:"media"},{term:"candidate",symbol:"Î“",category:"ice"},{term:"host",symbol:"H",category:"ice"},{term:"srflx",symbol:"Î£",category:"ice"},{term:"relay",symbol:"R",category:"ice"},{term:"prflx",symbol:"Î ",category:"ice"},{term:"mesh",symbol:"M",category:"overlay"},{term:"star",symbol:"*",category:"overlay"},{term:"ring",symbol:"O",category:"overlay"},{term:"tree",symbol:"Î”",category:"overlay"},{term:"dht",symbol:"#",category:"overlay"},{term:"offer",symbol:"Î±",category:"sdp"},{term:"answer",symbol:"Î²",category:"sdp"},{term:"pranswer",symbol:"Ï€",category:"sdp"},{term:"emit",symbol:"â†’",category:"bus"},{term:"receive",symbol:"â†",category:"bus"},{term:"broadcast",symbol:"â‡‰",category:"bus"},{term:"gather",symbol:"â‡‡",category:"bus"},{term:"local",symbol:"L",category:"context"},{term:"sovereign",symbol:"Î©",category:"context"},{term:"federation",symbol:"F",category:"context"},{term:"swarm",symbol:"Î¨",category:"context"}],bl={unknown:"bg-muted-foreground/50",available:"bg-green-400",unavailable:"bg-red-400",checking:"bg-yellow-400 animate-pulse",error:"bg-red-500"},Uu=async()=>{const[l]=b(),t=[],n=navigator.gpu;if(n)try{const u=performance.now(),m=await n.requestAdapter(),d=Math.round(performance.now()-u);t.push({name:"WebGPU",status:m?"available":"unavailable",details:m?`Adapter found (${d}ms)`:"No adapter",latency:d})}catch(u){t.push({name:"WebGPU",status:"error",details:String(u)})}else t.push({name:"WebGPU",status:"unavailable",details:"API not present"});try{const m=document.createElement("canvas").getContext("webgl2");if(m){const d=m.getParameter(m.RENDERER);t.push({name:"WebGL 2",status:"available",details:d||"Available"})}else t.push({name:"WebGL 2",status:"unavailable",details:"Context failed"})}catch(u){t.push({name:"WebGL 2",status:"error",details:String(u)})}try{const m=document.createElement("canvas").getContext("webgl");t.push({name:"WebGL 1",status:m?"available":"unavailable",details:m?"Fallback available":"Not available"})}catch(u){t.push({name:"WebGL 1",status:"error",details:String(u)})}if(typeof WebAssembly<"u")try{const u=performance.now(),m=await WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0])),d=Math.round(performance.now()-u);t.push({name:"WebAssembly",status:m?"available":"unavailable",details:`WASM ${m?"validated":"invalid"} (${d}ms)`,latency:d})}catch(u){t.push({name:"WebAssembly",status:"error",details:String(u)})}else t.push({name:"WebAssembly",status:"unavailable",details:"Not supported"});const s=typeof SharedArrayBuffer<"u",r=typeof crossOriginIsolated<"u"?crossOriginIsolated:!1;t.push({name:"SharedArrayBuffer",status:s?"available":"unavailable",details:s?"Available (cross-origin isolated)":r?"Unavailable (check browser policies)":"Requires COOP:same-origin + COEP:require-corp"}),t.push({name:"Web Workers",status:typeof Worker<"u"?"available":"unavailable",details:typeof Worker<"u"?"Available":"Not supported"}),t.push({name:"Service Workers",status:"serviceWorker"in navigator?"available":"unavailable",details:"serviceWorker"in navigator?navigator.serviceWorker.controller?"Active controller":"Available, no controller":"Not supported"}),t.push({name:"RTCPeerConnection",status:typeof RTCPeerConnection<"u"?"available":"unavailable",details:typeof RTCPeerConnection<"u"?"Full WebRTC stack":"Not available"});const o=typeof VideoEncoder<"u"&&typeof VideoDecoder<"u";t.push({name:"WebCodecs",status:o?"available":"unavailable",details:o?"VideoEncoder/Decoder":"Not available"});const c=typeof window.WebTransport<"u";t.push({name:"WebTransport",status:c?"available":"unavailable",details:c?"HTTP/3 transport":"Not available"}),t.push({name:"OffscreenCanvas",status:typeof OffscreenCanvas<"u"?"available":"unavailable",details:typeof OffscreenCanvas<"u"?"Worker canvas":"Not available"}),l.nativeApis=t},Fu=async()=>{const[l]=b(),t=[];t.push({name:"LocalStorage",status:typeof localStorage<"u"?"available":"unavailable",details:typeof localStorage<"u"?"Persistent storage":"Not available"}),l.webApis=t},qu=async()=>{const[l]=b(),t=async s=>{const r=performance.now(),o=new AbortController,c=setTimeout(()=>o.abort(),4e3);try{const u=s.url.includes("?")?"&":"?",m=await fetch(`${s.url}${u}ts=${Date.now()}`,{cache:"no-store",signal:o.signal}),d=Math.round(performance.now()-r),f=await m.text();if(!m.ok)return{name:s.label,status:"unavailable",details:`HTTP ${m.status}`,latency:d};let v=null;try{v=JSON.parse(f)}catch{return{name:s.label,status:"error",details:"invalid JSON",latency:d}}return{name:s.label,status:"available",details:s.summarize?s.summarize(v):"ok",latency:d}}catch(u){return{name:s.label,status:"error",details:String(u),latency:Math.round(performance.now()-r)}}finally{clearTimeout(c)}},n=await Promise.all(zu.map(s=>t(s)));l.livenessChecks=n},Gu=async()=>{},Vu=async()=>{},Hu=async()=>{},Wu=async()=>{},Yu=async()=>{},Ju=async()=>{},Ku=()=>{},Qu=l=>{const[t]=b();t.topology=l,t.meshStatus="active"},Xu=l=>{const[t]=b();t.contextMode=l},Zu=async()=>{const[l,t,n,s]=b();await t(),await s(),await l(),await n()},ec=()=>{const[l,t]=b();return l.value=t.id},lc=(l,t)=>{const[n]=b();return n.value=t.value},tc=l=>{const[t]=b();l.key==="Enter"&&t()},nc=()=>{const[l,t]=b();return l(t)},sc=()=>{const[l,t]=b();return t(l)},ac=()=>{W();const l=y("native"),t=B({nativeApis:[],webApis:[],livenessChecks:[],webrtc:{localStream:null,peerConnection:null,dataChannel:null,iceCandidates:[],connectionState:"new",iceState:"new",signalingState:"stable",stats:{}},stunServers:Nu.map(I=>({url:I,status:"unknown"})),turnServers:ju.map(I=>({url:I.urls,status:"unknown"})),topology:"mesh",peers:[],meshStatus:"inactive",contextMode:"local",grammarBindings:Bu}),n=y([]),s=y(""),r=y({isolated:!1,sab:!1,protocol:"unknown",host:"unknown"});D(_("s_fqff1clJ0DM",[r]));const o=p(Uu,"s_TCL4HMxsI0o",[t]),c=p(Fu,"s_zrUGt0AL9V0",[t]),u=p(qu,"s_y3WD0zHf8Hc",[t]),m=p(Gu,"s_BRZ3UniKxyQ"),d=p(Vu,"s_DqG163p9AOM"),f=p(Hu,"s_xYyy0X0Z6nE"),v=p(Wu,"s_UBCKktreUlg"),x=p(Yu,"s_ziJn0ETxCaQ"),S=p(Ju,"s_uonRkKua1E4"),M=p(Ku,"s_HZ9GYusuy0U"),$=p(Qu,"s_XyXFGsWV7Bg",[t]),w=p(Xu,"s_RmxSGoq7AkU",[t]);D(_("s_bd0iK50Jlv0",[u,o,c]));const k=[{id:"native",label:"Native APIs",icon:"âš¡"},{id:"webapis",label:"Web Platform",icon:"ðŸŒ"},{id:"liveness",label:"Stack Liveness",icon:"CHK"},{id:"webrtc",label:"WebRTC",icon:"ðŸ“¡"},{id:"overlay",label:"Overlay Net",icon:"ðŸ•¸ï¸"},{id:"context",label:"Context",icon:"ðŸŽ¯"},{id:"neurosym",label:"Grammar",icon:"ðŸ§¬"}];return e("div",null,{class:"h-full flex flex-col bg-md-surface overflow-hidden"},[e("div",null,{class:"flex-shrink-0 border-b border-md-outline/20 p-4 bg-md-surface-container-low"},[e("div",null,{class:"flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"text-3xl filter drop-shadow-md"},"ðŸ”¬",3,null),e("div",null,null,[e("h2",null,{class:"text-xl font-bold tracking-tight text-md-on-surface"},"Diagnostics & Control",3,null),e("p",null,{class:"text-[11px] font-medium uppercase tracking-widest text-md-on-surface-variant/70"},"Deep Native â€¢ WebRTC â€¢ Overlay â€¢ Neurosymbolic",3,null)],3,null)],3,null),e("div",null,{class:"flex items-center gap-3"},[e("div",null,{class:"hidden md:flex flex-col items-end mr-4"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:i(I=>`w-2 h-2 rounded-full ${I.value.isolated?"bg-md-primary":"bg-md-outline"}`,[r],'`w-2 h-2 rounded-full ${p0.value.isolated?"bg-md-primary":"bg-md-outline"}`')},null,3,null),e("span",null,{class:"text-[10px] font-mono text-md-on-surface-variant"},["Isolated: ",String(r.value.isolated)],1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:i(I=>`w-2 h-2 rounded-full ${I.value.sab?"bg-md-primary":"bg-md-outline"}`,[r],'`w-2 h-2 rounded-full ${p0.value.sab?"bg-md-primary":"bg-md-outline"}`')},null,3,null),e("span",null,{class:"text-[10px] font-mono text-md-on-surface-variant"},["SAB: ",String(r.value.sab)],1,null)],1,null)],1,null),g(L,{variant:"tonal",icon:"refresh",onClick$:p(Zu,"s_aBuGGnKFJpQ",[u,o,m,c]),children:"Refresh All",[a]:{variant:a,icon:a,onClick$:a}},3,"h9_0")],1,null)],1,null),e("div",null,{class:"flex gap-2 mt-6 overflow-x-auto pb-1 no-scrollbar"},k.map(I=>g(L,{variant:l.value===I.id?"primary":"secondary",onClick$:p(ec,"s_8dfzFa5nZio",[l,I]),class:"whitespace-nowrap rounded-full h-8 text-xs px-4",children:[e("span",null,{class:"mr-2 opacity-80"},h(I,"icon"),1,null),h(I,"label")],[a]:{class:a}},1,I.id)),1,null)],1,null),e("div",null,{class:"flex-1 overflow-auto p-6 bg-md-surface-container-lowest"},[l.value==="native"&&e("div",null,{class:"space-y-6"},e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},t.nativeApis.map(I=>g(H,{variant:I.status==="available"?"elevated":"outlined",class:`group transition-all duration-300 ${I.status==="available"?"border-l-4 border-l-md-primary":I.status==="unavailable"?"border-l-4 border-l-md-error opacity-70":"border-l-4 border-l-md-warning"}`,children:[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"font-bold text-sm tracking-tight text-md-on-surface"},h(I,"name"),1,null),e("span",{class:`w-2.5 h-2.5 rounded-full ${bl[I.status]}`},null,null,3,null)],1,null),e("div",null,{class:"text-[11px] leading-relaxed text-md-on-surface-variant/80 line-clamp-2 min-h-[32px]"},h(I,"details"),1,null),I.latency!==void 0&&e("div",null,{class:"mt-3 flex items-center justify-between"},[e("span",null,{class:"text-[10px] font-bold text-md-primary/70 uppercase"},"Latency",3,null),e("span",null,{class:"text-[10px] font-mono font-bold text-md-primary bg-md-primary/10 px-1.5 py-0.5 rounded"},[h(I,"latency"),"ms"],1,null)],1,"h9_1")]},1,I.name)),1,null),1,"h9_2"),l.value==="webapis"&&e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},t.webApis.map(I=>g(H,{variant:"outlined",padding:"p-4",class:"hover:bg-md-surface-container-low transition-colors",children:[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"font-bold text-sm text-md-on-surface"},h(I,"name"),1,null),e("span",{class:`w-2 h-2 rounded-full ${bl[I.status]}`},null,null,3,null)],1,null),e("div",null,{class:"text-[11px] text-md-on-surface-variant/80"},h(I,"details"),1,null)],[a]:{variant:a,padding:a,class:a}},1,I.name)),1,"h9_3"),l.value==="liveness"&&e("div",null,{class:"space-y-6"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-md-on-surface-variant"},"Service Connectivity Matrix",3,null),g(L,{variant:"tonal",onClick$:u,class:"h-8 text-[11px]",icon:"sync",children:"Run checks",[a]:{variant:a,onClick$:a,class:a,icon:a}},3,"h9_4")],1,null),e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},t.livenessChecks.map(I=>g(H,{variant:I.status==="available"?"elevated":"outlined",padding:"p-4",class:I.status==="available"?"bg-md-primary/5 border-md-primary/10":"",children:[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"font-bold text-sm text-md-on-surface"},h(I,"name"),1,null),e("span",{class:`w-2.5 h-2.5 rounded-full ${bl[I.status]}`},null,null,3,null)],1,null),e("div",null,{class:"text-[11px] font-mono text-md-primary/80 mb-2 truncate bg-md-surface-container px-2 py-1 rounded"},h(I,"details"),1,null),I.latency!==void 0&&e("div",null,{class:"flex items-center justify-end text-[10px] font-mono text-md-on-surface-variant/60"},[h(I,"latency"),"ms"],1,"h9_5")],[a]:{padding:a}},1,I.name)),1,null)],1,"h9_6"),l.value==="webrtc"&&e("div",null,{class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},[g(H,{variant:"outlined",class:"bg-md-surface",children:[e("div",null,{class:"flex items-center justify-between mb-4"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-md-on-surface-variant"},"STUN/TURN Infrastructure",3,null),g(L,{variant:"tonal",onClick$:m,class:"h-8 text-[11px]",icon:"search",children:"Probe",[a]:{variant:a,onClick$:a,class:a,icon:a}},3,"h9_7")],1,null),e("div",null,{class:"space-y-2"},t.stunServers.map(I=>e("div",null,{class:"flex items-center justify-between p-2 rounded bg-md-surface-container-low border border-md-outline/10"},[e("span",null,{class:"font-mono text-[10px] text-md-on-surface-variant truncate mr-2"},h(I,"url"),1,null),e("div",null,{class:"flex items-center gap-3"},[I.latency&&e("span",null,{class:"text-[10px] font-mono font-bold text-md-primary"},[h(I,"latency"),"ms"],1,"h9_8"),e("span",{class:`w-2 h-2 rounded-full ${bl[I.status]}`},null,null,3,null)],1,null)],1,I.url)),1,null)],[a]:{variant:a,class:a}},1,"h9_9"),g(H,{variant:"outlined",class:"bg-md-surface",children:[e("div",null,{class:"flex items-center justify-between mb-4"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-md-on-surface-variant"},"ICE Orchestration",3,null),g(L,{variant:"tonal",onClick$:d,class:"h-8 text-[11px]",icon:"settings_input_antenna",children:"Gather",[a]:{variant:a,onClick$:a,class:a,icon:a}},3,"h9_10")],1,null),e("div",null,{class:"flex items-center gap-2 mb-4 bg-md-secondary/10 px-3 py-1.5 rounded-full w-fit"},[e("span",null,{class:"text-[10px] font-bold text-md-secondary uppercase"},"State:",3,null),e("span",null,{class:"text-[10px] font-mono font-bold text-md-secondary"},i(I=>I.webrtc.iceState,[t],"p0.webrtc.iceState"),3,null)],3,null),t.webrtc.iceCandidates.length>0?e("div",null,{class:"max-h-48 overflow-auto space-y-2 pr-2 no-scrollbar"},t.webrtc.iceCandidates.map((I,T)=>e("div",null,{class:"text-[10px] font-mono p-2 rounded bg-md-surface-container-highest/30 text-md-on-surface-variant border border-md-outline/5"},[e("span",null,{class:"text-md-primary font-bold mr-2"},["[",h(I,"type"),"]"],1,null),h(I,"protocol")," ",h(I,"address"),":",h(I,"port")],1,T)),1,"h9_11"):e("div",null,{class:"py-8 text-center text-[11px] text-md-on-surface-variant/40 italic"},"No candidates gathered.",3,null)],[a]:{variant:a,class:a}},1,"h9_12"),g(H,{variant:"outlined",class:"lg:col-span-2 bg-md-surface",children:[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-md-on-surface-variant mb-4"},"Isomorphic Media Pipeline",3,null),e("div",null,{class:"flex flex-wrap gap-2 mb-6"},[g(L,{variant:"primary",onClick$:f,class:"h-9",icon:"videocam",children:"Start Camera",[a]:{variant:a,onClick$:a,class:a,icon:a}},3,"h9_13"),g(L,{variant:"secondary",onClick$:v,class:"h-9",icon:"videocam_off",children:"Stop",[a]:{variant:a,onClick$:a,class:a,icon:a}},3,"h9_14"),g(L,{variant:"tonal",onClick$:x,class:"h-9",icon:"sync_alt",children:"Loopback Test",[a]:{variant:a,onClick$:a,class:a,icon:a}},3,"h9_15")],1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,{class:"space-y-2"},[e("div",null,{class:"flex items-center justify-between px-1"},[e("span",null,{class:"text-[10px] font-bold uppercase tracking-tighter text-md-on-surface-variant"},"Local Ingress",3,null),e("span",null,{class:"text-[9px] font-mono text-md-primary bg-md-primary/10 px-1.5 rounded"},"Native",3,null)],3,null),e("div",null,{class:"relative aspect-video bg-black rounded-xl overflow-hidden border-2 border-md-outline/10 shadow-inner"},e("video",null,{id:"local-video",autoplay:!0,muted:!0,playsInline:!0,class:"w-full h-full object-cover"},null,3,null),3,null)],3,null),e("div",null,{class:"space-y-2"},[e("div",null,{class:"flex items-center justify-between px-1"},[e("span",null,{class:"text-[10px] font-bold uppercase tracking-tighter text-md-on-surface-variant"},"Remote Egress (Loopback)",3,null),e("span",null,{class:"text-[9px] font-mono text-md-secondary bg-md-secondary/10 px-1.5 rounded"},"P2P",3,null)],3,null),e("div",null,{class:"relative aspect-video bg-black rounded-xl overflow-hidden border-2 border-md-outline/10 shadow-inner"},e("video",null,{id:"remote-video",autoplay:!0,playsInline:!0,class:"w-full h-full object-cover"},null,3,null),3,null)],3,null)],3,null)],[a]:{variant:a,class:a}},1,"h9_16"),g(H,{variant:"outlined",class:"lg:col-span-2 bg-md-surface",children:[e("div",null,{class:"flex items-center justify-between mb-4"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-md-on-surface-variant"},"RTCDatachannel Terminal",3,null),g(L,{variant:"tonal",onClick$:S,class:"h-8 text-[11px]",children:"Activate",[a]:{variant:a,onClick$:a,class:a}},3,"h9_17")],1,null),e("div",null,{class:"flex gap-2 mb-4"},[g(V,{get value(){return s.value},onInput$:p(lc,"s_bbaQmG3ODr8",[s]),placeholder:"Broadcast to mesh...",class:"flex-1",onKeyDown$:p(tc,"s_FEuXDpvzSTQ",[M]),[a]:{value:i(I=>I.value,[s],"p0.value"),onInput$:a,placeholder:a,class:a,onKeyDown$:a}},3,"h9_18"),g(L,{onClick$:M,icon:"send",children:"Send",[a]:{onClick$:a,icon:a}},3,"h9_19")],1,null),e("div",null,{class:"h-40 overflow-auto bg-md-surface-container-highest/50 rounded-lg p-3 font-mono text-[11px] border border-md-outline/10 no-scrollbar"},n.value.length>0?n.value.map((I,T)=>e("div",null,{class:"text-md-on-surface-variant/80 py-0.5 border-b border-md-outline/5 last:border-0"},I,1,T)):e("div",null,{class:"h-full flex items-center justify-center text-md-on-surface-variant/30 italic"},"Terminal idle. Waiting for channel activation.",3,"h9_20"),1,null)],[a]:{variant:a,class:a}},1,"h9_21")],1,"h9_22"),l.value==="overlay"&&e("div",null,{class:"space-y-6"},[g(H,{variant:"outlined",class:"bg-md-surface",children:[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-md-on-surface-variant mb-6 text-center"},"Active Network Topology Selection",3,null),e("div",null,{class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4"},["mesh","star","ring","tree","hybrid","dht"].map(I=>g(L,{variant:t.topology===I?"primary":"secondary",onClick$:p(nc,"s_GFDwIkcpxmM",[$,I]),class:"h-auto flex-col py-6 rounded-2xl transition-all duration-300 shadow-sm hover:shadow-md",children:[e("div",null,{class:"text-3xl mb-3 filter drop-shadow-sm group-hover:scale-110 transition-transform"},I==="mesh"?"ðŸ•¸ï¸":I==="star"?"â­":I==="ring"?"â­•":I==="tree"?"ðŸŒ²":I==="hybrid"?"ðŸ”€":"#ï¸âƒ£",1,null),e("div",null,{class:"text-xs font-bold uppercase tracking-widest"},I,1,null)],[a]:{class:a}},1,I)),1,null)],[a]:{variant:a,class:a}},1,"h9_23"),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-6"},[g(H,{variant:"filled",class:"bg-md-primary/5 border border-md-primary/10",children:[e("div",null,{class:"text-[10px] font-bold uppercase text-md-primary mb-1"},"Status",3,null),e("div",null,{class:"text-2xl font-bold text-md-on-surface capitalize"},i(I=>I.meshStatus,[t],"p0.meshStatus"),3,null)],[a]:{variant:a,class:a}},3,"h9_24"),g(H,{variant:"filled",class:"bg-md-secondary/5 border border-md-secondary/10",children:[e("div",null,{class:"text-[10px] font-bold uppercase text-md-secondary mb-1"},"Peers",3,null),e("div",null,{class:"text-2xl font-bold text-md-on-surface"},[i(I=>I.peers.length,[t],"p0.peers.length")," Nodes"],3,null)],[a]:{variant:a,class:a}},3,"h9_25"),g(H,{variant:"filled",class:"bg-md-tertiary/5 border border-md-tertiary/10",children:[e("div",null,{class:"text-[10px] font-bold uppercase text-md-tertiary mb-1"},"Active Edges",3,null),e("div",null,{class:"text-2xl font-bold text-md-on-surface"},"0 Edges",3,null)],[a]:{variant:a,class:a}},3,"h9_26")],1,null)],1,"h9_27"),l.value==="context"&&e("div",null,{class:"space-y-6"},g(H,{variant:"outlined",class:"bg-md-surface",children:[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-md-on-surface-variant mb-8 text-center"},"Swarm Operational Context",3,null),e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6"},["local","peer","swarm","federation","sovereign"].map(I=>g(L,{variant:t.contextMode===I?"primary":"secondary",onClick$:p(sc,"s_Lo3BjxB9GdA",[I,w]),class:"h-auto flex-col py-8 rounded-3xl transition-all duration-300 shadow-sm hover:shadow-lg",children:[e("div",null,{class:"text-4xl mb-4"},I==="local"?"ðŸ’»":I==="peer"?"ðŸ¤":I==="swarm"?"ðŸ":I==="federation"?"ðŸ›ï¸":"ðŸ‘‘",1,null),e("div",null,{class:"text-xs font-bold uppercase tracking-widest"},I,1,null),e("div",null,{class:"mt-2 text-[9px] opacity-60 font-medium"},"Click to pivot",3,null)],[a]:{class:a}},1,I)),1,null)],[a]:{variant:a,class:a}},1,"h9_28"),1,"h9_29"),l.value==="neurosym"&&e("div",null,{class:"space-y-8"},[g(H,{variant:"filled",class:"bg-md-primary/10 border border-md-primary/20 text-center py-8",children:[e("h3",null,{class:"text-xl font-bold text-md-primary mb-2"},"ðŸ§¬ Neurosymbolic Grammar Engine",3,null),e("p",null,{class:"text-sm text-md-on-surface-variant max-w-2xl mx-auto"},"Formal vocabulary and symbol bindings used for LLM-to-System orchestration and semantic bus routing.",3,null)],[a]:{variant:a,class:a}},3,"h9_30"),e("div",null,{class:"space-y-12"},["topology","ice","sdp","media","data","bus","overlay","context"].map(I=>e("div",null,{class:"space-y-4"},[e("h4",null,{class:"text-xs font-bold uppercase tracking-[0.2em] text-md-primary/70 ml-2"},[I," Vocabulary"],1,null),e("div",null,{class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"},t.grammarBindings.filter(T=>T.category===I).map(T=>g(H,{variant:"elevated",padding:"p-4",class:"text-center group hover:bg-md-primary hover:text-md-on-primary transition-all duration-300 cursor-default",children:[e("div",null,{class:"text-3xl font-mono text-md-primary group-hover:text-md-on-primary mb-2 transition-colors"},h(T,"symbol"),1,null),e("div",null,{class:"text-[10px] font-bold uppercase tracking-widest text-md-on-surface-variant group-hover:text-md-on-primary/80 transition-colors"},h(T,"term"),1,null)],[a]:{variant:a,padding:a,class:a}},1,T.term)),1,null)],1,I)),1,null)],1,"h9_31")],1,null)],1,"h9_32")},rc=E(p(ac,"s_fLy8USVRczI"));function oc(l,t){const n=l.topic;if(n.endsWith(".request")){const s=n.replace(".request","");return t.some(o=>o===`${s}.response`||o===`${s}.ack`)?`â—‡ ${s}.response`:`â³ ${s}.*`}if(n.includes(".spawn")||n.includes(".started")){const s=n.split(".")[0];return t.some(o=>o.startsWith(s)&&(o.includes(".end")||o.includes(".done")))?`â–¡ ${s}.*`:`â—‹ ${s}.end`}return l.level==="error"?"âš  error state":null}function Al(l){const t=l.split(".");return{domain:t[0]||"unknown",subdomain:t[1]||"",action:t.slice(2).join(".")||t[1]||""}}function _n(l){const t=l.semantic,n=l.data,s=!!(t?.embedding||n?.vector||n?.embedding||l.kind==="artifact"||l.topic.includes("rag.")||l.topic.includes("sota.")),{domain:r}=Al(l.topic),o={dialogos:"inference",strp:"topology",lens:"routing",verify:"evidence",mcp:"tooling",a2a:"negotiation",git:"versioning",rag:"retrieval",sota:"knowledge"};return{hasEmbedding:s,similarity:s?Math.random()*.3+.7:void 0,cluster:o[r]||"general"}}const ic=()=>{const[l,t,n]=b();l.onSearch$(n.value,t.value)},uc=(l,t)=>{const[n]=b();return n.value=t.value},cc=l=>{const[t]=b();l.key==="Enter"&&t()},dc=()=>{const[l]=b();return l.value=!l.value},pc=()=>{const[l,t]=b();return t.value=l},mc=l=>{W();const t=y(""),n=y("glob"),s=y(!1),r=p(ic,"s_7XeInDtXAXE",[l,n,t]),o={glob:"ðŸ”",regex:"âš™ï¸",ltl:"â—‡",actor:"ðŸ‘¤",topic:"ðŸ“Œ"};return e("div",null,{class:"space-y-2"},[e("div",null,{class:"flex gap-2"},[e("div",null,{class:"flex-1 relative flex gap-2"},[g(V,{label:"Search Events",get value(){return t.value},onInput$:p(uc,"s_CnkPIEqlS1I",[t]),onKeyDown$:p(cc,"s_ltf32Sdm52M",[r]),get placeholder(){return l.placeholder||"strp.*, /error/i, â—‡response"},class:"flex-1",[a]:{label:a,value:i(c=>c.value,[t],"p0.value"),onInput$:a,onKeyDown$:a,placeholder:i(c=>c.placeholder||"strp.*, /error/i, â—‡response",[l],'p0.placeholder||"strp.*, /error/i, â—‡response"'),class:a}},3,"Ji_0"),g(L,{variant:"text",onClick$:p(dc,"s_zugcz3xoSEA",[s]),get icon(){return s.value?"close":"help"},[a]:{variant:a,onClick$:a,icon:i(c=>c.value?"close":"help",[s],'p0.value?"close":"help"')}},3,"Ji_1"),g(L,{variant:"tonal",onClick$:r,children:"Search",[a]:{variant:a,onClick$:a}},3,"Ji_2")],1,null),e("div",null,{class:"flex gap-1"},Object.keys(o).map(c=>g(L,{variant:n.value===c?"tonal":"secondary",onClick$:p(pc,"s_7hGaGIWMhzY",[c,n]),class:"px-3 min-w-[40px]",title:c,children:o[c],[a]:{class:a}},1,c)),1,null)],1,null),s.value&&g(H,{variant:"outlined",padding:"p-3",class:"text-xs space-y-2 bg-muted/20",children:[g(q,{level:"div",color:"amber",size:"xs",children:"Search Modes:",[a]:{level:a,color:a,size:a}},3,"Ji_3"),e("div",null,{class:"grid grid-cols-2 gap-2"},[e("div",null,null,[e("span",null,{class:"text-primary"},"ðŸ” Glob:",3,null)," strp.*, dialogos.cell.* "],3,null),e("div",null,null,[e("span",null,{class:"text-primary"},"âš™ï¸ Regex:",3,null)," /error|warn/i, /strp\\.\\w+/ "],3,null),e("div",null,null,[e("span",null,{class:"text-primary"},"â—‡ LTL:",3,null)," â—‡response, â–¡error, â—‹spawn "],3,null),e("div",null,null,[e("span",null,{class:"text-primary"},"ðŸ‘¤ Actor:",3,null)," claude, codex, dashboard "],3,null),e("div",null,null,[e("span",null,{class:"text-primary"},"ðŸ“Œ Topic:",3,null)," exact topic prefix match "],3,null)],3,null)],[a]:{variant:a,padding:a,class:a}},1,"Ji_4")],1,"Ji_5")},gc=E(p(mc,"s_JuSgui70uVs")),vc=()=>{const[l]=b();if(l.events.length===0)return Array(l.buckets??60).fill(0);const t=l.events.map(u=>new Date(u.iso||0).getTime()).filter(u=>u>0).sort((u,m)=>u-m);if(t.length===0)return Array(l.buckets??60).fill(0);const n=t[0],o=(t[t.length-1]-n||1)/(l.buckets??60),c=Array(l.buckets??60).fill(0);for(const u of t){const m=Math.min((l.buckets??60)-1,Math.floor((u-n)/o));c[m]++}return c},bc=()=>{const[l]=b();return Math.max(1,...l.value)},fc=()=>{const[l]=b();if(l.events.length===0)return Array(l.buckets??60).fill(0);const t=l.events.filter(m=>m.level==="error").map(m=>new Date(m.iso||0).getTime()).filter(m=>m>0).sort((m,d)=>m-d);if(t.length===0)return Array(l.buckets??60).fill(0);const n=l.events.map(m=>new Date(m.iso||0).getTime()).filter(m=>m>0).sort((m,d)=>m-d),s=n[0],c=(n[n.length-1]-s||1)/(l.buckets??60),u=Array(l.buckets??60).fill(0);for(const m of t){const d=Math.min((l.buckets??60)-1,Math.floor((m-s)/c));u[d]++}return u},xc=l=>{const t=N(p(vc,"s_aStkM8jRlZ0",[l])),n=N(p(bc,"s_a8VZ2IJh6Tg",[t])),s=N(p(fc,"s_j7F01rh08iE",[l])),r=(l.width??300)/(l.buckets??60)-1;return g(H,{padding:"p-3",children:[e("div",null,{class:"flex items-center justify-between mb-2"},[g(q,{level:"span",color:"cyan",size:"xs",children:"EVENT TIMELINE",[a]:{level:a,color:a,size:a}},3,"Ji_6"),e("div",null,{class:"flex items-center gap-2 text-[10px]"},[e("span",null,{class:"flex items-center gap-1"},[e("span",null,{class:"w-2 h-2 rounded-sm bg-primary/60"},null,3,null),"events"],3,null),e("span",null,{class:"flex items-center gap-1"},[e("span",null,{class:"w-2 h-2 rounded-sm bg-red-500/60"},null,3,null),"errors"],3,null)],3,null)],1,null),e("svg",null,{width:i(o=>o.width??300,[l],"p0.width??300"),height:i(o=>o.height??40,[l],"p0.height??40"),class:"overflow-visible"},[e("defs",null,null,e("pattern",null,{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse"},e("path",null,{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"rgba(255,255,255,0.05)","stroke-width":"0.5"},null,3,null),3,null),3,null),e("rect",null,{width:i(o=>o.width??300,[l],"p0.width??300"),height:i(o=>o.height??40,[l],"p0.height??40"),fill:"url(#grid)",rx:"4"},null,3,null),t.value.map((o,c)=>{const u=o/n.value*((l.height??40)-4),m=s.value[c]/n.value*((l.height??40)-4),d=c*(r+1);return e("g",null,null,[e("rect",{x:d,y:(l.height??40)-u-2,width:r,height:u},{fill:"rgba(var(--primary-rgb), 0.4)",rx:"1"},null,3,null),m>0&&e("rect",{x:d,y:(l.height??40)-m-2,width:r,height:m},{fill:"rgba(239, 68, 68, 0.6)",rx:"1"},null,3,"Ji_7")],1,c)}),e("line",null,{x1:"0",y1:i(o=>(o.height??40)-1,[l],"(p0.height??40)-1"),x2:i(o=>o.width??300,[l],"p0.width??300"),y2:i(o=>(o.height??40)-1,[l],"(p0.height??40)-1"),stroke:"rgba(255,255,255,0.1)"},null,3,null)],1,null),e("div",null,{class:"flex justify-between text-[10px] text-muted-foreground mt-1"},[e("span",null,null,"oldest",3,null),e("span",null,null,[i(o=>o.events.length,[l],"p0.events.length")," events"],3,null),e("span",null,null,"newest",3,null)],3,null)],[a]:{padding:a}},1,"Ji_8")},hc=E(p(xc,"s_rGX3hPl0EgA")),yc=()=>{const[l]=b(),t=new Map,n=new Map,s=new Map;for(const d of l.events.slice(-500)){const f=d.actor||"unknown",{domain:v,subdomain:x}=Al(d.topic),S=x?`${v}.${x}`:v;n.set(f,(n.get(f)||0)+1),s.set(S,(s.get(S)||0)+1);const M=`${f}â†’${S}`,$=t.get(M);$?$.count++:t.set(M,{from:f,to:S,count:1,kind:d.kind||"event"})}const r=Array.from(n.entries()).sort((d,f)=>f[1]-d[1]).slice(0,Math.floor((l.maxNodes??20)/2)).map(([d,f])=>({name:d,count:f,type:"actor"})),o=Array.from(s.entries()).sort((d,f)=>f[1]-d[1]).slice(0,Math.floor((l.maxNodes??20)/2)).map(([d,f])=>({name:d,count:f,type:"topic"})),c=new Set(r.map(d=>d.name)),u=new Set(o.map(d=>d.name)),m=Array.from(t.values()).filter(d=>c.has(d.from)&&u.has(d.to)).sort((d,f)=>f.count-d.count).slice(0,30);return{actors:r,topics:o,edges:m}},_c=l=>{const t=N(p(yc,"s_xeYe0kCXMnk",[l])),n=r=>30+r*((l.height??200)-40)/Math.max(1,t.value.actors.length-1),s=r=>30+r*((l.height??200)-40)/Math.max(1,t.value.topics.length-1);return g(H,{padding:"p-3",children:[e("div",null,{class:"flex items-center justify-between mb-2"},[g(q,{level:"span",color:"purple",size:"xs",animation:"flicker",children:"EVENT FLOWMAP (KG)",[a]:{level:a,color:a,size:a,animation:a}},3,"Ji_9"),e("div",null,{class:"flex items-center gap-2 text-[10px]"},[e("span",null,{class:"flex items-center gap-1"},[e("span",null,{class:"w-2 h-2 rounded-full bg-cyan-500"},null,3,null),"actors"],3,null),e("span",null,{class:"flex items-center gap-1"},[e("span",null,{class:"w-2 h-2 rounded-full bg-purple-500"},null,3,null),"topics"],3,null)],3,null)],1,null),e("svg",null,{width:"100%",height:i(r=>r.height??200,[l],"p0.height??200"),viewBox:i(r=>`0 0 400 ${r.height??200}`,[l],"`0 0 400 ${p0.height??200}`"),class:"overflow-visible"},[t.value.edges.map((r,o)=>{const c=t.value.actors.findIndex(M=>M.name===r.from),u=t.value.topics.findIndex(M=>M.name===r.to);if(c===-1||u===-1)return null;const m=100,d=n(c),f=300,v=s(u),x=Math.min(.8,.1+r.count*.1),S=Math.min(3,.5+r.count*.2);return e("path",{d:`M ${m} ${d} C 200 ${d}, 200 ${v}, ${f} ${v}`,stroke:r.kind==="error"?"rgba(239,68,68,0.5)":"rgba(168,85,247,0.3)","stroke-width":S,opacity:x},{fill:"none"},null,3,o)}),t.value.actors.map((r,o)=>e("g",{transform:`translate(10, ${n(o)})`},null,[e("circle",null,{r:"6",fill:"rgba(6,182,212,0.8)",stroke:"rgba(6,182,212,1)","stroke-width":"1"},null,3,null),e("text",null,{x:"14",y:"4",class:"text-[9px] fill-cyan-300 font-mono"},r.name,1,null),e("text",null,{x:"14",y:"12",class:"text-[8px] fill-muted-foreground"},r.count,1,null)],1,`actor-${r.name}`)),t.value.topics.map((r,o)=>e("g",{transform:`translate(390, ${s(o)})`},null,[e("circle",null,{r:"6",fill:"rgba(168,85,247,0.8)",stroke:"rgba(168,85,247,1)","stroke-width":"1"},null,3,null),e("text",null,{x:"-84",y:"4",class:"text-[9px] fill-purple-300 font-mono text-end","text-anchor":"end"},r.name,1,null),e("text",null,{x:"-84",y:"12",class:"text-[8px] fill-muted-foreground text-end","text-anchor":"end"},r.count,1,null)],1,`topic-${r.name}`))],1,null)],[a]:{padding:a}},1,"Ji_10")},wc=E(p(_c,"s_DcUe0UvjIQc")),kc=l=>{const t=y(!1),n=l.event.semantic,s=l.event.data?JSON.stringify(l.event.data,null,2).slice(0,300):null,{domain:r,subdomain:o,action:c}=Al(l.event.topic),u=_n(l.event),m=l.showLTL??!0?oc(l.event,[]):null,d=l.event.level==="error"?"border-red-500/50 shadow-[0_0_15px_-5px_rgba(239,68,68,0.3)]":l.event.kind==="request"?"border-blue-500/30 shadow-[0_0_15px_-5px_rgba(59,130,246,0.2)]":l.event.kind==="artifact"?"border-purple-500/30 shadow-[0_0_15px_-5px_rgba(168,85,247,0.2)]":"border-[var(--glass-border)] hover:border-[var(--glass-border-hover)]";return g(H,{class:`flex flex-col gap-3 ${d}`,variant:"outlined",children:[e("div",null,{class:"flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:i(f=>`w-2 h-2 rounded-full ${f.event.level==="error"?"bg-red-500 animate-pulse":f.event.level==="warn"?"bg-yellow-500":"bg-green-500"}`,[l],'`w-2 h-2 rounded-full ${p0.event.level==="error"?"bg-red-500 animate-pulse":p0.event.level==="warn"?"bg-yellow-500":"bg-green-500"}`')},null,3,null),e("span",null,{class:"text-xs font-mono text-muted-foreground"},i(f=>f.event.iso?.slice(11,19),[l],"p0.event.iso?.slice(11,19)"),3,null),e("span",null,{class:"text-[9px] px-1.5 py-0.5 rounded bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 uppercase tracking-wider"},r,1,null)],1,null),e("div",null,{class:"flex items-center gap-1"},[(l.showVectors??!0)&&u.hasEmbedding&&e("span",{title:`Cluster: ${u.cluster}, Similarity: ${u.similarity?.toFixed(2)}`},{class:"text-[9px] px-1.5 py-0.5 rounded bg-green-500/10 text-green-400 border border-green-500/20"},"ðŸ“Š vec",3,"Ji_11"),l.event.data?.provenance_id&&e("button",null,{class:"text-[9px] px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30 hover:bg-blue-500/40",onClick$:_("s_0UogB0RTdYM",[l])},"ðŸ”— PROV",3,"Ji_12"),e("span",{class:`text-[10px] px-2 py-0.5 rounded uppercase font-bold tracking-wider ${l.event.kind==="metric"?"bg-green-500/10 text-green-400":l.event.kind==="request"?"bg-blue-500/10 text-blue-400":l.event.kind==="artifact"?"bg-purple-500/10 text-purple-400":"bg-muted/50 text-muted-foreground"}`},null,i(f=>f.event.kind,[l],"p0.event.kind"),3,null)],1,null)],1,null),e("div",null,null,[e("div",null,{class:"text-sm font-bold text-foreground break-all"},[e("span",null,{class:"text-primary"},r,1,null),o&&e("span",null,{class:"text-muted-foreground"},[".",o],1,"Ji_13"),c&&e("span",null,{class:"text-foreground/70"},[".",c],1,"Ji_14")],1,null),e("div",null,{class:"text-xs text-muted-foreground mt-0.5 flex items-center gap-2"},[e("span",null,null,["@",i(f=>f.event.actor,[l],"p0.event.actor")],3,null),(l.showKG??!0)&&e("span",null,{class:"text-[9px] px-1 rounded bg-purple-500/10 text-purple-400"},["KG: ",r,"â†’",i(f=>f.event.actor,[l],"p0.event.actor")],1,"Ji_15")],1,null)],1,null),(l.showLTL??!0)&&m&&e("div",null,{class:"text-[10px] px-2 py-1 rounded bg-yellow-500/10 text-yellow-300 border border-yellow-500/20 font-mono"},["LTL: ",m],1,"Ji_16"),e("div",null,{class:"flex-1 bg-black/40 rounded p-2 overflow-hidden border border-[var(--glass-border-subtle)] relative group cursor-pointer",onClick$:_("s_nLkZqgAoWpg",[t,l])},[l.event.data?._auom_compliance&&l.event.data._auom_compliance.compliant===!1&&e("div",null,{class:"text-[9px] text-amber-500 font-bold mb-1 flex items-center gap-1"},["âš ï¸ NON-COMPLIANT: ",l.event.data._auom_compliance.checks?.map(f=>f.law).join(", ")],1,"Ji_17"),n?.summary?e("div",null,{class:"text-xs text-cyan-300 italic mb-1"},['"',h(n,"summary"),'"'],1,"Ji_18"):null,s&&e("pre",null,{class:i(f=>`font-mono text-[10px] text-gray-400 whitespace-pre-wrap break-all overflow-y-auto custom-scrollbar ${f.value?"max-h-96":"h-24"}`,[t],'`font-mono text-[10px] text-gray-400 whitespace-pre-wrap break-all overflow-y-auto custom-scrollbar ${p0.value?"max-h-96":"h-24"}`')},[t.value?JSON.stringify(l.event.data,null,2):s,!t.value&&l.event.data&&JSON.stringify(l.event.data).length>300?"...":""],1,"Ji_19"),!s&&!n&&e("div",null,{class:"text-[10px] text-gray-600 italic text-center py-4"},"No payload data",3,"Ji_20"),e("div",null,{class:"absolute bottom-1 right-1 text-[9px] text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"},i(f=>f.value?"â–² collapse":"â–¼ expand",[t],'p0.value?"â–² collapse":"â–¼ expand"'),3,null)],1,null),e("div",null,{class:"flex items-center justify-between text-[10px] text-gray-600 font-mono mt-auto gap-2"},[e("span",null,{title:i(f=>f.event.id,[l],"p0.event.id")},["ID: ",i(f=>f.event.id?.slice(0,8),[l],"p0.event.id?.slice(0,8)"),"..."],3,null),e("div",null,{class:"flex items-center gap-1"},[n?.impact&&e("span",{class:`px-1.5 rounded ${n.impact==="critical"?"text-red-400 bg-red-900/20":n.impact==="high"?"text-orange-400 bg-orange-900/20":"text-blue-400 bg-blue-900/20"}`},null,h(n,"impact"),1,"Ji_21"),(l.showVectors??!0)&&u.cluster&&e("span",null,{class:"px-1.5 rounded text-purple-400 bg-purple-900/20"},h(u,"cluster"),1,"Ji_22")],1,null)],1,null)],[a]:{variant:a}},1,"Ji_23")},Sc=E(p(kc,"s_cJOrzgof0dQ")),Cc=()=>{const[l]=b(),t=new Map,n=new Map;let s=0,r=0,o=0,c=0;for(const d of l.events){const{domain:f}=Al(d.topic);t.set(f,(t.get(f)||0)+1),n.set(d.actor||"unknown",(n.get(d.actor||"unknown")||0)+1),d.level==="error"&&s++,d.kind==="request"&&r++,d.kind==="artifact"&&o++,_n(d).hasEmbedding&&c++}const u=Array.from(t.entries()).sort((d,f)=>f[1]-d[1]).slice(0,5),m=Array.from(n.entries()).sort((d,f)=>f[1]-d[1]).slice(0,3);return{topDomains:u,topActors:m,errors:s,requests:r,artifacts:o,withVectors:c,total:l.events.length}},$c=l=>{const t=N(p(Cc,"s_9SWdwVVeZg4",[l]));return e("div",null,{class:"flex flex-wrap gap-2 text-[10px]"},[t.value.topDomains.map(([n,s])=>e("span",null,{class:"px-2 py-1 rounded bg-cyan-500/10 text-cyan-400 border border-cyan-500/20"},[n,": ",s],1,n)),e("span",null,{class:"px-2 py-1 rounded bg-red-500/10 text-red-400 border border-red-500/20"},["errors: ",i(n=>n.value.errors,[t],"p0.value.errors")],3,null),e("span",null,{class:"px-2 py-1 rounded bg-blue-500/10 text-blue-400 border border-blue-500/20"},["requests: ",i(n=>n.value.requests,[t],"p0.value.requests")],3,null),e("span",null,{class:"px-2 py-1 rounded bg-purple-500/10 text-purple-400 border border-purple-500/20"},["artifacts: ",i(n=>n.value.artifacts,[t],"p0.value.artifacts")],3,null),e("span",null,{class:"px-2 py-1 rounded bg-green-500/10 text-green-400 border border-green-500/20"},["ðŸ“Š vectors: ",i(n=>n.value.withVectors,[t],"p0.value.withVectors")],3,null)],1,"Ji_24")},Ic=E(p($c,"s_qdFWHmit8HA")),Tc={fresh:"glass-title-neon-emerald",recent:"glass-title-neon",stale:"glass-title-neon-amber",old:"glass-title-neon-rose",unknown:"text-glass-text-muted"},Ec={fresh:"shadow-[0_0_4px_var(--glass-accent-emerald)]",recent:"shadow-[0_0_4px_var(--glass-accent-cyan)]",stale:"shadow-[0_0_4px_var(--glass-accent-amber)]",old:"shadow-[0_0_4px_var(--glass-accent-rose)]",unknown:""};function Nt(l){return l<0?"future":l<60?`${Math.floor(l)}s`:l<3600?`${Math.floor(l/60)}m`:l<86400?`${Math.floor(l/3600)}h`:`${Math.floor(l/86400)}d`}const Ac=l=>{const t=y(null),n=y("unknown");D(_("s_0ruwX56aYn4",[t,n,l]));const s=()=>n.value==="unknown"?"?":l.showRelative??!0?t.value===null?"?":Nt(t.value):n.value,r=()=>{switch(n.value){case"fresh":return"â—";case"recent":return"â—";case"stale":return"â—‹";case"old":return"â—Œ";default:return"?"}};return e("span",{class:["inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-mono","border border-glass-border/30 bg-glass-surface/50",Tc[n.value],Ec[n.value],l.class].filter(Boolean).join(" "),title:[`Status: ${n.value}`,t.value!==null?`Age: ${Nt(t.value)} ago`:null,l.source?`Source: ${l.source}`:null].filter(Boolean).join(`
`)},null,[e("span",null,{class:"opacity-75"},r(),1,null),e("span",null,null,s(),1,null),l.source&&e("span",null,{class:"text-glass-text-muted opacity-60 ml-0.5"},["[",i(o=>o.source,[l],"p0.source"),"]"],3,"KN_0")],1,"KN_1")},vt=E(p(Ac,"s_0MbKZjvWnpo")),jt={debugging:"ðŸ”§",analysis:"ðŸ”",code_fix:"âœï¸",verification:"âœ…",inference:"ðŸ’­",coordination:"ðŸ¤",error:"âŒ"},zt={claude:"ðŸŸ£","claude-opus":"ðŸŸ£",codex:"ðŸ”µ","codex-cli":"ðŸ”µ",gemini:"ðŸŸ¢","gemini-cli":"ðŸŸ¢",dashboard:"ðŸ“Š","dashboard-telemetry":"ðŸ“¡",plurichat:"ðŸ’¬","strp-worker":"ðŸ‘·",dialogosd:"ðŸ—£ï¸","vps-session":"ðŸ”„","catalog-daemon":"ðŸ“š","browser-daemon":"ðŸŒ",default:"ðŸ¤–"};function Mc(l){const t=l.topic,n=l.data,s=l.actor||"unknown";if(t.startsWith("telemetry.client.")){const r=t.replace("telemetry.client.","");return{actor:s,activityType:l.level==="error"?"error":"debugging",summary:`Client ${r}: ${n?.message||n?.error||"telemetry event"}`,timestamp:l.iso||"",topic:t,details:n,severity:l.level==="error"?"error":"info"}}if(t.startsWith("browser."))return{actor:s,activityType:"debugging",summary:`Browser action: ${t.replace("browser.","")}`,timestamp:l.iso||"",topic:t,details:n,severity:l.level||"info"};if(t.startsWith("oiterate."))return{actor:s,activityType:"coordination",summary:`OITERATE: ${n?.action||t.replace("oiterate.","")}`,timestamp:l.iso||"",topic:t,details:n,severity:"info"};if(t==="dialogos.submit"){const r=Array.isArray(n?.providers)?n.providers.join(", "):"auto";return{actor:s,activityType:"inference",summary:`Inference request â†’ [${r}]`,timestamp:l.iso||"",topic:t,details:n,severity:"info"}}if(t==="dialogos.cell.end"){const r=!!n?.ok,o=String(n?.status||(r?"success":"error"));return{actor:s,activityType:"inference",summary:`Inference ${o}`,timestamp:l.iso||"",topic:t,details:n,severity:r?"ok":"error"}}if(t==="plurichat.lens.decision"){const r=String(n?.depth||""),o=String(n?.lane||""),c=String(n?.topology||"single");return{actor:s,activityType:"analysis",summary:`LENS route: depth=${r} lane=${o} topo=${c}`,timestamp:l.iso||"",topic:t,details:n,severity:"info"}}if(t.startsWith("strp.")){const r=t.replace("strp.",""),o=String(n?.goal||n?.goal_summary||"");return{actor:s,activityType:r.includes("verify")||r.includes("test")?"verification":"coordination",summary:`STRp ${r}${o?`: ${o.slice(0,60)}`:""}`,timestamp:l.iso||"",topic:t,details:n,severity:l.level==="error"?"error":"info"}}if(t.startsWith("verify.")||t.startsWith("tests.")){const r=String(n?.cmd||n?.summary||t);return{actor:s,activityType:"verification",summary:`Verify: ${r.slice(0,80)}`,timestamp:l.iso||"",topic:t,details:n,severity:l.level==="error"?"error":l.level==="warn"?"warn":"ok"}}if(t.startsWith("a2a.")){const r=t.replace("a2a.","");return{actor:s,activityType:"coordination",summary:`A2A ${r}`,timestamp:l.iso||"",topic:t,details:n,severity:"info"}}if(t==="mcp.host.call"||t==="mcp.host.response"){const r=String(n?.tool||""),o=String(n?.server||""),c=t==="mcp.host.response"?!!n?.ok:!0;return{actor:s,activityType:"analysis",summary:`MCP ${o}.${r}${c?"":" (failed)"}`,timestamp:l.iso||"",topic:t,details:n,severity:c?"info":"error"}}return t.startsWith("git.")?{actor:s,activityType:"code_fix",summary:`Git: ${t.replace("git.","")}`,timestamp:l.iso||"",topic:t,details:n,severity:"info"}:t.startsWith("pluribus.check.")?{actor:s,activityType:"verification",summary:`Health check: ${t.replace("pluribus.check.","")}`,timestamp:l.iso||"",topic:t,details:n,severity:l.level||"ok"}:t.startsWith("infercell.")?{actor:s,activityType:"analysis",summary:`InferCell: ${t.replace("infercell.","")}`,timestamp:l.iso||"",topic:t,details:n,severity:"info"}:t.startsWith("service.")?{actor:s,activityType:"coordination",summary:`Service: ${t.replace("service.","")}`,timestamp:l.iso||"",topic:t,details:n,severity:"info"}:null}const Oc=()=>{const[l]=b(),t=[];for(const n of l.events.slice(-500)){const s=Mc(n);s&&t.push(s)}return t},Pc=()=>{const[l,t,n]=b();let s=l.value;return n.value&&(s=s.filter(r=>r.actor===n.value)),t.value&&(s=s.filter(r=>r.activityType===t.value)),s.slice(-100).reverse()},Lc=()=>{const[l]=b(),t=new Map;for(const n of l.value){const s=t.get(n.actor)||{count:0,errors:0,lastActivity:""};s.count++,n.severity==="error"&&s.errors++,n.timestamp>s.lastActivity&&(s.lastActivity=n.timestamp),t.set(n.actor,s)}return Array.from(t.entries()).sort((n,s)=>s[1].count-n[1].count).slice(0,8)},Dc=()=>{const[l]=b(),t=new Map;for(const n of l.value)t.set(n.activityType,(t.get(n.activityType)||0)+1);return Array.from(t.entries()).sort((n,s)=>s[1]-n[1])},Rc=()=>{const[l]=b(),t=l.value.slice(-100),n=t.filter(s=>s.severity==="error").length;return t.length>0?Math.round(n/t.length*100):0},Nc=()=>{const[l]=b();return l.value.length===0?null:l.value[0]?.timestamp||null},jc=()=>{const[l]=b();return l.value=!l.value},zc=()=>{const[l]=b();return l.value=null},Bc=()=>{const[l,t]=b();return t.value=t.value===l?null:l},Uc=()=>{const[l,t]=b();return l.value=l.value===t?null:t},Fc=l=>{W();const t=y(null),n=y(null),s=y(!1),r=y(null),o=N(p(Oc,"s_dJs0rUzWrGI",[l])),c=N(p(Pc,"s_AZHTzt9c0mY",[o,n,t])),u=N(p(Lc,"s_LFSMxYBocP8",[o])),m=N(p(Dc,"s_0cdKDrt1S0c",[o])),d=N(p(Rc,"s_BI0CzxUIPds",[o])),f=N(p(Nc,"s_9ad5I7lFxGY",[o])),v=x=>{for(const[S,M]of Object.entries(zt))if(x.toLowerCase().includes(S))return M;return zt.default};return g(H,{variant:"outlined",padding:"p-0",class:"overflow-hidden",children:[e("div",null,{class:"p-3 border-b border-md-outline/30 flex items-center justify-between bg-md-surface-container-low"},[e("div",null,{class:"flex items-center gap-2"},[g(q,{level:"span",color:"cyan",size:"xs",animation:"flicker",children:"Agent Telemetry",[a]:{level:a,color:a,size:a,animation:a}},3,"U6_0"),g(X,{color:"cyan",glow:!0,children:[i(x=>x.value.length,[o],"p0.value.length")," activities"],[a]:{color:a,glow:a}},3,"U6_1"),d.value>0&&g(X,{get color(){return d.value>20?"rose":d.value>10?"amber":"emerald"},glow:!0,get pulse(){return d.value>20},children:[i(x=>x.value,[d],"p0.value"),"% errors"],[a]:{color:i(x=>x.value>20?"rose":x.value>10?"amber":"emerald",[d],'p0.value>20?"rose":p0.value>10?"amber":"emerald"'),glow:a,pulse:i(x=>x.value>20,[d],"p0.value>20")}},3,"U6_2"),g(vt,{get timestamp(){return f.value},source:"bus",ttlFresh:30,ttlRecent:120,ttlStale:600,[a]:{timestamp:i(x=>x.value,[f],"p0.value"),source:a,ttlFresh:a,ttlRecent:a,ttlStale:a}},3,"U6_3")],1,null),g(L,{variant:"secondary",class:"h-7 text-[10px] px-3",onClick$:p(jc,"s_kP2dRsBMB1g",[s]),children:i(x=>x.value?"Show Feed":"Raw NDJSON",[s],'p0.value?"Show Feed":"Raw NDJSON"'),[a]:{variant:a,class:a,onClick$:a}},3,"U6_4")],1,null),e("div",null,{class:"px-3 py-2 border-b border-md-outline/20 flex flex-wrap gap-1 bg-md-surface-container-lowest"},[g(L,{get variant(){return t.value?"text":"tonal"},class:"h-6 text-[10px] px-2",onClick$:p(zc,"s_SvFst0BX0Pk",[t]),children:"All Agents",[a]:{variant:i(x=>x.value?"text":"tonal",[t],'!p0.value?"tonal":"text"'),class:a,onClick$:a}},3,"U6_5"),u.value.map(([x,S])=>g(L,{variant:t.value===x?"primary":"secondary",class:`h-6 text-[10px] px-2 ${S.errors>0&&t.value!==x?"text-md-error border-md-error/30":""}`,onClick$:p(Bc,"s_dRmSBJT0zIY",[x,t]),children:[e("span",null,{class:"mr-1"},v(x),1,null),e("span",null,{class:"mono"},x,1,null),e("span",null,{class:"ml-1 opacity-70"},h(S,"count"),1,null),S.errors>0&&e("span",null,{class:"ml-0.5"},"âš ï¸",3,"U6_6")]},1,x))],1,null),e("div",null,{class:"px-3 py-2 border-b border-md-outline/20 flex flex-wrap gap-1 bg-md-surface-container-lowest"},m.value.map(([x,S])=>g(L,{variant:n.value===x?"tonal":"text",class:"h-6 text-[10px] px-2",onClick$:p(Uc,"s_8T9vYkSRfcA",[n,x]),children:[e("span",null,{class:"mr-1"},jt[x]||"ðŸ“¦",1,null),e("span",null,null,x,1,null),e("span",null,{class:"ml-1 opacity-60"},S,1,null)],[a]:{class:a}},1,x)),1,null),e("div",null,{class:"overflow-auto scrollbar-thin",style:i(x=>({maxHeight:x.maxHeight??"400px"}),[l],'{maxHeight:p0.maxHeight??"400px"}')},s.value?e("div",null,{class:"p-3 font-mono text-[10px] bg-md-surface-container-highest/30"},c.value.slice(0,50).map((x,S)=>e("div",{class:`py-1 border-b border-md-outline/10 ${x.severity==="error"?"text-md-error":x.severity==="warn"?"text-md-warning":"text-md-on-surface-variant"}`},null,JSON.stringify({ts:x.timestamp,actor:x.actor,type:x.activityType,topic:x.topic,...x.details}),1,S)),1,"U6_7"):e("div",null,{class:"p-2 space-y-1"},c.value.length===0?e("div",null,{class:"p-8 text-center text-md-on-surface-variant/60 text-sm italic"},"No agent activities detected yet.",3,"U6_8"):c.value.map((x,S)=>{const M=r.value===S,$=x.timestamp?x.timestamp.slice(11,19):"--:--:--";return e("div",{class:`p-2 rounded-lg border transition-all cursor-pointer relative overflow-hidden ${M?"bg-md-surface-container":"hover:bg-md-surface-container-low"} ${x.severity==="error"?"border-md-error/30 bg-md-error/5":x.severity==="warn"?"border-md-warning/30 bg-md-warning/5":x.severity==="ok"?"border-md-primary/20 bg-md-primary/5":"border-md-outline/10 bg-md-surface/30"}`,onClick$:_("s_I294rCC0IJo",[r,S,M])},null,[e("md-ripple",null,null,null,3,null),e("div",null,{class:"flex items-start gap-3"},[e("span",null,{class:"text-[10px] text-md-on-surface-variant/60 font-mono flex-shrink-0 mt-0.5"},$,1,null),e("span",null,{class:"text-base flex-shrink-0"},jt[x.activityType]||"ðŸ“¦",1,null),e("div",null,{class:"flex-1 min-w-0"},[e("div",null,{class:"flex items-center gap-2 flex-wrap mb-1"},[e("span",null,{class:"text-[10px] font-bold text-md-primary uppercase tracking-tight flex items-center gap-1"},[v(x.actor)," ",h(x,"actor")],1,null),e("span",null,{class:"text-[9px] px-1.5 py-0.5 rounded bg-md-secondary-container text-md-on-secondary-container font-medium"},h(x,"activityType"),1,null)],1,null),e("div",{class:`text-xs font-medium ${x.severity==="error"?"text-md-error":x.severity==="warn"?"text-md-warning":"text-md-on-surface"}`},null,h(x,"summary"),1,null),M&&x.details&&e("div",null,{class:"mt-2 p-2 rounded-md bg-md-surface-container-highest/50 border border-md-outline/10"},[e("div",null,{class:"text-[9px] text-md-on-surface-variant mb-1 font-mono uppercase tracking-tighter"},["Topic: ",h(x,"topic")],1,null),e("pre",null,{class:"text-[10px] text-md-on-surface-variant/80 font-mono whitespace-pre-wrap break-all max-h-48 overflow-auto"},JSON.stringify(x.details,null,2),1,null)],1,"U6_9")],1,null),e("md-icon",null,{class:"text-md-on-surface-variant/40 text-xs"},M?"expand_less":"expand_more",1,null)],1,null)],0,S)}),1,null),1,null)],[a]:{variant:a,padding:a,class:a}},1,"U6_10")},qc=E(p(Fc,"s_xtMRFCRweCM")),Ye=[{id:"intent",label:"Intent",icon:"ðŸ’¡"},{id:"targets",label:"Targets",icon:"ðŸŽ¯"},{id:"effects",label:"Effects",icon:"âš¡"},{id:"evidence",label:"Evidence",icon:"ðŸ“‹"},{id:"publish",label:"Publish",icon:"ðŸš€"}],He={none:{color:"green",description:"Pure computation; no external side effects."},file:{color:"yellow",description:"May read/write files on the local filesystem.",warning:"Requires filesystem access grant."},network:{color:"orange",description:"May make network requests (HTTP, WebSocket, etc.).",warning:"Requires network access grant."},system:{color:"red",description:"May execute system commands or modify OS state.",warning:"Requires elevated system grant. Use with caution."},unknown:{color:"gray",description:"Effects are not yet classified."}},Gc=l=>{const[t,n]=b();switch(n.value=null,l){case 0:return!t.key.trim()&&!t.name.trim()?(n.value="Operator key or name is required.",!1):!0;case 1:return t.targetType==="tool"&&!t.tool.trim()?(n.value="Tool path is required for tool-type operators.",!1):t.targetType==="bus"&&!t.bus_topic.trim()?(n.value="Bus topic is required for bus-type operators.",!1):!0;case 2:return!0;case 3:return!0;case 4:return!0;default:return!0}},Vc=async()=>{const[l,t]=b();await t(l.value)&&l.value<Ye.length-1&&l.value++},Hc=()=>{const[l,t]=b();l.value>0&&(l.value--,t.value=null)},Wc=async l=>{const[t,n]=b();l<t.value&&(t.value=l,n.value=null)},Yc=()=>{const[l]=b(),t=(l.key||l.name||l.id).trim().toUpperCase(),n=(l.id||t.toLowerCase()).trim(),s=l.aliases.split(",").map(u=>u.trim()).filter(u=>u.length>0),r=[];l.tool.trim()&&r.push({type:"tool",ref:l.tool.trim()}),l.bus_topic.trim()&&r.push({type:"bus",ref:l.bus_topic.trim(),kind:l.bus_kind||void 0}),(l.ui_route.trim()||l.ui_component.trim())&&r.push({type:"ui",route:l.ui_route.trim(),component:l.ui_component.trim()});for(const u of l.agents.split(",").map(m=>m.trim()).filter(Boolean))r.push({type:"agent",ref:u});for(const u of l.apps.split(",").map(m=>m.trim()).filter(Boolean))r.push({type:"app",ref:u});const o=l.guarantees.split(",").map(u=>u.trim()).filter(u=>u.length>0);return{key:t,id:n,name:(l.name||t).trim(),domain:l.domain.trim()||"user",category:l.category.trim()||"custom",effects:l.effects,description:l.description.trim(),aliases:s.length>0?s:[n,t],tool:l.tool.trim()||void 0,bus_topic:l.bus_topic.trim()||void 0,bus_kind:l.bus_kind||void 0,ui:{route:l.ui_route.trim()||void 0,component:l.ui_component.trim()||void 0},agents:l.agents.split(",").map(u=>u.trim()).filter(Boolean),apps:l.apps.split(",").map(u=>u.trim()).filter(Boolean),targets:r,guarantees:o.length>0?o:void 0,requires_grant:l.requiresGrant||void 0,produces_artifact:l.produces_artifact||void 0}},Jc=async()=>{const[l,t,n,s]=b();if(!await s(t.value))return;const o=await l();await n.onPublish$(o)},Kc=()=>{const[l,t,n]=b();l.value=0,n.value=null,t.key="",t.id="",t.name="",t.description="",t.aliases="",t.targetType="tool",t.tool="",t.bus_topic="",t.bus_kind="request",t.ui_route="",t.ui_component="",t.agents="",t.apps="",t.effects="none",t.requiresGrant=!1,t.domain="user",t.category="custom",t.guarantees="",t.produces_artifact=!1},Qc=(l,t)=>{const[n]=b();return n.key=t.value.toUpperCase()},Xc=(l,t)=>{const[n]=b();return n.id=t.value},Zc=(l,t)=>{const[n]=b();return n.name=t.value},ed=(l,t)=>{const[n]=b();return n.description=t.value},ld=(l,t)=>{const[n]=b();return n.aliases=t.value},td=()=>{const[l,t]=b();return l.targetType=t},nd=(l,t)=>{const[n]=b();return n.tool=t.value},sd=(l,t)=>{const[n]=b();return n.bus_topic=t.value},ad=(l,t)=>{const[n]=b();return n.ui_route=t.value},rd=(l,t)=>{const[n]=b();return n.agents=t.value},od=(l,t)=>{const[n]=b();return n.apps=t.value},id=(l,t)=>{const[n]=b();return n.category=t.value},ud=(l,t)=>{const[n]=b();return n.guarantees=t.value},cd=l=>{W();const t=y(0),n=y(null),s=B({key:l.initialState?.key||"",id:l.initialState?.id||"",name:l.initialState?.name||"",description:l.initialState?.description||"",aliases:l.initialState?.aliases||"",targetType:l.initialState?.targetType||"tool",tool:l.initialState?.tool||"",bus_topic:l.initialState?.bus_topic||"",bus_kind:l.initialState?.bus_kind||"request",ui_route:l.initialState?.ui_route||"",ui_component:l.initialState?.ui_component||"",agents:l.initialState?.agents||"",apps:l.initialState?.apps||"",effects:l.initialState?.effects||"none",requiresGrant:l.initialState?.requiresGrant||!1,domain:l.initialState?.domain||"user",category:l.initialState?.category||"custom",guarantees:l.initialState?.guarantees||"",produces_artifact:l.initialState?.produces_artifact||!1}),r=p(Gc,"s_7z2hn7TkO9w",[s,n]),o=p(Vc,"s_lGOeY0gDIqk",[t,r]),c=p(Hc,"s_vZTT9gJPsnw",[t,n]),u=p(Wc,"s_YAKKiGVUKrM",[t,n]),d=p(Jc,"s_ROfClb2ZMQk",[p(Yc,"s_kNr8TGIyUhc",[s]),t,l,r]),f=p(Kc,"s_I10beMXj800",[t,s,n]);return l.isOpen?e("div",null,{class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"},g(H,{class:"w-full max-w-2xl overflow-hidden shadow-2xl flex flex-col",children:[e("div",null,{class:"flex items-center justify-between border-b border-border px-6 py-4"},[e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"text-2xl"},h(Ye[t.value],"icon"),1,null),e("div",null,null,[e("div",null,{class:"text-lg font-semibold"},"Flow Wizard",3,null),e("div",null,{class:"text-xs text-muted-foreground"},["Step ",i(v=>v.value+1,[t],"p0.value+1")," of ",Ye.length,": ",h(Ye[t.value],"label")],1,null)],1,null)],1,null),g(L,{variant:"icon",icon:"close",onClick$:l.onClose$,class:"text-muted-foreground",[a]:{variant:a,icon:a,class:a}},2,"fu_0")],1,null),e("div",null,{class:"flex items-center justify-between px-6 py-3 border-b border-border/50 bg-muted/10"},Ye.map((v,x)=>e("button",{class:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium transition-all ${x===t.value?"bg-primary/20 text-primary border border-primary/30":x<t.value?"bg-green-500/10 text-green-400 border border-green-500/20 cursor-pointer hover:bg-green-500/20":"bg-muted/20 text-muted-foreground border border-border/50"}`,onClick$:_("s_uGJexSkn4Xs",[u,x])},null,[e("span",null,null,h(v,"icon"),1,null),e("span",null,{class:"hidden sm:inline"},h(v,"label"),1,null)],0,v.id)),1,null),e("div",null,{class:"px-6 py-6 space-y-4 min-h-[320px]"},[n.value&&e("div",null,{class:"rounded border border-red-500/30 bg-red-500/10 px-4 py-2 text-sm text-red-300"},i(v=>v.value,[n],"p0.value"),3,"fu_1"),t.value===0&&e("div",null,{class:"space-y-4"},[e("div",null,{class:"text-sm text-muted-foreground"},["Define ",e("strong",null,null,"what",3,null)," this operator does and how it's identified."],3,null),e("div",null,{class:"grid grid-cols-2 gap-3"},[g(V,{label:"Key *",get value(){return s.key},onInput$:p(Qc,"s_89i0Nw0qsME",[s]),placeholder:"MY_OPERATOR",[a]:{label:a,value:i(v=>v.key,[s],"p0.key"),onInput$:a,placeholder:a}},3,"fu_2"),g(V,{label:"ID",get value(){return s.id},onInput$:p(Xc,"s_iUgDQmp01BI",[s]),placeholder:"my_operator",[a]:{label:a,value:i(v=>v.id,[s],"p0.id"),onInput$:a,placeholder:a}},3,"fu_3")],1,null),g(V,{label:"Name (Display)",get value(){return s.name},onInput$:p(Zc,"s_vOKKDMStVYs",[s]),placeholder:"My Custom Operator",[a]:{label:a,value:i(v=>v.name,[s],"p0.name"),onInput$:a,placeholder:a}},3,"fu_4"),g(V,{type:"textarea",label:"Description",get value(){return s.description},onInput$:p(ed,"s_YLIlMbc7cSM",[s]),placeholder:"What does this operator do? What problem does it solve?",[a]:{type:a,label:a,value:i(v=>v.description,[s],"p0.description"),onInput$:a,placeholder:a}},3,"fu_5"),g(V,{label:"Aliases (comma-separated)",get value(){return s.aliases},onInput$:p(ld,"s_N5v4Rxn63f4",[s]),placeholder:"myop, custom_op, my operator",[a]:{label:a,value:i(v=>v.aliases,[s],"p0.aliases"),onInput$:a,placeholder:a}},3,"fu_6")],1,"fu_7"),t.value===1&&e("div",null,{class:"space-y-4"},[e("div",null,{class:"text-sm text-muted-foreground"},["Define ",e("strong",null,null,"where",3,null)," this operator routes requests."],3,null),e("div",null,{class:"space-y-2"},[e("label",null,{class:"text-xs text-muted-foreground"},"Primary Target Type",3,null),e("div",null,{class:"flex flex-wrap gap-2"},["tool","bus","ui","agent","app","multi"].map(v=>g(L,{variant:s.targetType===v?"tonal":"secondary",onClick$:p(td,"s_HblX823FE7I",[s,v]),class:"h-8 text-xs",children:v,[a]:{class:a}},1,v)),1,null)],1,null),(s.targetType==="tool"||s.targetType==="multi")&&e("div",null,{class:"space-y-1"},[e("label",null,{class:"text-xs text-muted-foreground"},"Tool Path",3,null),e("select",null,{value:i(v=>v.tool,[s],"p0.tool"),class:"w-full px-3 py-2 rounded bg-background border border-border text-sm font-mono",onChange$:_("s_oStICkptj7A",[s])},[e("option",null,{value:""},"Select toolâ€¦",3,null),(l.suggestions.tool_paths||[]).slice(0,100).map(v=>e("option",{value:v},null,v,1,v))],1,null),g(V,{get value(){return s.tool},onInput$:p(nd,"s_DrLfLlGFef8",[s]),placeholder:"Or type path: nucleus/tools/...",class:"mt-1",[a]:{value:i(v=>v.tool,[s],"p0.tool"),onInput$:a,placeholder:a,class:a}},3,"fu_8")],1,"fu_9"),(s.targetType==="bus"||s.targetType==="multi")&&e("div",null,{class:"grid grid-cols-2 gap-3"},[g(V,{label:"Bus Topic",get value(){return s.bus_topic},onInput$:p(sd,"s_i6n1NsT1lUo",[s]),placeholder:"my.custom.topic",[a]:{label:a,value:i(v=>v.bus_topic,[s],"p0.bus_topic"),onInput$:a,placeholder:a}},3,"fu_10"),e("div",null,{class:"space-y-1"},[e("label",null,{class:"text-xs text-muted-foreground"},"Bus Kind",3,null),e("select",null,{value:i(v=>v.bus_kind,[s],"p0.bus_kind"),class:"w-full px-3 py-2 rounded bg-background border border-border text-sm font-mono h-[56px]",onChange$:_("s_0xxXJj2gtJo",[s])},[e("option",null,{value:"request"},"request",3,null),e("option",null,{value:"response"},"response",3,null),e("option",null,{value:"artifact"},"artifact",3,null),e("option",null,{value:"metric"},"metric",3,null),e("option",null,{value:"log"},"log",3,null)],3,null)],3,null)],1,"fu_11"),(s.targetType==="ui"||s.targetType==="multi")&&e("div",null,{class:"grid grid-cols-2 gap-3"},[g(V,{label:"UI Route",get value(){return s.ui_route},onInput$:p(ad,"s_su7maHkIdeI",[s]),placeholder:"/services",[a]:{label:a,value:i(v=>v.ui_route,[s],"p0.ui_route"),onInput$:a,placeholder:a}},3,"fu_12"),e("div",null,{class:"space-y-1"},[e("label",null,{class:"text-xs text-muted-foreground"},"UI Component",3,null),e("select",null,{value:i(v=>v.ui_component,[s],"p0.ui_component"),class:"w-full px-3 py-2 rounded bg-background border border-border text-sm font-mono h-[56px]",onChange$:_("s_0y2BvR1lq5I",[s])},[e("option",null,{value:""},"Select componentâ€¦",3,null),(l.suggestions.ui_components||[]).slice(0,50).map(v=>e("option",{value:v},null,v,1,v))],1,null)],1,null)],1,"fu_13"),(s.targetType==="agent"||s.targetType==="multi")&&g(V,{label:"Agents (comma-separated)",get value(){return s.agents},onInput$:p(rd,"s_Lp171dQ8Si4",[s]),placeholder:"claude, gemini, codex",[a]:{label:a,value:i(v=>v.agents,[s],"p0.agents"),onInput$:a,placeholder:a}},3,"fu_14"),(s.targetType==="app"||s.targetType==="multi")&&g(V,{label:"Apps (comma-separated)",get value(){return s.apps},onInput$:p(od,"s_t2ciAzLmeMY",[s]),placeholder:"firefox, vscode",[a]:{label:a,value:i(v=>v.apps,[s],"p0.apps"),onInput$:a,placeholder:a}},3,"fu_15")],1,"fu_16"),t.value===2&&e("div",null,{class:"space-y-4"},[e("div",null,{class:"text-sm text-muted-foreground"},["Declare ",e("strong",null,null,"what capabilities",3,null)," this operator requires."],3,null),e("div",null,{class:"grid grid-cols-5 gap-2"},Object.keys(He).map(v=>{const x=He[v];return e("button",{class:`px-3 py-2 rounded border text-xs font-mono ${s.effects===v?`bg-${x.color}-500/20 text-${x.color}-300 border-${x.color}-500/40`:"border-border/60 hover:bg-muted/20"}`,onClick$:_("s_CL5CXCQDcn0",[v,x,s])},null,v,0,v)}),1,null),e("div",{class:`rounded border p-4 space-y-2 ${He[s.effects].warning?"border-yellow-500/30 bg-yellow-500/5":"border-border/50 bg-muted/10"}`},null,[e("div",null,{class:"text-sm"},h(He[s.effects],"description"),1,null),He[s.effects].warning&&e("div",null,{class:"text-xs text-yellow-300 flex items-center gap-2"},[e("span",null,null,"âš ï¸",3,null),h(He[s.effects],"warning")],1,"fu_17")],1,null),e("div",null,{class:"flex items-center gap-3"},e("label",null,{class:"flex items-center gap-2 text-sm"},[e("input",null,{type:"checkbox",checked:i(v=>v.requiresGrant,[s],"p0.requiresGrant"),class:"rounded",onChange$:_("s_pJpfzdL0oks",[s])},null,3,null),"Requires explicit grant before execution"],3,null),3,null)],1,"fu_18"),t.value===3&&e("div",null,{class:"space-y-4"},[e("div",null,{class:"text-sm text-muted-foreground"},["Define ",e("strong",null,null,"classification",3,null)," and ",e("strong",null,null,"guarantees",3,null),"."],3,null),e("div",null,{class:"grid grid-cols-2 gap-3"},[e("div",null,{class:"space-y-1"},[e("label",null,{class:"text-xs text-muted-foreground"},"Domain",3,null),e("select",null,{value:i(v=>v.domain,[s],"p0.domain"),class:"w-full px-3 py-2 rounded bg-background border border-border text-sm font-mono h-[56px]",onChange$:_("s_Rk5h66WnnTA",[s])},[e("option",null,{value:"user"},"user",3,null),e("option",null,{value:"execution"},"execution",3,null),e("option",null,{value:"safety"},"safety",3,null),e("option",null,{value:"evolution"},"evolution",3,null),e("option",null,{value:"ui"},"ui",3,null),e("option",null,{value:"navigation"},"navigation",3,null),e("option",null,{value:"query"},"query",3,null)],3,null)],3,null),g(V,{label:"Category",get value(){return s.category},onInput$:p(id,"s_XtXF4F004qA",[s]),placeholder:"custom, tool, policy, git",[a]:{label:a,value:i(v=>v.category,[s],"p0.category"),onInput$:a,placeholder:a}},3,"fu_19")],1,null),g(V,{label:"Guarantees (comma-separated)",get value(){return s.guarantees},onInput$:p(ud,"s_g1c8yUWfJmc",[s]),placeholder:"idempotent, deterministic, bounded, atomic",[a]:{label:a,value:i(v=>v.guarantees,[s],"p0.guarantees"),onInput$:a,placeholder:a}},3,"fu_20"),e("div",null,{class:"flex items-center gap-3"},e("label",null,{class:"flex items-center gap-2 text-sm"},[e("input",null,{type:"checkbox",checked:i(v=>v.produces_artifact,[s],"p0.produces_artifact"),class:"rounded",onChange$:_("s_G9eoA0ojZlk",[s])},null,3,null),"Produces bus artifact on completion"],3,null),3,null)],1,"fu_21"),t.value===4&&e("div",null,{class:"space-y-4"},[e("div",null,{class:"text-sm text-muted-foreground"},["Review and ",e("strong",null,null,"publish",3,null)," your operator."],3,null),e("div",null,{class:"rounded border border-border/50 bg-muted/10 p-4 space-y-3"},[e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-xs text-muted-foreground"},"Key",3,null),e("span",null,{class:"font-mono text-sm"},s.key||s.name.toUpperCase()||"(unnamed)",1,null)],1,null),e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-xs text-muted-foreground"},"Domain / Category",3,null),e("span",null,{class:"text-sm"},[i(v=>v.domain,[s],"p0.domain")," / ",i(v=>v.category,[s],"p0.category")],3,null)],3,null),e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-xs text-muted-foreground"},"Effects",3,null),e("span",{class:`text-xs px-2 py-0.5 rounded font-mono ${s.effects==="none"?"bg-green-500/20 text-green-300":s.effects==="file"?"bg-yellow-500/20 text-yellow-300":s.effects==="network"?"bg-orange-500/20 text-orange-300":s.effects==="system"?"bg-red-500/20 text-red-300":"bg-muted/50 text-muted-foreground"}`},null,i(v=>v.effects,[s],"p0.effects"),3,null)],1,null),s.tool&&e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-xs text-muted-foreground"},"Tool",3,null),e("span",null,{class:"text-xs font-mono truncate max-w-[200px]"},i(v=>v.tool,[s],"p0.tool"),3,null)],3,"fu_22"),s.bus_topic&&e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-xs text-muted-foreground"},"Bus Topic",3,null),e("span",null,{class:"text-xs font-mono truncate max-w-[200px]"},i(v=>v.bus_topic,[s],"p0.bus_topic"),3,null)],3,"fu_23"),s.requiresGrant&&e("div",null,{class:"text-xs text-yellow-300 flex items-center gap-2"},"âš ï¸ Requires explicit grant",3,"fu_24")],1,null),s.description&&e("div",null,{class:"text-sm text-muted-foreground border-l-2 border-border pl-3 italic"},['"',i(v=>v.description,[s],"p0.description"),'"'],3,"fu_25")],1,"fu_26")],1,null),e("div",null,{class:"flex items-center justify-between border-t border-border px-6 py-4"},[g(L,{variant:"secondary",onClick$:f,class:"h-8 text-xs",children:"Reset",[a]:{variant:a,onClick$:a,class:a}},3,"fu_27"),e("div",null,{class:"flex items-center gap-3"},[t.value>0&&g(L,{variant:"secondary",onClick$:c,class:"h-9 text-sm",children:"â† Back",[a]:{variant:a,onClick$:a,class:a}},3,"fu_28"),t.value<Ye.length-1?g(L,{variant:"primary",onClick$:o,class:"h-9 text-sm",children:"Next â†’",[a]:{variant:a,onClick$:a,class:a}},3,"fu_29"):g(L,{variant:"primary",onClick$:d,class:"h-9 text-sm bg-green-500/20 text-green-300 border-green-500/30 hover:bg-green-500/30",children:"ðŸš€ Publish",[a]:{variant:a,onClick$:a,class:a}},3,"fu_30")],1,null)],1,null)],[a]:{class:a}},1,"fu_31"),1,"fu_32"):null},dd=E(p(cd,"s_XBrqIvOcs6E")),wn="pluribus.semops.cache.v1",pd=()=>{if(typeof localStorage>"u")return null;try{const l=localStorage.getItem(wn);if(!l)return null;const t=JSON.parse(l);return!t?.schema||!t?.suggestions?null:t}catch{return null}},md=(l,t)=>{if(!(typeof localStorage>"u"))try{localStorage.setItem(wn,JSON.stringify({schema:l,suggestions:t}))}catch{}};function Wl(l){return l.split(",").map(t=>t.trim()).filter(t=>t.length>0)}function gd(l){return(l.split("/").pop()||l).replace(/\.[^.]+$/,"").replace(/_operator$/,"").replace(/_server$/,"").replace(/_daemon$/,"").toUpperCase()}const vd=()=>{const[l]=b();l.key="",l.id="",l.name="",l.domain="user",l.category="custom",l.effects="none",l.description="",l.aliases="",l.tool="",l.bus_topic="",l.bus_kind="",l.secondary_topic="",l.ui_route="",l.ui_component="",l.agents="",l.apps=""},bd=l=>{const[t]=b();if(l==="tool"){t.domain="execution",t.category="tool",t.effects==="none"&&(t.effects="file"),t.description||(t.description="Tool-backed semantic operator.");return}if(l==="policy"){t.domain="safety",t.category="policy",t.effects==="none"&&(t.effects="none"),t.description||(t.description="Policy / safety semantic operator (non-blocking; emits bus requests).");return}if(l==="evolution"){t.domain="evolution",t.category="git",t.effects==="none"&&(t.effects="file"),t.description||(t.description="Evolutionary operator (bounded transforms; evidence-first).");return}t.domain="ui",t.category="panel",t.effects==="none"&&(t.effects="none"),t.description||(t.description="UI projection operator (bus-driven navigation/panels).")},fd=(l,t,n)=>{const[s,r]=b(),o=(l||t?.name||t?.id||"").trim().toUpperCase();if(n==="clone"){s.key=`${o}_CUSTOM`,s.id=`${String(t.id||o.toLowerCase())}_custom`,s.name=`${String(t.name||o)} (CUSTOM)`,s.description=`Cloned from ${o}. ${String(t.description||"").trim()}`.trim();const u=(t.aliases||[]).filter(Boolean);s.aliases=u.length>0?u.join(", "):`${s.id}, ${s.key}`}else s.key=o,s.id=String(t.id||o.toLowerCase()),s.name=String(t.name||o),s.description=String(t.description||""),s.aliases=(t.aliases||[]).join(", ");s.domain=String(t.domain||"user"),s.category=String(t.category||"custom"),s.effects=String(t.effects||"none").trim().toLowerCase()||"none",s.tool=t.tool?String(t.tool):"",s.bus_topic=t.bus_topic?String(t.bus_topic):"",s.bus_kind=t.bus_kind||"",s.secondary_topic=t.secondary_topic?String(t.secondary_topic):"";const c=t.ui||{};s.ui_route=c?.route?String(c.route):"",s.ui_component=c?.component?String(c.component):"",s.agents=(t.agents||[]).join(", "),s.apps=(t.apps||[]).join(", "),r.value=n==="clone"?`Cloned ${o} into form (edit key/id then Save)`:`Loaded ${o} for editing`},xd=async l=>{const[t]=b(),n=(l||"").trim();if(n)try{await navigator.clipboard.writeText(n),t.value="Copied to clipboard"}catch(s){t.value=`Copy failed: ${String(s)}`}},hd=(l,t)=>{try{window.dispatchEvent(new CustomEvent("pluribus:navigate",{detail:{view:l,...t}}))}catch{}},yd=async()=>{const[l,t,n,s,r,o]=b();l.value=null,r.value=null,t.value=!0;try{if(Object.keys(s.operators||{}).length===0){const S=pd();S&&S.schema&&S.suggestions&&(s.operators=S.schema.operators||{},s.commands=S.schema.commands||[],s.alias_map=S.schema.alias_map||{},s.tool_map=S.schema.tool_map||{},s.bus_topics=S.schema.bus_topics||{},s.user_ops_path=S.schema.user_ops_path,o.tool_paths=S.suggestions.tool_paths||[],o.ui_components=S.suggestions.ui_components||[],o.recent_actors=S.suggestions.recent_actors||[],o.recent_topics=S.suggestions.recent_topics||[],o.sota_candidates=S.suggestions.sota_candidates||[],o.bus=S.suggestions.bus||{},r.value="Loaded cached SemOps")}const c=`?ts=${Date.now()}`,[u,m]=await Promise.allSettled([fetch(`/api/semops${c}`,{cache:"no-store"}),fetch(`/api/semops/suggestions${c}`,{cache:"no-store"})]),d=[],f=S=>S instanceof Error?S.message:String(S);let v=null,x=null;if(u.status==="fulfilled")try{v=await n(u.value,"SemOps schema")}catch(S){d.push(`schema: ${f(S)}`)}else d.push(`schema: ${f(u.reason)}`);if(m.status==="fulfilled")try{x=await n(m.value,"SemOps suggestions")}catch(S){d.push(`suggestions: ${f(S)}`)}else d.push(`suggestions: ${f(m.reason)}`);v&&(v?.error&&d.push(String(v.error)),s.operators=v.operators||{},s.commands=v.commands||[],s.alias_map=v.alias_map||{},s.tool_map=v.tool_map||{},s.bus_topics=v.bus_topics||{},s.user_ops_path=v.user_ops_path),x&&(o.tool_paths=x.tool_paths||[],o.ui_components=x.ui_components||[],o.recent_actors=x.recent_actors||[],o.recent_topics=x.recent_topics||[],o.sota_candidates=x.sota_candidates||[],o.bus=x.bus||{}),v&&x&&md(v,x),d.length>0&&(v?r.value=`Loaded with warnings: ${d.join(" | ")}`:l.value=`Failed to load SemOps: ${d.join(" | ")}`)}catch(c){l.value=`Failed to load SemOps: ${String(c)}`}finally{t.value=!1}},_d=async()=>{const[l,t,n,s,r]=b();n.value=!0,r.value=null,l.value=null;try{const o=(t.key||t.name||t.id).trim();if(!o){l.value="operator key is required";return}const c=o.toUpperCase(),u=(t.id||c.toLowerCase()).trim(),m=Wl(t.aliases),d=Wl(t.agents),f=Wl(t.apps),v={};t.ui_route.trim()&&(v.route=t.ui_route.trim()),t.ui_component.trim()&&(v.component=t.ui_component.trim());const x=[];t.tool.trim()&&x.push({type:"tool",ref:t.tool.trim()}),t.bus_topic.trim()&&x.push({type:"bus",ref:t.bus_topic.trim(),kind:t.bus_kind||void 0}),(v.route||v.component)&&x.push({type:"ui",route:String(v.route||""),component:String(v.component||"")});for(const k of d)x.push({type:"agent",ref:k});for(const k of f)x.push({type:"app",ref:k});const S={key:c,id:u,name:(t.name||c).trim(),domain:t.domain.trim()||"user",category:t.category.trim()||"custom",effects:t.effects,description:t.description.trim(),aliases:m.length>0?m:[u,c],tool:t.tool.trim()||void 0,bus_topic:t.bus_topic.trim()||void 0,bus_kind:t.bus_kind||void 0,secondary_topic:t.secondary_topic.trim()||void 0,ui:v,agents:d,apps:f,targets:x},M=crypto.randomUUID(),w=await(await fetch("/api/semops/user_ops/define",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actor:"dashboard",req_id:M,operator:S})})).json();if(!w.success){l.value=w.error||"Define failed";return}r.value=`Defined ${w.operator_key||c}`,await s()}catch(o){l.value=`Define failed: ${String(o)}`}finally{n.value=!1}},wd=async l=>{const[t,n,s,r,o]=b();n.value=!0,o.value=null,t.value=null;try{const c=crypto.randomUUID(),m=await(await fetch("/api/semops/user_ops/define",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actor:"dashboard",req_id:c,operator:l})})).json();if(!m.success){t.value=m.error||"Define failed";return}o.value=`Defined ${m.operator_key||l.key} via Flow Wizard`,r.value=!1,await s()}catch(c){t.value=`Define failed: ${String(c)}`}finally{n.value=!1}},kd=async l=>{const[t,n,s,r]=b();if(l&&confirm(`Remove user-defined operator ${l}?`)){n.value=!0,r.value=null,t.value=null;try{const o=crypto.randomUUID(),u=await(await fetch("/api/semops/user_ops/undefine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actor:"dashboard",req_id:o,operator_key:l})})).json();if(!u.success){t.value=u.error||"Undefine failed";return}r.value=`Removed ${l}`,await s()}catch(o){t.value=`Undefine failed: ${String(o)}`}finally{n.value=!1}}},Sd=l=>{const[t]=b();t.tool=l;const n=gd(l);t.key||(t.key=n),t.id||(t.id=n.toLowerCase()),t.name||(t.name=n),t.aliases||(t.aliases=`${t.id}, ${n}`)},Cd=async()=>{const[l,t,n,s,r,o,c,u,m,d]=b();if(u.value){c.value=!0,d.value=null,l.value=null;try{const f=crypto.randomUUID();let v={};const x=s.value.trim();if(t.value=null,x)try{v=JSON.parse(x)}catch{v={input:x}}const S=m?.effects,M=typeof S=="string"&&S.trim()?S.trim().toLowerCase():void 0,w=await(await fetch("/api/semops/invoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actor:"dashboard",req_id:f,operator_key:u.value,mode:n.value,effects:M,payload:v,wait:o.value,timeout_s:r.value})})).json();if(!w.success){l.value=w.error||"Invoke failed";return}t.value=w.response?JSON.stringify(w.response,null,2):null,d.value=o.value?`Invoked ${u.value} (response received)`:`Invoked ${u.value} (bus request emitted)`}catch(f){l.value=`Invoke failed: ${String(f)}`}finally{c.value=!1}}},$d=()=>{const[l]=b();return l.value=!0},Id=()=>{const[l]=b();return l.value=!l.value},Td=(l,t)=>{const[n]=b();return n.value=t.value},Ed=l=>{const[t,n,s,r]=b();l.stopPropagation(),r.value=t,n(t,s,s.user_defined?"edit":"clone")},Ad=l=>{const[t,n]=b();l.stopPropagation(),n(t)},Md=()=>{const[l,t,n]=b();return l(t.value,n,n.user_defined?"edit":"clone")},Od=()=>{const[l,t]=b();return l(t.value)},Pd=()=>{const[l,t]=b();return l(t.value||"")},Ld=()=>{const[l,t]=b();return l(String(t.tool))},Dd=()=>{const[l,t]=b();return l("events",{searchPattern:String(t.bus_topic),searchMode:"glob"})},Rd=(l,t)=>{const[n]=b();return n.value=t.value},Nd=()=>{const[l]=b();return l("tool")},jd=()=>{const[l]=b();return l("policy")},zd=()=>{const[l]=b();return l("evolution")},Bd=()=>{const[l]=b();return l("ui")},Ud=(l,t)=>{const[n]=b();return n.key=t.value},Fd=(l,t)=>{const[n]=b();return n.id=t.value},qd=(l,t)=>{const[n]=b();return n.name=t.value},Gd=(l,t)=>{const[n]=b();return n.domain=t.value},Vd=(l,t)=>{const[n]=b();return n.category=t.value},Hd=(l,t)=>{const[n]=b();return n.description=t.value},Wd=(l,t)=>{const[n]=b();return n.aliases=t.value},Yd=(l,t)=>{const[n]=b();return n.tool=t.value},Jd=(l,t)=>{const[n]=b();return n.bus_topic=t.value},Kd=(l,t)=>{const[n]=b();return n.secondary_topic=t.value},Qd=(l,t)=>{const[n]=b();return n.ui_route=t.value},Xd=(l,t)=>{const[n]=b();return n.ui_component=t.value},Zd=(l,t)=>{const[n]=b();return n.agents=t.value},ep=(l,t)=>{const[n]=b();return n.apps=t.value},lp=()=>{const[l]=b();return l.value=!1},tp=()=>{W();const l=B({operators:{},commands:[],alias_map:{},tool_map:{},bus_topics:{}}),t=B({tool_paths:[],ui_components:[],recent_actors:[],recent_topics:[],sota_candidates:[],bus:{}}),n=y(!0),s=y(!1),r=y(null),o=y(null),c=y(""),u=y(!1),m=y(null),d=y("auto"),f=y('{"input":"..."}'),v=y(!1),x=y(2),S=y(null),M=y(!1),$=B({key:"",id:"",name:"",domain:"user",category:"custom",effects:"none",description:"",aliases:"",tool:"",bus_topic:"",bus_kind:"",secondary_topic:"",ui_route:"",ui_component:"",agents:"",apps:""}),w=p(vd,"s_UV2aK0BNmjY",[$]),k=p(bd,"s_SBZZDW7hnwE",[$]),I=p(fd,"s_bxtkxJh7X8o",[$,o]),T=p(xd,"s_G7pGJZQ0S54",[o]),z=p(hd,"s_3mCqi1q06c4"),J=p(yd,"s_pqDTHh28MMQ",[r,n,async(P,K)=>{const Q=P.headers.get("content-type")||"",U=await P.text();if(!P.ok)throw new Error(`${K} HTTP ${P.status}`);try{return JSON.parse(U)}catch{const Le=U.trim().slice(0,120);throw new Error(`${K} invalid JSON (${Q||"unknown"}): ${Le}`)}},l,o,t]),ne=p(_d,"s_8hh4o0S0Rxo",[r,$,s,J,o]),Z=p(wd,"s_QGFJr5Yu7hk",[r,s,J,M,o]),he=p(kd,"s_j1yt0vDZ2F8",[r,s,J,o]),A=p(Sd,"s_fz6mEA1FwBI",[$]);D(_("s_ZfGqANd1Qes",[J]));const R=m.value?l.operators?.[m.value]:null,ee=R?.flow_hints||[],ge=p(Cd,"s_sB1Q05jrlrI",[r,S,d,f,x,v,s,m,R,o]),we=Object.entries(l.operators||{}).filter(([P,K])=>{const Q=c.value.trim().toLowerCase();return Q?[P,K.id,K.name,K.domain,K.category,K.description,...K.aliases||[],String(K.tool||""),String(K.bus_topic||"")].join(" ").toLowerCase().includes(Q):!0}),re={};for(const[P,K]of we){const Q=K.domain||"unknown",U=K.category||"unknown";re[Q]||(re[Q]={}),re[Q][U]||(re[Q][U]=[]),re[Q][U].push([P,K])}const ze=Object.keys(re).sort((P,K)=>P.localeCompare(K));Array.from(new Set([...Object.keys(l.bus_topics||{}),...(t.recent_topics||[]).map(([P])=>P)])).slice(0,200);const Be=Array.from(new Set([...Object.values(l.tool_map||{}),...t.tool_paths||[]])).slice(0,400);return Array.from(new Set([...t.ui_components||[]])).slice(0,400),Array.from(new Set([...(t.recent_actors||[]).map(([P])=>P)])).slice(0,200),e("div",null,{class:"space-y-6"},[e("div",null,{class:"flex items-start justify-between gap-4"},[e("div",null,null,[e("div",null,{class:"text-lg font-semibold"},"ðŸ§  Semantic Operators (SemOps)",3,null),e("div",null,{class:"text-xs text-muted-foreground mono"},[i(P=>P.user_ops_path?`user_ops=${P.user_ops_path}`:"user_ops=unresolved",[l],'p0.user_ops_path?`user_ops=${p0.user_ops_path}`:"user_ops=unresolved"')," â€¢ bus=",i(P=>P.bus?.active_dir||"unknown",[t],'p0.bus?.active_dir||"unknown"')],3,null)],3,null),e("div",null,{class:"flex gap-2"},[g(L,{variant:"tonal",onClick$:p($d,"s_DlDFPc8l7vY",[M]),children:"âœ¨ Flow Wizard",[a]:{variant:a,onClick$:a}},3,"kU_0"),g(L,{variant:"secondary",onClick$:J,get disabled(){return n.value},children:"Refresh",[a]:{variant:a,onClick$:a,disabled:i(P=>P.value,[n],"p0.value")}},3,"kU_1"),g(L,{variant:"secondary",onClick$:p(Id,"s_7duL2gu80Vc",[u]),children:i(P=>P.value?"Hide SOTA":"Show SOTA",[u],'p0.value?"Hide SOTA":"Show SOTA"'),[a]:{variant:a,onClick$:a}},3,"kU_2")],1,null)],1,null),r.value&&e("div",null,{class:"rounded border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-300 font-mono"},i(P=>P.value,[r],"p0.value"),3,"kU_3"),o.value&&e("div",null,{class:"rounded border border-green-500/30 bg-green-500/10 p-3 text-sm text-green-300 font-mono"},i(P=>P.value,[o],"p0.value"),3,"kU_4"),e("div",null,{class:"grid grid-cols-12 gap-6"},[e("div",null,{class:"col-span-8 rounded-lg border border-border bg-card p-4 space-y-4"},[e("div",null,{class:"flex items-center justify-between gap-4"},[e("div",null,{class:"text-sm font-semibold text-muted-foreground"},"Registry",3,null),e("div",null,{class:"flex items-center gap-2"},[g(V,{get value(){return c.value},onInput$:p(Td,"s_C2c65tVwTtI",[c]),placeholder:"Filter (id/domain/topic/alias)â€¦",class:"w-[320px]",[a]:{value:i(P=>P.value,[c],"p0.value"),onInput$:a,placeholder:a,class:a}},3,"kU_5"),e("div",null,{class:"text-xs text-muted-foreground mono"},[h(we,"length")," ops"],1,null)],1,null)],1,null),n.value?e("div",null,{class:"text-sm text-muted-foreground"},"Loadingâ€¦",3,"kU_6"):e("div",null,{class:"space-y-4 max-h-[calc(100vh-260px)] overflow-auto pr-2"},ze.map(P=>e("div",null,{class:"space-y-2"},[e("div",null,{class:"text-xs font-semibold uppercase tracking-widest text-cyan-300/80"},P,1,null),e("div",null,{class:"space-y-3"},Object.keys(re[P]||{}).sort((K,Q)=>K.localeCompare(Q)).map(K=>g(H,{variant:"outlined",padding:"p-0",children:[e("div",null,{class:"px-3 py-2 border-b border-border/50 flex items-center justify-between"},e("div",null,{class:"text-xs font-mono text-muted-foreground"},[K," â€¢ ",h(re[P][K],"length")],1,null),1,null),e("div",null,{class:"divide-y divide-border/30"},re[P][K].sort(([Q],[U])=>Q.localeCompare(U)).map(([Q,U])=>W(e("div",{class:`px-3 py-2 flex items-start justify-between gap-3 cursor-pointer hover:bg-muted/20 ${m.value===Q?"ring-2 ring-primary/60 bg-muted/10":""}`,onClick$:_("s_XRjSRvOOPSc",[d,Q,U,m])},null,[e("div",null,{class:"min-w-0"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"font-mono text-sm text-foreground"},Q,1,null),U.user_defined&&e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-300 border border-purple-500/30"},"USER",3,"kU_7"),U.tool&&e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-muted/50 text-muted-foreground border border-border/60 font-mono truncate max-w-[260px]"},String(U.tool),1,"kU_8"),U.bus_topic&&e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-cyan-500/10 text-cyan-200 border border-cyan-500/20 font-mono truncate max-w-[260px]"},String(U.bus_topic),1,"kU_9")],1,null),e("div",null,{class:"text-xs text-muted-foreground mt-1 line-clamp-2"},U.description||"",1,null),e("div",null,{class:"text-[11px] text-muted-foreground font-mono mt-1 truncate"},["aliases: ",(U.aliases||[]).join(", ")],1,null),U.agents&&U.agents.length>0&&e("div",null,{class:"text-[11px] text-muted-foreground font-mono mt-1 truncate"},["agents: ",U.agents.join(", ")],1,"kU_10"),U.apps&&U.apps.length>0&&e("div",null,{class:"text-[11px] text-muted-foreground font-mono mt-1 truncate"},["apps: ",U.apps.join(", ")],1,"kU_11")],1,null),e("div",null,{class:"flex items-center gap-2 flex-shrink-0"},[g(L,{variant:"secondary",onClick$:p(Ed,"s_ZhEyOGuQ4lI",[Q,I,U,m]),get disabled(){return s.value},class:"h-6 text-xs",children:U.user_defined?"Edit":"Clone",[a]:{variant:a,disabled:i(Le=>Le.value,[s],"p0.value"),class:a}},1,"kU_12"),U.user_defined&&g(L,{variant:"tonal",onClick$:p(Ad,"s_kTPdSHz1XSM",[Q,he]),get disabled(){return s.value},class:"h-6 text-xs text-red-300 border-red-500/30",children:"Remove",[a]:{variant:a,disabled:i(Le=>Le.value,[s],"p0.value"),class:a}},3,"kU_13")],1,null)],0,Q))),1,null)],[a]:{variant:a,padding:a}},1,`${P}.${K}`)),1,null)],1,P)),1,null)],1,null),e("div",null,{class:"col-span-4 rounded-lg border border-border bg-card p-4 space-y-4"},[m.value&&R&&e("div",null,{class:"rounded border border-border/60 bg-background/40 p-3 space-y-2"},[e("div",null,{class:"flex items-start justify-between gap-2"},[e("div",null,{class:"min-w-0"},[e("div",null,{class:"font-mono text-sm text-foreground truncate"},i(P=>P.value,[m],"p0.value"),3,null),e("div",null,{class:"text-[11px] text-muted-foreground truncate"},[h(R,"domain")," / ",h(R,"category")],1,null)],1,null),e("div",null,{class:"flex gap-2"},[g(L,{variant:"secondary",onClick$:p(Md,"s_axoq4EfyEFA",[I,m,R]),class:"h-6 text-xs",get disabled(){return s.value},children:R.user_defined?"Edit":"Clone",[a]:{variant:a,class:a,disabled:i(P=>P.value,[s],"p0.value")}},1,"kU_14"),R.user_defined&&g(L,{variant:"tonal",onClick$:p(Od,"s_5bQ0QqUw3is",[he,m]),class:"h-6 text-xs text-red-300 border-red-500/30",get disabled(){return s.value},children:"Delete",[a]:{variant:a,onClick$:a,class:a,disabled:i(P=>P.value,[s],"p0.value")}},3,"kU_15")],1,null)],1,null),R.description&&e("div",null,{class:"text-xs text-muted-foreground line-clamp-3"},h(R,"description"),1,"kU_16"),ee.length>0&&e("div",null,{class:"flex flex-wrap gap-1"},ee.slice(0,8).map(P=>e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-cyan-500/10 text-cyan-200 border border-cyan-500/20 font-mono"},P,1,P)),1,"kU_17"),e("div",null,{class:"space-y-1 text-[11px] font-mono text-muted-foreground"},[R.tool&&e("div",null,{class:"truncate"},["tool: ",String(R.tool)],1,"kU_18"),R.bus_topic&&e("div",null,{class:"truncate"},["bus: ",String(R.bus_topic)," ",R.bus_kind?`(${R.bus_kind})`:""],1,"kU_19"),R.ui?.route&&e("div",null,{class:"truncate"},["ui.route: ",String(R.ui.route)],1,"kU_20"),R.ui?.component&&e("div",null,{class:"truncate"},["ui.component: ",String(R.ui.component)],1,"kU_21"),R?.effects&&e("div",{class:`truncate ${R.effects==="system"?"text-red-400":R.effects==="network"?"text-orange-400":R.effects==="file"?"text-yellow-400":""}`},null,["effects: ",String(R.effects),R.effects==="system"&&" âš ï¸ elevated",R.effects==="network"&&" âš ï¸ external",R.effects==="file"&&" âš ï¸ filesystem"],1,"kU_22")],1,null),e("div",null,{class:"flex flex-wrap gap-2"},[g(L,{variant:"secondary",onClick$:p(Pd,"s_GZ5zACdER8w",[T,m]),class:"h-6 text-xs",children:"Copy Key",[a]:{variant:a,onClick$:a,class:a}},3,"kU_23"),R.tool&&g(L,{variant:"secondary",onClick$:p(Ld,"s_z3STEG2a1tY",[T,R]),class:"h-6 text-xs",children:"Copy Tool",[a]:{variant:a,class:a}},3,"kU_24"),R.bus_topic&&g(L,{variant:"secondary",onClick$:p(Dd,"s_MXjwtlhXNEo",[z,R]),class:"h-6 text-xs",children:"Open Events",[a]:{variant:a,class:a}},3,"kU_25")],1,null),e("div",null,{class:"pt-2 border-t border-border/50 space-y-2"},[e("div",null,{class:"text-xs font-semibold text-muted-foreground uppercase tracking-widest"},"Invoke (Bus Request)",3,null),e("div",null,{class:"grid grid-cols-2 gap-2"},[e("select",null,{value:i(P=>P.value,[d],"p0.value"),class:"px-2 py-1 rounded bg-background border border-border text-xs font-mono",onChange$:_("s_AMd0XvRFaCk",[d])},[e("option",null,{value:"auto"},"auto",3,null),e("option",null,{value:"tool"},"tool",3,null),e("option",null,{value:"bus"},"bus",3,null),e("option",null,{value:"policy"},"policy",3,null),e("option",null,{value:"evolution"},"evolution",3,null),e("option",null,{value:"ui"},"ui",3,null),e("option",null,{value:"agent"},"agent",3,null),e("option",null,{value:"app"},"app",3,null)],3,null),g(L,{variant:"primary",onClick$:ge,get disabled(){return s.value},class:"h-8 text-xs",children:"Emit",[a]:{variant:a,onClick$:a,disabled:i(P=>P.value,[s],"p0.value"),class:a}},3,"kU_26")],1,null),e("div",null,{class:"flex items-center gap-3 text-xs text-muted-foreground"},[e("label",null,{class:"flex items-center gap-2"},[e("input",null,{type:"checkbox",checked:i(P=>P.value,[v],"p0.value"),onChange$:_("s_YJvfHCn8wLQ",[v])},null,3,null),"wait for response"],3,null),e("label",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-[11px]"},"timeout_s",3,null),e("input",null,{type:"number",min:"0.1",step:"0.1",value:i(P=>P.value,[x],"p0.value"),class:"w-24 px-2 py-1 rounded bg-background border border-border text-xs font-mono",onInput$:_("s_P3gbQMq0EBs",[x])},null,3,null)],3,null)],3,null),g(V,{type:"textarea",get value(){return f.value},onInput$:p(Rd,"s_LTGW5CtO2hs",[f]),placeholder:'{"input":"..."}',[a]:{type:a,value:i(P=>P.value,[f],"p0.value"),onInput$:a,placeholder:a}},3,"kU_27"),S.value&&e("pre",null,{class:"px-2 py-2 rounded bg-black/30 border border-border text-[11px] font-mono max-h-48 overflow-auto whitespace-pre-wrap"},i(P=>P.value,[S],"p0.value"),3,"kU_28"),e("div",null,{class:"text-[11px] text-muted-foreground"},"Emits `semops.invoke.request` to the bus; execution is handled asynchronously by agents/daemons.",3,null)],1,null)],1,"kU_29"),e("div",null,{class:"text-sm font-semibold text-muted-foreground"},"Create / Update (User Ops)",3,null),e("div",null,{class:"flex flex-wrap gap-2"},[g(L,{variant:"secondary",onClick$:p(Nd,"s_nRqsBuPupZQ",[k]),class:"h-6 text-xs",children:"Tool",[a]:{variant:a,onClick$:a,class:a}},3,"kU_30"),g(L,{variant:"secondary",onClick$:p(jd,"s_OBoLKUSYztY",[k]),class:"h-6 text-xs",children:"Policy",[a]:{variant:a,onClick$:a,class:a}},3,"kU_31"),g(L,{variant:"secondary",onClick$:p(zd,"s_3azEdzBME0Q",[k]),class:"h-6 text-xs",children:"Evolution",[a]:{variant:a,onClick$:a,class:a}},3,"kU_32"),g(L,{variant:"secondary",onClick$:p(Bd,"s_W7hFbS2TABw",[k]),class:"h-6 text-xs",children:"UI",[a]:{variant:a,onClick$:a,class:a}},3,"kU_33"),g(L,{variant:"secondary",onClick$:w,class:"h-6 text-xs",children:"Reset",[a]:{variant:a,onClick$:a,class:a}},3,"kU_34")],1,null),e("div",null,{class:"space-y-2"},[e("div",null,{class:"grid grid-cols-2 gap-2"},[g(V,{label:"KEY",get value(){return $.key},onInput$:p(Ud,"s_x0iOnna0XTo",[$]),placeholder:"MYOP",[a]:{label:a,value:i(P=>P.key,[$],"p0.key"),onInput$:a,placeholder:a}},3,"kU_35"),g(V,{label:"id",get value(){return $.id},onInput$:p(Fd,"s_sHXAKe1Q4X4",[$]),placeholder:"myop",[a]:{label:a,value:i(P=>P.id,[$],"p0.id"),onInput$:a,placeholder:a}},3,"kU_36")],1,null),g(V,{label:"Name",get value(){return $.name},onInput$:p(qd,"s_sZdD4f2kkG4",[$]),placeholder:"Display Name",[a]:{label:a,value:i(P=>P.name,[$],"p0.name"),onInput$:a,placeholder:a}},3,"kU_37"),e("div",null,{class:"grid grid-cols-2 gap-2"},[g(V,{label:"Domain",get value(){return $.domain},onInput$:p(Gd,"s_HSPPvr0Nt0Q",[$]),placeholder:"user",[a]:{label:a,value:i(P=>P.domain,[$],"p0.domain"),onInput$:a,placeholder:a}},3,"kU_38"),e("div",null,{class:"grid grid-cols-2 gap-2"},[g(V,{label:"Category",get value(){return $.category},onInput$:p(Vd,"s_voP5XLoqwQA",[$]),placeholder:"custom",[a]:{label:a,value:i(P=>P.category,[$],"p0.category"),onInput$:a,placeholder:a}},3,"kU_39"),e("select",null,{value:i(P=>P.effects,[$],"p0.effects"),class:"px-3 py-2 rounded bg-background border border-border text-sm font-mono h-[56px]",onChange$:_("s_IwzJuNh9I04",[$])},[e("option",null,{value:"none"},"effects: none",3,null),e("option",null,{value:"file"},"effects: file",3,null),e("option",null,{value:"network"},"effects: network",3,null),e("option",null,{value:"system"},"effects: system",3,null),e("option",null,{value:"unknown"},"effects: unknown",3,null)],3,null)],1,null)],1,null),g(V,{type:"textarea",label:"Description",get value(){return $.description},onInput$:p(Hd,"s_Dqv0Pn5Iebg",[$]),placeholder:"Description...",[a]:{type:a,label:a,value:i(P=>P.description,[$],"p0.description"),onInput$:a,placeholder:a}},3,"kU_40"),g(V,{label:"Aliases",get value(){return $.aliases},onInput$:p(Wd,"s_Rd6v5KhBwlo",[$]),placeholder:"comma-separated",[a]:{label:a,value:i(P=>P.aliases,[$],"p0.aliases"),onInput$:a,placeholder:a}},3,"kU_41")],1,null),e("div",null,{class:"space-y-2"},[e("div",null,{class:"text-xs font-semibold text-muted-foreground uppercase tracking-widest"},"Bindings",3,null),e("select",null,{class:"px-3 py-2 rounded bg-background border border-border text-sm font-mono w-full",onChange$:_("s_h2QFXbwWPJ0",[A])},[e("option",null,{value:""},"Quick-pick toolâ€¦",3,null),Be.slice(0,120).map(P=>e("option",{value:P},null,P,1,P))],1,null),g(V,{label:"Tool Path",get value(){return $.tool},onInput$:p(Yd,"s_bLqNdo7xOW0",[$]),placeholder:"nucleus/tools/...",[a]:{label:a,value:i(P=>P.tool,[$],"p0.tool"),onInput$:a,placeholder:a}},3,"kU_42"),g(V,{label:"Bus Topic",get value(){return $.bus_topic},onInput$:p(Jd,"s_R0cL9xsv0pM",[$]),placeholder:"domain.action",[a]:{label:a,value:i(P=>P.bus_topic,[$],"p0.bus_topic"),onInput$:a,placeholder:a}},3,"kU_43"),e("div",null,{class:"grid grid-cols-2 gap-2"},[e("select",null,{value:i(P=>P.bus_kind,[$],"p0.bus_kind"),class:"px-3 py-2 rounded bg-background border border-border text-sm font-mono h-[56px]",onChange$:_("s_dUweJb4rsIE",[$])},[e("option",null,{value:""},"bus_kind",3,null),e("option",null,{value:"request"},"request",3,null),e("option",null,{value:"response"},"response",3,null),e("option",null,{value:"artifact"},"artifact",3,null),e("option",null,{value:"metric"},"metric",3,null),e("option",null,{value:"log"},"log",3,null)],3,null),g(V,{label:"Secondary Topic",get value(){return $.secondary_topic},onInput$:p(Kd,"s_OnSMAE540SI",[$]),[a]:{label:a,value:i(P=>P.secondary_topic,[$],"p0.secondary_topic"),onInput$:a}},3,"kU_44")],1,null),e("div",null,{class:"grid grid-cols-2 gap-2"},[g(V,{label:"UI Route",get value(){return $.ui_route},onInput$:p(Qd,"s_Vbj5KP9xz8k",[$]),[a]:{label:a,value:i(P=>P.ui_route,[$],"p0.ui_route"),onInput$:a}},3,"kU_45"),g(V,{label:"UI Component",get value(){return $.ui_component},onInput$:p(Xd,"s_u4iPQxmPaFg",[$]),[a]:{label:a,value:i(P=>P.ui_component,[$],"p0.ui_component"),onInput$:a}},3,"kU_46")],1,null),g(V,{label:"Agents",get value(){return $.agents},onInput$:p(Zd,"s_KnDZImJpf0o",[$]),placeholder:"comma-separated",[a]:{label:a,value:i(P=>P.agents,[$],"p0.agents"),onInput$:a,placeholder:a}},3,"kU_47"),g(V,{label:"Apps",get value(){return $.apps},onInput$:p(ep,"s_dkNXdn9dL0w",[$]),placeholder:"comma-separated",[a]:{label:a,value:i(P=>P.apps,[$],"p0.apps"),onInput$:a,placeholder:a}},3,"kU_48")],1,null),e("div",null,{class:"flex items-center gap-2"},[g(L,{variant:"primary",onClick$:ne,get disabled(){return s.value},children:i(P=>P.value?"Savingâ€¦":"Save",[s],'p0.value?"Savingâ€¦":"Save"'),[a]:{variant:a,onClick$:a,disabled:i(P=>P.value,[s],"p0.value")}},3,"kU_49"),g(L,{variant:"secondary",onClick$:w,children:"Clear",[a]:{variant:a,onClick$:a}},3,"kU_50")],1,null),u.value&&g(H,{variant:"outlined",padding:"p-3",class:"bg-muted/20",children:[e("div",null,{class:"text-xs font-semibold uppercase tracking-widest text-muted-foreground"},"SOTA Seeds (from catalog)",3,null),e("div",null,{class:"text-xs text-muted-foreground"},"These are suggestions (not wired). Use as prompts for new SemOps, services, or integration tasks.",3,null),e("div",null,{class:"max-h-[200px] overflow-auto pr-1 space-y-1"},t.sota_candidates.slice(0,80).map(P=>e("div",null,{class:"text-[11px] font-mono text-muted-foreground truncate"},P,1,P)),1,null)],[a]:{variant:a,padding:a,class:a}},1,"kU_51")],1,null)],1,null),g(dd,{get isOpen(){return M.value},onClose$:p(lp,"s_JUYC9l0g498",[M]),onPublish$:Z,suggestions:t,[a]:{isOpen:i(P=>P.value,[M],"p0.value"),onClose$:a,onPublish$:a,suggestions:a}},3,"kU_52")],1,"kU_53")},np=E(p(tp,"s_5rnXg4sJAkI")),sp=async()=>{const[l,t,n]=b();try{const s=await fetch("/api/io-buffer");s.ok?(l.value=await s.json(),t.value=null):t.value="Failed to fetch IO buffer"}catch(s){t.value=String(s)}finally{n.value=!1}},ap=()=>{const l=y(null),t=y(!0),n=y(null),s=y(!0),r=y(!0);D(_("s_FRJrvUKIh0I",[s,p(sp,"s_b3YLbhU18ec",[l,n,t])]));const c=d=>d?new Date(d*1e3).toLocaleTimeString("en-US",{hour12:!1}).slice(0,8):"--:--",u=d=>d.includes("request")||d.includes("submit")||d.includes("trigger")?"text-green-400":d.includes("tick")||d.includes("probe")?"text-cyan-400":d.includes("response")||d.includes("complete")||d.includes("ack")?"text-blue-400":d.includes("heartbeat")||d.includes("state")?"text-purple-400":d.includes("a2a")||d.includes("negotiate")?"text-pink-400":d.includes("dialogos")||d.includes("cell")?"text-orange-400":d.includes("mcp")?"text-teal-400":"text-muted-foreground",m={infer_sync:"bg-blue-500/20 text-blue-300",dialogos:"bg-orange-500/20 text-orange-300",a2a_negotiate:"bg-pink-500/20 text-pink-300",pluribuscheck:"bg-green-500/20 text-green-300",pbflush:"bg-purple-500/20 text-purple-300"};return e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between bg-muted/30"},[e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"text-sm font-semibold"},"IO BUFFER",3,null),e("span",null,{class:"text-xs text-muted-foreground"},"MCP/A2A/Dialogos integrated",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[l.value?.metrics&&e("div",null,{class:"flex items-center gap-2 text-xs"},[e("span",null,{class:"px-2 py-0.5 rounded bg-green-500/20 text-green-400",title:"Queue Depth"},["Q:",i(d=>d.value.metrics.queueDepth,[l],"p0.value.metrics.queueDepth")],3,null),e("span",null,{class:"px-2 py-0.5 rounded bg-amber-500/20 text-amber-400",title:"Pending Pairs"},["Î©:",i(d=>d.value.metrics.pendingPairs,[l],"p0.value.metrics.pendingPairs")],3,null),e("span",null,{class:"px-2 py-0.5 rounded bg-pink-500/20 text-pink-400",title:"A2A Pending"},["A2A:",i(d=>d.value.metrics.pendingA2a,[l],"p0.value.metrics.pendingA2a")],3,null)],3,"an_0"),e("button",null,{class:i(d=>`text-xs px-2 py-1 rounded ${d.value?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,[r],'`text-xs px-2 py-1 rounded ${p0.value?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`'),onClick$:_("s_2Ee0ODHXIAA",[r])},i(d=>d.value?"Protocols":"Basic",[r],'p0.value?"Protocols":"Basic"'),3,null),e("button",null,{class:i(d=>`text-xs px-2 py-1 rounded ${d.value?"bg-green-500/20 text-green-400":"bg-muted text-muted-foreground"}`,[s],'`text-xs px-2 py-1 rounded ${p0.value?"bg-green-500/20 text-green-400":"bg-muted text-muted-foreground"}`'),onClick$:_("s_94QFMOUo9Aw",[s])},i(d=>d.value?"Live":"Paused",[s],'p0.value?"Live":"Paused"'),3,null)],1,null)],1,null),t.value?e("div",null,{class:"p-8 text-center text-muted-foreground"},"Loading IO buffer...",3,"an_1"):n.value?e("div",null,{class:"p-4 text-red-400 text-sm"},i(d=>d.value,[n],"p0.value"),3,"an_2"):e("div",null,{class:"flex flex-col"},[e("div",null,{class:"grid grid-cols-3 gap-0 min-h-[220px]"},[e("div",null,{class:"border-r border-border"},[e("div",null,{class:"p-2 bg-green-500/10 border-b border-green-500/20 flex items-center justify-between"},[e("span",null,{class:"text-xs font-semibold text-green-400 flex items-center gap-1"},[e("span",null,{class:"w-2 h-2 rounded-full bg-green-400 animate-pulse"},null,3,null),"INPUT QUEUE"],3,null),e("span",null,{class:"text-xs text-green-400/60"},i(d=>d.value?.input.length||0,[l],"p0.value?.input.length||0"),3,null)],3,null),e("div",null,{class:"max-h-[180px] overflow-auto"},l.value?.input.length===0?e("div",null,{class:"p-3 text-xs text-muted-foreground text-center"},"No pending input",3,"an_3"):l.value?.input.map(d=>e("div",null,{class:"p-1.5 border-b border-border/30 hover:bg-green-500/5 transition-colors"},[e("div",null,{class:"flex items-center justify-between gap-1"},[e("span",{class:`text-[11px] font-mono truncate ${u(d.topic)}`},null,d.topic.split(".").slice(-2).join("."),1,null),e("div",null,{class:"flex items-center gap-1"},[d.pairId&&e("span",{class:`text-[10px] px-1 rounded ${m[d.pairId]||"bg-muted text-muted-foreground"}`},null,h(d,"pairId"),1,"an_4"),e("span",null,{class:"text-[10px] text-muted-foreground"},c(d.ts),1,null)],1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground truncate"},h(d,"summary"),1,null)],1,d.id)),1,null)],1,null),e("div",null,{class:"border-r border-border"},[e("div",null,{class:"p-2 bg-amber-500/10 border-b border-amber-500/20 flex items-center justify-between"},[e("span",null,{class:"text-xs font-semibold text-amber-400 flex items-center gap-1"},[e("span",null,{class:"w-2 h-2 rounded-full bg-amber-400 animate-pulse"},null,3,null),"PROCESSING"],3,null),e("span",null,{class:"text-xs text-amber-400/60"},i(d=>d.value?.processing.length||0,[l],"p0.value?.processing.length||0"),3,null)],3,null),e("div",null,{class:"max-h-[180px] overflow-auto"},l.value?.processing.length===0?e("div",null,{class:"p-3 text-xs text-muted-foreground text-center"},"No active processing",3,"an_5"):l.value?.processing.map(d=>e("div",null,{class:"p-1.5 border-b border-border/30 hover:bg-amber-500/5 transition-colors"},[e("div",null,{class:"flex items-center justify-between gap-1"},[e("span",{class:`text-[11px] font-mono truncate ${u(d.topic)}`},null,d.topic.split(".").slice(-2).join("."),1,null),e("span",null,{class:"text-[10px] text-muted-foreground"},c(d.ts),1,null)],1,null),e("div",null,{class:"flex items-center gap-1 mt-0.5"},[e("span",null,{class:"text-[10px] px-1 rounded bg-amber-500/20 text-amber-300"},h(d,"actor"),1,null),e("span",null,{class:"text-[10px] text-muted-foreground truncate flex-1"},h(d,"summary"),1,null)],1,null)],1,d.id)),1,null)],1,null),e("div",null,null,[e("div",null,{class:"p-2 bg-blue-500/10 border-b border-blue-500/20 flex items-center justify-between"},[e("span",null,{class:"text-xs font-semibold text-blue-400 flex items-center gap-1"},[e("span",null,{class:"w-2 h-2 rounded-full bg-blue-400"},null,3,null),"OUTPUT STREAM"],3,null),e("span",null,{class:"text-xs text-blue-400/60"},i(d=>d.value?.output.length||0,[l],"p0.value?.output.length||0"),3,null)],3,null),e("div",null,{class:"max-h-[180px] overflow-auto"},l.value?.output.length===0?e("div",null,{class:"p-3 text-xs text-muted-foreground text-center"},"No output yet",3,"an_6"):l.value?.output.map(d=>e("div",null,{class:"p-1.5 border-b border-border/30 hover:bg-blue-500/5 transition-colors"},[e("div",null,{class:"flex items-center justify-between gap-1"},[e("span",{class:`text-[11px] font-mono truncate ${u(d.topic)}`},null,d.topic.split(".").slice(-2).join("."),1,null),e("div",null,{class:"flex items-center gap-1"},[d.pairId&&e("span",{class:`text-[10px] px-1 rounded ${m[d.pairId]||"bg-muted text-muted-foreground"}`},null,h(d,"pairId"),1,"an_7"),e("span",null,{class:"text-[10px] text-muted-foreground"},c(d.ts),1,null)],1,null)],1,null),e("div",null,{class:"flex items-center gap-1 mt-0.5"},[e("span",{class:`text-[10px] px-1 rounded ${d.kind==="metric"?"bg-purple-500/20 text-purple-300":d.kind==="artifact"?"bg-cyan-500/20 text-cyan-300":"bg-muted text-muted-foreground"}`},null,h(d,"kind"),1,null),e("span",null,{class:"text-[10px] text-muted-foreground truncate flex-1"},h(d,"summary"),1,null)],1,null)],1,d.id)),1,null)],1,null)],1,null),r.value&&e("div",null,{class:"grid grid-cols-3 gap-0 border-t border-border min-h-[140px]"},[e("div",null,{class:"border-r border-border"},[e("div",null,{class:"p-2 bg-pink-500/10 border-b border-pink-500/20 flex items-center justify-between"},[e("span",null,{class:"text-xs font-semibold text-pink-400"},"A2A NEGOTIATIONS",3,null),e("span",null,{class:"text-xs text-pink-400/60"},i(d=>d.value?.a2a?.length||0,[l],"p0.value?.a2a?.length||0"),3,null)],3,null),e("div",null,{class:"max-h-[100px] overflow-auto"},l.value?.a2a?.length?l.value.a2a.map(d=>e("div",null,{class:"p-1.5 border-b border-border/30 hover:bg-pink-500/5"},e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-[10px] font-mono text-pink-300"},[h(d,"from")," â†’ ",h(d,"to")],1,null),e("span",{class:`text-[10px] px-1 rounded ${d.state==="pending"?"bg-yellow-500/20 text-yellow-300":d.state==="accepted"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`},null,h(d,"state"),1,null)],1,null),1,d.id)):e("div",null,{class:"p-2 text-[10px] text-muted-foreground text-center"},"No A2A activity",3,"an_8"),1,null)],1,null),e("div",null,{class:"border-r border-border"},[e("div",null,{class:"p-2 bg-orange-500/10 border-b border-orange-500/20 flex items-center justify-between"},[e("span",null,{class:"text-xs font-semibold text-orange-400"},"DIALOGOS CELLS",3,null),e("span",null,{class:"text-xs text-orange-400/60"},i(d=>d.value?.dialogos?.length||0,[l],"p0.value?.dialogos?.length||0"),3,null)],3,null),e("div",null,{class:"max-h-[100px] overflow-auto"},l.value?.dialogos?.length?l.value.dialogos.map(d=>e("div",null,{class:"p-1.5 border-b border-border/30 hover:bg-orange-500/5"},[e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-[10px] font-mono text-orange-300"},h(d,"cellId"),1,null),e("span",{class:`text-[10px] px-1 rounded ${d.state==="active"?"bg-green-500/20 text-green-300 animate-pulse":d.state==="streaming"?"bg-blue-500/20 text-blue-300 animate-pulse":d.state==="complete"?"bg-gray-500/20 text-gray-300":"bg-muted text-muted-foreground"}`},null,h(d,"state"),1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},h(d,"actor"),1,null)],1,d.id)):e("div",null,{class:"p-2 text-[10px] text-muted-foreground text-center"},"No active cells",3,"an_9"),1,null)],1,null),e("div",null,null,[e("div",null,{class:"p-2 bg-teal-500/10 border-b border-teal-500/20 flex items-center justify-between"},[e("span",null,{class:"text-xs font-semibold text-teal-400"},"MCP SERVERS",3,null),e("span",null,{class:"text-xs text-teal-400/60"},i(d=>d.value?.mcp?.length||0,[l],"p0.value?.mcp?.length||0"),3,null)],3,null),e("div",null,{class:"max-h-[100px] overflow-auto"},l.value?.mcp?.length?l.value.mcp.map(d=>e("div",null,{class:"p-1.5 border-b border-border/30 hover:bg-teal-500/5"},[e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-[10px] font-mono text-teal-300"},h(d,"server"),1,null),e("span",{class:`text-[10px] px-1 rounded ${d.status==="ok"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`},null,h(d,"status"),1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},h(d,"method"),1,null)],1,d.id)):e("div",null,{class:"p-2 text-[10px] text-muted-foreground text-center"},"No MCP activity",3,"an_10"),1,null)],1,null)],1,"an_11")],1,null)],1,"an_12")},rp=E(p(ap,"s_uT2E4n1IVk4"));function op(l){let t=0,n=0;for(const s of l.split(`
`)){const r=s.trim();r.startsWith("- [")&&(r.startsWith("- [x]")||r.startsWith("- [X]")?n+=1:r.startsWith("- [ ]")&&(t+=1))}return{pending:t,completed:n}}function ip(l){const t=l.split(`
`).slice(0,60);for(const n of t){const s=n.trim(),r=s.match(/^\*\*Status:\*\*\s*(.+)\s*$/i);if(r?.[1])return r[1].trim();const o=s.match(/^Status:\s*(.+)\s*$/i);if(o?.[1])return o[1].trim()}return"unknown"}const up=()=>{const[l]=b(),t=l.events.value.slice(-1500),n=new Map;for(const s of t){const r=String(s.topic||"").split(".")[0]||"?";n.set(r,(n.get(r)||0)+1)}return Array.from(n.entries()).sort((s,r)=>r[1]-s[1]).slice(0,12)},cp=()=>{const[l]=b(),t=l.events.value.slice(-1500),n=new Map;for(const s of t){const r=String(s.actor||"unknown");n.set(r,(n.get(r)||0)+1)}return Array.from(n.entries()).sort((s,r)=>r[1]-s[1]).slice(0,12)},dp=()=>{const[l]=b(),t={omega:null,providers:null,hexis:null,strp:null,dialogos:null,a2a:null,mcp:null,git:null,rhizome:null};for(let n=l.events.value.length-1;n>=0;n-=1){const s=l.events.value[n],r=String(s.topic||"");if(!t.omega&&r.startsWith("omega.")&&(t.omega=s),!t.providers&&r.startsWith("provider.")&&(t.providers=s),!t.hexis&&r.startsWith("hexis.")&&(t.hexis=s),!t.strp&&r.startsWith("strp.")&&(t.strp=s),!t.dialogos&&r.startsWith("dialogos.")&&(t.dialogos=s),!t.a2a&&r.startsWith("a2a.")&&(t.a2a=s),!t.mcp&&r.startsWith("mcp.")&&(t.mcp=s),!t.git&&r.startsWith("git.")&&(t.git=s),!t.rhizome&&r.startsWith("rhizome.")&&(t.rhizome=s),Object.values(t).every(c=>c!==null))break}return t},pp=(l,t="glob",n=null)=>{try{const s={view:"events",searchPattern:l,searchMode:t,eventFilter:n};window.dispatchEvent(new CustomEvent("pluribus:navigate",{detail:s}))}catch{}},mp=async()=>{const[l]=b();if(!l.emitBus$)return;const t=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`req-${Date.now()}`;await l.emitBus$("dashboard.bus_observatory.iterate.request","request",{req_id:t,ask:"Propose improvements to Bus Observatory: densest layout, automata/flow views, and the top 10 operator metrics to show.",targets:["dashboard"],constraints:{append_only:!0,non_blocking:!0,tests_first:!0}})},gp=async()=>{const[l,t,n]=b();n.value=!0,t.value=null;try{const s=await fetch("/api/fs/tasks");if(!s.ok)throw new Error(`tasks listing HTTP ${s.status}`);const r=await s.json(),c=(Array.isArray(r?.entries)?r.entries:[]).filter(m=>m?.type==="file"&&typeof m?.name=="string"&&m.name.endsWith(".tasks.md")).map(m=>({name:String(m.name),path:String(m.path||`tasks/${m.name}`),size:Number(m.size||0)})),u=[];for(const m of c)try{const d=await fetch(`/api/fs/${encodeURIComponent(m.path)}`.replaceAll("%2F","/"));if(!d.ok)throw new Error(`HTTP ${d.status}`);const f=await d.text(),{pending:v,completed:x}=op(f);u.push({name:m.name,path:m.path,size:m.size,status:ip(f),pending:v,completed:x})}catch{u.push({name:m.name,path:m.path,size:m.size,status:"unreadable",pending:0,completed:0})}l.value=u.sort((m,d)=>m.status===d.status?m.name.localeCompare(d.name):m.status.toLowerCase().includes("active")?-1:d.status.toLowerCase().includes("active")?1:m.status.localeCompare(d.status))}catch(s){t.value=String(s)}finally{n.value=!1}},vp=async()=>{const[l,t,n]=b();n.value=!0,l.value=null;try{const s=await fetch("/api/git/status");if(!s.ok)throw new Error(`git status HTTP ${s.status}`);const r=await s.json(),o=r?.root||null,c=Array.isArray(r?.dirty)?r.dirty.length:0,u=Array.isArray(r?.nested_repos)?r.nested_repos:[];t.value={main:o,dirtyFiles:c,nested:u}}catch(s){l.value=String(s)}finally{n.value=!1}},bp=async l=>{const[t,n,s,r]=b();t.emitBus$&&await t.emitBus$("dashboard.bus_observatory.update","metric",{source:l,iso:new Date().toISOString(),tasks_total:s.value.length,tasks_error:r.value,requests:t.requests.value.length,agents:t.agents.value.length,repo_dirty:n.value.dirtyFiles})},fp=l=>{const t=y([]);Pe("comp:bus-observatory");const n=y(null),s=y(!0),r=y({main:null,dirtyFiles:0,nested:[]}),o=y(null),c=y(!0),u=N(p(up,"s_Z2yfTBcr6sA",[l])),m=N(p(cp,"s_ozCsMQvbhIE",[l])),d=N(p(dp,"s_pDWFZQqf4fA",[l])),f=p(pp,"s_KoXOBrlm90s"),v=p(mp,"s_hIOt5bffNr8",[l]),x=p(gp,"s_VxaxEBZr6xE",[t,n,s]);return D(_("s_yvfp5HjLryY",[p(bp,"s_SSf3B0TlsA4",[l,r,t,n]),p(vp,"s_0ycm7FRvIpM",[o,r,c]),x])),e("div",null,{class:"space-y-4"},[e("div",null,{class:"flex items-center justify-between gap-3"},[e("div",null,null,[e("h2",null,{class:"text-lg font-semibold"},"Bus Observatory",3,null),e("p",null,{class:"text-sm text-muted-foreground"},"Evidence â€¢ Work â€¢ Control plane â€¢ Memory â€¢ Evolution",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("button",null,{class:"text-xs px-3 py-2 rounded-lg border border-primary/30 bg-primary/15 hover:bg-primary/25 text-primary",title:"Emit a non-blocking request for other agents to propose Bus Observatory improvements",onClick$:v},"Request Collab",3,null),e("button",null,{class:"text-xs px-3 py-2 rounded-lg border border-border bg-muted/30 hover:bg-muted/50 text-muted-foreground",onClick$:x},"Refresh Tasks",3,null)],3,null)],3,null),e("div",null,{class:"grid grid-cols-2 md:grid-cols-5 gap-2"},[e("div",null,{class:"rounded-lg border border-border bg-card p-3"},[e("div",null,{class:"text-xs text-muted-foreground"},"Bus",3,null),e("div",null,{class:"text-lg font-semibold"},i($=>$.connected?"LIVE":"OFFLINE",[l],'p0.connected?"LIVE":"OFFLINE"'),3,null),e("div",null,{class:"text-[11px] text-muted-foreground"},[i($=>$.events.value.length,[l],"p0.events.value.length")," events buffered"],3,null)],3,null),e("div",null,{class:"rounded-lg border border-border bg-card p-3"},[e("div",null,{class:"text-xs text-muted-foreground"},"Agents",3,null),e("div",null,{class:"text-lg font-semibold"},i($=>$.agents.value.length,[l],"p0.agents.value.length"),3,null),e("div",null,{class:"text-[11px] text-muted-foreground"},"pluribus.check.report",3,null)],3,null),e("div",null,{class:"rounded-lg border border-border bg-card p-3"},[e("div",null,{class:"text-xs text-muted-foreground"},"Requests",3,null),e("div",null,{class:"text-lg font-semibold"},i($=>$.requests.value.length,[l],"p0.requests.value.length"),3,null),e("div",null,{class:"text-[11px] text-muted-foreground"},"STRp queue (last 100)",3,null)],3,null),e("div",null,{class:"rounded-lg border border-border bg-card p-3"},[e("div",null,{class:"text-xs text-muted-foreground"},"Providers",3,null),e("div",null,{class:"text-lg font-semibold"},[h(Object.values(l.session.value.providers||{}).filter($=>$.available),"length"),"/",h(Object.keys(l.session.value.providers||{}),"length")],1,null),e("div",null,{class:"text-[11px] text-muted-foreground"},i($=>$.session.value.activeFallback||"no active fallback",[l],'p0.session.value.activeFallback||"no active fallback"'),3,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card p-3"},[e("div",null,{class:"text-xs text-muted-foreground"},"Î©",3,null),e("div",null,{class:"text-lg font-semibold"},i($=>$.value.omega?"SEEN":"â€”",[d],'p0.value.omega?"SEEN":"â€”"'),3,null),e("div",null,{class:"text-[11px] text-muted-foreground"},i($=>$.value.omega?.iso?.slice(11,19)||"no omega.* yet",[d],'p0.value.omega?.iso?.slice(11,19)||"no omega.* yet"'),3,null)],3,null)],1,null),e("div",null,{class:"grid grid-cols-12 gap-4"},[e("div",null,{class:"col-span-12 lg:col-span-7 space-y-4"},[g(rp,null,3,"fn_0"),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"font-semibold text-sm"},"Domain Lens",3,null),e("button",null,{class:"text-xs text-muted-foreground hover:text-foreground",onClick$:_("s_8vrYyviWOSk",[f])},"Open Events â†’",3,null)],3,null),e("div",null,{class:"p-3 space-y-2"},u.value.map(([$,w])=>e("button",{title:`Filter events to ${$}.*`,onClick$:_("s_srFhar5w7hU",[$,f])},{class:"w-full text-left group"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"font-mono text-cyan-300"},$,1,null),e("span",null,{class:"text-muted-foreground"},w,1,null)],1,null),e("div",null,{class:"h-1 mt-1 rounded bg-muted/40 overflow-hidden"},e("div",{style:{width:`${Math.min(100,Math.round(w/(u.value[0]?.[1]||1)*100))}%`}},{class:"h-1 bg-cyan-500/60"},null,3,null),1,null)],0,$)),1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"font-semibold text-sm"},"Actor Lens",3,null),e("div",null,{class:"text-xs text-muted-foreground"},"click â†’ filter",3,null)],3,null),e("div",null,{class:"p-3 space-y-2"},m.value.map(([$,w])=>e("button",{title:`Filter events to actor=${$}`,onClick$:_("s_yyVWO5nRqPI",[$,f])},{class:"w-full text-left group"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"font-mono text-purple-300 truncate"},$,1,null),e("span",null,{class:"text-muted-foreground"},w,1,null)],1,null),e("div",null,{class:"h-1 mt-1 rounded bg-muted/40 overflow-hidden"},e("div",{style:{width:`${Math.min(100,Math.round(w/(m.value[0]?.[1]||1)*100))}%`}},{class:"h-1 bg-purple-500/60"},null,3,null),1,null)],0,$)),1,null)],1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"font-semibold text-sm"},"Latest Cross-Lane Signals",3,null),e("div",null,{class:"text-xs text-muted-foreground"},"Ï‰ / providers / hexis / strp / dialogos / a2a / mcp / git",3,null)],3,null),e("div",null,{class:"p-3 grid grid-cols-1 md:grid-cols-2 gap-2"},Object.entries(d.value).map(([$,w])=>e("div",null,{class:"rounded border border-border/60 bg-muted/20 p-2"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"font-mono text-muted-foreground"},$,1,null),e("span",null,{class:"font-mono text-muted-foreground/70"},w?.iso?.slice(11,19)||"â€”",1,null)],1,null),e("div",null,{class:"text-[11px] font-mono text-cyan-200 truncate"},w?.topic||"none",1,null),e("div",null,{class:"text-[11px] text-muted-foreground truncate"},["@",w?.actor||"â€”"],1,null)],1,$)),1,null)],1,null)],1,null),e("div",null,{class:"col-span-12 lg:col-span-5 space-y-4"},[e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"font-semibold text-sm"},"Repo Topology",3,null),e("div",null,{class:"text-xs text-muted-foreground"},"monorepo + nested repos",3,null)],3,null),e("div",null,{class:"p-3 space-y-2"},c.value?e("div",null,{class:"text-sm text-muted-foreground"},"Loadingâ€¦",3,"fn_1"):o.value?e("div",null,{class:"text-sm text-red-400"},i($=>$.value,[o],"p0.value"),3,"fn_2"):g(ue,{children:[e("div",null,{class:"text-xs text-muted-foreground"},["Root: ",i($=>$.value.main||"unknown",[r],'p0.value.main||"unknown"')],3,null),e("div",null,{class:"text-xs"},e("span",null,{class:"px-2 py-0.5 rounded bg-yellow-500/15 text-yellow-300"},["dirty: ",i($=>$.value.dirtyFiles,[r],"p0.value.dirtyFiles")],3,null),3,null),e("div",null,{class:"text-xs text-muted-foreground"},"Nested repos:",3,null),e("div",null,{class:"text-[11px] space-y-1"},[r.value.nested.length===0&&e("div",null,{class:"text-muted-foreground"},"none",3,"fn_3"),r.value.nested.map($=>e("div",null,{class:"font-mono text-cyan-200 truncate"},$,1,$))],1,null)]},1,"fn_4"),1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"font-semibold text-sm"},"Work Snapshot",3,null),e("div",null,{class:"text-xs text-muted-foreground"},"present (STRp) + agent health",3,null)],3,null),e("div",null,{class:"p-3 space-y-3"},[e("div",null,null,[e("div",null,{class:"text-xs text-muted-foreground mb-2"},"Latest STRp requests",3,null),e("div",null,{class:"space-y-1"},[l.requests.value.slice(0,8).map($=>e("button",{onClick$:_("s_lb0gKD92ZSE",[f,$])},{class:"w-full text-left rounded border border-border/50 bg-muted/10 hover:bg-muted/30 px-2 py-1",title:"Open correlated events (best-effort)"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"font-mono text-cyan-300"},($.id||"").slice(0,8),1,null),e("span",{class:`text-[10px] px-1.5 py-0.5 rounded ${$.status==="completed"?"bg-green-500/20 text-green-400":$.status==="pending"?"bg-yellow-500/20 text-yellow-300":$.status==="failed"?"bg-red-500/20 text-red-300":"bg-muted text-muted-foreground"}`},null,h($,"status"),1,null)],1,null),e("div",null,{class:"text-[11px] text-muted-foreground truncate"},$.goal||"-",1,null)],0,$.id)),l.requests.value.length===0&&e("div",null,{class:"text-xs text-muted-foreground"},"No STRp requests seen yet.",3,"fn_5")],1,null)],1,null),e("div",null,null,[e("div",null,{class:"text-xs text-muted-foreground mb-2"},"Agent status",3,null),e("div",null,{class:"space-y-1"},[l.agents.value.slice(0,8).map($=>e("button",{onClick$:_("s_1KoTZYhhY0I",[$,f])},{class:"w-full text-left rounded border border-border/50 bg-muted/10 hover:bg-muted/30 px-2 py-1",title:"Filter events by actor"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"font-mono text-purple-300 truncate"},h($,"actor"),1,null),e("span",null,{class:"text-[10px] text-muted-foreground"},$.last_seen_iso?.slice(11,19)||"â€”",1,null)],1,null),e("div",null,{class:"flex items-center justify-between text-[11px] text-muted-foreground"},[e("span",null,{class:"truncate"},$.current_task||"â€”",1,null),e("span",null,{class:"font-mono"},["q:",h($,"queue_depth")],1,null)],1,null)],0,$.actor)),l.agents.value.length===0&&e("div",null,{class:"text-xs text-muted-foreground"},"No agent reports received yet.",3,"fn_6")],1,null)],1,null)],1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"font-semibold text-sm"},"Tasks (Future Work)",3,null),e("div",null,{class:"text-xs text-muted-foreground"},"/tasks/*.tasks.md",3,null)],3,null),e("div",null,{class:"p-3"},s.value?e("div",null,{class:"text-sm text-muted-foreground"},"Loading tasksâ€¦",3,"fn_7"):n.value?e("div",null,{class:"text-sm text-red-400"},i($=>$.value,[n],"p0.value"),3,"fn_8"):e("div",null,{class:"space-y-2"},[t.value.map($=>e("div",null,{class:"rounded border border-border/50 bg-muted/10 p-2"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"font-mono text-cyan-200 truncate"},h($,"name"),1,null),e("span",null,{class:"text-muted-foreground"},h($,"status"),1,null)],1,null),e("div",null,{class:"flex items-center gap-2 text-[11px] mt-1"},[e("span",null,{class:"px-2 py-0.5 rounded bg-yellow-500/15 text-yellow-300"},["todo:",h($,"pending")],1,null),e("span",null,{class:"px-2 py-0.5 rounded bg-green-500/15 text-green-300"},["done:",h($,"completed")],1,null),e("a",{href:`/api/fs/${$.path}`},{class:"ml-auto text-muted-foreground hover:text-foreground underline decoration-white/10",target:"_blank",rel:"noreferrer"},"open",3,null)],1,null)],1,$.path)),t.value.length===0&&e("div",null,{class:"text-sm text-muted-foreground"},"No task files found.",3,"fn_9")],1,null),1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border"},[e("div",null,{class:"font-semibold text-sm"},"Providers (Control Plane)",3,null),e("div",null,{class:"text-xs text-muted-foreground"},"availability + block reasons",3,null)],3,null),e("div",null,{class:"p-3 space-y-2"},Object.entries(l.session.value.providers||{}).map(([$,w])=>e("div",null,{class:"rounded border border-border/50 bg-muted/10 p-2"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"font-mono"},$,1,null),e("span",{class:`text-[10px] px-1.5 py-0.5 rounded ${w.available?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-300"}`},null,w.available?"available":"blocked",1,null)],1,null),e("div",null,{class:"text-[11px] text-muted-foreground truncate"},w.model||"â€”",1,null),w.error&&e("div",null,{class:"text-[11px] text-red-300/80 truncate"},h(w,"error"),1,"fn_10")],1,$)),1,null)],1,null)],1,null)],1,null)],1,"fn_11")},xp=E(p(fp,"s_tnGPtawgXAg"));function kn(l){if(!l)return null;const t=Date.parse(l);return Number.isFinite(t)?t:null}function Bt(l){const t=l.indexOf(".");return t===-1?l:l.slice(0,t)}function Sn(l){return l.startsWith("a2a.")}function hp(l,t){const n=new Date(l).toISOString().slice(11,19),s=new Date(t).toISOString().slice(11,19);return`${n}-${s}Z`}const yp=()=>{const[l]=b(),t={all:"a2a",a2a:"error",error:"warn",warn:"metric",metric:"artifact",artifact:"all"};l.value=t[l.value]},_p=()=>{const[l]=b();return l.events.slice(-(l.maxEvents??2500))},wp=()=>{const[l,t,n]=b();let s=n.value;switch(t.value){case"a2a":s=s.filter(r=>Sn(r.topic));break;case"error":s=s.filter(r=>r.level==="error");break;case"warn":s=s.filter(r=>r.level==="warn");break;case"metric":s=s.filter(r=>r.kind==="metric");break;case"artifact":s=s.filter(r=>r.kind==="artifact");break}return l.value&&(s=s.filter(r=>r.actor===l.value)),s},kp=()=>{const[l]=b(),t=l.value,n=Date.now(),s=n-3e5,r=n-6e4;let o=0,c=0,u=0,m=0,d=0;const f=new Map,v=new Map;for(const $ of t){const w=kn($.iso)??$.ts;Number.isFinite(w)&&(w>=s&&(o++,$.level==="error"&&u++,$.level==="warn"&&m++,Sn($.topic)&&d++),w>=r&&c++,f.set(Bt($.topic),(f.get(Bt($.topic))||0)+1),v.set($.actor,(v.get($.actor)||0)+1))}const x=Array.from(f.entries()).sort(($,w)=>w[1]-$[1]).slice(0,10),S=Array.from(v.entries()).sort(($,w)=>w[1]-$[1]).slice(0,8);return{lastIso:t[t.length-1]?.iso||null,total:t.length,eps60:c/60,epm60:c,total5m:o,errors5m:u,warns5m:m,a2a5m:d,uniqueDomains:f.size,uniqueActors:v.size,topDomains:x,topActors:S}},Sp=()=>{const[l]=b(),t=new Set(["claude","codex","gemini","qwen"]);for(const[n]of l.value.topActors)n&&t.add(n);return Array.from(t)},Cp=()=>{const[l]=b();return Object.fromEntries(l.value.topActors)},$p=(l,t="glob")=>{try{window.dispatchEvent(new CustomEvent("pluribus:navigate",{detail:{view:"events",searchPattern:l,searchMode:t}}))}catch{}},Ip=(l,t)=>{try{if(window.dispatchEvent(new CustomEvent("pluribus:navigate",{detail:{view:"persistence",focus:l?`bus_event:${l}`:void 0,filter:t?{topic:t}:void 0}})),typeof window<"u"){const n=new URLSearchParams;l&&n.set("focus",l),t&&n.set("topic",t);const s=`/persistence${n.toString()?"?"+n.toString():""}`;window.history.pushState({},"",s),window.dispatchEvent(new PopStateEvent("popstate"))}}catch{}},Tp=l=>{const[t,n,s,r]=b(),o=n.value,c=t.value;if(!o||c.buckets===0)return;const u=o.getBoundingClientRect(),m=l.clientX-u.left,d=Math.min(c.buckets-1,Math.max(0,Math.floor(m/u.width*c.buckets))),f=c.now-c.windowMs+d*c.bucketMs,v=f+c.bucketMs,x=s.value.filter(S=>{const M=kn(S.iso)??S.ts;return Number.isFinite(M)&&M>=f&&M<v});if(r.value&&r.value.index===d){r.value=null;return}r.value={index:d,startMs:f,endMs:v,events:x.slice(-50)}},Ep=()=>{const[l]=b();l.value=null},Ap=()=>{const[l,t,n]=b();n.value=l?null:t},Mp=()=>{const[l]=b();l.value=null},Op=async l=>{const[t,n]=b();l.stopPropagation(),await n(t.id,t.topic)},Pp=()=>{const[l,t]=b();return t(`${l}.`,"topic")},Lp=()=>{const[l,t]=b();return t(l,"actor")},Dp=async l=>{const[t,n]=b();l.stopPropagation(),await n(t.id,t.topic)},Rp=()=>{const[l,t]=b();l(t.value?.id,t.value?.topic),t.value=null},Np=()=>{const[l]=b();l.value=null},jp=l=>{W();const t=y("all"),n=y(),s=y(0),r=y(""),o=y(null),c=y(null),u=y({buckets:0,bucketMs:0,windowMs:0,now:0}),m=y(null),d=p(yp,"s_N0RSplMEiag",[t]),f=N(p(_p,"s_PHrKtw0i00U",[l])),v=N(p(wp,"s_OqnnBABuSS0",[c,t,f])),x=N(p(kp,"s_riSoGX1v7vM",[f])),S=N(p(Sp,"s_wLuFYo0MsJA",[x])),M=N(p(Cp,"s_9PArFumuF2o",[x])),$=p($p,"s_6bvac6kpa24"),w=p(Ip,"s_w5GTZdU43Rc"),k=p(Tp,"s_YB1CTgHRL5M",[u,n,v,m]);D(_("s_pqQcJlMMeZE",[c,u,n,t,v,s,r,f]));const I=t.value==="all"?"glass-chip":t.value==="a2a"?"glass-chip text-orange-400":t.value==="error"?"glass-status-critical":t.value==="warn"?"glass-status-warning":t.value==="metric"?"glass-status-healthy":"glass-chip text-purple-400";return e("div",null,{class:i(T=>`glass-surface-elevated glass-animate-enter flex flex-col ${T.heightClass??"h-[520px]"} overflow-hidden`,[l],'`glass-surface-elevated glass-animate-enter flex flex-col ${p0.heightClass??"h-[520px]"} overflow-hidden`')},[e("div",null,{class:"px-4 py-3 border-b border-glass-border-subtle flex items-center justify-between flex-shrink-0 glass-surface-subtle"},[e("div",null,{class:"flex items-center gap-2 min-w-0"},[e("h3",null,{class:"text-sm font-semibold text-glass-text-muted"},i(T=>T.title??"BUS PULSE",[l],'p0.title??"BUS PULSE"'),3,null),e("span",null,{class:"text-[10px] px-2 py-0.5 rounded glass-chip text-green-400 shadow-[0_0_6px_rgba(74,222,128,0.3)]"},i(T=>T.value.total,[x],"p0.value.total"),3,null),g(vt,{get timestamp(){return x.value.lastIso},source:"bus",ttlFresh:10,ttlRecent:60,ttlStale:300,[a]:{timestamp:i(T=>T.value.lastIso,[x],"p0.value.lastIso"),source:a,ttlFresh:a,ttlRecent:a,ttlStale:a}},3,"xY_0")],1,null),g(L,{onClick$:d,variant:"tonal",class:`text-[11px] h-7 px-2.5 py-1 rounded border ${I}`,title:"Cycle filter (all â†’ a2a â†’ error â†’ warn â†’ metric â†’ artifact)",children:i(T=>T.value,[t],"p0.value"),[a]:{onClick$:a,variant:a,title:a}},3,"xY_1")],1,null),e("div",null,{class:"px-4 py-3 border-b border-[var(--glass-border-subtle)] flex-shrink-0"},[e("canvas",{ref:n},{class:"w-full h-[80px] rounded-md bg-black/30 border border-[var(--glass-border)] cursor-pointer",title:"Click a bucket to inspect events",onClick$:k},null,3,null),e("div",null,{class:"mt-3 grid grid-cols-2 md:grid-cols-6 gap-2 text-[11px] text-muted-foreground"},[e("div",null,{class:"rounded-md border border-[var(--glass-border)] bg-muted/20 px-2.5 py-1.5"},[e("span",null,{class:"mono"},"epm60",3,null)," ",e("span",null,{class:"text-cyan-300"},Math.round(x.value.epm60),1,null)],1,null),e("div",null,{class:"rounded-md border border-[var(--glass-border)] bg-muted/20 px-2.5 py-1.5"},[e("span",null,{class:"mono"},"eps",3,null)," ",e("span",null,{class:"text-cyan-300"},x.value.eps60.toFixed(2),1,null)],1,null),e("div",null,{class:"rounded-md border border-[var(--glass-border)] bg-muted/20 px-2.5 py-1.5"},[e("span",null,{class:"mono"},"5m",3,null)," ",e("span",null,{class:"text-cyan-300"},i(T=>T.value.total5m,[x],"p0.value.total5m"),3,null)],3,null),e("div",null,{class:"rounded-md border border-[var(--glass-border)] bg-muted/20 px-2.5 py-1.5"},[e("span",null,{class:"mono"},"err5m",3,null)," ",e("span",null,{class:"text-red-300"},i(T=>T.value.errors5m,[x],"p0.value.errors5m"),3,null)],3,null),e("div",null,{class:"rounded-md border border-[var(--glass-border)] bg-muted/20 px-2.5 py-1.5"},[e("span",null,{class:"mono"},"a2a",3,null)," ",e("span",null,{class:"text-orange-300"},i(T=>T.value.a2a5m,[x],"p0.value.a2a5m"),3,null)],3,null),e("div",null,{class:"rounded-md border border-[var(--glass-border)] bg-muted/20 px-2.5 py-1.5"},[e("span",null,{class:"mono"},"dom",3,null)," ",e("span",null,{class:"text-purple-300"},i(T=>T.value.uniqueDomains,[x],"p0.value.uniqueDomains"),3,null)],3,null),e("div",null,{class:"rounded-md border border-[var(--glass-border)] bg-muted/20 px-2.5 py-1.5"},[e("span",null,{class:"mono"},"actors",3,null)," ",e("span",null,{class:"text-purple-300"},i(T=>T.value.uniqueActors,[x],"p0.value.uniqueActors"),3,null)],3,null)],1,null),e("div",null,{class:"mt-3 flex flex-wrap gap-1 text-[11px]"},[g(L,{get variant(){return c.value?"text":"primary"},class:"px-2.5 py-1 h-7",onClick$:p(Ep,"s_tCB7GXS003w",[c]),title:"Clear actor filter",children:"all",[a]:{variant:i(T=>T.value?"text":"primary",[c],'!p0.value?"primary":"text"'),class:a,onClick$:a,title:a}},3,"xY_2"),S.value.map(T=>{const z=M.value[T],O=c.value===T;return g(L,{variant:O?"primary":"text",class:"px-2.5 py-1 h-7",onClick$:p(Ap,"s_1xFmMhKTLAM",[O,T,c]),title:z?`Events: ${z}`:"Filter by actor",children:["@",T,z?`:${z}`:""],[a]:{class:a}},1,T)})],1,null),m.value&&e("div",null,{class:"mt-3 rounded-md border border-[var(--glass-border)] bg-muted/30 p-3 text-[11px]"},[e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-muted-foreground"},["bucket ",i(T=>T.value.index+1,[m],"p0.value.index+1")," - ",hp(m.value.startMs,m.value.endMs)," - ",i(T=>T.value.events.length,[m],"p0.value.events.length")," events"],1,null),g(L,{variant:"tonal",class:"text-[10px] h-6 px-2.5 py-1",onClick$:p(Mp,"s_VAzAxHefsK4",[m]),children:"clear",[a]:{variant:a,class:a,onClick$:a}},3,"xY_3")],1,null),e("div",null,{class:"mt-2 space-y-1"},m.value.events.length===0?e("div",null,{class:"text-muted-foreground/70"},"No events in bucket",3,"xY_4"):m.value.events.slice(-8).reverse().map(T=>e("div",null,{class:"flex items-center justify-between gap-2"},[e("div",null,{class:"truncate text-muted-foreground"},[h(T,"topic")," ",e("span",null,{class:"text-muted-foreground/60"},["(@",h(T,"actor"),")"],1,null)],1,null),g(L,{variant:"tonal",class:"text-[9px] h-6 px-2.5 py-1 bg-orange-500/20 text-orange-300 hover:bg-orange-500/30",onClick$:p(Op,"s_9sAS07BzEYg",[T,w]),children:"                      graph",[a]:{variant:a,class:a}},3,"xY_5")],1,`${T.id||T.ts}-${T.topic}`)),1,null)],1,"xY_6")],1,null),e("div",null,{class:"px-4 py-3 border-b border-[var(--glass-border-subtle)] flex-shrink-0"},[e("div",null,{class:"text-[11px] text-muted-foreground mb-2"},"TOP DOMAINS",3,null),e("div",null,{class:"flex flex-wrap gap-1"},x.value.topDomains.map(([T,z])=>g(L,{variant:"tonal",class:"text-[10px] h-6 px-2 py-1 rounded bg-cyan-500/10 text-cyan-300 border border-cyan-500/20 hover:bg-cyan-500/20",onClick$:p(Pp,"s_tlrxXWT0bRQ",[T,$]),title:"Jump to Events view",children:[T,":",z],[a]:{variant:a,class:a,title:a}},1,T)),1,null),e("div",null,{class:"text-[11px] text-muted-foreground mt-3 mb-2"},"TOP ACTORS",3,null),e("div",null,{class:"flex flex-wrap gap-1"},x.value.topActors.map(([T,z])=>g(L,{variant:"tonal",class:"text-[10px] h-6 px-2 py-1 rounded bg-purple-500/10 text-purple-300 border border-purple-500/20 hover:bg-purple-500/20",onClick$:p(Lp,"s_tOKBg5LiUk8",[T,$]),title:"Filter by actor in Events view",children:["@",T,":",z],[a]:{variant:a,class:a,title:a}},1,T)),1,null)],1,null),e("div",null,{class:"flex-1 min-h-0 overflow-auto p-3 font-mono text-[11px] leading-snug space-y-1.5"},v.value.slice(-60).reverse().map((T,z)=>{const O=T.topic.split("."),J=O[0],ne=O.slice(1).join("."),Z=T.level==="error"?"glass-status-error border-l-2":T.level==="warn"?"glass-status-warn border-l-2":T.kind==="artifact"?"glass-status-ok border-l-2 opacity-70":"bg-muted/20 text-muted-foreground";return e("div",{class:`p-2 rounded-md transition-colors hover:bg-muted/30 ${Z} group cursor-pointer relative overflow-hidden`,onClick$:_("s_w3xLVOkrmAg",[T,o])},null,[e("md-ripple",null,null,null,3,null),e("div",null,{class:"flex items-center gap-1"},[e("span",null,{class:"text-muted-foreground/60 flex-shrink-0"},T.iso?.slice(11,19),1,null),e("span",null,{class:"text-cyan-300 font-semibold"},J,1,null),ne&&e("span",null,{class:"text-primary/70"},[".",ne],1,"xY_7"),g(L,{variant:"text",class:"ml-auto text-[9px] h-5 px-1.5 py-0.5 rounded bg-orange-500/0 text-orange-400/0 group-hover:bg-orange-500/20 group-hover:text-orange-300 transition-all",onClick$:p(Dp,"s_gX0JVZsKkqI",[T,w]),title:"View in FalkorDB Graph",children:"â†’Graph",[a]:{variant:a,class:a,title:a}},3,"xY_8")],1,null),e("div",null,{class:"flex items-center justify-between mt-0.5"},[e("span",null,{class:"text-muted-foreground/60"},["@",h(T,"actor")],1,null),e("span",null,{class:"text-muted-foreground/50"},h(T,"kind"),1,null)],1,null)],0,z)}),1,null),o.value&&e("div",null,{class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick$:_("s_d4QbrxN0Hf0",[o])},e("div",null,{class:"glass-surface-overlay bg-card/95 border border-[var(--glass-border)] rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick$:_("s_k0xsENTCtGg")},[e("div",null,{class:"p-4 border-b border-[var(--glass-border)] flex items-center justify-between"},[e("div",null,null,[e("h3",null,{class:"text-sm font-semibold text-foreground"},"Event Detail",3,null),e("p",null,{class:"text-xs text-muted-foreground mt-0.5"},[i(T=>T.value.topic,[o],"p0.value.topic")," @ ",i(T=>T.value.iso,[o],"p0.value.iso")],3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[g(L,{variant:"tonal",class:"text-[11px] h-7 px-2.5 py-1 rounded bg-orange-500/20 text-orange-300 hover:bg-orange-500/30",onClick$:p(Rp,"s_NixmZQfPyOE",[w,o]),children:"View in Graph",[a]:{variant:a,class:a,onClick$:a}},3,"xY_9"),g(L,{variant:"icon",icon:"close",class:"text-muted-foreground hover:text-foreground",onClick$:p(Np,"s_CPIjNbYt0yM",[o]),[a]:{variant:a,icon:a,class:a,onClick$:a}},3,"xY_10")],1,null)],1,null),e("div",null,{class:"p-4 overflow-auto flex-1"},[e("div",null,{class:"grid grid-cols-2 gap-3 text-xs mb-4"},[e("div",null,{class:"p-2 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"ID:",3,null),e("span",null,{class:"ml-2 font-mono text-cyan-400"},i(T=>T.value.id,[o],"p0.value.id"),3,null)],3,null),e("div",null,{class:"p-2 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Actor:",3,null),e("span",null,{class:"ml-2 font-mono text-purple-400"},["@",i(T=>T.value.actor,[o],"p0.value.actor")],3,null)],3,null),e("div",null,{class:"p-2 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Kind:",3,null),e("span",null,{class:"ml-2 font-mono"},i(T=>T.value.kind,[o],"p0.value.kind"),3,null)],3,null),e("div",null,{class:"p-2 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Level:",3,null),e("span",null,{class:i(T=>`ml-2 font-mono ${T.value.level==="error"?"text-red-400":T.value.level==="warn"?"text-yellow-400":"text-green-400"}`,[o],'`ml-2 font-mono ${p0.value.level==="error"?"text-red-400":p0.value.level==="warn"?"text-yellow-400":"text-green-400"}`')},i(T=>T.value.level,[o],"p0.value.level"),3,null)],3,null)],3,null),e("div",null,{class:"text-[10px] text-muted-foreground mb-2"},"FULL JSON",3,null),e("pre",null,{class:"p-3 rounded bg-black/30 text-[10px] font-mono text-foreground/80 overflow-x-auto whitespace-pre-wrap break-all"},JSON.stringify(o.value,null,2),1,null)],1,null)],1,null),1,"xY_11")],1,"xY_12")},zp=E(p(jp,"s_LOlbLNAZ8Jk")),Bp=[{version:"v1",name:"Minimal Check-in",features:["bus snapshot"],mandates:[],busTopics:["ckin.report"]},{version:"v2",name:"Drift Guards",features:["BEAM/GOLDEN counts"],mandates:[],busTopics:["ckin.report"]},{version:"v3",name:"Enhanced Dashboard",features:["7 sections"],mandates:[],busTopics:["ckin.report"]},{version:"v4",name:"ITERATE",features:["coordination kick"],mandates:[],busTopics:["infer_sync.request"]},{version:"v5",name:"Silent Monitoring",features:["staleness indicators"],mandates:[],busTopics:["ckin.report"]},{version:"v6",name:"Shared Ledger",features:["compliance snapshot"],mandates:[],busTopics:["ckin.report"]},{version:"v7",name:"Gap Analysis",features:["aleatoric/epistemic detection"],mandates:[],busTopics:["ckin.report"]},{version:"v8",name:"OITERATE",features:["omega loop","BÃ¼chi automaton"],mandates:[],busTopics:["oiterate.tick"]},{version:"v9",name:"DKIN Rename",features:["dashboard kernel packaging"],mandates:[],busTopics:["ckin.report"]},{version:"v10",name:"Membrane",features:["PBFLUSH","MABSWARM/MBAD"],mandates:[],busTopics:["operator.pbflush.request","mabswarm.*"]},{version:"v11",name:"MCP Interop",features:["official SDK observability"],mandates:[],busTopics:["mcp.official_sdk.*"]},{version:"v12",name:"PAIP",features:["parallel agent filesystem isolation"],mandates:["clone isolation"],busTopics:["paip.clone.*"]},{version:"v12.1",name:"Summary Frame",features:["TTL clarifications"],mandates:[],busTopics:["paip.*"]},{version:"v13",name:"PBDEEP",features:["forensics index"],mandates:[],busTopics:["operator.pbdeep.*"]},{version:"v15",name:"Safe Context",features:["log hygiene"],mandates:["context guards"],busTopics:["operator.pbhygiene.*"]},{version:"v16",name:"PBLOCK",features:["milestone freeze"],mandates:["feature lock"],busTopics:["operator.pblock.*"]},{version:"v17",name:"System Hygiene",features:["bus rotation","context window safety"],mandates:["pre-PBLOCK audit"],busTopics:["operator.pbhygiene.*"]},{version:"v18",name:"Resilience",features:["Agentic State Graph","lossless handoff"],mandates:["task lifecycle events"],busTopics:["agent.*.task"]},{version:"v19",name:"Evolution",features:["Percolation Loop","CMP metric","HGT"],mandates:["evo-logging"],busTopics:["evolution.*","hgt.*","cmp.*"]}],Up={PENDING:"#6b7280",RUNNING:"#3b82f6",PAUSED:"#f59e0b",COMPLETED:"#10b981",FAILED:"#ef4444",BLOCKED:"#dc2626"},Fp={protocolVersion:"v19",evoPhase:"idle",evoUnits:[],cmpMetrics:{utility:0,robustness:0,complexity:0,cost:0,score:0},agents:[],taskGraph:[],pblock:{active:!1,exitCriteria:{allTestsPass:!1,pushedToRemotes:!1,pushedToGithub:!1},violations:0},paipClones:[],busHealth:{sizeMb:0,eventCount:0,oldestEventAge:0,velocity:0,needsRotation:!1},compliance:{version:"v19",compliant:!0,violations:[],recommendations:[],lastChecked:0},recentEvents:[],lastUpdated:0},qp=async()=>{const[l]=b();l.value=!0,await fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:"cmd.reconcile.scan",kind:"request",actor:"dashboard-ui",data:{}})}),setTimeout(()=>l.value=!1,2e3)},Gp=()=>{const l=y({orphans:0,patches:0,collisions:0,archives:0,lastScan:"Pending..."}),t=y(!1);D(_("s_kYJRguTAXTg",[t,l]));const n=p(qp,"s_gCI90h32Owg",[t]);return e("div",null,{class:"p-4 border border-border rounded-lg bg-black/20 backdrop-blur-sm relative overflow-hidden"},[e("div",null,{class:"absolute top-0 right-0 px-2 py-0.5 bg-purple-900/50 text-purple-200 text-[10px] font-mono border-l border-b border-purple-500/30 rounded-bl-lg"},"DKIN v21",3,null),e("h3",null,{class:"text-sm font-semibold text-purple-400 mb-3 flex items-center gap-2"},[e("span",null,{class:"inline-block w-2 h-2 rounded-full bg-purple-500 animate-pulse"},null,3,null),"Lossless Reconciliation"],3,null),e("div",null,{class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},[e("div",null,{class:"text-center p-2 rounded bg-white/5 border border-[var(--glass-border-subtle)]"},[e("div",null,{class:"text-xs text-muted-foreground uppercase tracking-wider"},"Orphans",3,null),e("div",null,{class:i(s=>`text-xl font-mono ${s.value.orphans>0?"text-amber-400":"text-gray-400"}`,[l],'`text-xl font-mono ${p0.value.orphans>0?"text-amber-400":"text-gray-400"}`')},i(s=>s.value.orphans,[l],"p0.value.orphans"),3,null)],3,null),e("div",null,{class:"text-center p-2 rounded bg-white/5 border border-[var(--glass-border-subtle)]"},[e("div",null,{class:"text-xs text-muted-foreground uppercase tracking-wider"},"Patches",3,null),e("div",null,{class:"text-xl font-mono text-cyan-400"},i(s=>s.value.patches,[l],"p0.value.patches"),3,null)],3,null),e("div",null,{class:"text-center p-2 rounded bg-white/5 border border-[var(--glass-border-subtle)]"},[e("div",null,{class:"text-xs text-muted-foreground uppercase tracking-wider"},"Collisions",3,null),e("div",null,{class:i(s=>`text-xl font-mono ${s.value.collisions>0?"text-red-500":"text-green-400"}`,[l],'`text-xl font-mono ${p0.value.collisions>0?"text-red-500":"text-green-400"}`')},i(s=>s.value.collisions,[l],"p0.value.collisions"),3,null)],3,null),e("div",null,{class:"text-center p-2 rounded bg-white/5 border border-[var(--glass-border-subtle)]"},[e("div",null,{class:"text-xs text-muted-foreground uppercase tracking-wider"},"Archives",3,null),e("div",null,{class:"text-xl font-mono text-gray-400"},i(s=>s.value.archives,[l],"p0.value.archives"),3,null)],3,null)],3,null),e("div",null,{class:"flex items-center justify-between"},[e("div",null,{class:"text-[10px] text-muted-foreground font-mono"},["Last Scan: ",i(s=>s.value.lastScan,[l],"p0.value.lastScan")],3,null),e("button",{class:`
            text-xs px-3 py-1.5 rounded transition-all flex items-center gap-2
            ${t.value?"bg-purple-500/20 text-purple-300 cursor-wait":"bg-purple-600 hover:bg-purple-500 text-white shadow-[0_0_10px_rgba(168,85,247,0.4)]"}
          `},{disabled:i(s=>s.value,[t],"p0.value"),onClick$:n},i(s=>s.value?"Scanning /tmp...":"Scan & Recover",[t],'p0.value?"Scanning /tmp...":"Scan & Recover"'),3,null)],1,null),l.value.orphans>0&&e("div",null,{class:"mt-3 p-2 bg-amber-900/20 border border-amber-500/30 rounded text-xs text-amber-200 flex items-center gap-2"},[e("span",null,{class:"text-lg"},"âš ï¸",3,null),e("div",null,null,[e("strong",null,null,"Uncommitted Work Detected:",3,null)," ",i(s=>s.value.orphans,[l],"p0.value.orphans")," session(s) recovered.",e("div",null,{class:"opacity-70 text-[10px]"},"codex-1766356598 (1612 lines preserved)",3,null)],3,null)],3,"C5_0")],1,"C5_1")},Vp=E(p(Gp,"s_sS8VAmNGPzk")),Hp=()=>{const[l]=b();if(!l.values||l.values.length===0)return"";const t=Math.max(...l.values,1),n=Math.min(...l.values,0),s=t-n||1,r=(l.width??120)/(l.values.length-1||1);return l.values.map((o,c)=>{const u=c*r,m=(l.height??24)-(o-n)/s*(l.height??24);return`${c===0?"M":"L"} ${u} ${m}`}).join(" ")},Wp=l=>{const t=N(p(Hp,"s_l1mInSrR0o0",[l]));return e("svg",null,{width:i(n=>n.width??120,[l],"p0.width??120"),height:i(n=>n.height??24,[l],"p0.height??24"),class:"inline-block"},e("path",null,{d:i(n=>n.value,[t],"p0.value"),fill:"none",stroke:i(n=>n.color??"#3b82f6",[l],'p0.color??"#3b82f6"'),"stroke-width":"1.5"},null,3,null),3,"3H_0")},Yp=E(p(Wp,"s_CUYMAgdG9sk")),Jp=l=>e("span",{class:["px-2 py-0.5 rounded text-xs font-mono",l.active?"bg-emerald-900/50 text-emerald-300 border border-emerald-600":"bg-zinc-800 text-zinc-400"].join(" ")},null,i(t=>t.version,[l],"p0.version"),3,"3H_1"),Cn=E(p(Jp,"s_y7KjklFrwt0")),Kp=l=>{const t=["percolate","assimilate","mutate","test","promote"],n={percolate:"Ingest",assimilate:"Map",mutate:"Generate",test:"Verify",promote:"Transfer",idle:"Idle"};return e("div",null,{class:"flex items-center gap-1"},t.map(s=>e("div",{class:["px-2 py-1 text-xs rounded transition-all",s===l.phase?"bg-blue-600 text-white font-semibold scale-105":"bg-zinc-800 text-zinc-500"].join(" "),title:n[s]},null,n[s],1,s)),1,"3H_2")},Qp=E(p(Kp,"s_0s8Tv05gUK8")),Xp=l=>{const t=l.metrics.score||0,n=Math.min(100,Math.max(0,t*100)),s=t>.7?"#10b981":t>.4?"#f59e0b":"#ef4444";return e("div",null,{class:"flex flex-col gap-1"},[e("div",null,{class:"flex justify-between text-xs text-zinc-400"},[e("span",null,null,"CMP Score",3,null),e("span",{style:{color:s}},null,[(t*100).toFixed(1),"%"],1,null)],1,null),e("div",null,{class:"h-2 bg-zinc-800 rounded-full overflow-hidden"},e("div",{style:{width:`${n}%`,backgroundColor:s}},{class:"h-full rounded-full transition-all duration-500"},null,3,null),1,null),e("div",null,{class:"grid grid-cols-4 gap-1 text-xs text-zinc-500 mt-1"},[e("div",null,null,["U:",(l.metrics.utility*100).toFixed(0),"%"],1,null),e("div",null,null,["R:",(l.metrics.robustness*100).toFixed(0),"%"],1,null),e("div",null,null,["C:",l.metrics.complexity.toFixed(1)],1,null),e("div",null,null,["$:",l.metrics.cost.toFixed(2)],1,null)],1,null)],1,"3H_3")},Zp=E(p(Xp,"s_yvN59nbwjKw")),e0=l=>e("div",null,{class:i(t=>["p-3 rounded border",t.state.active?"bg-amber-950/30 border-amber-600":"bg-zinc-900/50 border-zinc-700"].join(" "),[l],'["p-3 rounded border",p0.state.active?"bg-amber-950/30 border-amber-600":"bg-zinc-900/50 border-zinc-700"].join(" ")')},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-sm font-semibold"},i(t=>t.state.active?"ðŸ”’ PBLOCK ACTIVE":"ðŸ”“ Normal Development",[l],'p0.state.active?"ðŸ”’ PBLOCK ACTIVE":"ðŸ”“ Normal Development"'),3,null),l.state.milestone&&e("span",null,{class:"text-xs text-zinc-400"},i(t=>t.state.milestone,[l],"p0.state.milestone"),3,"3H_4")],1,null),l.state.active&&e("div",null,{class:"grid grid-cols-3 gap-2 text-xs"},[e("div",null,{class:i(t=>t.state.exitCriteria.allTestsPass?"text-emerald-400":"text-zinc-500",[l],'p0.state.exitCriteria.allTestsPass?"text-emerald-400":"text-zinc-500"')},[i(t=>t.state.exitCriteria.allTestsPass?"âœ“":"â—‹",[l],'p0.state.exitCriteria.allTestsPass?"âœ“":"â—‹"')," Tests Pass"],3,null),e("div",null,{class:i(t=>t.state.exitCriteria.pushedToRemotes?"text-emerald-400":"text-zinc-500",[l],'p0.state.exitCriteria.pushedToRemotes?"text-emerald-400":"text-zinc-500"')},[i(t=>t.state.exitCriteria.pushedToRemotes?"âœ“":"â—‹",[l],'p0.state.exitCriteria.pushedToRemotes?"âœ“":"â—‹"')," Pushed"],3,null),e("div",null,{class:i(t=>t.state.exitCriteria.pushedToGithub?"text-emerald-400":"text-zinc-500",[l],'p0.state.exitCriteria.pushedToGithub?"text-emerald-400":"text-zinc-500"')},[i(t=>t.state.exitCriteria.pushedToGithub?"âœ“":"â—‹",[l],'p0.state.exitCriteria.pushedToGithub?"âœ“":"â—‹"')," GitHub"],3,null)],3,"3H_5"),l.state.violations>0&&e("div",null,{class:"mt-2 text-xs text-red-400"},["âš  ",i(t=>t.state.violations,[l],"p0.state.violations")," guard violation",i(t=>t.state.violations>1?"s":"",[l],'p0.state.violations>1?"s":""')],3,"3H_6")],1,"3H_7"),l0=E(p(e0,"s_dC0VNM3Ytug")),t0=l=>{const t=l.health.needsRotation?"warning":l.health.sizeMb>50?"caution":"healthy";return e("div",{class:`p-3 rounded border ${{healthy:"border-emerald-600 bg-emerald-950/20",caution:"border-yellow-600 bg-yellow-950/20",warning:"border-red-600 bg-red-950/20"}[t]}`},null,[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-sm font-semibold"},"Bus Health",3,null),e("span",null,{class:"text-xs text-zinc-400"},[l.health.eventCount.toLocaleString()," events"],1,null)],1,null),e("div",null,{class:"grid grid-cols-2 gap-2 text-xs"},[e("div",null,null,[e("span",null,{class:"text-zinc-500"},"Size: ",3,null),e("span",null,{class:i(s=>s.health.sizeMb>100?"text-red-400":"text-zinc-300",[l],'p0.health.sizeMb>100?"text-red-400":"text-zinc-300"')},[l.health.sizeMb.toFixed(1)," MB"],1,null)],1,null),e("div",null,null,[e("span",null,{class:"text-zinc-500"},"Velocity: ",3,null),e("span",null,{class:"text-zinc-300"},[l.health.velocity.toFixed(0),"/hr"],1,null)],1,null),e("div",null,null,[e("span",null,{class:"text-zinc-500"},"Age: ",3,null),e("span",null,{class:i(s=>s.health.oldestEventAge>168?"text-amber-400":"text-zinc-300",[l],'p0.health.oldestEventAge>168?"text-amber-400":"text-zinc-300"')},[l.health.oldestEventAge.toFixed(0),"h"],1,null)],1,null),e("div",null,null,l.health.needsRotation&&e("span",null,{class:"text-amber-400"},"âŸ³ Rotation needed",3,"3H_8"),1,null)],1,null)],1,"3H_9")},n0=E(p(t0,"s_pe0NXP6E74M")),s0=l=>{const t=l.clones.filter(s=>!s.isOrphan&&!s.isStale),n=l.clones.filter(s=>s.isOrphan||s.isStale);return e("div",null,{class:"p-3 rounded border border-zinc-700 bg-zinc-900/50"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-sm font-semibold"},"PAIP Isolation",3,null),e("span",null,{class:"text-xs text-zinc-400"},[i(s=>s.clones.length,[l],"p0.clones.length")," clone",i(s=>s.clones.length!==1?"s":"",[l],'p0.clones.length!==1?"s":""')],3,null)],3,null),t.length>0&&e("div",null,{class:"mb-2"},[e("div",null,{class:"text-xs text-zinc-500 mb-1"},"Active:",3,null),t.slice(0,3).map(s=>e("div",null,{class:"text-xs text-emerald-400 truncate"},[h(s,"agentId")," â†’ ",h(s,"branch")],1,s.cloneDir))],1,"3H_10"),n.length>0&&e("div",null,null,[e("div",null,{class:"text-xs text-amber-500 mb-1"},"Cleanup needed:",3,null),n.slice(0,2).map(s=>e("div",null,{class:"text-xs text-amber-400 truncate"},[s.isOrphan?"ðŸ‘»":"â°"," ",h(s,"agentId")],1,s.cloneDir))],1,"3H_11"),l.clones.length===0&&e("div",null,{class:"text-xs text-zinc-500"},"No active clones",3,"3H_12")],1,"3H_13")},a0=E(p(s0,"s_jUhn600Ftpo")),r0=l=>e("div",null,{class:i(t=>["p-3 rounded border",t.compliance.compliant?"border-emerald-600 bg-emerald-950/20":"border-red-600 bg-red-950/20"].join(" "),[l],'["p-3 rounded border",p0.compliance.compliant?"border-emerald-600 bg-emerald-950/20":"border-red-600 bg-red-950/20"].join(" ")')},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-sm font-semibold"},i(t=>t.compliance.compliant?"âœ“ Compliant":"âœ— Non-Compliant",[l],'p0.compliance.compliant?"âœ“ Compliant":"âœ— Non-Compliant"'),3,null),g(Cn,{get version(){return l.compliance.version},active:!0,[a]:{version:i(t=>t.compliance.version,[l],"p0.compliance.version"),active:a}},3,"3H_14")],1,null),l.compliance.violations.length>0&&e("div",null,{class:"mb-2"},[e("div",null,{class:"text-xs text-red-400 mb-1"},"Violations:",3,null),l.compliance.violations.slice(0,3).map((t,n)=>e("div",null,{class:"text-xs text-red-300 truncate"},["â€¢ ",t],1,n))],1,"3H_15"),l.compliance.recommendations.length>0&&e("div",null,null,[e("div",null,{class:"text-xs text-amber-400 mb-1"},"Remediation:",3,null),l.compliance.recommendations.slice(0,3).map((t,n)=>e("div",null,{class:"text-xs text-amber-300 truncate"},["â†’ ",t],1,n))],1,"3H_16")],1,"3H_17"),o0=E(p(r0,"s_1T1MelAcsfk")),i0=l=>{const t=l.tasks.filter(s=>s.state==="RUNNING"),n=l.tasks.slice(0,8);return e("div",null,{class:"p-3 rounded border border-zinc-700 bg-zinc-900/50"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-sm font-semibold"},"Task Flow (v18)",3,null),e("span",null,{class:"text-xs text-zinc-400"},[h(t,"length")," active"],1,null)],1,null),e("div",null,{class:"space-y-1"},[n.map(s=>e("div",null,{class:"flex items-center gap-2 text-xs"},[e("span",{style:{backgroundColor:Up[s.state]||"#6b7280"}},{class:"w-2 h-2 rounded-full"},null,3,null),e("span",null,{class:"text-zinc-400 w-12 truncate"},h(s,"species"),1,null),e("div",null,{class:"flex-1 bg-zinc-800 rounded-full h-1.5 overflow-hidden"},e("div",{style:{width:`${s.progress*100}%`}},{class:"h-full bg-blue-500 transition-all"},null,3,null),1,null),e("span",null,{class:"text-zinc-500 w-8"},[(s.progress*100).toFixed(0),"%"],1,null)],1,s.taskId)),l.tasks.length===0&&e("div",null,{class:"text-xs text-zinc-500"},"No active tasks",3,"3H_18")],1,null)],1,"3H_19")},u0=E(p(i0,"s_6eB8O4MoKQs")),c0=l=>{const t=n=>n.startsWith("operator.pblock")?"#f59e0b":n.startsWith("operator.pbhygiene")?"#10b981":n.startsWith("paip.")?"#8b5cf6":n.startsWith("evolution.")||n.startsWith("hgt.")?"#3b82f6":n.startsWith("ckin.")||n.startsWith("oiterate.")?"#06b6d4":"#6b7280";return e("div",null,{class:"p-3 rounded border border-zinc-700 bg-zinc-900/50 max-h-64 overflow-y-auto"},[e("div",null,{class:"text-sm font-semibold mb-2"},"DKIN Event Stream",3,null),e("div",null,{class:"space-y-1"},[l.events.slice(0,20).map(n=>e("div",null,{class:"flex items-start gap-2 text-xs"},[e("span",null,{class:"text-zinc-600 w-14 shrink-0"},new Date(n.ts*1e3).toLocaleTimeString(),1,null),e("span",{style:{backgroundColor:t(n.topic)}},{class:"w-2 h-2 rounded-full mt-1 shrink-0"},null,3,null),e("span",null,{class:"text-zinc-400 truncate"},h(n,"topic"),1,null),e("span",null,{class:"text-zinc-600 shrink-0"},h(n,"actor"),1,null)],1,n.id)),l.events.length===0&&e("div",null,{class:"text-xs text-zinc-500"},"No recent DKIN events",3,"3H_20")],1,null)],1,"3H_21")},d0=E(p(c0,"s_0YeK7S3XotE")),p0=l=>{const t=["v17","v18","v19","v20","v21"],n={v17:"Hygiene",v18:"Resilience",v19:"Evolution",v20:"Embodied",v21:"Lossless"};return e("div",null,{class:"flex items-center gap-1"},t.map((s,r)=>e("div",null,{class:"flex items-center"},[e("div",{class:["px-2 py-1 text-xs rounded",s===l.currentVersion?"bg-blue-600 text-white font-semibold":t.indexOf(l.currentVersion)>=r?"bg-zinc-700 text-zinc-300":"bg-zinc-800 text-zinc-500"].join(" "),title:n[s]},null,s,1,null),r<t.length-1&&e("span",null,{class:"text-zinc-600 mx-0.5"},"â†’",3,"3H_22")],1,s)),1,"3H_23")},m0=E(p(p0,"s_ALe9jVjlS4A")),g0=l=>{const t=y(Fp),n=y([]);return D(_("s_0BRuUqeXZRc",[n,l,t])),e("div",null,{class:"p-4 bg-zinc-950 text-zinc-100 min-h-full"},[e("div",null,{class:"flex items-center justify-between mb-4"},[e("div",null,{class:"flex items-center gap-3"},[e("h1",null,{class:"text-lg font-bold"},"DKIN/PAIP Flow Monitor",3,null),g(m0,{get currentVersion(){return t.value.protocolVersion},[a]:{currentVersion:i(s=>s.value.protocolVersion,[t],"p0.value.protocolVersion")}},3,"3H_24")],1,null),e("div",null,{class:"flex items-center gap-2"},[g(Yp,{get values(){return n.value},color:"#3b82f6",[a]:{values:i(s=>s.value,[n],"p0.value"),color:a}},3,"3H_25"),e("span",null,{class:"text-xs text-zinc-500"},[i(s=>s.value.recentEvents.length,[t],"p0.value.recentEvents.length")," events (15m)"],3,null)],1,null)],1,null),e("div",null,{class:"grid grid-cols-12 gap-4"},[e("div",null,{class:"col-span-4 space-y-4"},[g(o0,{get compliance(){return t.value.compliance},[a]:{compliance:i(s=>s.value.compliance,[t],"p0.value.compliance")}},3,"3H_26"),g(Vp,null,3,"3H_27"),g(l0,{get state(){return t.value.pblock},[a]:{state:i(s=>s.value.pblock,[t],"p0.value.pblock")}},3,"3H_28"),g(n0,{get health(){return t.value.busHealth},[a]:{health:i(s=>s.value.busHealth,[t],"p0.value.busHealth")}},3,"3H_29"),g(a0,{get clones(){return t.value.paipClones},[a]:{clones:i(s=>s.value.paipClones,[t],"p0.value.paipClones")}},3,"3H_30")],1,null),e("div",null,{class:"col-span-4 space-y-4"},[e("div",null,{class:"p-3 rounded border border-zinc-700 bg-zinc-900/50"},[e("div",null,{class:"text-sm font-semibold mb-2"},"Evolutionary Cycle (v19)",3,null),g(Qp,{get phase(){return t.value.evoPhase},[a]:{phase:i(s=>s.value.evoPhase,[t],"p0.value.evoPhase")}},3,"3H_31"),e("div",null,{class:"mt-3"},g(Zp,{get metrics(){return t.value.cmpMetrics},[a]:{metrics:i(s=>s.value.cmpMetrics,[t],"p0.value.cmpMetrics")}},3,"3H_32"),1,null)],1,null),g(u0,{get tasks(){return t.value.taskGraph},[a]:{tasks:i(s=>s.value.taskGraph,[t],"p0.value.taskGraph")}},3,"3H_33")],1,null),e("div",null,{class:"col-span-4"},g(d0,{get events(){return t.value.recentEvents},[a]:{events:i(s=>s.value.recentEvents,[t],"p0.value.recentEvents")}},3,"3H_34"),1,null)],1,null),e("div",null,{class:"mt-4 pt-4 border-t border-zinc-800"},e("div",null,{class:"flex items-center gap-2 text-xs text-zinc-500 flex-wrap"},[e("span",null,null,"Protocol Coverage:",3,null),Bp.slice(-6).map(s=>g(Cn,{get version(){return s.version},active:s.version===t.value.protocolVersion,[a]:{version:Me(s,"version")}},3,s.version))],1,null),1,null)],1,"3H_35")},v0=E(p(g0,"s_hzDHzREO0xs"));function b0(l){switch(l){case"sm":return"w-[260px] h-[180px]";case"lg":return"w-[520px] h-[380px]";case"md":default:return"w-[360px] h-[240px]"}}const f0=()=>{const[l]=b();try{l.value?.__packery?.layout?.()}catch{}},x0=l=>{const t=y(),n=y("idle"),s=y(null),r=p(f0,"s_gI6vS4XPkFw",[t]);return D(_("s_SksZPuSxJf8",[t,s,n])),e("div",null,{class:"space-y-3"},[e("div",null,{class:"glass-surface-elevated rounded-xl p-3 flex items-center justify-between gap-3"},[e("div",null,null,[e("div",null,{class:"text-sm font-semibold"},i(o=>o.title||"Studio Deck",[l],'p0.title||"Studio Deck"'),3,null),l.subtitle&&e("div",null,{class:"text-xs text-muted-foreground"},i(o=>o.subtitle,[l],"p0.subtitle"),3,"nu_0")],1,null),e("div",null,{class:"flex items-center gap-2 text-xs text-muted-foreground"},[e("span",null,{class:"mono"},"metafizzy",3,null),e("span",null,{class:i(o=>`glass-chip ${o.value==="ready"?"glass-chip-accent-emerald":o.value==="unavailable"?"glass-chip-accent-magenta":""}`,[n],'`glass-chip ${p0.value==="ready"?"glass-chip-accent-emerald":p0.value==="unavailable"?"glass-chip-accent-magenta":""}`')},i(o=>o.value,[n],"p0.value"),3,null),e("button",null,{class:"glass-interactive px-2 py-1 rounded-lg text-xs",title:"Force a Packery relayout",onClick$:r},"Relayout",3,null)],3,null)],1,null),n.value==="unavailable"&&s.value&&e("div",null,{class:"glass-chip glass-chip-accent-magenta text-xs p-2 w-full"},["Deck unavailable: ",i(o=>o.value,[s],"p0.value")],3,"nu_1"),e("div",{ref:t},{class:"glass-surface-subtle relative w-full min-h-[520px] rounded-xl p-3 overflow-hidden"},l.items.map(o=>e("div",{class:`deck-item absolute ${b0(o.size)} glass-surface-elevated rounded-xl shadow-xl glass-transition-standard ${o.colorClass||""}`},{style:{transform:"translate3d(0,0,0)"}},[e("div",null,{class:"deck-handle glass-interactive cursor-move select-none p-3 border-b border-[var(--glass-border)] flex items-center justify-between rounded-t-xl"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-lg"},o.icon||"â–£",1,null),e("div",null,null,[e("div",null,{class:"text-sm font-semibold"},h(o,"title"),1,null),o.subtitle&&e("div",null,{class:"text-[11px] text-muted-foreground"},h(o,"subtitle"),1,"nu_2")],1,null)],1,null),o.onOpen$&&e("button",{onClick$:o.onOpen$},{class:"glass-chip glass-chip-accent-cyan text-xs px-2 py-1 hover:scale-105 transition-transform"},"Open",2,"nu_3")],1,null),e("div",null,{class:"p-3 text-xs text-muted-foreground space-y-2"},[o.body&&e("div",null,{class:"leading-relaxed"},h(o,"body"),1,"nu_4"),!o.body&&e("div",null,{class:"opacity-70"},"Drag me. Pin me. Treat UI as a capability surface.",3,"nu_5")],1,null)],1,o.id)),1,null)],1,"nu_6")},h0=E(p(x0,"s_S54ZDguVW0s")),y0=l=>{try{window.dispatchEvent(new CustomEvent("pluribus:navigate",{detail:{view:l}}))}catch{}},_0=()=>{const[l]=b();return l("browser-auth")},w0=()=>{const[l]=b();return l("bus")},k0=()=>{const[l]=b();return l("voice")},S0=()=>{const[l]=b();return l("events")},C0=()=>{const[l]=b();return l("semops")},$0=()=>{const[l]=b();return l("webllm")},I0=l=>{const t=p(y0,"s_2mPbagZfI3Y"),n=l.onOpenAuth$??p(_0,"s_M9uS7QP00p4",[t]),s=l.session.value.providers||{},r=Object.values(s).filter(c=>c?.available).length,o=Object.keys(s).length;return e("div",null,{class:"space-y-4"},[e("div",null,{class:"glass-surface glass-interactive p-4 rounded-xl"},e("div",null,{class:"flex items-center justify-between gap-3"},[e("div",null,null,[e("div",null,{class:"text-lg font-semibold"},"Studio",3,null),e("div",null,{class:"text-xs text-muted-foreground"},'Draggable capability tiles (Metafizzy Packery + Draggabilly) â€” a "pre-webui TUI", but spatial.',3,null)],3,null),e("div",null,{class:"glass-chip glass-chip-accent-cyan text-xs mono"},["events:",i(c=>c.events.value.length,[l],"p0.events.value.length")," agents:",i(c=>c.agents.value.length,[l],"p0.agents.value.length")," req:",i(c=>c.requests.value.length,[l],"p0.requests.value.length")," providers:",r,"/",o],1,null)],1,null),1,null),g(h0,{title:"Capability Deck",subtitle:"Drag tiles; Open jumps to the canonical view. (Resumability stays intact: heavy panels still load on demand.)",items:[{id:"deck.bus",title:"Bus Observatory",subtitle:"Evidence â€¢ Work â€¢ Control",icon:"ðŸ§­",size:"lg",onOpen$:p(w0,"s_1Kib3D18bHw",[t]),body:"Dense â€œwhere did my task go?â€ view. Domain/actor lenses, tasks snapshot, providers, and Î© signals."},{id:"deck.voice",title:"Voice & Speech",subtitle:"Audio I/O (browser)",icon:"ðŸŽ™ï¸",size:"md",onOpen$:p(k0,"s_tNceVdNVwJY",[t]),body:"Speech-to-text for commands + text-to-speech for outputs (secure/local; no cloud dependency by default)."},{id:"deck.events",title:"Events",subtitle:"Raw bus timeline",icon:"ðŸ“œ",size:"md",onOpen$:p(S0,"s_p0iHkUktUlg",[t]),body:"Full event cards + flowmap + filters. Use when you need forensic fidelity, not just abstraction."},{id:"deck.semops",title:"SemOps",subtitle:"Operators + CRUD",icon:"ðŸ§ ",size:"md",onOpen$:p(C0,"s_6rgrs2wdiO4",[t]),body:"Define/undefine operators; map aliases â†’ tools/bus/UI/agents; invoke non-blocking plans via bus."},{id:"deck.browser",title:"Browser Auth",subtitle:"VNC / PBVW",icon:"ðŸŒ",size:"sm",onOpen$:n,body:"Manual OAuth via VNC (current pivot) + provider control plane visibility."},{id:"deck.webllm",title:"WebLLM",subtitle:"Edge inference",icon:"ðŸ§©",size:"lg",onOpen$:p($0,"s_GmSq4GIJqtM",[t]),body:"WebGPU local inference. Opt-in warm start; fullscreen surface for multi-session chats + bus-addressable inference."}],[a]:{title:a,subtitle:a}},3,"7Q_0")],1,"7Q_1")},T0=E(p(I0,"s_BSttTZ5dhQs"));function sl(l){try{const t=globalThis?.crypto?.randomUUID?.();if(typeof t=="string")return`${l}-${t}`}catch{}return`${l}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}const E0=()=>{const[l]=b();try{const t=window.speechSynthesis?.getVoices?.()||[];l.voices=t,!l.selectedVoiceUri&&t.length>0&&(l.selectedVoiceUri=t[0].voiceURI)}catch{}},A0=async()=>{const[l,t,n]=b();if(n.error=null,!n.sttSupported){n.error="SpeechRecognition unsupported in this browser.";return}const s=t.value;if(s)try{s.start(),n.listening=!0,l.emitBus$("voice.stt.start","metric",{req_id:sl("voice-stt"),iso:new Date().toISOString()})}catch(r){n.error=String(r),n.listening=!1}},M0=async()=>{const[l,t,n]=b(),s=t.value;try{s?.stop?.()}catch{}n.listening=!1,l.emitBus$("voice.stt.stop","metric",{req_id:sl("voice-stt"),iso:new Date().toISOString()})},O0=()=>{const[l,t]=b();t.value="",l.interim="",l.error=null},P0=async()=>{const[l,t]=b(),n=t.value.trim();if(!n)return;const s=(()=>{const o=l.session.value.activeFallback;return o?[o]:[(l.session.value.fallbackOrder||[]).find(u=>u!=="mock")||"chatgpt-web"]})(),r=sl("voice-dialogos");await l.emitBus$("dialogos.submit","request",{req_id:r,mode:"llm",providers:s,prompt:n}),l.emitBus$("voice.dialogos.submit","metric",{req_id:r,providers:s,chars:n.length})},L0=async()=>{const[l,t,n]=b();if(t.error=null,!t.ttsSupported){t.error="speechSynthesis unsupported in this browser.";return}try{window.speechSynthesis.cancel();const s=new SpeechSynthesisUtterance(t.ttsText||n.value||"");s.rate=t.rate,s.pitch=t.pitch,s.volume=t.volume;const r=t.voices.find(o=>o.voiceURI===t.selectedVoiceUri);r&&(s.voice=r),window.speechSynthesis.speak(s),l.emitBus$("voice.tts.speak","metric",{req_id:sl("voice-tts"),chars:s.text.length})}catch(s){t.error=String(s)}},D0=()=>{const[l]=b();try{window.speechSynthesis.cancel()}catch{}l.emitBus$("voice.tts.stop","metric",{req_id:sl("voice-tts"),iso:new Date().toISOString()})},R0=l=>{const t=B({sttSupported:!1,ttsSupported:!1,listening:!1,interim:"",error:null,ttsText:"",voices:[],selectedVoiceUri:null,rate:1,pitch:1,volume:1}),n=y(""),s=y(null);D(_("s_PEOF3JSKHFI",[l,s,p(E0,"s_V0i3YZCaICc",[t]),t,n]));const o=p(A0,"s_BoKqZZp6lww",[l,s,t]),c=p(M0,"s_LSFIuGEfP80",[l,s,t]),u=p(O0,"s_5RofbEklXno",[t,n]),m=p(P0,"s_BL84u3z0XKo",[l,n]),d=p(L0,"s_0k03wkqfGLQ",[l,t,n]),f=p(D0,"s_W8sDT6kv0yo",[l]);return e("div",null,{class:"h-full flex flex-col gap-4"},[e("div",null,{class:"glass-panel p-4"},[e("div",null,{class:"flex items-center justify-between gap-3"},[e("div",null,null,[e("div",null,{class:"text-lg font-semibold"},"Voice & Speech",3,null),e("div",null,{class:"text-xs text-muted-foreground"},["Browser-local STT/TTS. Emits bus evidence and can submit prompts via ",e("code",null,{class:"mono"},"dialogos.submit",3,null),"."],3,null)],3,null),e("div",null,{class:"flex items-center gap-2 text-xs"},[e("span",{class:`px-2 py-1 rounded border ${t.sttSupported?"border-green-500/30 bg-green-500/10 text-green-400":"border-amber-500/30 bg-amber-500/10 text-amber-400"}`},null,["STT ",i(v=>v.sttSupported?"OK":"n/a",[t],'p0.sttSupported?"OK":"n/a"')],3,null),e("span",{class:`px-2 py-1 rounded border ${t.ttsSupported?"border-green-500/30 bg-green-500/10 text-green-400":"border-amber-500/30 bg-amber-500/10 text-amber-400"}`},null,["TTS ",i(v=>v.ttsSupported?"OK":"n/a",[t],'p0.ttsSupported?"OK":"n/a"')],3,null)],1,null)],1,null),t.error&&e("div",null,{class:"mt-3 text-xs text-red-400 bg-red-500/10 border border-red-500/20 rounded p-2"},i(v=>v.error,[t],"p0.error"),3,"00_0")],1,null),e("div",null,{class:"grid grid-cols-1 lg:grid-cols-2 gap-4 flex-1 min-h-0"},[e("div",null,{class:"rounded-lg border border-border bg-card flex flex-col min-h-0"},[e("div",null,{class:"p-4 border-b border-border flex items-center justify-between gap-2 flex-shrink-0"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-xl"},"ðŸŽ™ï¸",3,null),e("div",null,null,[e("div",null,{class:"text-sm font-semibold"},"Speech-to-Text",3,null),e("div",null,{class:"text-[10px] text-muted-foreground"},"Continuous, interim results",3,null)],3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[t.listening?e("button",null,{class:"text-xs px-3 py-1.5 rounded bg-red-600 hover:bg-red-500 text-white",onClick$:c},"Stop",3,null):e("button",null,{class:"text-xs px-3 py-1.5 rounded bg-green-600 hover:bg-green-500 text-white disabled:opacity-50",disabled:i(v=>!v.sttSupported,[t],"!p0.sttSupported"),onClick$:o},"Start",3,"00_1"),e("button",null,{class:"text-xs px-3 py-1.5 rounded bg-muted/30 hover:bg-muted/50",onClick$:u},"Clear",3,null)],1,null)],1,null),e("div",null,{class:"p-4 flex-1 min-h-0 overflow-auto space-y-3"},[t.interim&&e("div",null,{class:"text-xs text-amber-300 bg-amber-500/10 border border-amber-500/20 rounded p-2"},[e("span",null,{class:"font-semibold"},"Interim:",3,null)," ",i(v=>v.interim,[t],"p0.interim")],3,"00_2"),e("textarea",null,{class:"w-full h-48 lg:h-full min-h-[180px] bg-muted/30 border border-border rounded p-3 text-sm font-mono resize-none",value:i(v=>v.value,[n],"p0.value"),placeholder:"Transcript...",onInput$:_("s_B3XJzvh35g0",[n])},null,3,null)],1,null),e("div",null,{class:"p-4 border-t border-border flex items-center justify-between gap-2 flex-shrink-0"},[e("div",null,{class:"text-[10px] text-muted-foreground"},["Providers: ",e("span",null,{class:"mono"},l.session.value.activeFallback||l.session.value.fallbackOrder?.find(v=>v!=="mock")||"chatgpt-web",1,null)],1,null),e("button",null,{class:"text-xs px-3 py-1.5 rounded bg-primary/20 text-primary hover:bg-primary/30 disabled:opacity-50",disabled:i(v=>!v.value.trim(),[n],"!p0.value.trim()"),title:"Submit transcript to dialogosd",onClick$:m},"Send â†’ Dialogos",3,null)],1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card flex flex-col min-h-0"},[e("div",null,{class:"p-4 border-b border-border flex items-center justify-between gap-2 flex-shrink-0"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-xl"},"ðŸ—£ï¸",3,null),e("div",null,null,[e("div",null,{class:"text-sm font-semibold"},"Text-to-Speech",3,null),e("div",null,{class:"text-[10px] text-muted-foreground"},"speechSynthesis (local)",3,null)],3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("button",null,{class:"text-xs px-3 py-1.5 rounded bg-cyan-600 hover:bg-cyan-500 text-white disabled:opacity-50",disabled:i((v,x)=>!v.ttsSupported||!(v.ttsText||x.value).trim(),[t,n],"!p0.ttsSupported||!(p0.ttsText||p1.value).trim()"),onClick$:d},"Speak",3,null),e("button",null,{class:"text-xs px-3 py-1.5 rounded bg-muted/30 hover:bg-muted/50 disabled:opacity-50",disabled:i(v=>!v.ttsSupported,[t],"!p0.ttsSupported"),onClick$:f},"Stop",3,null)],3,null)],3,null),e("div",null,{class:"p-4 flex-1 min-h-0 overflow-auto space-y-3"},[e("textarea",null,{class:"w-full h-40 bg-muted/30 border border-border rounded p-3 text-sm resize-none",value:i(v=>v.ttsText,[t],"p0.ttsText"),placeholder:"Text to speak (defaults to transcript)",onInput$:_("s_Tf16uxV05T0",[t])},null,3,null),e("div",null,{class:"grid grid-cols-1 gap-3"},[e("label",null,{class:"text-xs text-muted-foreground"},["Voice",e("select",null,{class:"mt-1 w-full bg-muted/30 border border-border rounded px-2 py-1 text-xs",value:i(v=>v.selectedVoiceUri||"",[t],'p0.selectedVoiceUri||""'),onChange$:_("s_JR4YDEnHTIU",[t])},t.voices.map(v=>e("option",{value:h(v,"voiceURI")},null,`${v.name} (${v.lang})${v.default?" â€¢ default":""}`,1,v.voiceURI)),1,null)],1,null),e("div",null,{class:"grid grid-cols-3 gap-2"},[e("label",null,{class:"text-xs text-muted-foreground"},["Rate",e("input",null,{type:"range",min:"0.5",max:"2",step:"0.1",value:i(v=>v.rate,[t],"p0.rate"),class:"w-full",onInput$:_("s_93t7nuW0ClM",[t])},null,3,null)],3,null),e("label",null,{class:"text-xs text-muted-foreground"},["Pitch",e("input",null,{type:"range",min:"0",max:"2",step:"0.1",value:i(v=>v.pitch,[t],"p0.pitch"),class:"w-full",onInput$:_("s_XNGeZYqDCQw",[t])},null,3,null)],3,null),e("label",null,{class:"text-xs text-muted-foreground"},["Vol",e("input",null,{type:"range",min:"0",max:"1",step:"0.05",value:i(v=>v.volume,[t],"p0.volume"),class:"w-full",onInput$:_("s_AtaSBADsQyU",[t])},null,3,null)],3,null)],3,null)],1,null)],1,null)],1,null)],1,null)],1,"00_3")},N0=E(p(R0,"s_3CPqPJwt90M")),j0=["Object","Process","Type","Shape","Symbol","Observer"],Ut=["immutable","bounded","mutable"],Ft=["none","parametric","bounded","ad-hoc"],qt=["global","local","session","artifact"],Gt=["passive","assistive","agentic","autonomous"],z0=["instant","near","mid","long","infinite"],Vt=["draft","active","deprecated","archived"],B0=["sextet alignment","auom grounding","append-only evidence"],U0=["append-only provenance","compatibility checks","reviewed deltas"],F0="active",q0={Object:{mutability:"bounded",polymorphism:"bounded",scope:"global",agency:"passive",uncertainty:{epistemic:.35,aleatoric:.2},teleology:{purpose:"Stabilize identity for entities, artifacts, and environments.",horizon:"long",fitness:"traceability + persistence"}},Process:{mutability:"mutable",polymorphism:"parametric",scope:"global",agency:"agentic",uncertainty:{epistemic:.45,aleatoric:.4},teleology:{purpose:"Transform state through controlled change and verification.",horizon:"near",fitness:"throughput + coherence"}},Type:{mutability:"bounded",polymorphism:"parametric",scope:"global",agency:"assistive",uncertainty:{epistemic:.2,aleatoric:.15},teleology:{purpose:"Govern meaning, constraints, and interoperability.",horizon:"long",fitness:"consistency + coverage"}},Shape:{mutability:"immutable",polymorphism:"bounded",scope:"global",agency:"passive",uncertainty:{epistemic:.15,aleatoric:.1},teleology:{purpose:"Preserve invariants, topology, and equivariant structure.",horizon:"infinite",fitness:"stability + invariance"}},Symbol:{mutability:"mutable",polymorphism:"ad-hoc",scope:"global",agency:"assistive",uncertainty:{epistemic:.5,aleatoric:.3},teleology:{purpose:"Encode and transmit shared meaning across planes.",horizon:"mid",fitness:"clarity + reach"}},Observer:{mutability:"bounded",polymorphism:"parametric",scope:"global",agency:"agentic",uncertainty:{epistemic:.4,aleatoric:.25},teleology:{purpose:"Sense, verify, and close feedback loops.",horizon:"near",fitness:"signal fidelity + accountability"}}},G0=l=>({...l,uncertainty:{...l.uncertainty},teleology:{...l.teleology}}),$n=(l,t)=>{const n=q0[l];return t?{...n,...t,uncertainty:{...n.uncertainty,...t.uncertainty},teleology:{...n.teleology,...t.teleology}}:G0(n)},In=l=>{const t=l.semantics[0]??"Type";return $n(t,l.axes)},Tn=l=>{const t=l.semantics[0]??"Type";return{...l,axes:$n(t,l.axes),state:l.state??F0,evidence:l.evidence??B0,constraints:l.constraints??U0,children:l.children?.map(Tn)}},V0=["append-only evidence","typed effects","omega checks"],H0={id:"types-root",label:"Types Atlas",summary:"Formal schema for public-domain knowledge, events, planes, things, and common intelligence data. Anchored to Sextet and AuOM flows.",axes:{teleology:{purpose:"Bind Pluribus types into a composable, learnable commons.",horizon:"long",fitness:"coherence + leverage"}},constraints:["append-only provenance","sextet alignment","auom boundedness"],semantics:["Type"],mechanism:["reference","memory"],auom:V0,children:[{id:"types-object",label:"Objects",summary:"Things and entities: agents, artifacts, places, and systems.",axes:{teleology:{purpose:"Anchor identity, ownership, and continuity of entities.",horizon:"long",fitness:"traceability + persistence"}},semantics:["Object"],mechanism:["memory","source"],auom:["typed effects"],children:[{id:"object-agents",label:"Agents and selves",summary:"Humans, machines, hybrids, offspring, and identity clones.",semantics:["Object"],mechanism:["memory","source"],auom:["typed effects"]},{id:"object-artifacts",label:"Artifacts and tools",summary:"Instruments, datasets, models, and infrastructure.",semantics:["Object"],mechanism:["memory","source"],auom:["typed effects"]},{id:"object-places",label:"Places and environments",summary:"Physical sites, digital spaces, and ecological contexts.",semantics:["Object"],mechanism:["source","memory"],auom:["append-only evidence"]},{id:"object-systems",label:"Systems and institutions",summary:"Economies, organizations, and socio-technical systems.",semantics:["Object"],mechanism:["memory","reference"],auom:["typed effects"]}]},{id:"types-process",label:"Processes",summary:"Events, workflows, coordination, and evolution.",axes:{teleology:{purpose:"Coordinate change, verification, and lineage.",horizon:"near",fitness:"throughput + coherence"}},semantics:["Process"],mechanism:["transducer","feedback"],auom:["append-only evidence"],children:[{id:"process-events",label:"Events",summary:"Natural, social, operational, and lifecycle changes.",semantics:["Process"],mechanism:["source","feedback"],auom:["append-only evidence"]},{id:"process-pipelines",label:"SOTA to reality pipeline",summary:"Curation -> distill -> hypothesis -> applied theory -> implementation -> verification -> provenance.",axes:{uncertainty:{epistemic:.55,aleatoric:.45},teleology:{purpose:"Turn SOTA into verified, reproducible reality.",horizon:"near",fitness:"provenance + repeatability"}},evidence:["append-only evidence","verification gates"],semantics:["Process"],mechanism:["reference","feedback"],auom:["append-only evidence"]},{id:"process-lineage",label:"Lineage and evolution",summary:"VGT inheritance, guarded HGT, replication, and selection.",axes:{teleology:{purpose:"Guarded evolution with traceable fitness gains.",horizon:"long",fitness:"robustness + CMP"}},semantics:["Process"],mechanism:["transducer","feedback"],auom:["omega checks"]},{id:"process-coordination",label:"Coordination and protocols",summary:"Bus events, task graphs, and consensus workflows.",semantics:["Process"],mechanism:["regulator","feedback"],auom:["append-only evidence"]}]},{id:"types-type",label:"Types",summary:"Schemas, contracts, units, and policy surfaces.",axes:{teleology:{purpose:"Normalize meaning and enforce composability.",horizon:"long",fitness:"consistency + coverage"}},semantics:["Type"],mechanism:["reference","regulator"],auom:["typed effects"],children:[{id:"type-schemas",label:"Schemas and protocols",summary:"Contracts, JSON schemas, and governance protocols.",semantics:["Type"],mechanism:["reference","regulator"],auom:["typed effects"]},{id:"type-units",label:"Units and budgets",summary:"Latency, energy, rights, and cost envelopes.",semantics:["Type"],mechanism:["reference","regulator"],auom:["typed effects"]},{id:"type-rights",label:"Rights and permissions",summary:"Access, safety, and legal boundary definitions.",axes:{mutability:"immutable",polymorphism:"bounded",teleology:{purpose:"Define safe, auditable access boundaries.",horizon:"long",fitness:"safety + compliance"}},constraints:["policy gates","audit evidence","legal alignment"],semantics:["Type"],mechanism:["regulator","reference"],auom:["typed effects"]},{id:"type-data",label:"Data classes",summary:"Public-domain, restricted, and private data tiers.",semantics:["Type"],mechanism:["reference","regulator"],auom:["typed effects"]}]},{id:"types-shape",label:"Shapes",summary:"Invariants, planes, motifs, and topology.",axes:{teleology:{purpose:"Protect invariants that keep the organism coherent.",horizon:"infinite",fitness:"stability + invariance"}},semantics:["Shape"],mechanism:["reference","feedback"],auom:["omega checks"],children:[{id:"shape-planes",label:"Planes of reality",summary:"Physical, digital, social, cognitive, temporal, ecological.",semantics:["Shape"],mechanism:["reference","memory"],auom:["typed effects"],children:[{id:"plane-physical",label:"Physical plane",summary:"Material objects, energy, geography, and embodiment.",semantics:["Shape"],mechanism:["source","reference"],auom:["typed effects"]},{id:"plane-digital",label:"Digital plane",summary:"Networks, software, computation, and protocols.",semantics:["Shape"],mechanism:["reference","memory"],auom:["typed effects"]},{id:"plane-social",label:"Social plane",summary:"Institutions, norms, and collective behavior.",semantics:["Shape"],mechanism:["reference","feedback"],auom:["append-only evidence"]},{id:"plane-cognitive",label:"Cognitive plane",summary:"Mental models, narratives, and sensemaking.",semantics:["Shape"],mechanism:["transducer","reference"],auom:["typed effects"]},{id:"plane-temporal",label:"Temporal plane",summary:"Cadence, history, sequence, and anticipation.",semantics:["Shape"],mechanism:["reference","feedback"],auom:["omega checks"]},{id:"plane-ecological",label:"Ecological plane",summary:"Biophysical systems, supply, and regeneration.",semantics:["Shape"],mechanism:["source","memory"],auom:["append-only evidence"]}]},{id:"shape-motif-superpattern",label:"Motif superpattern",summary:"Recurring subgraph patterns that bind rhizomes, offspring, and guarded transfer.",axes:{mutability:"bounded",polymorphism:"ad-hoc",agency:"assistive",uncertainty:{epistemic:.5,aleatoric:.35},teleology:{purpose:"Bind recurring subgraph motifs across agent lineages.",horizon:"long",fitness:"recurrence + verification"}},semantics:["Shape","Process"],mechanism:["reference","feedback"],auom:["omega checks","append-only evidence"],children:[{id:"shape-motif-omega",label:"Omega motifs",summary:"Recurrence-bound patterns validated against liveness gates.",semantics:["Shape"],mechanism:["feedback","reference"],auom:["omega checks"]},{id:"shape-motif-rhizome",label:"Rhizome lineages",summary:"Branching inheritance across agentic subgraphs.",semantics:["Shape","Process"],mechanism:["memory","feedback"],auom:["append-only evidence"]},{id:"shape-motif-offspring",label:"Offspring and clones",summary:"Self-identity splits, forks, and lineage mirrors.",semantics:["Object","Process"],mechanism:["memory","reference"],auom:["typed effects"]},{id:"shape-motif-hgt",label:"Guarded transfer",summary:"VGT inheritance and HGT splicing under P/E/L/R/Q gates.",semantics:["Process"],mechanism:["regulator","transducer"],auom:["typed effects"]},{id:"shape-motif-recurrence",label:"Recurrence gates",summary:"Acceptance checks for infinite-horizon pattern return.",semantics:["Shape"],mechanism:["feedback","reference"],auom:["omega checks"]}]},{id:"shape-invariants",label:"Invariants and topology",summary:"Equivariance, geometry, liveness, and topology locks.",semantics:["Shape"],mechanism:["reference","feedback"],auom:["omega checks"]}]},{id:"types-symbol",label:"Symbols",summary:"Encodings, languages, knowledge commons, and identifiers.",axes:{teleology:{purpose:"Encode and transmit shared meaning across agents.",horizon:"mid",fitness:"clarity + reach"}},semantics:["Symbol"],mechanism:["transducer","memory"],auom:["append-only evidence"],children:[{id:"symbol-encodings",label:"Encodings",summary:"Text, code, images, event streams, and tokens.",semantics:["Symbol"],mechanism:["transducer","memory"],auom:["append-only evidence"]},{id:"symbol-commons",label:"Knowledge commons",summary:"Public-domain science, culture, history, and law.",axes:{scope:"global",teleology:{purpose:"Keep public-domain knowledge composable and durable.",horizon:"long",fitness:"coverage + integrity"}},semantics:["Symbol"],mechanism:["memory","reference"],auom:["append-only evidence"],children:[{id:"commons-science",label:"Science",summary:"Empirical findings, reproducible methods, and data.",semantics:["Symbol"],mechanism:["reference","memory"],auom:["append-only evidence"]},{id:"commons-culture",label:"Culture",summary:"Arts, rituals, myths, and shared meaning.",semantics:["Symbol"],mechanism:["memory","reference"],auom:["append-only evidence"]},{id:"commons-history",label:"History",summary:"Chronicles, archives, and longitudinal context.",semantics:["Symbol"],mechanism:["memory","reference"],auom:["append-only evidence"]},{id:"commons-technology",label:"Technology",summary:"Tools, standards, and applied design patterns.",semantics:["Symbol"],mechanism:["reference","transducer"],auom:["append-only evidence"]},{id:"commons-health",label:"Health",summary:"Biology, medicine, and care systems knowledge.",semantics:["Symbol"],mechanism:["memory","reference"],auom:["append-only evidence"]},{id:"commons-law",label:"Law",summary:"Rights, governance, and institutional constraints.",semantics:["Symbol"],mechanism:["reference","regulator"],auom:["typed effects"]}]},{id:"symbol-identifiers",label:"Identifiers",summary:"IDs, hashes, claims, and provenance anchors.",semantics:["Symbol"],mechanism:["memory","reference"],auom:["append-only evidence"]}]},{id:"types-observer",label:"Observers",summary:"Sensing, models, simulators, and auditors.",axes:{teleology:{purpose:"Sense and verify across the organism.",horizon:"near",fitness:"signal fidelity + accountability"}},semantics:["Observer"],mechanism:["source","feedback"],auom:["append-only evidence","omega checks"],children:[{id:"observer-sensors",label:"Sensors and probes",summary:"Telemetry, instrumentation, and embodied sensing.",semantics:["Observer"],mechanism:["source","transducer"],auom:["append-only evidence"]},{id:"observer-models",label:"Models and planners",summary:"Predictive engines, policies, and controllers.",semantics:["Observer"],mechanism:["transducer","reference"],auom:["typed effects"]},{id:"observer-simulators",label:"Simulators and emulators",summary:"Synthetic observers for counterfactual testing.",semantics:["Observer"],mechanism:["transducer","feedback"],auom:["omega checks"]},{id:"observer-auditors",label:"Auditors and verifiers",summary:"Tests, monitors, and provenance witnesses.",axes:{agency:"autonomous",teleology:{purpose:"Verify truth claims and surface drift.",horizon:"near",fitness:"trust + compliance"}},evidence:["append-only evidence","omega checks"],semantics:["Observer"],mechanism:["feedback","reference"],auom:["append-only evidence"]}]}]},yl=Tn(H0),En=(l,t=0,n=null,s=[])=>{s.push({...l,depth:t,parentId:n,x:0,y:0,z:0});for(const r of l.children??[])En(r,t+1,l.id,s);return s},W0=l=>{const t=En(l),n=new Map;for(const o of t){const c=n.get(o.depth)??[];c.push(o),n.set(o.depth,c)}for(const[o,c]of n.entries()){const u=c.length,m=o===0?0:160+(o-1)*120,d=u>0?Math.PI*2/u:0,f=o*.35;c.forEach((v,x)=>{if(o===0){v.x=0,v.y=0,v.z=0;return}const S=x*d+f;v.x=Math.cos(S)*m,v.y=Math.sin(S)*m*.7,v.z=-o*60})}const s=[];for(const o of t)o.parentId&&s.push({from:o.parentId,to:o.id});const r={};for(const o of t)r[o.id]=o;return{nodes:t,edges:s,indexById:r,roots:[l.id]}},pe=W0(yl),Y0=l=>{const t=[];let n=pe.indexById[l];for(;n&&(t.push(n.id),!!n.parentId);)n=pe.indexById[n.parentId];return t},An="pluribus.types.proposals.v1",Mn=()=>typeof window<"u"&&typeof localStorage<"u",J0=(l,t)=>l?t?{...l,...t,uncertainty:{...l.uncertainty??{},...t.uncertainty??{}},teleology:{...l.teleology??{},...t.teleology??{}}}:l:t,K0=(l,t)=>({...l,...t,axes:J0(l.axes,t.axes)}),Q0=()=>{if(!Mn())return[];try{const l=localStorage.getItem(An);if(!l)return[];const t=JSON.parse(l);return Array.isArray(t)?t:[]}catch{return[]}},On=l=>{if(Mn())try{localStorage.setItem(An,JSON.stringify(l))}catch{}},X0=l=>{const n=[...Q0(),l];return On(n),n},Z0=(l,t,n)=>{const s=l.map(r=>r.id===t?{...r,status:n}:r);return On(s),s},Pn=(l,t=["preview"])=>{const n={},r=[...l.filter(o=>t.includes(o.status))].sort((o,c)=>o.createdIso.localeCompare(c.createdIso));for(const o of r){const c=n[o.nodeId]??{};n[o.nodeId]=K0(c,o.patch)}return n},em="types.proposal.request",Ht="types-ui",Wt=l=>Math.min(1,Math.max(0,l)),fl=l=>`${Math.round(l*100)}%`,Yt=l=>l.split(/[\n,]/).map(t=>t.trim()).filter(t=>t.length>0),Jt=(l=[])=>l.join(`
`),lm=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`types_${Date.now()}_${Math.random().toString(16).slice(2)}`,Ke=(l,t)=>t?{...l,...t}:l,Ln=(l,t)=>({label:l.label,summary:l.summary,mutability:t.mutability,polymorphism:t.polymorphism,scope:t.scope,agency:t.agency,epistemic:t.uncertainty.epistemic,aleatoric:t.uncertainty.aleatoric,teleologyPurpose:t.teleology.purpose,teleologyHorizon:t.teleology.horizon,teleologyFitness:t.teleology.fitness,state:l.state??"active",evidence:Jt(l.evidence??[]),constraints:Jt(l.constraints??[]),notes:""}),tm=l=>({label:l.label.trim(),summary:l.summary.trim(),axes:{mutability:l.mutability,polymorphism:l.polymorphism,scope:l.scope,agency:l.agency,uncertainty:{epistemic:Wt(l.epistemic),aleatoric:Wt(l.aleatoric)},teleology:{purpose:l.teleologyPurpose.trim(),horizon:l.teleologyHorizon,fitness:l.teleologyFitness.trim()}},state:l.state,evidence:Yt(l.evidence),constraints:Yt(l.constraints)}),nm=l=>{const t=Ke(l.node,l.overrides?.[l.node.id]),n=t.id===l.selectedId,s=t.children&&t.children.length>0,r=!!l.overrides?.[l.node.id],o=(l.query??"")===""||t.label.toLowerCase().includes((l.query??"").toLowerCase())||t.id.toLowerCase().includes((l.query??"").toLowerCase()),c=s&&t.children.some(m=>{const d=Ke(m,l.overrides?.[m.id]);return d.label.toLowerCase().includes((l.query??"").toLowerCase())||d.id.toLowerCase().includes((l.query??"").toLowerCase())||d.children&&d.children.length>0});if((l.query??"")!==""&&!o&&!c)return null;const u=(l.query??"")!==""||l.depth<1||n||pe.indexById[l.selectedId]&&Y0(l.selectedId).includes(l.node.id);return e("div",{class:`types-tree-item ${o&&(l.query??"")!==""?"filter-match":""}`},null,[e("div",{class:`types-tree-row ${n?"selected":""}`},{style:i(m=>({paddingLeft:`${m.depth*16}px`}),[l],"{paddingLeft:`${p0.depth*16}px`}"),onClick$:_("s_SGtWBNVJqtI",[l])},[e("span",null,{class:"types-tree-icon"},s?u?"ðŸ“‚":"ðŸ“":"ðŸ“„",1,null),e("span",null,{class:"types-tree-label"},h(t,"label"),1,null),r&&e("span",null,{class:"types-tree-delta"},"PREVIEW",3,"v6_0"),t.semantics&&t.semantics.length>0&&e("span",null,{class:"types-tree-badges"},t.semantics.map(m=>e("span",null,{class:"types-badge semantic"},m[0],1,m)),1,"v6_1")],1,null),s&&e("div",{class:`types-tree-children ${u?"open":"closed"}`},null,t.children.map(m=>g(Dn,{node:m,get selectedId(){return l.selectedId},onSelect$:l.onSelect$,get depth(){return l.depth+1},get query(){return l.query??""},get overrides(){return l.overrides},[a]:{selectedId:i(d=>d.selectedId,[l],"p0.selectedId"),depth:i(d=>d.depth+1,[l],"p0.depth+1"),query:i(d=>d.query??"",[l],'p0.query??""'),overrides:i(d=>d.overrides,[l],"p0.overrides")}},2,m.id)),1,"v6_2")],1,"v6_3")},Dn=E(p(nm,"s_kDLkwNf60vE")),sm=l=>{const[t,n]=b(),s=pe.indexById[l];if(!s)return;const r=Pn(n.value,["preview"]),o=Ke(s,r[l]),c=In(o),u=Ln(o,c);Object.assign(t,u)},am=l=>{const[t,n,s]=b();pe.indexById[l]&&(n.value=l,t.value&&s(l))},rm=()=>{const[l,t,n,s,r]=b();l.value=!l.value,t.value=null,n.value=null,l.value&&r(s.value)},om=(l,t)=>{const[n]=b();n.value=Z0(n.value,l,t)},im=async()=>{const[l,t,n,s,r,o]=b();n.value=null,s.value=null;const c=t.label.trim(),u=t.summary.trim();if(!c||!u){n.value="Label and summary are required.";return}const m={id:lm(),nodeId:o.id,createdIso:new Date().toISOString(),actor:Ht,kind:"update",status:"pending",patch:tm(t),notes:t.notes.trim()||void 0,parentId:o.parentId??null};r.value=X0(m),s.value="Proposal queued locally.";const d=l.value;if(d){const f={id:m.id,topic:em,kind:"request",level:"info",actor:Ht,data:{proposal_id:m.id,node_id:m.nodeId,created_iso:m.createdIso,patch:m.patch,notes:m.notes,parent_id:m.parentId},semantic:`types proposal for ${m.nodeId}`};try{await d.publish(f)}catch{s.value="Proposal queued locally (bus publish failed)."}}},um=l=>{const t=l.defaultNodeId&&pe.indexById[l.defaultNodeId]?l.defaultNodeId:"types-root",n=y(pe.indexById[t]?t:yl.id),s=y([]),r=y(null),o=y(null),c=y(!1),u=y(null),m=y(""),d=y(!1);D(_("s_091fwWUbj7o",[u,c,s]));const f=Pn(s.value,["preview"]),v=pe.indexById[n.value]??pe.indexById[yl.id],x=Ke(v,f[v.id]),S=In(x),M=x.state??"active",$=x.evidence??[],w=x.constraints??[],k=B(Ln(x,S)),I=p(sm,"s_0gZjUcI02Ro",[k,s]),T=p(am,"s_oduP8LgYyh8",[d,n,I]),z=p(rm,"s_EBBOBSYmGbQ",[d,r,o,n,I]),O=p(om,"s_9TSLZYMDVU0",[s]),J=p(im,"s_wRxkiflbe1k",[u,k,r,o,s,v]),ne=pe.nodes.filter(A=>A.id!==v.id&&A.semantics.some(R=>x.semantics.includes(R))).slice(0,5),Z=[...s.value].filter(A=>A.nodeId===v.id).sort((A,R)=>R.createdIso.localeCompare(A.createdIso)),he=v.parentId?Ke(pe.indexById[v.parentId],f[v.parentId]):null;return e("section",null,{class:"types-overlay"},[e("div",null,{class:"types-overlay-header"},[e("div",null,null,[e("div",null,{class:"types-overlay-overline"},"Types Atlas",3,null),e("h2",null,{class:"types-overlay-title"},"Hierarchy & Schema Editor",3,null),e("p",null,{class:"types-overlay-subtitle"},"Navigate and manage the formal schema of the Pluribus organism.",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("button",null,{class:i(A=>`types-mode-toggle ${A.value?"active":""}`,[d],'`types-mode-toggle ${p0.value?"active":""}`'),onClick$:z},i(A=>A.value?"Exit Edit":"Draft Proposal",[d],'p0.value?"Exit Edit":"Draft Proposal"'),3,null),l.onClose$&&e("button",{onClick$:l.onClose$},{class:"types-overlay-close"},"Close",2,"v6_4")],1,null)],1,null),e("div",null,{class:"types-overlay-body split-view"},[e("div",null,{class:"types-navigator"},[e("div",null,{class:"types-navigator-toolbar"},e("input",null,{type:"text",placeholder:"Search types...",class:"types-search-input",value:m,onInput$:_("s_3C66n3CmQb8",[m])},null,3,null),3,null),e("div",null,{class:"types-tree-scroll"},g(Dn,{node:yl,get selectedId(){return n.value},onSelect$:T,depth:0,get query(){return m.value},overrides:f,[a]:{node:a,selectedId:i(A=>A.value,[n],"p0.value"),onSelect$:a,depth:a,query:i(A=>A.value,[m],"p0.value")}},3,"v6_5"),1,null)],1,null),e("aside",null,{class:"types-detail-panel"},[e("div",null,{class:"types-detail-card"},[e("div",null,{class:"types-detail-header"},e("div",null,{class:"flex items-center gap-2"},[d.value?e("input",null,{type:"text",value:i(A=>A.label,[k],"p0.label"),class:"types-edit-input",onInput$:_("s_lvXNRPUgk0c",[k])},null,3,"v6_6"):e("h3",null,null,h(x,"label"),1,null),e("span",null,{class:"types-detail-id-badge"},h(v,"id"),1,null)],1,null),1,null),d.value?e("textarea",null,{class:"types-edit-textarea",value:i(A=>A.summary,[k],"p0.summary"),onInput$:_("s_hYyEVuiXNko",[k])},null,3,"v6_7"):e("p",null,{class:"types-detail-summary"},h(x,"summary"),1,null),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Sextet Semantics",3,null),e("div",null,{class:"types-chip-group"},x.semantics.map(A=>e("span",null,{class:"types-chip semantics"},A,1,A)),1,null),d.value&&e("div",null,{class:"types-muted"},"Semantics are anchored to Sextet governance.",3,"v6_8")],1,null),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"TypeTouch Axes",3,null),d.value?e("div",null,{class:"types-axes-editor"},[e("label",null,{class:"types-axis-field"},[e("span",null,null,"Mutability",3,null),e("select",null,{class:"types-edit-select",value:i(A=>A.mutability,[k],"p0.mutability"),onChange$:_("s_L30h0DuPFUs",[k])},Ut.map(A=>e("option",{value:A},null,A,1,A)),1,null)],1,null),e("label",null,{class:"types-axis-field"},[e("span",null,null,"Polymorphism",3,null),e("select",null,{class:"types-edit-select",value:i(A=>A.polymorphism,[k],"p0.polymorphism"),onChange$:_("s_NV8Z0WXrw4k",[k])},Ft.map(A=>e("option",{value:A},null,A,1,A)),1,null)],1,null),e("label",null,{class:"types-axis-field"},[e("span",null,null,"Scope",3,null),e("select",null,{class:"types-edit-select",value:i(A=>A.scope,[k],"p0.scope"),onChange$:_("s_KA9nFY0bdIw",[k])},qt.map(A=>e("option",{value:A},null,A,1,A)),1,null)],1,null),e("label",null,{class:"types-axis-field"},[e("span",null,null,"Agency",3,null),e("select",null,{class:"types-edit-select",value:i(A=>A.agency,[k],"p0.agency"),onChange$:_("s_Ehz9jvZTJC8",[k])},Gt.map(A=>e("option",{value:A},null,A,1,A)),1,null)],1,null)],1,"v6_9"):e("div",null,{class:"types-axes-grid"},[e("div",null,{class:"types-axis"},[e("span",null,{class:"types-axis-label"},"Mutability",3,null),e("span",null,{class:"types-chip axis"},h(S,"mutability"),1,null)],1,null),e("div",null,{class:"types-axis"},[e("span",null,{class:"types-axis-label"},"Polymorphism",3,null),e("span",null,{class:"types-chip axis"},h(S,"polymorphism"),1,null)],1,null),e("div",null,{class:"types-axis"},[e("span",null,{class:"types-axis-label"},"Scope",3,null),e("span",null,{class:"types-chip axis"},h(S,"scope"),1,null)],1,null),e("div",null,{class:"types-axis"},[e("span",null,{class:"types-axis-label"},"Agency",3,null),e("span",null,{class:"types-chip axis"},h(S,"agency"),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Uncertainty",3,null),d.value?e("div",null,{class:"types-uncertainty-edit"},[e("label",null,{class:"types-uncertainty-control"},[e("span",null,null,"Epistemic",3,null),e("input",null,{type:"range",min:"0",max:"1",step:"0.05",value:i(A=>A.epistemic,[k],"p0.epistemic"),class:"types-range",onInput$:_("s_qiVAi7jaOWY",[k])},null,3,null),e("input",null,{type:"number",min:"0",max:"1",step:"0.01",value:i(A=>A.epistemic,[k],"p0.epistemic"),class:"types-number",onInput$:_("s_ZH0zu8SFNWc",[k])},null,3,null)],3,null),e("label",null,{class:"types-uncertainty-control"},[e("span",null,null,"Aleatoric",3,null),e("input",null,{type:"range",min:"0",max:"1",step:"0.05",value:i(A=>A.aleatoric,[k],"p0.aleatoric"),class:"types-range",onInput$:_("s_qfLRngobUUg",[k])},null,3,null),e("input",null,{type:"number",min:"0",max:"1",step:"0.01",value:i(A=>A.aleatoric,[k],"p0.aleatoric"),class:"types-number",onInput$:_("s_fNXeVtbEhVM",[k])},null,3,null)],3,null)],3,"v6_10"):e("div",null,{class:"types-uncertainty"},[e("div",null,{class:"types-uncertainty-row"},[e("span",null,{class:"types-uncertainty-label"},"Epistemic",3,null),e("div",null,{class:"types-uncertainty-bar"},e("span",{style:{width:fl(S.uncertainty.epistemic)}},null,null,3,null),1,null),e("span",null,{class:"types-uncertainty-value"},fl(S.uncertainty.epistemic),1,null)],1,null),e("div",null,{class:"types-uncertainty-row"},[e("span",null,{class:"types-uncertainty-label"},"Aleatoric",3,null),e("div",null,{class:"types-uncertainty-bar"},e("span",{style:{width:fl(S.uncertainty.aleatoric)}},null,null,3,null),1,null),e("span",null,{class:"types-uncertainty-value"},fl(S.uncertainty.aleatoric),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Teleology",3,null),d.value?e("div",null,{class:"types-teleology-edit"},[e("label",null,null,[e("span",null,null,"Purpose",3,null),e("input",null,{class:"types-edit-input",value:i(A=>A.teleologyPurpose,[k],"p0.teleologyPurpose"),onInput$:_("s_3YjjRTc836Q",[k])},null,3,null)],3,null),e("label",null,null,[e("span",null,null,"Horizon",3,null),e("select",null,{class:"types-edit-select",value:i(A=>A.teleologyHorizon,[k],"p0.teleologyHorizon"),onChange$:_("s_PlL0Lo2w0eg",[k])},z0.map(A=>e("option",{value:A},null,A,1,A)),1,null)],1,null),e("label",null,null,[e("span",null,null,"Fitness",3,null),e("input",null,{class:"types-edit-input",value:i(A=>A.teleologyFitness,[k],"p0.teleologyFitness"),onInput$:_("s_9ycYKvnQDe8",[k])},null,3,null)],3,null)],1,"v6_11"):e("div",null,{class:"types-teleology"},[e("div",null,{class:"types-teleology-purpose"},h(S.teleology,"purpose"),1,null),e("div",null,{class:"types-teleology-meta"},[e("span",null,{class:"types-chip axis"},h(S.teleology,"horizon"),1,null),e("span",null,{class:"types-teleology-fitness"},h(S.teleology,"fitness"),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Lineage & Relationships",3,null),e("div",null,{class:"types-relationship-grid"},[e("div",null,{class:"types-rel-box"},[e("div",null,{class:"types-rel-label"},"Parent",3,null),e("div",null,{class:"types-rel-value"},v.parentId?e("button",{onClick$:_("s_GM0L721YghQ",[T,v])},{class:"types-rel-link"},["â†‘ ",he?.label??pe.indexById[v.parentId].label],0,"v6_12"):"Root",1,null)],1,null),e("div",null,{class:"types-rel-box"},[e("div",null,{class:"types-rel-label"},"Children",3,null),e("div",null,{class:"types-rel-value"},[v.children?.length||0," nodes"],1,null)],1,null)],1,null)],1,null),ne.length>0&&e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Semantic Peers",3,null),e("div",null,{class:"flex flex-wrap gap-1 mt-1"},ne.map(A=>{const R=Ke(A,f[A.id]);return e("button",{onClick$:_("s_MfQqA2e9xjQ",[A,T])},{class:"types-rel-peer"},["ðŸ”— ",h(R,"label")],0,A.id)}),1,null)],1,"v6_13"),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Mechanism",3,null),e("div",null,{class:"types-chip-group"},x.mechanism.map(A=>e("span",null,{class:"types-chip mechanism"},A,1,A)),1,null)],1,null),x.auom&&x.auom.length>0&&e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"AuOM Flows",3,null),e("div",null,{class:"types-chip-group"},x.auom.map(A=>e("span",null,{class:"types-chip auom"},A,1,A)),1,null)],1,"v6_14"),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"State & Evidence",3,null),d.value?e("div",null,{class:"types-state-edit"},[e("label",null,null,[e("span",null,null,"State",3,null),e("select",null,{class:"types-edit-select",value:i(A=>A.state,[k],"p0.state"),onChange$:_("s_xL1VU0mJcZ4",[k])},Vt.map(A=>e("option",{value:A},null,A,1,A)),1,null)],1,null),e("label",null,null,[e("span",null,null,"Evidence",3,null),e("textarea",null,{class:"types-edit-textarea",value:i(A=>A.evidence,[k],"p0.evidence"),onInput$:_("s_PUFm2A2bBGU",[k])},null,3,null)],3,null)],1,"v6_15"):g(ue,{children:[e("div",null,{class:"types-chip-group"},e("span",null,{class:"types-chip state"},M,1,null),1,null),$.length>0?e("div",null,{class:"types-evidence"},$.map(A=>e("span",null,{class:"types-evidence-item"},A,1,A)),1,"v6_16"):e("div",null,{class:"types-muted"},"No evidence recorded yet.",3,null)]},1,"v6_17")],1,null),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Constraints",3,null),d.value?e("textarea",null,{class:"types-edit-textarea",value:i(A=>A.constraints,[k],"p0.constraints"),onInput$:_("s_s0gUTO04VOU",[k])},null,3,"v6_18"):e("div",null,{class:"types-chip-group"},w.length>0?w.map(A=>e("span",null,{class:"types-chip constraint"},A,1,A)):e("span",null,{class:"types-muted"},"No constraints specified.",3,"v6_19"),1,null)],1,null),d.value&&e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Proposal Actions",3,null),e("label",null,{class:"types-proposal-notes"},[e("span",null,null,"Notes",3,null),e("textarea",null,{class:"types-edit-textarea",value:i(A=>A.notes,[k],"p0.notes"),onInput$:_("s_CXhivrXBEog",[k])},null,3,null)],3,null),e("div",null,{class:"types-proposal-actions"},[e("button",null,{class:"types-proposal-submit",onClick$:J},"Submit Proposal",3,null),e("span",null,{class:"types-proposal-bus"},i(A=>A.value?"Bus online":"Bus offline",[c],'p0.value?"Bus online":"Bus offline"'),3,null)],3,null),r.value&&e("div",null,{class:"types-error"},i(A=>A.value,[r],"p0.value"),3,"v6_20"),o.value&&e("div",null,{class:"types-muted"},i(A=>A.value,[o],"p0.value"),3,"v6_21")],1,"v6_22"),e("div",null,{class:"types-detail-section"},[e("div",null,{class:"types-detail-label"},"Definition JSON",3,null),e("pre",null,{class:"types-json-preview"},JSON.stringify({id:v.id,label:x.label,semantics:x.semantics,mechanism:x.mechanism,axes:S,state:M,evidence:$,constraints:w},null,2),1,null)],1,null)],1,null),e("div",null,{class:"types-detail-card"},[e("div",null,{class:"types-proposal-header"},e("div",null,null,[e("div",null,{class:"types-detail-label"},"Proposal Queue",3,null),e("div",null,{class:"types-muted"},[h(Z,"length")," proposals for this node"],1,null)],1,null),1,null),Z.length===0?e("div",null,{class:"types-muted"},"No proposals yet. Draft one to begin.",3,"v6_23"):e("div",null,{class:"types-proposal-list"},Z.map(A=>{const R=Object.keys(A.patch||{}).filter(ee=>A.patch[ee]!==void 0);return e("div",{class:`types-proposal-item ${A.status}`},null,[e("div",null,{class:"types-proposal-meta"},[e("div",null,{class:"types-proposal-meta-left"},[e("span",null,{class:"types-proposal-id"},A.id.slice(0,8),1,null),e("span",null,{class:"types-proposal-time"},h(A,"createdIso"),1,null)],1,null),e("span",null,{class:"types-chip state"},h(A,"status"),1,null)],1,null),e("div",null,{class:"types-proposal-summary"},["Patch: ",R.length>0?R.join(", "):"none"],1,null),A.notes?e("div",null,{class:"types-proposal-notes-text"},h(A,"notes"),1,"v6_24"):e("div",null,{class:"types-muted"},"No notes attached.",3,null),e("div",null,{class:"types-proposal-actions"},[e("button",{onClick$:_("s_Qq0og32ieQ4",[A,O])},{class:"types-proposal-preview"},A.status==="preview"?"Clear Preview":"Preview",0,null),e("button",{onClick$:_("s_5sMfaDl5NXo",[A,O])},{class:"types-proposal-archive"},"Archive",2,null)],1,null)],1,A.id)}),1,null)],1,null),e("div",null,{class:"types-detail-card"},[e("h4",null,{class:"types-detail-label"},"Legend",3,null),e("div",null,{class:"types-legend-row"},[e("span",null,{class:"types-legend-title"},"Semantics",3,null),e("div",null,{class:"types-chip-group"},j0.map(A=>e("span",null,{class:"types-chip semantics"},A,1,A)),1,null)],1,null),e("div",null,{class:"types-legend-row"},[e("span",null,{class:"types-legend-title"},"Mutability",3,null),e("div",null,{class:"types-chip-group"},Ut.map(A=>e("span",null,{class:"types-chip axis"},A,1,A)),1,null)],1,null),e("div",null,{class:"types-legend-row"},[e("span",null,{class:"types-legend-title"},"Polymorphism",3,null),e("div",null,{class:"types-chip-group"},Ft.map(A=>e("span",null,{class:"types-chip axis"},A,1,A)),1,null)],1,null),e("div",null,{class:"types-legend-row"},[e("span",null,{class:"types-legend-title"},"Scope",3,null),e("div",null,{class:"types-chip-group"},qt.map(A=>e("span",null,{class:"types-chip axis"},A,1,A)),1,null)],1,null),e("div",null,{class:"types-legend-row"},[e("span",null,{class:"types-legend-title"},"Agency",3,null),e("div",null,{class:"types-chip-group"},Gt.map(A=>e("span",null,{class:"types-chip axis"},A,1,A)),1,null)],1,null),e("div",null,{class:"types-legend-row"},[e("span",null,{class:"types-legend-title"},"State",3,null),e("div",null,{class:"types-chip-group"},Vt.map(A=>e("span",null,{class:"types-chip state"},A,1,A)),1,null)],1,null)],1,null)],1,null)],1,null)],1,"v6_25")},cm=E(p(um,"s_xV4vaxYyaa4")),dm=[{id:"home",label:"ðŸ  Home"}],pm=[{id:"bus",label:"ðŸ§­ Bus",hint:"Nerve center"},{id:"services",label:"âš™ï¸ Services"},{id:"registry-atlas",label:"ðŸ—ºï¸ Registry",hint:"Registry topology atlas"},{id:"diagnostics",label:"ðŸ”¬ Diagnostics"},{id:"metatest",label:"ðŸ§ª MetaTest",hint:"Test coverage"},{id:"terminal",label:"ðŸ’» Terminal"}],mm=[{id:"webllm",label:"ðŸ§© WebLLM"},{id:"voice",label:"ðŸŽ™ï¸ Voice"},{id:"sota",label:"ðŸ”¬ SOTA"},{id:"semops",label:"ðŸ§  SemOps"},{id:"types",label:"ðŸ—‚ï¸ Types",hint:"Sextet + AuOM schema tree"},{id:"dkin",label:"ðŸ§¬ DKIN"}],gm=[{id:"studio",label:"ðŸ§ª Studio"},{id:"rhizome",label:"ðŸŒ³ Rhizome"},{id:"git",label:"ðŸ“¦ Git"},{id:"distill",label:"ðŸ§ª Distill"},{id:"generative",label:"ðŸŽ¨ Generative"},{id:"plurichat",label:"ðŸ—£ï¸ PluriChat"}],vm=[{id:"events",label:"ðŸ“œ Events"},{id:"agents",label:"ðŸ¤– Agents"},{id:"requests",label:"ðŸ“‹ Requests"},{id:"leads",label:"ðŸ“‹ Leads",hint:"Content curation queue"}],bm=new Set(["bus","events","agents","requests","leads"]),fm=l=>{Pe("comp:bicameral-nav"),D(_("s_fV0ru607nt4"));const t=bm.has(l.activeView);return e("nav",null,{class:"bicameral-nav border-b border-border px-6 py-4 flex-shrink-0 overflow-x-auto"},[e("md-elevation",null,{class:"bicameral-nav-elevation"},null,3,null),e("div",null,{class:"flex flex-col gap-3"},[e("div",null,{class:"flex flex-wrap items-center gap-2"},[e("span",null,{class:"text-[10px] uppercase tracking-[0.3em] text-muted-foreground"},"Core",3,null),dm.map(n=>e("md-filter-chip",{label:h(n,"label"),selected:l.activeView===n.id,title:h(n,"hint"),onClick$:_("s_2m4vouBTvmg",[l,n])},{class:"bicameral-chip bicameral-chip-core"},null,2,n.id))],1,null),e("div",null,{class:"grid grid-cols-1 gap-3 lg:grid-cols-3"},[e("section",null,{class:"bicameral-section bicameral-section-devops space-y-2"},[e("div",null,{class:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},[e("span",null,{class:"bicameral-indicator h-2 w-2 rounded-full bg-primary/70"},null,3,null),"DevOps"],3,null),e("div",null,{class:"flex flex-wrap gap-2"},pm.map(n=>{const s=n.id==="bus"?t:l.activeView===n.id;return e("md-filter-chip",{label:h(n,"label"),selected:s,title:h(n,"hint"),onClick$:_("s_1olffRPqo4Q",[l,n])},{class:"bicameral-chip bicameral-chip-devops"},null,2,n.id)}),1,null)],1,null),e("section",null,{class:"bicameral-section bicameral-section-mlops space-y-2"},[e("div",null,{class:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},[e("span",null,{class:"bicameral-indicator h-2 w-2 rounded-full bg-cyan-400/70"},null,3,null),"MLOps"],3,null),e("div",null,{class:"flex flex-wrap gap-2"},mm.map(n=>e("md-filter-chip",{label:h(n,"label"),selected:l.activeView===n.id,title:h(n,"hint"),onClick$:_("s_0V1gdqy0wY0",[l,n])},{class:"bicameral-chip bicameral-chip-mlops"},null,2,n.id)),1,null)],1,null),e("section",null,{class:"bicameral-section bicameral-section-evocode space-y-2"},[e("div",null,{class:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-[0.2em] text-muted-foreground"},[e("span",null,{class:"bicameral-indicator h-2 w-2 rounded-full bg-emerald-400/70"},null,3,null),"EvoCode"],3,null),e("div",null,{class:"flex flex-wrap gap-2"},gm.map(n=>e("md-filter-chip",{label:h(n,"label"),selected:l.activeView===n.id,title:h(n,"hint"),onClick$:_("s_sYvKuWM6zLU",[l,n])},{class:"bicameral-chip bicameral-chip-evocode"},null,2,n.id)),1,null)],1,null)],1,null),t&&e("div",null,{class:"bicameral-subviews flex flex-wrap items-center gap-2"},[e("span",null,{class:"text-[10px] uppercase tracking-[0.25em] text-muted-foreground"},"Bus Views",3,null),vm.map(n=>e("md-filter-chip",{label:h(n,"label"),selected:l.activeView===n.id,onClick$:_("s_xiBcTsf8jD4",[l,n])},{class:"bicameral-chip bicameral-chip-bus"},null,2,n.id))],1,"Lz_0")],1,null)],1,"Lz_1")},xm=E(p(fm,"s_Xpb8Wrud7t0")),hm=()=>{const l=y(),t=y(!1);return D(_("s_lj9zLiTx5zs",[l,t])),e("canvas",{ref:l},{style:{width:"100%",height:"100%",display:"block",borderRadius:"50%"}},null,3,"sc_0")},ym=E(p(hm,"s_ru0rqYfmUTE"));function _m(l){const n=Date.now()/1e3-l;return n<60?`${Math.floor(n)}s`:n<3600?`${Math.floor(n/60)}m`:n<86400?`${Math.floor(n/3600)}h`:`${Math.floor(n/86400)}d`}function $e(l){return l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}K`:l.toLocaleString()}function wm(l){switch(l){case"Object":return"bg-emerald-500/20 text-emerald-300";case"Process":return"bg-cyan-500/20 text-cyan-300";case"Type":return"bg-indigo-500/20 text-indigo-300";case"Shape":return"bg-purple-500/20 text-purple-300";case"Symbol":return"bg-orange-500/20 text-orange-300";case"Observer":return"bg-yellow-500/20 text-yellow-300";default:return"bg-gray-500/20 text-gray-400"}}function Kt(l,t,n){if(l.length<2)return"";const s=Math.max(...l,1),r=Math.min(...l,0),o=s-r||1,c=t/(l.length-1);return`M${l.map((m,d)=>{const f=d*c,v=n-(m-r)/o*n;return`${f.toFixed(1)},${v.toFixed(1)}`}).join(" L")}`}const km=()=>{W();const l=y(),t=y(),n=y(!1),s=y(!1),r=y(!1),o=B([]),c=B([]),u=B({vectorCount:0,kgNodes:0,kgFacts:0,dialogosRecords:0,cmpScore:0,entropy:0,indexerHealth:"unknown",vectorCapacityPct:0,kgCapacityPct:0,contextWindowPct:0,ingestVelocity:0,lastIngestTs:0,loaded:!1,error:null,falkordbConnected:!1,falkordbHealth:"unknown",falkordbNodes:0,falkordbEdges:0,falkordbSyncPct:0,falkordbLatencyMs:0,falkordbLabelStats:[],falkordbLabelTotal:0,velocityHistory:[]});D(_("s_7xUKzTiIy4Q",[n,u,c])),D(_("s_cW3t5PjvM8Y",[l,t,n,r,s]));const m=u.indexerHealth==="ok"?"bg-green-400":u.indexerHealth==="degraded"?"bg-yellow-400":"bg-red-400";return e("section",{ref:t},{class:i(d=>`w-full bg-background/80 border-b border-border/50 backdrop-blur-sm relative z-10 transition-colors duration-300 ${d.value?"bg-background/95":""}`,[n],'`w-full bg-background/80 border-b border-border/50 backdrop-blur-sm relative z-10 transition-colors duration-300 ${p0.value?"bg-background/95":""}`')},[e("div",null,{class:"flex items-center h-10 px-4 gap-4"},[e("div",null,{class:"flex items-center gap-4"},[e("div",null,{class:"flex flex-col items-start justify-center"},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-primary uppercase"},"INGEST",3,null),e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`w-1.5 h-1.5 rounded-full ${m} ${u.indexerHealth==="ok"?"animate-pulse":""}`},null,null,3,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?`${$e(u.dialogosRecords)} REC`:"...",1,null)],1,null)],1,null),e("div",null,{class:"hidden md:flex items-center px-3 py-1 rounded bg-muted/50 border border-border text-[10px] font-medium text-muted-foreground hover:bg-muted hover:text-foreground hover:border-primary/20 transition-all cursor-pointer",title:"Drop Multimodal Blobs Here"},e("span",null,null,"DROP INPUT +",3,null),3,null)],1,null),e("div",null,{class:"flex-1 relative h-full flex items-center justify-center cursor-pointer group overflow-hidden",onClick$:_("s_qwsRne0m0Ko",[n])},[e("div",null,{class:"absolute inset-0 flex items-center justify-center text-[10px] font-bold tracking-widest text-cyan-500/0 group-hover:text-cyan-500/100 transition-all bg-black/0 group-hover:bg-black/60 backdrop-blur-[0px] group-hover:backdrop-blur-sm z-10 pointer-events-none"},i(d=>d.value?"COLLAPSE":"EXPAND",[n],'p0.value?"COLLAPSE":"EXPAND"'),3,null),n.value&&s.value?e("canvas",{ref:l},{class:"w-full h-full opacity-60"},null,3,"rt_0"):e("div",null,{class:"w-full h-full bg-gradient-to-r from-cyan-900/20 via-purple-900/20 to-pink-900/20 opacity-60 animate-pulse"},null,3,null)],1,null),e("div",null,{class:"flex items-center gap-4 md:gap-6 ml-auto"},[e("div",null,{class:"flex flex-col items-start justify-center",title:i(d=>`FalkorDB: ${d.falkordbHealth} | Latency: ${d.falkordbLatencyMs}ms`,[u],"`FalkorDB: ${p0.falkordbHealth} | Latency: ${p0.falkordbLatencyMs}ms`")},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-orange-400 uppercase flex items-center gap-1"},[e("span",{class:`w-1.5 h-1.5 rounded-full ${u.falkordbHealth==="healthy"?"bg-green-400 animate-pulse":u.falkordbHealth==="degraded"?"bg-yellow-400":u.falkordbHealth==="disconnected"?"bg-red-400":"bg-gray-400"}`},null,null,3,null),"FDB"],1,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?$e(u.falkordbNodes):"...",1,null)],1,null),e("div",null,{class:"hidden lg:flex flex-col items-start justify-center",title:"FalkorDB edge count"},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-amber-400 uppercase"},"EDGES",3,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?$e(u.falkordbEdges):"...",1,null)],1,null),e("div",null,{class:"hidden xl:flex flex-col items-start justify-center",title:"Bus-to-FalkorDB sync percentage"},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-teal-400 uppercase"},"SYNC",3,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?`${u.falkordbSyncPct.toFixed(1)}%`:"...",1,null)],1,null),e("div",null,{class:"hidden sm:flex flex-col items-start justify-center"},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-green-400 uppercase"},"VEL",3,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?`${u.ingestVelocity.toFixed(1)}/m`:"...",1,null)],1,null),e("div",null,{class:"flex flex-col items-start justify-center"},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-purple-400 uppercase"},"VEC",3,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?$e(u.vectorCount):"...",1,null)],1,null),e("div",null,{class:"hidden md:flex flex-col items-start justify-center"},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-blue-400 uppercase"},"KG",3,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?$e(u.kgFacts):"...",1,null)],1,null),e("div",null,{class:"flex flex-col items-start justify-center"},[e("span",null,{class:"text-[10px] font-bold tracking-wider text-pink-400 uppercase"},"CMP",3,null),e("span",null,{class:"font-mono text-xs text-foreground/90"},u.loaded?u.cmpScore.toFixed(3):"...",1,null)],1,null)],1,null)],1,null),n.value&&e("div",null,{class:"border-t border-border/50 bg-card/90 backdrop-blur-md p-4 relative overflow-hidden animate-in slide-in-from-top-2 duration-200"},[e("div",null,{class:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-15"},e("div",null,{class:"w-64 h-64"},g(ym,null,3,"rt_1"),1,null),1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10"},[e("div",null,{class:"space-y-3"},[e("h4",null,{class:"text-[10px] font-bold tracking-widest text-muted-foreground uppercase mb-2"},"ACTIVE FLOWS",3,null),o.length===0?e("div",null,{class:"text-xs text-muted-foreground/60 italic"},"No active ingest streams",3,"rt_2"):o.map(d=>e("div",null,{class:"flex items-center justify-between text-xs font-mono p-2 rounded bg-muted/30"},[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`w-1.5 h-1.5 rounded-full ${d.status==="processing"?"bg-cyan-400 animate-pulse":d.status==="assimilated"?"bg-green-400":d.status==="error"?"bg-red-400":"bg-gray-400"}`},null,null,3,null),e("span",null,null,d.label||d.id,1,null)],1,null),e("div",null,{class:"w-20 h-1 bg-white/10 rounded-full overflow-hidden ml-3"},e("div",{style:{width:`${d.progress*100}%`}},{class:"h-full bg-cyan-500 transition-all"},null,3,null),1,null)],1,d.id)),e("div",null,{class:"mt-4 p-2 rounded bg-muted/30 border border-border"},[e("div",null,{class:"flex items-center justify-between text-[10px]"},[e("span",null,{class:"text-muted-foreground"},"Indexer Status",3,null),e("span",null,{class:i(d=>`font-bold ${d.indexerHealth==="ok"?"text-green-400":d.indexerHealth==="degraded"?"text-yellow-400":"text-red-400"}`,[u],'`font-bold ${p0.indexerHealth==="ok"?"text-green-400":p0.indexerHealth==="degraded"?"text-yellow-400":"text-red-400"}`')},u.indexerHealth.toUpperCase(),1,null)],1,null),e("div",null,{class:"flex items-center justify-between text-[10px] mt-1"},[e("span",null,{class:"text-muted-foreground"},"Entropy",3,null),e("span",null,{class:"font-mono text-foreground/80"},u.entropy.toFixed(4),1,null)],1,null)],1,null),e("div",null,{class:"mt-4 p-2 rounded bg-muted/30 border border-border"},[e("div",null,{class:"flex items-center justify-between text-[10px] mb-2"},[e("span",null,{class:"text-muted-foreground"},"Ingest Velocity",3,null),e("span",null,{class:"font-mono text-cyan-400"},[u.ingestVelocity.toFixed(1),"/min"],1,null)],1,null),e("div",null,{class:"h-8 w-full"},u.velocityHistory.length>=2?e("svg",null,{width:"100%",height:"100%",viewBox:"0 0 100 32",preserveAspectRatio:"none",class:"overflow-visible"},[e("defs",null,null,e("linearGradient",null,{id:"sparklineGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",null,{offset:"0%","stop-color":"rgb(34, 211, 238)","stop-opacity":"0.3"},null,3,null),e("stop",null,{offset:"100%","stop-color":"rgb(34, 211, 238)","stop-opacity":"0.05"},null,3,null)],3,null),3,null),e("path",{d:`${Kt(u.velocityHistory,100,28)} L100,28 L0,28 Z`},{fill:"url(#sparklineGradient)"},null,3,null),e("path",{d:Kt(u.velocityHistory,100,28)},{fill:"none",stroke:"rgb(34, 211, 238)","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,3,null),u.velocityHistory.length>0&&e("circle",{cy:28-(u.velocityHistory[u.velocityHistory.length-1]-Math.min(...u.velocityHistory))/(Math.max(...u.velocityHistory,1)-Math.min(...u.velocityHistory,0)||1)*28},{cx:"100",r:"2",fill:"rgb(34, 211, 238)"},null,3,"rt_3")],1,"rt_4"):e("div",null,{class:"h-full flex items-center justify-center text-[9px] text-muted-foreground/50"},"Collecting data...",3,null),1,null),e("div",null,{class:"flex justify-between text-[8px] text-muted-foreground/50 mt-1"},[e("span",null,null,["-",i(d=>d.velocityHistory.length*10,[u],"p0.velocityHistory.length*10"),"s"],3,null),e("span",null,null,"now",3,null)],3,null)],1,null)],1,null),e("div",null,{class:"space-y-3"},[e("h4",null,{class:"text-[10px] font-bold tracking-widest text-muted-foreground uppercase mb-2"},"RECENT RECORDS",3,null),c.length===0?e("div",null,{class:"text-xs text-muted-foreground/60 italic"},"Loading records...",3,"rt_5"):e("div",null,{class:"space-y-2 max-h-48 overflow-y-auto"},c.map(d=>e("div",null,{class:"p-2 rounded bg-muted/30 border border-border hover:bg-muted/50 transition-colors"},[e("div",null,{class:"flex items-center justify-between text-[10px] mb-1"},[e("div",null,{class:"flex items-center gap-1.5"},[e("span",{class:`px-1.5 py-0.5 rounded text-[9px] font-bold uppercase ${d.contentType==="prompt"?"bg-cyan-500/20 text-cyan-400":d.contentType==="response"?"bg-green-500/20 text-green-400":d.contentType==="tool_call"?"bg-orange-500/20 text-orange-400":d.contentType==="fact"?"bg-blue-500/20 text-blue-400":d.contentType==="error"?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`},null,h(d,"contentType"),1,null),e("span",{class:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase ${wm(d.typesTag.semantics)}`},null,h(d.typesTag,"semantics"),1,null)],1,null),e("span",null,{class:"text-muted-foreground"},h(d.metadata,"age"),1,null)],1,null),e("div",null,{class:"text-xs font-mono text-foreground/80 break-words"},h(d,"content"),1,null),e("div",null,{class:"flex items-center gap-2 mt-1 text-[9px] text-muted-foreground"},[e("span",null,null,h(d,"actor"),1,null),e("span",null,null,"â€¢",3,null),e("span",null,{class:"truncate"},h(d,"topic"),1,null)],1,null)],1,d.id)),1,null)],1,null),e("div",null,{class:"space-y-3"},[e("h4",null,{class:"text-[10px] font-bold tracking-widest text-muted-foreground uppercase mb-2"},"STORE CAPACITY",3,null),e("div",null,{class:"space-y-2"},[e("div",null,{class:"flex items-center gap-3 text-[10px] font-medium text-muted-foreground"},[e("span",null,{class:"w-20 flex items-center gap-1"},[e("span",null,{class:i(d=>`w-1.5 h-1.5 rounded-full ${d.falkordbHealth==="healthy"?"bg-green-400":d.falkordbHealth==="degraded"?"bg-yellow-400":"bg-red-400"}`,[u],'`w-1.5 h-1.5 rounded-full ${p0.falkordbHealth==="healthy"?"bg-green-400":p0.falkordbHealth==="degraded"?"bg-yellow-400":"bg-red-400"}`')},null,3,null),"FalkorDB"],3,null),e("div",null,{class:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden"},e("div",null,{class:"h-full bg-orange-500 rounded-full transition-all",style:i(d=>({width:`${d.falkordbSyncPct||0}%`}),[u],"{width:`${p0.falkordbSyncPct||0}%`}")},null,3,null),3,null),e("span",null,{class:"w-12 text-right font-mono"},[u.falkordbSyncPct.toFixed(0),"%"],1,null)],1,null),e("div",null,{class:"flex items-center gap-3 text-[10px] font-medium text-muted-foreground"},[e("span",null,{class:"w-20"},"Vector DB",3,null),e("div",null,{class:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden"},e("div",null,{class:"h-full bg-purple-500 rounded-full transition-all",style:i(d=>({width:`${d.vectorCapacityPct||64}%`}),[u],"{width:`${p0.vectorCapacityPct||64}%`}")},null,3,null),3,null),e("span",null,{class:"w-12 text-right font-mono"},[i(d=>d.vectorCapacityPct||64,[u],"p0.vectorCapacityPct||64"),"%"],3,null)],3,null),e("div",null,{class:"flex items-center gap-3 text-[10px] font-medium text-muted-foreground"},[e("span",null,{class:"w-20"},"KG Nodes",3,null),e("div",null,{class:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden"},e("div",null,{class:"h-full bg-cyan-500 rounded-full transition-all",style:i(d=>({width:`${d.kgCapacityPct||21}%`}),[u],"{width:`${p0.kgCapacityPct||21}%`}")},null,3,null),3,null),e("span",null,{class:"w-12 text-right font-mono"},[i(d=>d.kgCapacityPct||21,[u],"p0.kgCapacityPct||21"),"%"],3,null)],3,null),e("div",null,{class:"flex items-center gap-3 text-[10px] font-medium text-muted-foreground"},[e("span",null,{class:"w-20"},"Context",3,null),e("div",null,{class:"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden"},e("div",null,{class:"h-full bg-amber-500 rounded-full transition-all",style:i(d=>({width:`${d.contextWindowPct||45}%`}),[u],"{width:`${p0.contextWindowPct||45}%`}")},null,3,null),3,null),e("span",null,{class:"w-12 text-right font-mono"},[i(d=>d.contextWindowPct||45,[u],"p0.contextWindowPct||45"),"%"],3,null)],3,null)],1,null),e("div",null,{class:"mt-4"},[e("h4",null,{class:"text-[10px] font-bold tracking-widest text-muted-foreground uppercase mb-2"},"FALKORDB GRAPH",3,null),e("div",null,{class:"grid grid-cols-2 gap-2 text-[10px]"},[e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Nodes",3,null),e("span",null,{class:"font-mono text-orange-400"},$e(u.falkordbNodes),1,null)],1,null),e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Edges",3,null),e("span",null,{class:"font-mono text-amber-400"},$e(u.falkordbEdges),1,null)],1,null),e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Latency",3,null),e("span",null,{class:"font-mono text-teal-400"},[u.falkordbLatencyMs.toFixed(0),"ms"],1,null)],1,null),e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Sync",3,null),e("span",null,{class:i(d=>`font-mono ${d.falkordbSyncPct>=99?"text-green-400":d.falkordbSyncPct>=90?"text-yellow-400":"text-red-400"}`,[u],'`font-mono ${p0.falkordbSyncPct>=99?"text-green-400":p0.falkordbSyncPct>=90?"text-yellow-400":"text-red-400"}`')},[u.falkordbSyncPct.toFixed(1),"%"],1,null)],1,null)],1,null)],1,null),e("div",null,{class:"mt-4"},[e("h4",null,{class:"text-[10px] font-bold tracking-widest text-muted-foreground uppercase mb-2"},"TOP LABELS",3,null),u.falkordbLabelStats.length===0?e("div",null,{class:"text-xs text-muted-foreground/60 italic"},"No label stats yet",3,"rt_6"):e("div",null,{class:"space-y-1"},u.falkordbLabelStats.map(d=>e("div",null,{class:"flex items-center gap-2 text-[10px]"},[e("span",{title:h(d,"label")},{class:"w-16 truncate text-muted-foreground"},h(d,"label"),1,null),e("div",null,{class:"flex-1 h-1 bg-white/10 rounded-full overflow-hidden"},e("div",{style:{width:`${Math.max(2,d.pct)}%`}},{class:"h-full bg-cyan-500/70 rounded-full transition-all"},null,3,null),1,null),e("span",null,{class:"w-12 text-right font-mono text-cyan-300"},$e(d.count),1,null)],1,d.label)),1,null)],1,null),e("div",null,{class:"mt-4"},[e("h4",null,{class:"text-[10px] font-bold tracking-widest text-muted-foreground uppercase mb-2"},"METADATA",3,null),e("div",null,{class:"grid grid-cols-2 gap-2 text-[10px]"},[e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Records/min",3,null),e("span",null,{class:"font-mono text-cyan-400"},u.ingestVelocity.toFixed(1),1,null)],1,null),e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"CMP Score",3,null),e("span",null,{class:"font-mono text-pink-400"},u.cmpScore.toFixed(3),1,null)],1,null),e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Entropy",3,null),e("span",null,{class:"font-mono text-green-400"},u.entropy.toFixed(4),1,null)],1,null),e("div",null,{class:"flex justify-between p-1.5 rounded bg-muted/30"},[e("span",null,{class:"text-muted-foreground"},"Total Facts",3,null),e("span",null,{class:"font-mono text-blue-400"},$e(u.kgFacts),1,null)],1,null)],1,null)],1,null),u.lastIngestTs>0&&e("div",null,{class:"text-[9px] text-muted-foreground/60 text-right mt-2"},["Last update: ",_m(u.lastIngestTs)," ago"],1,"rt_7")],1,null)],1,null)," "],1,"rt_8")],1,"rt_9")},Sm=E(p(km,"s_tgyGnoUxqJY"));function Cm(l){const t=Date.now(),n=Date.parse(l);if(!Number.isFinite(n))return"unknown";const s=t-n,r=Math.floor(s/1e3),o=Math.floor(r/60),c=Math.floor(o/60),u=Math.floor(c/24);return r<5?"just now":r<60?`${r}s ago`:o<60?`${o}m ago`:c<24?`${c}h ago`:`${u}d ago`}function $m(l){const t=(l||"unknown").toLowerCase();return t.includes("gemini")?"G":t.includes("claude")?"C":t.includes("gpt")?"O":t.includes("webllm")?"L":t.includes("dashboard")?"D":t.includes("codex")?"X":(l||"?").charAt(0).toUpperCase()}function Im(l){switch(l){case"error":return"text-md-error";case"metric":return"text-md-tertiary";case"artifact":return"text-md-secondary";case"response":return"text-md-success";case"request":return"text-md-primary";default:return"text-md-on-surface-variant"}}function Tm(l){if(l.semantic)return l.semantic.length>80?l.semantic.slice(0,77)+"...":l.semantic;const t=l.data;if(t){if(typeof t.message=="string")return t.message.length>80?t.message.slice(0,77)+"...":t.message;if(typeof t.summary=="string")return t.summary.length>80?t.summary.slice(0,77)+"...":t.summary}return l.topic.replace(/\./g," > ")}const Em=()=>{const[l]=b();l.onViewDetails$?.(l.event)},Am=l=>{const t=Tm(l.event),n=Cm(l.event.iso),s=$m(l.event.actor),r=Im(l.event.kind),o=(l.scale??.8)>.9,c=o?"p-3":"p-2",u=o?"text-xs":"text-[11px]",m=p(Em,"s_H7tfrv2LKk4",[l]);return g(H,{variant:o?"elevated":"outlined",padding:c,interactive:!0,onClick$:m,class:`transition-all duration-200 ease-out border-l-4 ${l.event.level==="error"?"border-l-md-error":l.event.level==="warn"?"border-l-md-warning":"border-l-md-outline/20"}`,get style(){return{transform:`scale(${.85+(l.scale??.8)*.15})`,opacity:.7+(l.scale??.8)*.3}},children:[e("div",null,{class:"flex items-center justify-between gap-2 mb-1.5"},[e("div",null,{class:"flex items-center gap-2 min-w-0"},[e("div",null,{class:"w-5 h-5 rounded-full flex items-center justify-center bg-md-surface-container-highest text-[10px] font-bold border border-md-outline/20"},s,1,null),e("span",null,{class:"text-[10px] font-bold text-md-on-surface-variant truncate uppercase tracking-tighter"},["@",i(d=>d.event.actor,[l],"p0.event.actor")],3,null)],1,null),e("span",null,{class:"text-[9px] font-mono text-md-on-surface-variant/50"},n,1,null)],1,null),e("div",{class:`${u} font-bold tracking-tight mb-0.5 ${r}`},null,i(d=>d.event.topic,[l],"p0.event.topic"),3,null),e("div",{class:`${u} text-md-on-surface/80 leading-relaxed line-clamp-2`},null,t,1,null),e("div",null,{class:"flex items-center justify-between mt-2 pt-2 border-t border-md-outline/5"},[e("div",null,{class:"flex items-center gap-1.5"},[e("span",{class:`text-[9px] font-black uppercase px-1.5 py-0.5 rounded-full bg-md-surface-container border border-md-outline/10 ${r}`},null,i(d=>d.event.kind,[l],"p0.event.kind"),3,null),l.event.impact&&l.event.impact!=="low"&&e("span",null,{class:"text-[9px] font-black text-md-error uppercase"},["Impact: ",i(d=>d.event.impact,[l],"p0.event.impact")],3,"Ai_0")],1,null),g(L,{variant:"tonal",class:`h-6 text-[9px] px-2 min-w-0 opacity-0 group-hover:opacity-100 ${o?"opacity-100":""}`,onClick$:m,children:"Details",[a]:{variant:a,onClick$:a}},3,"Ai_1")],1,null)],[a]:{interactive:a,onClick$:a,style:i(d=>({transform:`scale(${.85+(d.scale??.8)*.15})`,opacity:.7+(d.scale??.8)*.3}),[l],"{transform:`scale(${.85+(p0.scale??.8)*.15})`,opacity:.7+(p0.scale??.8)*.3}")}},1,"Ai_2")},Mm=E(p(Am,"s_lttdJf9SRZw"));function Om(l){try{return new Date(l).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return l}}function Pm(l){switch(l){case"error":return"bg-md-error/10 text-md-error border-md-error/20";case"warn":return"bg-md-warning/10 text-md-warning border-md-warning/20";case"info":return"bg-md-primary/10 text-md-primary border-md-primary/20";default:return"bg-md-surface-variant text-md-on-surface-variant border-md-outline/20"}}const Lm=()=>{const[l]=b();l.onClose$?.()},Dm=l=>{const[t,n]=b();n.onNavigateToActor$?.(l),t()},Rm=()=>{const[l]=b(),t=l.event?.data;if(!t)return null;const n=t.action_plan||t.actionPlan;return!n||typeof n!="object"?null:{...n,actions:Array.isArray(n.actions)?n.actions:[]}},Nm=async l=>{const[t,n,s,r,o]=b(),c=n.value;if(!c||!o.event)return;const u=r.value;if(!u){s.value="error";return}s.value="sending";try{await u.publish({topic:`qa.action.review.${l}`,kind:"request",level:l==="approved"?"info":"warn",actor:"dashboard",trace_id:o.event.trace_id,parent_id:o.event.id,data:{action_plan_id:c.id||o.event.id,decision:l,note:t.value.trim()||null,source_event:{id:o.event.id,topic:o.event.topic},actions:c.actions||[]}}),s.value=l}catch{s.value="error"}},jm=()=>{const[l]=b();if(!l.event?.data)return null;try{return JSON.stringify(l.event.data,null,2)}catch{return String(l.event.data)}},zm=()=>{const[l,t]=b();return l(t.event.actor)},Bm=(l,t)=>{const[n]=b();n.value=t.value},Um=()=>{const[l]=b();return l("approved")},Fm=()=>{const[l]=b();return l("rejected")},qm=l=>{W(),Pe("comp:notification-detail-overlay");const t=y(null),n=y(!1),s=y(""),r=y("idle");D(_("s_p3mB0kzmNbc",[s,r,t,n,l]));const o=p(Lm,"s_E7Cl50Dqx44",[l]),c=p(Dm,"s_NbI1zXhcvuw",[o,l]),u=N(p(Rm,"s_KqfPMFJrGX8",[l])),m=p(Nm,"s_NB8lZD2kb78",[s,u,r,t,l]),d=N(p(jm,"s_JjMUi4Cm1z0",[l]));return!l.open||!l.event?null:e("div",null,{class:"fixed inset-0 z-[65] flex items-center justify-center p-4 md:p-8 lg:p-12"},[e("div",null,{class:"absolute inset-0 bg-md-scrim/60 backdrop-blur-sm",onClick$:o},null,3,null),g(H,{variant:"elevated",padding:"p-0",class:"relative w-full h-full max-w-6xl flex flex-col bg-md-surface overflow-hidden shadow-2xl rounded-3xl border border-md-outline/10",children:[e("md-elevation",null,null,null,3,null),e("div",null,{class:"p-6 border-b border-md-outline/10 flex items-center justify-between bg-md-surface-container-low"},[e("div",null,{class:"flex-1 min-w-0"},[e("h2",null,{class:"text-xl font-black tracking-tight text-md-on-surface truncate"},i(f=>f.event.topic,[l],"p0.event.topic"),3,null),e("div",null,{class:"flex items-center gap-3 mt-1.5"},[e("span",null,{class:"text-[10px] font-mono font-bold text-md-on-surface-variant/60 uppercase tracking-widest"},Om(l.event.iso),1,null),e("div",{class:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-tighter border ${Pm(l.event.level)}`},null,i(f=>f.event.level,[l],"p0.event.level"),3,null),l.event.impact&&e("div",null,{class:"px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-tighter bg-md-error/10 text-md-error border border-md-error/20"},[i(f=>f.event.impact,[l],"p0.event.impact")," IMPACT"],3,"c9_0")],1,null)],1,null),g(L,{variant:"tonal",icon:"close",onClick$:o,class:"h-10 w-10 min-w-0 rounded-full",[a]:{variant:a,icon:a,onClick$:a,class:a}},3,"c9_1")],1,null),e("div",null,{class:"flex-1 overflow-y-auto p-6 space-y-8 no-scrollbar bg-md-surface-container-lowest"},[e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[g(H,{variant:"outlined",class:"bg-md-surface",children:[e("div",null,{class:"text-[10px] font-black uppercase tracking-[0.2em] text-md-primary mb-4"},"Source Origin",3,null),e("div",null,{class:"flex items-center gap-4"},[g(L,{variant:"tonal",onClick$:p(zm,"s_tuvvRldXtKU",[c,l]),class:"h-12 rounded-2xl",children:[e("span",null,{class:"text-lg mr-2"},"ðŸ¤–",3,null),e("span",null,{class:"font-black uppercase tracking-tighter"},["@",i(f=>f.event.actor,[l],"p0.event.actor")],3,null)],[a]:{variant:a,onClick$:a,class:a}},3,"c9_2"),e("div",null,{class:"flex flex-col"},[e("span",null,{class:"text-[9px] font-bold text-md-on-surface-variant/40 uppercase"},"Kind",3,null),e("span",null,{class:"text-xs font-black text-md-on-surface uppercase"},i(f=>f.event.kind,[l],"p0.event.kind"),3,null)],3,null)],1,null)],[a]:{variant:a,class:a}},1,"c9_3"),g(H,{variant:"outlined",class:"bg-md-surface",children:[e("div",null,{class:"text-[10px] font-black uppercase tracking-[0.2em] text-md-secondary mb-4"},"Orchestration Trace",3,null),e("div",null,{class:"space-y-2"},[l.event.trace_id&&e("div",null,{class:"flex items-center justify-between bg-md-surface-container px-3 py-2 rounded-xl border border-md-outline/5"},[e("span",null,{class:"text-[9px] font-bold text-md-on-surface-variant/40 uppercase"},"Trace ID",3,null),e("span",null,{class:"text-[10px] font-mono font-bold text-md-secondary truncate ml-4"},i(f=>f.event.trace_id,[l],"p0.event.trace_id"),3,null)],3,"c9_4"),l.event.parent_id&&e("div",null,{class:"flex items-center justify-between bg-md-surface-container px-3 py-2 rounded-xl border border-md-outline/5"},[e("span",null,{class:"text-[9px] font-bold text-md-on-surface-variant/40 uppercase"},"Parent ID",3,null),e("span",null,{class:"text-[10px] font-mono font-bold text-md-on-surface-variant/60 truncate ml-4"},i(f=>f.event.parent_id,[l],"p0.event.parent_id"),3,null)],3,"c9_5")],1,null)],[a]:{variant:a,class:a}},1,"c9_6")],1,null),e("div",null,{class:"space-y-6"},[l.event.semantic&&e("div",null,{class:"space-y-2"},[e("div",null,{class:"text-[10px] font-black uppercase tracking-[0.2em] text-md-on-surface-variant/40 ml-2"},"Semantic Assertion",3,null),g(H,{variant:"filled",class:"bg-md-primary/5 border border-md-primary/10 text-md-on-surface text-lg font-medium leading-relaxed italic p-6",children:['"',i(f=>f.event.semantic,[l],"p0.event.semantic"),'"'],[a]:{variant:a,class:a}},3,"c9_7")],1,"c9_8"),l.event.reasoning&&e("div",null,{class:"space-y-2"},[e("div",null,{class:"text-[10px] font-black uppercase tracking-[0.2em] text-md-on-surface-variant/40 ml-2"},"Internal Reasoning",3,null),e("div",null,{class:"text-sm text-md-on-surface-variant leading-relaxed bg-md-surface-container-low p-4 rounded-2xl border border-md-outline/5"},i(f=>f.event.reasoning,[l],"p0.event.reasoning"),3,null)],3,"c9_9")],1,null),u.value&&g(H,{variant:"elevated",class:"bg-md-surface border-t-4 border-t-md-warning p-6 shadow-lg",children:[e("div",null,{class:"flex items-center gap-2 mb-6"},[e("span",null,{class:"text-2xl"},"âš¡",3,null),e("div",null,{class:"text-[11px] font-black uppercase tracking-[0.2em] text-md-warning"},"Human-in-the-Loop Review Required",3,null)],3,null),e("div",null,{class:"space-y-4 mb-8"},u.value.actions?.map((f,v)=>e("div",null,{class:"p-4 rounded-2xl bg-md-surface-container-high border border-md-outline/10"},[e("div",null,{class:"flex items-center justify-between mb-2"},[e("span",null,{class:"text-sm font-black text-md-primary uppercase tracking-tight"},f.label||"Action Node",1,null),f.risk&&e("span",null,{class:"text-[9px] font-black px-2 py-0.5 rounded-full bg-md-error/10 text-md-error border border-md-error/20 uppercase"},["Risk: ",h(f,"risk")],1,"c9_10")],1,null),f.summary&&e("div",null,{class:"text-xs text-md-on-surface font-medium mb-3"},h(f,"summary"),1,"c9_11"),f.command&&e("pre",null,{class:"text-[10px] font-mono bg-black/40 p-3 rounded-xl text-md-secondary overflow-x-auto"},h(f,"command"),1,"c9_12")],1,v)),1,null),e("div",null,{class:"bg-md-surface-container-lowest p-6 rounded-3xl border border-md-outline/10 space-y-4"},[g(V,{type:"textarea",label:"Reviewer Context / Decision Note",placeholder:"Provide feedback for the next agent iteration...",get value(){return s.value},onInput$:p(Bm,"s_BRbveb6uGrs",[s]),[a]:{type:a,label:a,placeholder:a,value:i(f=>f.value,[s],"p0.value"),onInput$:a}},3,"c9_13"),e("div",null,{class:"flex items-center gap-3"},[g(L,{variant:"primary",get class(){return`h-12 px-8 rounded-2xl ${r.value==="approved"?"bg-md-success":""}`},get disabled(){return!n.value||r.value==="sending"},onClick$:p(Um,"s_HIgLA0VoJc0",[m]),children:"Authorize Action",[a]:{variant:a,class:i(f=>`h-12 px-8 rounded-2xl ${f.value==="approved"?"bg-md-success":""}`,[r],'`h-12 px-8 rounded-2xl ${p0.value==="approved"?"bg-md-success":""}`'),disabled:i((f,v)=>!v.value||f.value==="sending",[r,n],'!p1.value||p0.value==="sending"'),onClick$:a}},3,"c9_14"),g(L,{variant:"tonal",class:"h-12 px-8 rounded-2xl",get disabled(){return!n.value||r.value==="sending"},onClick$:p(Fm,"s_b0NoaD2vceQ",[m]),children:"Reject Plan",[a]:{variant:a,class:a,disabled:i((f,v)=>!v.value||f.value==="sending",[r,n],'!p1.value||p0.value==="sending"'),onClick$:a}},3,"c9_15"),e("div",null,{class:"ml-auto flex items-center gap-2"},[e("div",null,{class:i(f=>`w-2 h-2 rounded-full ${f.value?"bg-md-success":"bg-md-error"}`,[n],'`w-2 h-2 rounded-full ${p0.value?"bg-md-success":"bg-md-error"}`')},null,3,null),e("span",null,{class:"text-[10px] font-black uppercase tracking-widest opacity-40"},i(f=>f.value?"Live Link":"Bus Offline",[n],'p0.value?"Live Link":"Bus Offline"'),3,null)],3,null)],1,null)],1,null)],[a]:{variant:a,class:a}},1,"c9_16"),e("div",null,{class:"space-y-2"},[e("div",null,{class:"text-[10px] font-black uppercase tracking-[0.2em] text-md-on-surface-variant/40 ml-2"},"Raw NDJSON Object",3,null),e("pre",null,{class:"text-[10px] font-mono bg-md-surface-container-highest/50 p-6 rounded-3xl border border-md-outline/10 overflow-auto max-h-96 no-scrollbar text-md-on-surface-variant/80"},i(f=>f.value,[d],"p0.value"),3,null)],3,null)],1,null),e("div",null,{class:"p-4 border-t border-md-outline/10 bg-md-surface-container-low flex items-center justify-between"},[e("span",null,{class:"text-[10px] font-black uppercase tracking-widest text-md-on-surface-variant/40 ml-2"},["Event UID: ",i(f=>f.event.id||"anonymous",[l],'p0.event.id||"anonymous"')],3,null),e("div",null,{class:"flex items-center gap-4 text-[10px] font-bold text-md-on-surface-variant/30 uppercase tracking-tighter"},[e("span",null,null,"Press [Esc] to close",3,null),e("div",null,{class:"w-1 h-1 rounded-full bg-md-outline/20"},null,3,null),e("span",null,null,"PBMINT System V4",3,null)],3,null)],3,null)],[a]:{variant:a,padding:a,class:a}},1,"c9_17")],1,"c9_18")},Gm=E(p(qm,"s_BXxruhHqpX0")),Vm=12,Hm=320,Wm=48;function Ym(l,t,n,s){const r=s+n/2,o=l+t/2,c=Math.abs(r-o),u=n/2;return 1-Math.min(c/u,1)*.3}const Jm=()=>{const[l,t,n]=b();l.value=!0,t.value=!1,n.unreadCount=0},Km=()=>{const[l,t]=b();l.value=!1,t.value=!1},Qm=()=>{const[l,t]=b();l.value||(t.value=!0)},Xm=()=>{const[l,t,n]=b();n.detailOpen||(t.value=!1,l.value=!1)},Zm=()=>{const[l,t]=b();l.value&&(t.value=l.value.scrollTop)},eg=l=>{const[t]=b();t.selectedEvent=l,t.detailOpen=!0},lg=()=>{const[l]=b();l.detailOpen=!1,l.selectedEvent=null},tg=l=>{const[t]=b();t.onNavigateToActor$?.(l),handleCloseAll()},ng=l=>{const[t]=b();t.onNavigateToTopic$?.(l),handleCloseAll()},sg=()=>{const[l]=b();l.events=[],l.unreadCount=0},ag=l=>{Pe("comp:notification-sidepanel");const t=y(!1),n=y(!1),s=y(0),r=y(0),o=y(),c=y(),u=B({events:[],busClient:null,connected:!1,selectedEvent:null,detailOpen:!1,unreadCount:0}),m=p(Jm,"s_t6pfghK5vJA",[t,n,u]),d=p(Km,"s_9kpbbzJRLug",[t,n]),f=p(Qm,"s_DCuBWdxaOG4",[t,n]),v=p(Xm,"s_fSEuOT0pUjI",[t,n,u]),x=p(Zm,"s_Vh59nCak3Yg",[c,s]),S=p(eg,"s_C8jNftXqO4I",[u]),M=p(lg,"s_IoU3vyII1ZY",[u]),$=p(tg,"s_mh6G0FaA3N0",[l]),w=p(ng,"s_9F0mIpoO99A",[l]),k=p(sg,"s_6mc88hAg7fc",[u]);D(_("s_aUft2VN1aks",[t,l,u,r])),D(_("s_OltnnubcMTc",[t,u]));const I=t.value?Hm:n.value?Wm:Vm;return g(ue,{children:[e("div",{ref:o,style:{width:`${I}px`}},{class:"fixed top-0 right-0 bottom-0 z-[60] transition-all duration-300 ease-out pointer-events-auto",onMouseLeave$:v},[e("div",{class:`absolute left-0 top-1/2 -translate-y-1/2 w-2 h-24 rounded-l-full bg-md-primary/40 backdrop-blur-md cursor-pointer transition-all duration-300 hover:w-4 hover:bg-md-primary shadow-lg ${t.value?"opacity-0 scale-0":"opacity-100 scale-100"}`},{role:"button","aria-label":"Notifications","data-testid":"notification-trigger",onClick$:m,onMouseEnter$:f},u.unreadCount>0&&e("div",null,{class:"absolute -left-2 -top-2 w-5 h-5 rounded-full bg-md-error text-md-on-error text-[10px] font-bold flex items-center justify-center shadow-md border border-md-error-container"},i(T=>T.unreadCount>9?"9+":T.unreadCount,[u],'p0.unreadCount>9?"9+":p0.unreadCount'),3,"CW_0"),1,null),e("div",{class:`absolute inset-0 left-2 bg-md-surface-container-high/95 border-l border-[var(--glass-border)] backdrop-blur-xl flex flex-col transition-all duration-300 shadow-2xl glass-sidebar-right-glow ${t.value||n.value?"translate-x-0":"translate-x-full"}`},{"data-testid":"notification-sidepanel"},[e("md-elevation",null,null,null,3,null),e("div",null,{class:"p-4 border-b border-[var(--glass-border)] flex items-center justify-between bg-md-surface-container-lowest/50"},[e("div",null,{class:"flex items-center gap-3"},[g(q,{level:"span",color:"magenta",size:"sm",animation:"flicker",children:"Pulse Feed",[a]:{level:a,color:a,size:a,animation:a}},3,"CW_1"),e("div",null,{class:i(T=>`w-2 h-2 rounded-full ${T.connected?"bg-md-success animate-pulse":"bg-md-outline"}`,[u],'`w-2 h-2 rounded-full ${p0.connected?"bg-md-success animate-pulse":"bg-md-outline"}`')},null,3,null)],1,null),e("div",null,{class:"flex items-center gap-1"},[g(L,{variant:"text",class:"h-8 text-[10px] uppercase font-bold tracking-tighter",onClick$:k,children:"Clear",[a]:{variant:a,class:a,onClick$:a}},3,"CW_2"),g(L,{variant:"icon",icon:"close",class:"h-8 w-8",onClick$:d,[a]:{variant:a,icon:a,class:a,onClick$:a}},3,"CW_3")],1,null)],1,null),e("div",{ref:c},{class:"flex-1 overflow-y-auto no-scrollbar p-3 space-y-3 bg-md-surface-container-low/20",onScroll$:x},u.events.length===0?e("div",null,{class:"h-full flex flex-col items-center justify-center text-md-on-surface-variant/30 space-y-2 opacity-50"},[e("md-icon",null,{class:"text-4xl"},"notifications_off",3,null),e("div",null,{class:"text-[10px] font-bold uppercase tracking-widest"},"No Active Events",3,null)],3,"CW_4"):u.events.map((T,z)=>{const J=z*102,ne=Ym(J,90,r.value,s.value);return g(Mm,{event:T,scale:ne,onViewDetails$:S,[a]:{onViewDetails$:a}},3,`${T.id||""}-${T.iso}-${z}`)}),1,null),e("div",null,{class:"p-3 border-t border-[var(--glass-border)] text-[9px] font-bold uppercase tracking-tighter text-md-on-surface-variant/40 flex items-center justify-between bg-md-surface-container-low"},[e("span",null,null,["Toggle with ",e("span",null,{class:"text-md-primary"},"[N]",3,null)],3,null),e("span",null,{class:"mono tracking-normal"},[i(T=>T.events.length,[u],"p0.events.length")," stored"],3,null)],3,null)],1,null)],1,null),g(Gm,{get open(){return u.detailOpen},get event(){return u.selectedEvent},onClose$:M,onNavigateToActor$:$,onNavigateToTopic$:w,[a]:{open:i(T=>T.detailOpen,[u],"p0.detailOpen"),event:i(T=>T.selectedEvent,[u],"p0.selectedEvent"),onClose$:a,onNavigateToActor$:a,onNavigateToTopic$:a}},3,"CW_5")]},1,"CW_6")},rg=E(p(ag,"s_Emg5SHUE2A4")),og=l=>{const t=y("lattice"),n=[{id:"ev-1",source:"PBTEST",kind:"test",message:"E2E verification of core loops",timestamp:"2025-12-28T01:00Z",status:"passed"},{id:"ev-2",source:"Replisome",kind:"log",message:"Signed manifest detected in Rhizome",timestamp:"2025-12-28T00:45Z",status:"passed"},{id:"ev-3",source:"Gemini SAGENT",kind:"human_verification",message:"Architecture review completed",timestamp:"2025-12-27T23:30Z",status:"passed"},{id:"ev-4",source:"InferCell",kind:"theoretical",message:"Projected scalability in high-concurrency swarms",timestamp:"2025-12-28T02:00Z",status:"theoretical"}];return e("div",null,{class:"fixed inset-0 z-[150] flex items-center justify-center bg-black/80 backdrop-blur-xl p-8"},e("div",null,{class:"glass-surface-overlay bg-card/95 border border-[var(--glass-border)] rounded-xl w-full max-w-5xl h-full max-h-[800px] flex flex-col shadow-2xl overflow-hidden"},[e("div",null,{class:"p-6 border-b border-[var(--glass-border)] flex items-center justify-between bg-muted/5"},[e("div",null,null,[e("div",null,{class:"text-[10px] text-primary font-mono tracking-widest uppercase"},"Proof Canvas",3,null),e("h2",null,{class:"text-2xl font-bold tracking-tight"},[i(s=>s.itemName,[l],"p0.itemName")," ",e("span",null,{class:"text-muted-foreground font-mono text-sm opacity-50"},["[",i(s=>s.itemId,[l],"p0.itemId"),"]"],3,null)],3,null)],3,null),e("button",{onClick$:l.onClose$},{class:"p-2 rounded-full hover:bg-muted transition-colors text-muted-foreground hover:text-foreground"},e("svg",null,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",null,{d:"M18 6 6 18"},null,3,null),e("path",null,{d:"m6 6 12 12"},null,3,null)],3,null),2,null)],1,null),e("div",null,{class:"px-6 py-2 border-b border-[var(--glass-border-subtle)] flex gap-4 text-xs font-mono"},[e("button",null,{class:i(s=>`pb-2 transition-all border-b-2 ${s.value==="lattice"?"border-primary text-primary":"border-transparent text-muted-foreground"}`,[t],'`pb-2 transition-all border-b-2 ${p0.value==="lattice"?"border-primary text-primary":"border-transparent text-muted-foreground"}`'),onClick$:_("s_2shDEg1hTZo",[t])},"Proof Lattice (DAG)",3,null),e("button",null,{class:i(s=>`pb-2 transition-all border-b-2 ${s.value==="evidence"?"border-primary text-primary":"border-transparent text-muted-foreground"}`,[t],'`pb-2 transition-all border-b-2 ${p0.value==="evidence"?"border-primary text-primary":"border-transparent text-muted-foreground"}`'),onClick$:_("s_UZK6UKnwhlg",[t])},["Evidence Log (",h(n,"length"),")"],1,null),e("button",null,{class:i(s=>`pb-2 transition-all border-b-2 ${s.value==="gaps"?"border-primary text-primary":"border-transparent text-muted-foreground"}`,[t],'`pb-2 transition-all border-b-2 ${p0.value==="gaps"?"border-primary text-primary":"border-transparent text-muted-foreground"}`'),onClick$:_("s_j48MU9UMWEM",[t])},"Epistemic Gaps",3,null)],1,null),e("div",null,{class:"flex-1 overflow-hidden flex"},[e("main",null,{class:"flex-1 overflow-y-auto p-6"},[t.value==="lattice"&&e("div",null,{class:"h-full flex items-center justify-center relative"},[e("div",null,{class:"text-center"},[e("div",null,{class:"text-4xl mb-4"},"ðŸ•¸ï¸",3,null),e("div",null,{class:"text-sm font-mono text-muted-foreground"},"Lattice Rendering Engine (WIP)",3,null),e("div",null,{class:"text-[10px] text-muted-foreground mt-2 opacity-50"},"Visualizing causal dependencies between evidence nodes",3,null)],3,null),e("div",null,{class:"absolute inset-0 pointer-events-none opacity-20"},[e("div",null,{class:"absolute top-1/4 left-1/4 w-32 h-32 border border-primary rounded-full animate-pulse"},null,3,null),e("div",null,{class:"absolute bottom-1/4 right-1/4 w-48 h-48 border border-cyan-500 rounded-full animate-pulse [animation-delay:1s]"},null,3,null)],3,null)],3,"ui_0"),t.value==="evidence"&&e("div",null,{class:"space-y-4"},n.map(s=>e("div",null,{class:"p-4 rounded-lg bg-muted/10 border border-border/30 flex gap-4 items-start hover:bg-muted/20 transition-colors"},[e("div",{class:`mt-1 w-2 h-2 rounded-full ${s.status==="passed"?"bg-green-500":"bg-blue-500 animate-pulse"}`},null,null,3,null),e("div",null,{class:"flex-1"},[e("div",null,{class:"flex items-center justify-between mb-1"},[e("span",null,{class:"text-[10px] font-mono text-primary"},h(s,"source"),1,null),e("span",null,{class:"text-[10px] text-muted-foreground"},new Date(s.timestamp).toLocaleString(),1,null)],1,null),e("div",null,{class:"text-sm font-medium mb-1"},h(s,"message"),1,null),e("div",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-black/40 inline-block text-muted-foreground border border-[var(--glass-border-subtle)]"},s.kind.toUpperCase(),1,null)],1,null)],1,s.id)),1,"ui_1"),t.value==="gaps"&&e("div",null,{class:"p-8 border-2 border-dashed border-amber-500/20 rounded-xl bg-amber-500/5 text-center"},[e("div",null,{class:"text-3xl mb-4"},"ðŸ•³ï¸",3,null),e("h3",null,{class:"text-lg font-bold text-amber-400 mb-2"},"Detected Epistemic Gaps",3,null),e("p",null,{class:"text-sm text-muted-foreground max-w-md mx-auto mb-6"},"The following areas lack sufficient hard evidence and rely on theoretical projections or parent lineage assumptions.",3,null),e("ul",null,{class:"text-left text-xs font-mono space-y-2 max-w-lg mx-auto"},[e("li",null,{class:"p-2 bg-black/40 rounded border border-amber-500/20 text-amber-200/70"},"âš ï¸ CONTEXT_DRIFT: No local verification of SOTA integration latency.",3,null),e("li",null,{class:"p-2 bg-black/40 rounded border border-amber-500/20 text-amber-200/70"},"âš ï¸ RESOURCE_SHADOW: Actual token consumption metrics are 15m stale.",3,null)],3,null)],3,"ui_2")],1,null),e("aside",null,{class:"w-80 border-l border-border/50 p-6 bg-muted/5 flex flex-col gap-6 overflow-y-auto"},[e("section",null,null,[e("h4",null,{class:"text-[10px] font-mono text-muted-foreground uppercase tracking-widest mb-3"},"Overall Confidence",3,null),e("div",null,{class:"flex items-end gap-2 mb-2"},[e("div",null,{class:"text-4xl font-bold text-primary"},"92%",3,null),e("div",null,{class:"text-xs text-green-500 mb-1"},"â†‘ 2.4%",3,null)],3,null),e("div",null,{class:"w-full bg-muted rounded-full h-1.5"},e("div",null,{class:"bg-primary h-full rounded-full w-[92%]"},null,3,null),3,null)],3,null),e("section",null,null,[e("h4",null,{class:"text-[10px] font-mono text-muted-foreground uppercase tracking-widest mb-3"},"Actions",3,null),e("div",null,{class:"flex flex-col gap-2"},[e("button",null,{class:"w-full py-2 px-4 rounded bg-primary text-primary-foreground text-xs font-bold hover:opacity-90 transition-opacity"},"FORCE VERIFICATION",3,null),e("button",null,{class:"w-full py-2 px-4 rounded border border-border text-xs font-bold hover:bg-muted transition-colors"},"EXPORT RHIZOME PROOF",3,null)],3,null)],3,null),e("section",null,null,[e("h4",null,{class:"text-[10px] font-mono text-muted-foreground uppercase tracking-widest mb-3"},"Lineage",3,null),e("div",null,{class:"text-xs font-mono space-y-2"},[e("div",null,{class:"flex justify-between"},[e("span",null,{class:"text-muted-foreground"},"Origin",3,null),e("span",null,{class:"text-foreground"},"Sextet v1.2",3,null)],3,null),e("div",null,{class:"flex justify-between"},[e("span",null,{class:"text-muted-foreground"},"Gen",3,null),e("span",null,{class:"text-foreground"},"42",3,null)],3,null),e("div",null,{class:"flex justify-between"},[e("span",null,{class:"text-muted-foreground"},"HGT Splice",3,null),e("span",null,{class:"text-cyan-400"},"active",3,null)],3,null)],3,null)],3,null)],3,null)],1,null)],1,null),1,"ui_3")},ig=E(p(og,"s_lVfF43tOcgc")),ug=()=>{const l=y();return D(_("s_2rIt3rt54KY",[l])),e("div",null,{class:"header-logo-orb","aria-hidden":"true",style:{width:"64px",height:"64px",flexShrink:0,borderRadius:"50%",overflow:"hidden"}},e("canvas",{ref:l},{style:{width:"100%",height:"100%"}},null,3,null),1,"5l_0")},cg=E(p(ug,"s_BKlCRMyUHL8")),Ne={services:[{id:"omega-heartbeat",name:"Omega Heartbeat",glyph:"ðŸ’“",status:"active"},{id:"omega-dispatcher",name:"Omega Dispatcher",glyph:"ðŸ“¤",status:"active"},{id:"omega-guardian",name:"Omega Guardian",glyph:"ðŸ›¡ï¸",status:"active"},{id:"bus-bridge",name:"Bus Bridge",glyph:"ðŸŒ‰",status:"active"},{id:"dashboard",name:"Dashboard",glyph:"ðŸ“Š",status:"active"},{id:"tools-api",name:"Tools API",glyph:"ðŸ”Œ",status:"active"},{id:"vps-session",name:"VPS Session",glyph:"ðŸ–¥ï¸",status:"active"},{id:"browser-session",name:"Browser Session",glyph:"ðŸŒ",status:"active"},{id:"dialogosd",name:"Dialogos Daemon",glyph:"ðŸ’¬",status:"active"},{id:"dialogos-indexer",name:"Dialogos Indexer",glyph:"ðŸ”",status:"active"},{id:"codemaster",name:"Replisome (Codemaster)",glyph:"ðŸ§¬",status:"active"},{id:"qa-observer",name:"QA Observer",glyph:"ðŸ‘ï¸",status:"active"},{id:"qa-executor",name:"QA Executor",glyph:"âš¡",status:"active"},{id:"vnc",name:"VNC Server",glyph:"ðŸ–¼ï¸",status:"active"},{id:"websockify",name:"Websockify",glyph:"ðŸ”—",status:"active"}],tools:[{id:"ckin_report",name:"CKIN Report",glyph:"ðŸ“‹",category:"status"},{id:"lanes_report",name:"Lanes Report",glyph:"ðŸ›¤ï¸",category:"coordination"},{id:"realagents_operator",name:"REALAGENTS",glyph:"ðŸ¤–",category:"dispatch"},{id:"pbtest_operator",name:"PBTEST",glyph:"âœ…",category:"verification"},{id:"pbcmaster_operator",name:"PBREPLISOME",glyph:"ðŸ§¬",category:"gating"},{id:"pbdeep_operator",name:"PBDEEP",glyph:"ðŸ”¬",category:"forensics"},{id:"pbpair_operator",name:"PBPAIR",glyph:"ðŸ‘¥",category:"fallback"},{id:"pbresume_operator",name:"PBRESUME",glyph:"â–¶ï¸",category:"resume"},{id:"pbhygiene_operator",name:"PBHYGIENE",glyph:"ðŸ§¹",category:"cleanup"},{id:"lens_collimator",name:"Lens Collimator",glyph:"ðŸ”­",category:"routing"},{id:"agent_conductor",name:"Agent Conductor",glyph:"ðŸŽ¼",category:"orchestration"},{id:"graphiti_bridge",name:"Graphiti Bridge",glyph:"ðŸ•¸ï¸",category:"kg"},{id:"dialogos_search",name:"Dialogos Search",glyph:"ðŸ”",category:"search"},{id:"task_ledger",name:"Task Ledger",glyph:"ðŸ“’",category:"tracking"}],protocols:[{id:"dkin_v28",name:"DKIN v28 (CAGENT)",glyph:"ðŸ›ï¸",status:"active"},{id:"dkin_v26",name:"DKIN v26 (Replisome)",glyph:"ðŸ§¬",status:"active"},{id:"dkin_v25",name:"DKIN v25 (Lifecycle)",glyph:"ðŸ”„",status:"active"},{id:"paip_v14",name:"PAIP v14 (Isolation)",glyph:"ðŸ”’",status:"active"},{id:"ckin_v17",name:"CKIN v17 (Hygiene)",glyph:"ðŸ§¹",status:"active"},{id:"cagent_v1",name:"CAGENT v1 (Citizen)",glyph:"ðŸŽ–ï¸",status:"active"},{id:"replisome_v1",name:"Replisome v1",glyph:"ðŸ§¬",status:"active"}],stack:[{id:"rhizome",name:"RHIZOME",glyph:"ðŸŒ¿",desc:"Immutable evidence (bus, artifacts)"},{id:"dna",name:"DNA",glyph:"ðŸ§¬",desc:"Genotype (specs, protocols)"},{id:"replisome",name:"REPLISOME",glyph:"ðŸ”„",desc:"Replication gatekeeper"},{id:"ribosome",name:"RIBOSOME",glyph:"âš—ï¸",desc:"Translation engine"},{id:"phenotype",name:"PHENOTYPE",glyph:"ðŸ¦‹",desc:"Runtime manifestation"},{id:"cytoplasm",name:"CYTOPLASM",glyph:"ðŸ§«",desc:"Agent clades"}],external:[{id:"os-linux",name:"Linux Kernel",glyph:"ðŸ§",type:"OS",desc:"Debian/Ubuntu base"},{id:"runtime-node",name:"Node.js",glyph:"ðŸŸ©",type:"Runtime",desc:"V8 JavaScript Engine"},{id:"runtime-python",name:"Python",glyph:"ðŸ",type:"Runtime",desc:"3.12+ Ecosystem"},{id:"oss-vite",name:"Vite",glyph:"âš¡",type:"OSS",desc:"Build Tool"},{id:"oss-qwik",name:"Qwik",glyph:"âš¡",type:"OSS",desc:"Resumable Framework"},{id:"oss-lit",name:"Lit",glyph:"ðŸ”¥",type:"OSS",desc:"Web Components"},{id:"oss-three",name:"Three.js",glyph:"ðŸ§Š",type:"OSS",desc:"3D Graphics"},{id:"sota-openai",name:"OpenAI",glyph:"ðŸ§ ",type:"SOTA",desc:"GPT-4o/o1"},{id:"sota-anthropic",name:"Anthropic",glyph:"ðŸ§ ",type:"SOTA",desc:"Claude 3.5 Sonnet"},{id:"sota-google",name:"Google",glyph:"ðŸ§ ",type:"SOTA",desc:"Gemini 1.5 Pro"},{id:"proto-mcp",name:"MCP",glyph:"ðŸ”Œ",type:"Protocol",desc:"Model Context Protocol"},{id:"proto-a2a",name:"A2A",glyph:"ðŸ¤–",type:"Protocol",desc:"Agent-to-Agent"}],recommended:[{id:"rec-ohmyopencode",name:"OhMyOpenCode",glyph:"ðŸ§¬",type:"Evolution",desc:"Recursive code self-evolution",version:"0.0.1-alpha",status:"mutating",confidence:.7},{id:"rec-langgraph",name:"LangGraph",glyph:"ðŸ•¸ï¸",type:"Orchestration",desc:"Cyclic stateful chains",version:"0.0.15",updateAvailable:!0,confidence:.92},{id:"rec-autogen",name:"AutoGen",glyph:"ðŸ¤",type:"Multi-Agent",desc:"Conversational agents",version:"0.2.0",confidence:.88},{id:"rec-llamaindex",name:"LlamaIndex",glyph:"ðŸ—‚ï¸",type:"Data",desc:"Context augmentation",version:"0.9.0",updateAvailable:!0,confidence:.95},{id:"rec-dspy",name:"DSPy",glyph:"ðŸ“¢",type:"Prompting",desc:"Declarative self-improving",version:"2.1.0",confidence:.82},{id:"rec-memgpt",name:"MemGPT",glyph:"ðŸ§ ",type:"Memory",desc:"OS-like memory management",version:"0.3.0",confidence:.78},{id:"rec-litellm",name:"LiteLLM",glyph:"ðŸ”Œ",type:"Gateway",desc:"Unified API gateway",version:"1.0.0",status:"stable",confidence:.98},{id:"rec-openinterpreter",name:"Open Interpreter",glyph:"ðŸ’»",type:"Execution",desc:"Local code execution",version:"0.1.0",updateAvailable:!0,status:"active",confidence:.85}]},dg=12,pg=420,mg=48,gg=l=>{if(!l||!l.topic)return null;const t=l.data||{};let n="unknown",s=0,r="metric";if(t.component)n=String(t.component),r="component",s=Number(t.duration)||0;else if(t.module)n=String(t.module),r="module",s=Number(t.duration)||0;else if(t.tool)n=String(t.tool),r="tool",s=Number(t.duration)||0;else if(l.topic.includes("error"))n=String(t.message||t.error||l.topic).slice(0,100),r="error";else if(l.topic.startsWith("telemetry."))n=l.topic.replace("telemetry.",""),r="metric",t.duration&&(s=Number(t.duration));else if(l.topic.startsWith("omega."))n=l.topic.replace("omega.",""),r="metric";else return null;let o="OK";return r==="error"?o="ERROR":s>0&&(o=s<500?"FAST":s<2e3?"OK":"SLOW"),{id:l.id||`${Date.now()}-${Math.random()}`,name:n,type:r,duration:s,timestamp:t.timestamp?Number(t.timestamp):Date.now(),status:o,correlationId:String(t.url||t.correlationId||""),topic:l.topic}},vg=(l,t)=>{const[n,s]=b();console.log(`[INSTALL] ${l} in mode: ${t}`),s.busClient&&s.busClient.emit("system.module.install",{id:l,mode:t,timestamp:Date.now()}),n.value=null},bg=l=>{const[t]=b();console.log(`[UPDATE] Checking ${l}...`),t.busClient&&t.busClient.emit("system.module.update.check",{id:l,timestamp:Date.now()}),alert(`Checking registry for ${l} latest... (Simulated)`)},fg=()=>{const[l,t]=b();l.value=!0,t.value=!1},xg=()=>{const[l,t]=b();l.value=!1,t.value=!1},hg=()=>{const[l,t]=b();l.value||(t.value=!0)},yg=()=>{const[l,t]=b();t.value=!1,l.value=!1},_g=l=>{const[t,n]=b(),s=gg(l);if(s){if(n.stats.totalLoaded++,s.status==="ERROR"&&n.stats.errors++,s.duration>0){const r=n.stats.totalLoaded-1,o=(n.stats.avgDuration*r+s.duration)/n.stats.totalLoaded;n.stats.avgDuration=Math.round(o);const c=parseFloat(n.stats.slowest.split("ms")[0])||0;s.duration>c&&(n.stats.slowest=`${s.duration}ms (${s.name.slice(0,20)})`)}n.segments=[s,...n.segments].slice(0,t.maxItems??200)}},wg=()=>{const[l]=b();l.value=null},kg=l=>{W();const t=y(!1),n=y(!1),s=y(),r=y("stack"),o=y(null),c=y(null),u=B({segments:[],busClient:null,connected:!1,stats:{totalLoaded:0,avgDuration:0,slowest:"-",errors:0}}),m=[{id:"stack",label:"Stack",glyph:"ðŸ§¬"},{id:"services",label:"Services",glyph:"âš™ï¸"},{id:"tools",label:"Tools",glyph:"ðŸ”§"},{id:"protocols",label:"Protocols",glyph:"ðŸ“œ"},{id:"external",label:"Ext",glyph:"ðŸŒ"},{id:"recommended",label:"Rec",glyph:"âœ¨"},{id:"live",label:"Live",glyph:"ðŸ“¡"}],d=p(vg,"s_r7j1g0dE87M",[o,u]),f=p(bg,"s_60TbFQXTSWs",[u]),v=p(fg,"s_yPzQ7Tzbx2E",[t,n]),x=p(xg,"s_DU6gPUotE6Y",[t,n]),S=p(hg,"s_ij0Mr20pWGY",[t,n]),M=p(yg,"s_BU9x2h58Y04",[t,n]);D(_("s_KtPnhmp0iGw",[p(_g,"s_EDzPW4o7iAQ",[l,u]),l,u])),D(_("s_kQ5yaF9573U",[t,n]));const w=t.value?pg:n.value?mg:dg;return e("div",{ref:s,style:{width:`${w}px`}},{"data-testid":"code-segment-panel",class:"fixed top-0 left-0 bottom-0 z-[100] transition-all duration-300 ease-out pointer-events-auto",onMouseLeave$:M},[e("div",{class:`absolute right-0 top-1/2 -translate-y-1/2 w-3 h-24 rounded-r-lg bg-card/80 border border-l-0 border-[var(--glass-border)] backdrop-blur-sm cursor-pointer flex items-center justify-center transition-all duration-200 hover:bg-card hover:w-4 hover:border-[var(--glass-border-hover)] ${t.value?"opacity-50":"opacity-100"}`},{"data-testid":"code-segment-toggle",onClick$:v,onMouseEnter$:S},[e("div",null,{class:i(k=>`text-muted-foreground text-xs transition-transform duration-200 ${k.value?"":"rotate-180"}`,[t],'`text-muted-foreground text-xs transition-transform duration-200 ${p0.value?"":"rotate-180"}`')},"<",3,null),u.stats.totalLoaded>0&&!t.value&&e("div",null,{class:"absolute -right-1 -top-1 w-5 h-5 rounded-full bg-primary text-primary-foreground text-[10px] font-bold flex items-center justify-center"},i(k=>k.stats.totalLoaded>99?"99+":k.stats.totalLoaded,[u],'p0.stats.totalLoaded>99?"99+":p0.stats.totalLoaded'),3,"3l_0")],1,null),o.value&&e("div",null,{class:"fixed inset-0 z-[110] flex items-center justify-center bg-black/50 backdrop-blur-sm"},e("div",null,{class:"bg-card border border-[var(--glass-border)] rounded-lg p-4 w-80 shadow-2xl glass-surface-overlay"},[e("h3",null,{class:"text-sm font-bold mb-2"},["Install ",i(k=>k.value.name,[o],"p0.value.name")],3,null),e("p",null,{class:"text-xs text-muted-foreground mb-4"},"Choose installation mode:",3,null),e("div",null,{class:"space-y-2"},[e("button",null,{class:"w-full text-left p-2 rounded hover:bg-muted/50 border border-[var(--glass-border)] group glass-dropdown-item",onClick$:_("s_iZ6nsUWGbBg",[d,o])},[e("div",null,{class:"text-xs font-bold group-hover:text-primary"},"ðŸ§ª Experimental (Ephemeral)",3,null),e("div",null,{class:"text-[10px] text-muted-foreground"},"Runs in PAIP clone. No config changes.",3,null)],3,null),e("button",null,{class:"w-full text-left p-2 rounded hover:bg-muted/50 border border-[var(--glass-border)] group glass-dropdown-item",onClick$:_("s_KyhHclCn1Ls",[d,o])},[e("div",null,{class:"text-xs font-bold group-hover:text-primary"},"ðŸŒ¿ Permanent (Rhizome)",3,null),e("div",null,{class:"text-[10px] text-muted-foreground"},"Writes to manifest. Encoded in Quine layer.",3,null)],3,null)],3,null),e("div",null,{class:"mt-4 flex justify-end"},e("button",null,{class:"text-xs px-3 py-1 rounded hover:bg-muted text-muted-foreground",onClick$:_("s_PRBORAueIO4",[o])},"Cancel",3,null),3,null)],3,null),3,"3l_1"),e("div",{class:`absolute inset-0 right-3 bg-card/95 border-r border-[var(--glass-border)] backdrop-blur-md flex flex-col transition-opacity duration-200 glass-sidebar-left-glow ${t.value||n.value?"opacity-100":"opacity-0 pointer-events-none"}`},null,[e("div",null,{class:"p-3 border-b border-[var(--glass-border)] flex items-center justify-between flex-shrink-0"},[e("div",null,{class:"flex items-center gap-2"},[e("div",null,{class:"w-8 h-8 relative overflow-hidden rounded-full mr-2"},g(cg,null,3,"3l_2"),1,null),e("h3",null,{class:"text-sm font-bold text-primary font-mono"},"AI OS INVENTORY",3,null),e("span",null,{class:i(k=>`w-2 h-2 rounded-full ${k.connected?"bg-green-500 animate-pulse":"bg-muted"}`,[u],'`w-2 h-2 rounded-full ${p0.connected?"bg-green-500 animate-pulse":"bg-muted"}`')},null,3,null)],1,null),e("button",null,{type:"button",class:"text-xs px-2 py-1 rounded hover:bg-muted/50 text-muted-foreground",onClick$:x},"Ã—",3,null)],1,null),e("div",null,{class:"p-2 border-b border-[var(--glass-border-subtle)] bg-muted/10 flex flex-wrap gap-1"},m.map(k=>e("button",{class:`text-[10px] px-2 py-1 rounded font-mono transition-colors ${r.value===k.id?"bg-primary text-primary-foreground":"bg-black/30 text-muted-foreground hover:bg-muted/50"}`,onClick$:_("s_NfHFhp40afk",[r,k])},{type:"button"},[h(k,"glyph")," ",h(k,"label")],0,k.id)),1,null),e("div",null,{class:"flex-1 overflow-y-auto p-2 space-y-1 font-mono"},[r.value==="stack"&&e("div",null,{class:"space-y-2"},Ne.stack.map((k,I)=>e("div",null,{class:"relative p-2 rounded border border-[var(--glass-border-subtle)] hover:bg-muted/20 hover:border-[var(--glass-border)] transition-colors"},[e("div",{style:{opacity:1-I*.15}},{class:"absolute left-0 top-0 bottom-0 w-1 rounded-l bg-gradient-to-b from-emerald-500 via-cyan-500 to-purple-500"},null,3,null),e("div",null,{class:"pl-2 flex items-center gap-2"},[e("span",null,{class:"text-lg"},h(k,"glyph"),1,null),e("div",null,{class:"flex-1"},[e("div",null,{class:"text-xs font-bold text-foreground"},h(k,"name"),1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},h(k,"desc"),1,null)],1,null)],1,null)],1,k.id)),1,"3l_3"),r.value==="services"&&e("div",null,{class:"space-y-1"},Ne.services.map(k=>e("div",null,{class:"relative p-2 rounded border border-[var(--glass-border-subtle)] hover:bg-muted/20 hover:border-[var(--glass-border)] transition-colors"},[e("div",null,{class:"absolute left-0 top-0 bottom-0 w-1 rounded-l bg-emerald-500"},null,3,null),e("div",null,{class:"pl-2 flex items-center gap-2"},[e("span",null,null,h(k,"glyph"),1,null),e("div",null,{class:"flex-1 truncate"},[e("div",null,{class:"text-xs font-bold text-foreground"},h(k,"name"),1,null),e("div",null,{class:"flex items-center gap-2 mt-0.5"},[e("div",null,{class:"flex gap-0.5 items-end h-2 w-12"},[e("div",null,{class:"w-1 bg-emerald-500/40 h-[40%]"},null,3,null),e("div",null,{class:"w-1 bg-emerald-500/60 h-[70%]"},null,3,null),e("div",null,{class:"w-1 bg-emerald-500 h-[50%]"},null,3,null),e("div",null,{class:"w-1 bg-emerald-500/80 h-[90%] animate-pulse"},null,3,null)],3,null),e("span",null,{class:"text-[8px] text-muted-foreground"},"Metabolism: Active",3,null)],3,null)],1,null),e("span",null,{class:"text-[9px] px-1 rounded bg-emerald-900/50 text-emerald-300 border border-emerald-500/30"},"HEALTHY",3,null)],1,null)],1,k.id)),1,"3l_4"),r.value==="tools"&&e("div",null,{class:"space-y-1"},Ne.tools.map(k=>e("div",null,{class:"relative p-2 rounded border border-[var(--glass-border-subtle)] hover:bg-muted/20 hover:border-[var(--glass-border)] transition-colors"},[e("div",null,{class:"absolute left-0 top-0 bottom-0 w-1 rounded-l bg-cyan-500"},null,3,null),e("div",null,{class:"pl-2 flex items-center gap-2"},[e("span",null,null,h(k,"glyph"),1,null),e("div",null,{class:"flex-1 truncate"},e("span",null,{class:"text-xs font-bold text-foreground"},h(k,"name"),1,null),1,null),e("span",null,{class:"text-[9px] px-1 rounded bg-cyan-900/50 text-cyan-300"},h(k,"category"),1,null)],1,null)],1,k.id)),1,"3l_5"),r.value==="protocols"&&e("div",null,{class:"space-y-1"},Ne.protocols.map(k=>e("div",null,{class:"relative p-2 rounded border border-[var(--glass-border-subtle)] hover:bg-muted/20 hover:border-[var(--glass-border)] transition-colors"},[e("div",{class:`absolute left-0 top-0 bottom-0 w-1 rounded-l ${k.status==="active"?"bg-purple-500":"bg-amber-500"}`},null,null,3,null),e("div",null,{class:"pl-2 flex items-center gap-2"},[e("span",null,null,h(k,"glyph"),1,null),e("div",null,{class:"flex-1 truncate"},e("span",null,{class:"text-xs font-bold text-foreground"},h(k,"name"),1,null),1,null),e("span",{class:`text-[9px] px-1 rounded ${k.status==="active"?"bg-purple-900/50 text-purple-300":"bg-amber-900/50 text-amber-300"}`},null,k.status?.toUpperCase(),1,null)],1,null)],1,k.id)),1,"3l_6"),r.value==="external"&&e("div",null,{class:"space-y-1"},Ne.external.map(k=>e("div",{title:h(k,"desc")},{class:"relative p-2 rounded border border-[var(--glass-border-subtle)] hover:bg-muted/20 hover:border-[var(--glass-border)] group cursor-help"},[e("div",null,{class:"absolute left-0 top-0 bottom-0 w-1 rounded-l bg-slate-500"},null,3,null),e("div",null,{class:"pl-2 flex flex-col gap-1"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,null,h(k,"glyph"),1,null),e("div",null,{class:"flex-1 truncate"},e("span",null,{class:"text-xs font-bold text-foreground"},h(k,"name"),1,null),1,null),e("span",null,{class:"text-[9px] px-1 rounded bg-slate-800 text-slate-300 border border-slate-700"},h(k,"type"),1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground pl-6 truncate opacity-70 group-hover:opacity-100"},h(k,"desc"),1,null)],1,null)],1,k.id)),1,"3l_7"),r.value==="recommended"&&e("div",null,{class:"space-y-1"},[e("div",null,{class:"text-[10px] text-muted-foreground mb-2"},["Recommended Modules (",Ne.recommended.length,")"],3,null),Ne.recommended.map(k=>e("div",{onClick$:_("s_vajwpyJWHXE",[k,c])},{class:"relative p-2 rounded border border-[var(--glass-border-subtle)] hover:bg-muted/20 hover:border-[var(--glass-border)] group cursor-pointer"},[e("div",null,{class:"absolute left-0 top-0 bottom-0 w-1 rounded-l bg-blue-500"},null,3,null),e("div",null,{class:"pl-2 flex flex-col gap-1"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,null,h(k,"glyph"),1,null),e("div",null,{class:"flex-1 truncate"},e("span",null,{class:"text-xs font-bold text-foreground"},h(k,"name"),1,null),1,null),e("span",{class:`text-[8px] px-1 rounded border ${k.confidence>=.9?"bg-green-900/30 text-green-400 border-green-500/30":k.confidence>=.7?"bg-blue-900/30 text-blue-400 border-blue-500/30":"bg-amber-900/30 text-amber-400 border-amber-500/30"}`,title:`Confidence: ${(k.confidence*100).toFixed(0)}% | Epistemic Gap: ${k.confidence<.8?"Needs validation in local environment":"Verified via swarm handshake"}`},null,k.confidence>=.9?"VERIFIED":k.confidence>=.7?"THEORETIC":"EXPERIMENTAL",1,null),k.updateAvailable&&e("button",{onClick$:_("s_rjSzVtVxtLE",[f,k])},{class:"text-[9px] px-1.5 py-0.5 rounded bg-green-500/20 text-green-400 border border-green-500/30 hover:bg-green-500/30"},"â¬† UPDATE",2,"3l_8"),e("button",{onClick$:_("s_P5T9l0Ysghw",[o,k])},{class:"text-[9px] px-1.5 py-0.5 rounded bg-primary/20 text-primary border border-primary/30 hover:bg-primary/30"},"INSTALL",2,null)],1,null),e("div",null,{class:"flex items-center justify-between pl-6 text-[10px] text-muted-foreground"},[e("span",{title:h(k,"desc")},{class:"truncate pr-2"},h(k,"desc"),1,null),e("span",null,{class:"font-mono opacity-50"},["v",h(k,"version")],1,null)],1,null)],1,null)],0,k.id))],1,"3l_9"),r.value==="live"&&(u.segments.length===0?e("div",null,{class:"text-center text-muted-foreground text-xs py-10"},"No telemetry yet",3,"3l_10"):u.segments.map(k=>e("div",null,{class:"group relative p-2 rounded border border-[var(--glass-border-subtle)] hover:bg-muted/20 hover:border-[var(--glass-border)] transition-colors"},[e("div",{class:`absolute left-0 top-0 bottom-0 w-1 rounded-l ${k.status==="FAST"?"bg-emerald-500":k.status==="OK"?"bg-amber-500":"bg-rose-600"}`},null,null,3,null),e("div",null,{class:"pl-2 flex justify-between items-start"},[e("div",null,{class:"overflow-hidden flex-1 min-w-0"},[e("div",null,{class:"text-xs font-bold text-foreground truncate"},h(k,"name"),1,null),e("div",null,{class:"text-[10px] text-muted-foreground uppercase"},h(k,"type"),1,null)],1,null),e("div",null,{class:"text-right flex flex-col items-end ml-2 text-[9px] text-muted-foreground opacity-50"},[k.duration>0&&e("span",null,{class:"text-xs font-bold text-amber-400"},[h(k,"duration"),"ms"],1,"3l_11"),new Date(k.timestamp).toLocaleTimeString([],{hour12:!1,minute:"2-digit",second:"2-digit"})],1,null)],1,null)],1,`${k.id}-${k.timestamp}`)))],1,null),e("div",null,{class:"p-2 border-t border-[var(--glass-border-subtle)] text-[10px] text-muted-foreground flex items-center justify-between flex-shrink-0"},[e("span",null,null,["Press ",e("span",null,{class:"font-mono bg-muted/50 px-1 rounded"},"i",3,null)," to toggle"],3,null),e("span",null,{class:"font-mono"},i(k=>k.connected?"live":"offline",[u],'p0.connected?"live":"offline"'),3,null)],3,null)],1,null),c.value&&g(ig,{get itemId(){return c.value.id},get itemName(){return c.value.name},onClose$:p(wg,"s_0J3PaJJrDPY",[c]),[a]:{itemId:i(k=>k.value.id,[c],"p0.value.id"),itemName:i(k=>k.value.name,[c],"p0.value.name")}},2,"3l_12")],1,"3l_13")},Sg=E(p(kg,"s_B8iqoEsvpGs")),Cg=l=>g(l.as??"span",{class:"absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0",style:{clip:"rect(0, 0, 0, 0)"},children:g(xe,null,3,"Gj_0"),[a]:{class:a,style:a}},1,"Gj_1"),$g=E(p(Cg,"s_uMwnl6AQnTw")),Ig=l=>{const[t]=b();(l.key==="Enter"||l.key===" ")&&t.onClick$&&(l.preventDefault(),t.onClick$())},Tg=l=>{W();const t={green:"On track",yellow:"At risk",red:"Blocked"},n={green:"bg-emerald-500/20 border-emerald-500/30",yellow:"bg-amber-500/20 border-amber-500/30",red:"bg-red-500/20 border-red-500/30"},s=p(Ig,"s_jQY0cOtMJMg",[l]);return e("div",{"aria-label":`Lane ${l.lane.name}, owned by ${l.lane.owner}, status ${t[l.lane.status]}, ${l.lane.wip_pct}% complete${l.lane.blockers?`, ${l.lane.blockers} blockers`:""}`,class:`p-3 rounded-lg border cursor-pointer transition-all focus:outline-none focus:ring-2 focus:ring-primary ${l.isSelected??!1?"border-primary bg-primary/10":`${n[l.lane.status]} hover:border-primary/50`}`,onClick$:l.onClick$,onKeyDown$:s},{role:"option",tabIndex:0,"aria-selected":i(r=>r.isSelected??!1,[l],"p0.isSelected??false")},[e("div",null,{class:"flex items-center gap-2 mb-2"},[e("div",{"aria-label":t[l.lane.status]},{class:i(r=>`w-2 h-2 rounded-full ${r.lane.status==="green"?"bg-emerald-500":r.lane.status==="yellow"?"bg-amber-500":"bg-red-500"}`,[l],'`w-2 h-2 rounded-full ${p0.lane.status==="green"?"bg-emerald-500":p0.lane.status==="yellow"?"bg-amber-500":"bg-red-500"}`'),role:"img"},null,3,null),e("span",null,{class:"text-xs font-medium text-foreground"},i(r=>r.lane.name,[l],"p0.lane.name"),3,null)],1,null),e("div",null,{class:"mb-2"},[e("div",null,{class:"flex items-center justify-between text-[9px] mb-1"},[e("span",null,{class:"text-muted-foreground"},"Progress",3,null),e("span",null,{class:"text-foreground font-bold"},[i(r=>r.lane.wip_pct,[l],"p0.lane.wip_pct"),"%"],3,null)],3,null),e("div",null,{role:"progressbar","aria-valuenow":i(r=>r.lane.wip_pct,[l],"p0.lane.wip_pct"),"aria-valuemin":0,"aria-valuemax":100,"aria-label":i(r=>`${r.lane.wip_pct}% complete`,[l],"`${p0.lane.wip_pct}% complete`"),class:"h-1.5 rounded-full bg-muted/30 overflow-hidden"},e("div",null,{class:i(r=>`h-full rounded-full transition-all ${r.lane.status==="green"?"bg-emerald-500":r.lane.status==="yellow"?"bg-amber-500":"bg-red-500"}`,[l],'`h-full rounded-full transition-all ${p0.lane.status==="green"?"bg-emerald-500":p0.lane.status==="yellow"?"bg-amber-500":"bg-red-500"}`'),style:i(r=>({width:`${r.lane.wip_pct}%`}),[l],"{width:`${p0.lane.wip_pct}%`}")},null,3,null),3,null)],3,null),e("div",null,{class:"flex items-center justify-between text-[9px] text-muted-foreground"},[e("span",null,null,["@",i(r=>r.lane.owner,[l],"p0.lane.owner")],3,null),l.lane.blockers!==void 0&&l.lane.blockers>0&&e("span",null,{class:"text-red-400","aria-label":i(r=>`${r.lane.blockers} blockers`,[l],"`${p0.lane.blockers} blockers`")},[i(r=>r.lane.blockers,[l],"p0.lane.blockers")," blockers"],3,"Gj_9")],1,null),l.lane.description&&g($g,{children:e("span",null,null,i(r=>r.lane.description,[l],"p0.lane.description"),3,null)},3,"Gj_10")],0,"Gj_11")},Yl=E(p(Tg,"s_74NzS5oJ0Wo")),Eg=()=>{const[l]=b();if(!l.value)return{totalLanes:0,avgWip:0,greenCount:0,yellowCount:0,redCount:0,activeAgents:0};const t=l.value.lanes||[],n=l.value.agents||[],s=t.length,r=s>0?Math.round(t.reduce((d,f)=>d+f.wip_pct,0)/s):0,o=t.filter(d=>d.status==="green").length,c=t.filter(d=>d.status==="yellow").length,u=t.filter(d=>d.status==="red").length,m=n.filter(d=>d.status==="active").length;return{totalLanes:s,avgWip:r,greenCount:o,yellowCount:c,redCount:u,activeAgents:m}},Ag=()=>{const[l,t,n]=b();if(!l.value)return[];const s=[...l.value.lanes].sort((r,o)=>r.wip_pct-o.wip_pct);return n.value?s:s.slice(0,Math.min(t.maxLanes??100,8))},Mg=()=>{const[l,t]=b();return!l.value||t.value?!1:l.value.lanes.length>8},Og=()=>{const[l,t]=b();return!l.value||t.value?0:Math.max(0,l.value.lanes.length-8)},Pg=()=>{const[l]=b();if(!l.value)return{red:[],yellow:[],green:[]};const t=l.value.lanes;return{red:t.filter(n=>n.status==="red").sort((n,s)=>n.wip_pct-s.wip_pct),yellow:t.filter(n=>n.status==="yellow").sort((n,s)=>n.wip_pct-s.wip_pct),green:t.filter(n=>n.status==="green").sort((n,s)=>n.wip_pct-s.wip_pct)}},Lg=l=>{const[t]=b();t.value={...t.value,[l]:!t.value[l]},typeof window<"u"&&localStorage.setItem("pblanes-collapsed",JSON.stringify(t.value))},Dg=l=>{const[t]=b();t.value=t.value===l?null:l},Rg=()=>{const[l,t]=b(),n=[];return l.value.red||n.push(...t.value.red),l.value.yellow||n.push(...t.value.yellow),l.value.green||n.push(...t.value.green),n},Ng=async()=>{const[l,t,n,s]=b();s.value=!0;try{const r=await fetch("/api/fs/nucleus/state/lanes.json");if(!r.ok)throw new Error(`HTTP ${r.status}`);const o=await r.json();t.value=o,n.value=new Date().toISOString(),l.value=null}catch(r){l.value=r?.message||"Failed to fetch lanes"}finally{s.value=!1}},jg=()=>{const[l,t]=b();return t(l.id)},zg=()=>{const[l,t]=b();return t(l.id)},Bg=()=>{const[l,t]=b();return t(l.id)},Ug=l=>{W();const t=y(null),n=y(!0),s=y(null),r=y(null),o=y(l.defaultShowAll??!0);D(_("s_GPnplHm07uI",[t,r,n,l])),D(_("s_C6E0H21WVkc",[s,t,r,n,l]));const c=N(p(Eg,"s_ZYakiabDjYw",[t])),u=N(p(Ag,"s_ntX4CilvprQ",[t,l,o]));N(p(Mg,"s_BZAOixTicMM",[t,o]));const m=N(p(Og,"s_TUEpAjo8RoA",[t,o])),d=N(p(Pg,"s_b5u6ynnk9DQ",[t])),f=y({}),v=y(null),x=y(-1),S=p(Lg,"s_2FC3gK7J6T4",[f]);D(_("s_FwLtgm0zLe8",[f]));const M=p(Dg,"s_WsPLoLHyt70",[v]),$=N(p(Rg,"s_K0fWvMaIW9A",[f,d]));return D(_("s_Asgui0FfCmQ",[v,x,$])),e("div",null,{class:"glass-surface-elevated glass-animate-enter p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("div",null,{class:"flex items-center gap-2"},[g(q,{level:"h3",color:"cyan",size:"sm",animation:"flicker",children:"SWE LANES",[a]:{level:a,color:a,size:a,animation:a}},3,"FM_0"),g(X,{color:"purple",glow:!0,children:[i(w=>w.value.totalLanes,[c],"p0.value.totalLanes")," lanes"],[a]:{color:a,glow:a}},3,"FM_1"),g(X,{color:"cyan",glow:!0,children:[i(w=>w.value.avgWip,[c],"p0.value.avgWip"),"% avg"],[a]:{color:a,glow:a}},3,"FM_2")],1,null),e("div",null,{class:"flex items-center gap-2"},[g(vt,{get timestamp(){return t.value?.updated},source:"lanes.json",ttlFresh:120,ttlRecent:600,ttlStale:3600,[a]:{timestamp:i(w=>w.value?.updated,[t],"p0.value?.updated"),source:a,ttlFresh:a,ttlRecent:a,ttlStale:a}},3,"FM_3"),e("button",{onClick$:p(Ng,"s_mX56SjUApCM",[s,t,r,n])},{class:"text-[10px] px-2 py-1 rounded glass-interactive glass-hover-glow text-glass-text-muted",title:"Refresh lanes"},"Refresh",2,null)],1,null)],1,null),e("div",null,{class:"flex flex-wrap gap-2 mb-3 text-[10px]"},[g(X,{color:"emerald",glow:!0,children:[i(w=>w.value.greenCount,[c],"p0.value.greenCount")," green"],[a]:{color:a,glow:a}},3,"FM_4"),g(X,{color:"amber",glow:!0,children:[i(w=>w.value.yellowCount,[c],"p0.value.yellowCount")," yellow"],[a]:{color:a,glow:a}},3,"FM_5"),g(X,{color:"rose",glow:!0,children:[i(w=>w.value.redCount,[c],"p0.value.redCount")," red"],[a]:{color:a,glow:a}},3,"FM_6"),g(X,{color:"purple",glow:!0,children:[i(w=>w.value.activeAgents,[c],"p0.value.activeAgents")," agents"],[a]:{color:a,glow:a}},3,"FM_7")],1,null),n.value?e("div",null,{class:"text-xs text-muted-foreground animate-pulse"},"Loading lanes...",3,"FM_8"):s.value?e("div",null,{class:"text-xs text-red-400"},i(w=>w.value,[s],"p0.value"),3,"FM_9"):u.value.length===0?e("div",null,{class:"text-xs text-muted-foreground"},"No lanes found.",3,"FM_10"):e("div",null,{class:"space-y-3 max-h-[500px] overflow-y-auto pr-1"},[d.value.red.length>0&&e("div",null,{class:"rounded-lg border border-red-500/30 overflow-hidden"},[e("button",null,{class:"w-full flex items-center justify-between px-3 py-2 bg-red-500/10 hover:bg-red-500/20 transition-colors",onClick$:_("s_2fQEu5Emn7Y",[S])},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-red-400 text-[10px] font-bold"},"â—",3,null),g(q,{level:"span",color:"rose",size:"xs",children:"CRITICAL",[a]:{level:a,color:a,size:a}},3,"FM_11"),g(X,{color:"rose",glow:!0,children:i(w=>w.value.red.length,[d],"p0.value.red.length"),[a]:{color:a,glow:a}},3,"FM_12")],1,null),e("span",null,{class:"text-red-400 text-[10px]"},i(w=>w.value.red?"â–¶":"â–¼",[f],'p0.value["red"]?"â–¶":"â–¼"'),3,null)],1,null),!f.value.red&&e("div",null,{class:"p-2 space-y-1.5"},d.value.red.map(w=>g(Yl,{lane:{...w,blockers:w.blockers.length},isSelected:v.value===w.id,onClick$:p(jg,"s_6040Me1iKWk",[w,M])},3,w.id)),1,"FM_13")],1,"FM_14"),d.value.yellow.length>0&&e("div",null,{class:"rounded-lg border border-amber-500/30 overflow-hidden"},[e("button",null,{class:"w-full flex items-center justify-between px-3 py-2 bg-amber-500/10 hover:bg-amber-500/20 transition-colors",onClick$:_("s_kFnp66uc04I",[S])},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-amber-400 text-[10px] font-bold"},"â—",3,null),g(q,{level:"span",color:"amber",size:"xs",children:"IN PROGRESS",[a]:{level:a,color:a,size:a}},3,"FM_15"),g(X,{color:"amber",glow:!0,children:i(w=>w.value.yellow.length,[d],"p0.value.yellow.length"),[a]:{color:a,glow:a}},3,"FM_16")],1,null),e("span",null,{class:"text-amber-400 text-[10px]"},i(w=>w.value.yellow?"â–¶":"â–¼",[f],'p0.value["yellow"]?"â–¶":"â–¼"'),3,null)],1,null),!f.value.yellow&&e("div",null,{class:"p-2 space-y-1.5"},d.value.yellow.map(w=>g(Yl,{lane:{...w,blockers:w.blockers.length},isSelected:v.value===w.id,onClick$:p(zg,"s_TOEGzICMvws",[w,M])},3,w.id)),1,"FM_17")],1,"FM_18"),d.value.green.length>0&&e("div",null,{class:"rounded-lg border border-emerald-500/30 overflow-hidden"},[e("button",null,{class:"w-full flex items-center justify-between px-3 py-2 bg-emerald-500/10 hover:bg-emerald-500/20 transition-colors",onClick$:_("s_Tmnyad9apx0",[S])},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-emerald-400 text-[10px] font-bold"},"â—",3,null),g(q,{level:"span",color:"emerald",size:"xs",children:"COMPLETE",[a]:{level:a,color:a,size:a}},3,"FM_19"),g(X,{color:"emerald",glow:!0,children:i(w=>w.value.green.length,[d],"p0.value.green.length"),[a]:{color:a,glow:a}},3,"FM_20")],1,null),e("span",null,{class:"text-emerald-400 text-[10px]"},i(w=>w.value.green?"â–¶":"â–¼",[f],'p0.value["green"]?"â–¶":"â–¼"'),3,null)],1,null),!f.value.green&&e("div",null,{class:"p-2 space-y-1.5"},d.value.green.map(w=>g(Yl,{lane:{...w,blockers:w.blockers.length},isSelected:v.value===w.id,onClick$:p(Bg,"s_0GL0t2Q6CRk",[w,M])},3,w.id)),1,"FM_21")],1,"FM_22")],1,null),!n.value&&!s.value&&t.value&&t.value.lanes.length>8&&e("button",null,{class:"mt-2 w-full text-[10px] py-1.5 rounded bg-muted/20 hover:bg-muted/40 text-muted-foreground border border-border/30 transition-colors",onClick$:_("s_Xh0b5b0smsg",[o])},o.value?e("span",null,null,"Show Less â–²",3,"FM_23"):e("span",null,null,["Show All (",i(w=>w.value,[m],"p0.value")," more) â–¼"],3,null),1,"FM_24"),t.value?.agents&&t.value.agents.length>0&&e("div",null,{class:"mt-3 pt-3 border-t border-border/50"},[g(q,{level:"div",color:"purple",size:"xs",class:"mb-2",children:"AGENTS",[a]:{level:a,color:a,size:a,class:a}},3,"FM_25"),e("div",null,{class:"flex flex-wrap gap-1"},t.value.agents.map(w=>e("span",{class:`text-[9px] px-1.5 py-0.5 rounded border ${w.status==="active"?"bg-emerald-500/10 text-emerald-400 border-emerald-500/20":"bg-muted/20 text-muted-foreground border-border/30"}`,title:w.lane?`Lane: ${w.lane}`:"No lane assigned"},null,["@",h(w,"id"),w.lane&&e("span",null,{class:"text-muted-foreground/60 ml-1"},["[",w.lane.slice(0,8),"]"],1,"FM_26")],1,w.id)),1,null)],1,"FM_27")],1,"FM_28")},Fg=E(p(Ug,"s_v5gNO17rKMo"));function qg(l,t=12){const n=Math.max(0,Math.min(100,l)),s=Math.round(n/100*t),r=t-s;return"â–ˆ".repeat(s)+"â–‘".repeat(r)}const ae=(l,t)=>`var(${l}, ${t})`,_l={primary:{text:ae("--md-sys-color-primary","var(--mat-primary)"),container:ae("--md-sys-color-primary-container","oklch(from var(--mat-primary) l c h / 0.18)"),border:ae("--md-sys-color-primary","var(--mat-primary)")},secondary:{text:ae("--md-sys-color-secondary","var(--mat-secondary)"),container:ae("--md-sys-color-secondary-container","oklch(from var(--mat-secondary) l c h / 0.18)"),border:ae("--md-sys-color-secondary","var(--mat-secondary)")},tertiary:{text:ae("--md-sys-color-tertiary","var(--mat-secondary)"),container:ae("--md-sys-color-tertiary-container","oklch(from var(--mat-secondary) l c h / 0.18)"),border:ae("--md-sys-color-tertiary","var(--mat-secondary)")},error:{text:ae("--md-sys-color-error","var(--destructive)"),container:ae("--md-sys-color-error-container","oklch(from var(--destructive) l c h / 0.18)"),border:ae("--md-sys-color-error","var(--destructive)")},neutral:{text:ae("--md-sys-color-on-surface-variant","var(--muted-foreground)"),container:ae("--md-sys-color-surface-variant","var(--muted)"),border:ae("--md-sys-color-outline-variant","var(--border)")}},ye=l=>({color:_l[l].text}),je=l=>({color:_l[l].text,backgroundColor:_l[l].container,borderColor:_l[l].border});function Qt(l){return l>=75?"tertiary":l>=50?"primary":l>=25?"secondary":"error"}const Gg=async(l=!1)=>{const[t,n,s,r,o,c]=b();try{r.value=!0;const m=await fetch(l?"/api/metatest/inventory?refresh=1":"/api/metatest/inventory"),d=await m.json().catch(()=>null);if(!m.ok)throw new Error(`HTTP ${m.status}`);if(!d)throw new Error("Invalid JSON response");if(d.error)throw new Error(String(d.error));c.value=d,s.value=d,n.value=new Date().toISOString(),o.value=!!d.cache?.stale,t.value=null}catch(u){t.value=u instanceof Error?u.message:"Failed to fetch",s.value?(c.value=s.value,o.value=!0):(c.value=null,o.value=!1)}finally{r.value=!1}},Vg=()=>{const[l]=b();if(!l.value)return{coverage:0,tests:0,gaps:0,services:0};const t=l.value.summary;return{coverage:t.coverage_percent,tests:t.total_tests+t.total_e2e,gaps:t.critical_gaps,services:t.total_services}},Hg=l=>{const[t]=b();t.value=t.value===l?null:l},Wg=()=>{const[l]=b();return l(!0)},Yg=()=>{const[l,t]=b();return t(l.id)},Jg=l=>{const t=y(null),n=y(null),s=y(!0),r=y(null),o=y(null),c=y(null),u=y(!1),m=p(Gg,"s_y6nAJMn2Avk",[r,o,n,s,u,t]);D(_("s_S0GPl2C32Ks",[m,l]));const d=N(p(Vg,"s_FE03vWcQxSA",[t])),f=p(Hg,"s_rvJ4eO8Tcb4",[c]),v=Qt(d.value.coverage);return e("div",null,{class:"rounded-lg border border-border bg-card p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("div",null,{class:"flex items-center gap-2"},[e("h3",null,{class:"text-sm font-semibold text-muted-foreground"},"METATEST",3,null),e("span",{style:je(v)},{class:"text-[10px] px-2 py-0.5 rounded border"},[i(x=>x.value.coverage,[d],"p0.value.coverage"),"% coverage"],3,null),d.value.gaps>0&&e("span",null,{class:"text-[10px] px-2 py-0.5 rounded border",style:je("error")},[i(x=>x.value.gaps,[d],"p0.value.gaps")," critical gaps"],3,"fD_0")],1,null),e("div",null,{class:"flex items-center gap-2"},[o.value&&e("span",null,{class:"text-[9px] text-muted-foreground mono"},o.value.slice(11,19),1,"fD_1"),u.value&&e("span",null,{class:"text-[9px]",style:ye("secondary")},"stale",3,"fD_2"),g(L,{onClick$:p(Wg,"s_E8a4lKOsASY",[m]),variant:"text",class:"text-[10px]",title:"Refresh inventory",children:"Refresh",[a]:{onClick$:a,variant:a,class:a,title:a}},3,"fD_3")],1,null)],1,null),e("div",null,{class:"flex flex-wrap gap-2 mb-3 text-[10px]"},[e("span",null,{class:"px-2 py-0.5 rounded border",style:je("secondary")},[i(x=>x.value?.summary.total_tools??0,[t],"p0.value?.summary.total_tools??0")," tools"],3,null),e("span",null,{class:"px-2 py-0.5 rounded border",style:je("primary")},[i(x=>x.value.tests,[d],"p0.value.tests")," tests"],3,null),e("span",null,{class:"px-2 py-0.5 rounded border",style:je("tertiary")},[i(x=>x.value.services,[d],"p0.value.services")," services"],3,null)],3,null),e("div",null,{class:"mb-3"},e("div",null,{class:"flex items-center gap-2"},[e("code",{style:ye(v)},{class:"text-[11px] mono"},qg(d.value.coverage),1,null),e("span",{style:ye(v)},{class:"text-[10px] font-bold"},[i(x=>x.value.coverage,[d],"p0.value.coverage"),"%"],3,null),e("span",null,{class:"text-[9px] text-muted-foreground"},["(",i(x=>x.value?.summary.tested_count??0,[t],"p0.value?.summary.tested_count??0"),"/",i(x=>x.value?.summary.total_tools??0,[t],"p0.value?.summary.total_tools??0")," tested)"],3,null)],1,null),1,null),s.value?e("div",null,{class:"text-xs text-muted-foreground animate-pulse"},"Loading inventory...",3,"fD_4"):r.value&&!t.value?e("div",null,{class:"text-xs",style:ye("error")},i(x=>x.value,[r],"p0.value"),3,"fD_5"):t.value?e("div",null,{class:"space-y-2"},[t.value.categories.map(x=>e("div",null,{class:"rounded-md border border-border/50 overflow-hidden"},[g(L,{onClick$:p(Yg,"s_FU5BTNG8oOI",[x,f]),variant:"text",class:"w-full",children:e("div",null,{class:"flex items-center justify-between w-full"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-sm"},h(x,"icon"),1,null),e("span",null,{class:"text-xs font-medium text-foreground"},h(x,"name"),1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded border",style:je("neutral")},h(x,"count"),1,null),x.coverage_percent!==void 0&&e("span",{style:ye(Qt(x.coverage_percent))},{class:"text-[10px]"},[h(x,"coverage_percent"),"%"],1,"fD_6"),e("span",null,{class:"text-xs text-muted-foreground"},c.value===x.id?"â–¼":"â–¶",1,null)],1,null)],1,null),[a]:{variant:a,class:a}},1,"fD_7"),c.value===x.id&&e("div",null,{class:"border-t border-border/30 p-2 bg-muted/5"},x.items.length===0?e("div",null,{class:"text-[10px] text-muted-foreground"},"No items loaded.",3,"fD_8"):e("div",null,{class:"space-y-1 max-h-40 overflow-y-auto"},[x.items.slice(0,l.maxItems??10).map((S,M)=>e("div",null,{class:"flex items-center gap-2 text-[10px]"},"has_test"in S?g(ue,{children:[e("span",{style:ye(S.has_test?"tertiary":"error")},null,S.has_test?"âœ“":"âœ—",1,null),e("span",null,{class:"text-foreground truncate flex-1"},h(S,"tool"),1,null),S.critical&&e("span",null,{class:"px-1 py-0.5 rounded border text-[8px]",style:je("error")},"CRITICAL",3,"fD_9")]},1,"fD_10"):g(ue,{children:[e("span",null,{style:ye("primary")},"â€¢",3,null),e("span",null,{class:"text-foreground truncate"},h(S,"name"),1,null)]},1,"fD_11"),1,M)),x.items.length>(l.maxItems??10)&&e("div",null,{class:"text-[9px] text-muted-foreground mt-1"},["+",x.items.length-(l.maxItems??10)," more..."],1,"fD_12")],1,null),1,"fD_13")],1,x.id)),t.value.critical_gaps.length>0&&e("div",null,{class:"mt-3 pt-3 border-t border-border/50"},[e("div",null,{class:"flex items-center gap-2 mb-2"},e("span",null,{class:"text-[10px] font-semibold",style:ye("error")},"âš ï¸ CRITICAL GAPS",3,null),3,null),e("div",null,{class:"space-y-1"},[t.value.critical_gaps.slice(0,5).map((x,S)=>e("div",null,{class:"flex items-center gap-2 text-[10px]"},[e("span",null,{style:ye("error")},"âœ—",3,null),e("span",null,{class:"text-foreground truncate flex-1"},h(x,"tool"),1,null),e("span",null,{class:"text-[9px] text-muted-foreground truncate max-w-[150px]"},h(x,"critical_reason"),1,null)],1,S)),t.value.critical_gaps.length>5&&e("div",null,{class:"text-[9px]",style:ye("error")},["+",i(x=>x.value.critical_gaps.length-5,[t],"p0.value.critical_gaps.length-5")," more critical gaps"],3,"fD_14")],1,null)],1,"fD_15")],1,"fD_16"):null,e("div",null,{class:"mt-3 pt-2 border-t border-border/30 flex items-center justify-between"},[e("span",null,{class:"text-[8px] text-muted-foreground"},i(x=>x.value?.protocol??"DKIN v29 | PAIP v15 | CITIZEN v1",[t],'p0.value?.protocol??"DKIN v29 | PAIP v15 | CITIZEN v1"'),3,null),e("span",null,{class:"text-[8px] text-muted-foreground"},["v",i(x=>x.value?.version??"1.0.0",[t],'p0.value?.version??"1.0.0"')],3,null)],3,null)],1,"fD_17")},Kg=E(p(Jg,"s_G1kDdiWLC0s")),Jl={LEAD_WATCH:"strp.lead.action.watch",LEAD_ARCHIVE:"strp.lead.action.archive",LEAD_DECISION:"strp.lead.action.decision"};function Qg(l){switch(l){case"promote":return"bg-green-500/20 text-green-400 border-green-500/30";case"defer":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"reject":return"bg-red-500/20 text-red-400 border-red-500/30"}}function el(l){return{FILM:"ðŸŽ¬","AI/ML":"ðŸ¤–",MUSIC:"ðŸŽµ",ART:"ðŸŽ¨",TECH:"ðŸ’»",SCIENCE:"ðŸ”¬",CULTURE:"ðŸŒ",GAMING:"ðŸŽ®",DESIGN:"âœï¸",OTHER:"ðŸ“Œ"}[l]||"ðŸ“Œ"}function Xg(l){const t={promote:[],defer:[],reject:[]};for(const n of l)t[n.decision]&&t[n.decision].push(n);return t}function Rn(l){return{...l,stage:"raw",transfiguration_ts:new Date().toISOString(),bohm_node_id:`bohm:${l.lead_id}`}}function Zg(l,t){return{...l,stage:"instantiating",pentad:t,holon_id:`holon:${t.pentad_id}`}}function ev(l,t){const n=t.verdict.can_proceed;return{...l,stage:n?"transfigured":"validating",sextet:t}}const bt={"ASL-2025:sequential-collapse":{id:"ASL-2025:sequential-collapse",law:"Law of Sequential Collapse",description:"Tasks degrade -70% when split across swarms; prefer single topology",applies_to:["topology","coordination"]},"ASL-2025:verification-covenant":{id:"ASL-2025:verification-covenant",law:"Verification Covenant",description:"Untested code is vapor; evidence required for actualization",applies_to:["quality","testing","artifacts"]},"ASL-2025:conservation":{id:"ASL-2025:conservation",law:"Law of Conservation",description:"No work is ever lost; rejected items preserved in Amber",applies_to:["recovery","shadowmode"]},"etymon:user-intent":{id:"etymon:user-intent",law:"User Intent Primacy",description:"Curator/human decision carries authoritative weight",applies_to:["decision","omega"]},"etymon:caution-principle":{id:"etymon:caution-principle",law:"Epistemic Caution",description:"When uncertain, prefer shadowmode over premature actualization",applies_to:["synthesis","uncertainty"]},"etymon:quality-threshold":{id:"etymon:quality-threshold",law:"Quality Threshold",description:"Minimum metadata/artifact requirements for actualization",applies_to:["quality","q-gate"]}};function ft(l,t){return l==="thesis"?t==="promote"?"etymon:user-intent":"etymon:caution-principle":l==="antithesis"?"ASL-2025:verification-covenant":t==="promote"?"etymon:user-intent":"ASL-2025:conservation"}function lv(l){const t={FILM:"visual storytelling and cinematic technique","AI/ML":"machine learning methodology and AI advancement",MUSIC:"sonic composition and musical innovation",ART:"creative expression and aesthetic value",TECH:"technological capability and engineering insight",SCIENCE:"scientific understanding and empirical knowledge",CULTURE:"cultural significance and social relevance",GAMING:"interactive experience and game design",DESIGN:"design principles and user experience",OTHER:"general knowledge contribution"}[l.topic]||"knowledge contribution",n=l.keywords.slice(0,3).join(", "),s=ft("thesis",l.decision),r=bt[s];return{text:`"${l.title}" contributes valuable insights in ${t}${n?`, specifically regarding ${n}`:""}. Integration would enrich the knowledge graph. [Grounded in: ${r.law}]`,confidence:l.decision==="promote"?.85:l.decision==="defer"?.6:.3,sources:[s,`topic:${l.topic}`,`decision:${l.decision}`],timestamp:Date.now()}}function tv(l){const t=[];!l.artifacts.thumb&&!l.artifacts.gif&&t.push("lacks visual preview artifacts"),l.keywords.length<3&&t.push("limited keyword extraction"),l.decision==="defer"&&t.push("curator uncertainty about immediate relevance"),l.decision==="reject"&&t.push("curator determined low value");const n=t.length>0?t.join("; "):"no significant concerns identified",s=ft("antithesis",l.decision),r=bt[s];return{text:`However, this content ${n}. The integration cost-benefit requires examination before actualization. [Per: ${r.law}]`,confidence:t.length>1?.7:.4,sources:[s,"validation:artifacts","validation:metadata"],timestamp:Date.now()}}function nv(l,t,n){const s=t.confidence*.6+n.confidence*.4,r=t.confidence>n.confidence&&l.decision==="promote",o=ft("synthesis",l.decision),c=bt[o];return{text:r?`Synthesis: Despite noted concerns, the value proposition justifies actualization. Proceed to Holon instantiation with Pentad coordinates. [${c.law}]`:`Synthesis: Given the balance of considerations, this content should be held in Shadowmode for potential future actualization when conditions improve. [${c.law}]`,confidence:s,sources:[o,"synthesis:auto",...t.sources?.slice(0,2)||[],...n.sources?.slice(0,2)||[]],timestamp:Date.now()}}function sv(l,t="system"){return{pentad_id:`pentad:${l.lead_id}:${Date.now()}`,why:{id:l.decision==="promote"?"user-intent-curate":"system-defer",justification:`Curated content in ${l.topic} domain, decision: ${l.decision}`,source:"user_intent",confidence:l.decision==="promote"?.9:.6},where:{uri:`kg:/${l.topic.toLowerCase()}/${l.lead_id}`,type:"knowledge_graph",domain:l.topic},who:{agent_id:l.actor||t,generation:1,authority:"ring2",citizen_class:"cagent"},when:{phase:l.decision==="promote"?"implementation":"research",budget_ms:3e4,opportune:l.decision==="promote"},what:{kind:l.artifacts.clip||l.artifacts.mp3?"media":"reference",schema_sig:`Lead:${l.topic}`,vector_cid:void 0}}}function av(l){if(!l.pentad)throw new Error("Cannot evaluate Sextet without Pentad");const t=l.pentad.pentad_id,n=`sextet:${l.lead_id}:${Date.now()}`,s={passed:!!l.actor&&l.actor.length>0,score:l.actor?1:0,check:"Lineage verification",rationale:l.actor?`Actor "${l.actor}" verified`:"No actor lineage"},r={passed:!0,score:1,check:"Effects validation",rationale:`Locus ${l.pentad.where.uri} is in allowed domain`},o={passed:l.pentad.when.opportune||l.decision!=="reject",score:l.pentad.when.opportune?1:.7,check:"Liveness/timing check",rationale:l.pentad.when.opportune?"Opportune moment":"Acceptable timing"},c={passed:!0,score:1,check:"Recovery path verification",rationale:"Lead can be archived or removed if needed"},u=l.keywords.length>=2&&l.title.length>10,m=!!(l.artifacts.thumb||l.artifacts.gif),d=(u?.5:0)+(m?.5:.25),f={passed:d>=.5,score:d,check:"Quality/metadata validation",rationale:`Metadata: ${u?"âœ“":"â—‹"}, Artifacts: ${m?"âœ“":"â—‹"}`},v={passed:l.decision!=="reject",score:l.decision==="promote"?1:l.decision==="defer"?.7:0,check:"Omega alignment",rationale:`Decision "${l.decision}" alignment with curation intent`},x={P:s,E:r,L:o,R:c,Q:f,Î©:v},S=Object.entries(x).filter(([,w])=>!w.passed).map(([w])=>w),M=Object.entries(x).filter(([,w])=>w.passed&&w.score<.7).map(([w])=>w),$=S.length>0?"FAILED":M.length>1?"WARNED":"PASSED";return{sextet_id:n,pentad_id:t,gates:x,verdict:{status:$,can_proceed:S.length===0,failed_gates:S,warned_gates:M},compliance_vector:[s.score,r.score,o.score,c.score,f.score,v.score]}}function rv(l,t="system"){let n=Rn(l);const s=lv(l),r=tv(l),o=nv(l,s,r);n={...n,stage:"synthesized",sophos:{question_id:`sophos:${l.lead_id}:${Date.now()}`,question_text:`Evaluate "${l.title}" for knowledge integration`,thesis:s,antithesis:r,synthesis:o,etymon_ref:o.sources?.find(m=>m.startsWith("etymon:"))?.replace("etymon:",""),resolution_status:"resolved"}};const c=sv(l,t);n=Zg(n,c);const u=av(n);return n=ev(n,u),n.sextet?.verdict.can_proceed&&(n=ov(n)),n}function ov(l){if(!l.sextet?.verdict.can_proceed)return console.warn("[Transfiguration] Cannot fork to Portal - Sextet not passed"),l;const t=l.decision==="promote"?"AM":"SM";return{...l,stage:t==="AM"?"actualized":"shadowed",metabolic_mode:t,entelexis_phase:t==="AM"?"actualizing":"potential",portal_ts:new Date().toISOString()}}function iv(l){const t={raw:[],questioning:[],synthesized:[],instantiating:[],validating:[],transfigured:[],actualized:[],shadowed:[],decayed:[]};for(const n of l){const s=n,r=s.stage||"raw";t[r].push({...s,stage:r})}return t}function uv(l){const t={AM:[],SM:[],pending:[],discarded:[]};for(const n of l){const s=n;s.stage==="actualized"&&s.metabolic_mode==="AM"?t.AM.push(s):s.stage==="shadowed"&&s.metabolic_mode==="SM"?t.SM.push(s):s.stage==="decayed"||s.decision==="reject"?t.discarded.push({...s,stage:s.stage||"decayed"}):t.pending.push({...s,stage:s.stage||"raw"})}return t}const de={SOPHOS_QUESTION_POSED:"sophos.question.posed",SOPHOS_SYNTHESIS:"sophos.dialectic.synthesis",SOPHOS_SYNTHESIS_COMPLETE:"sophos.synthesis.complete",HOLON_PENTAD_INSTANTIATED:"holon.pentad.instantiated",HOLON_SEXTET_EVALUATING:"holon.sextet.evaluating",HOLON_SEXTET_PASSED:"holon.sextet.passed",HOLON_SEXTET_WARNED:"holon.sextet.warned",SEXTET_VALIDATION_COMPLETE:"holon.sextet.validation.complete",PORTAL_AM_FORK:"portal.metabolic.am",PORTAL_SM_FORK:"portal.metabolic.sm",PORTAL_DECAY:"portal.metabolic.decay"};function Xt(l){let t;switch(l.stage){case"questioning":t=de.SOPHOS_QUESTION_POSED;break;case"synthesized":t=de.SOPHOS_SYNTHESIS;break;case"instantiating":t=de.HOLON_PENTAD_INSTANTIATED;break;case"validating":t=de.HOLON_SEXTET_EVALUATING;break;case"transfigured":t=l.sextet?.verdict.status==="PASSED"?de.HOLON_SEXTET_PASSED:de.HOLON_SEXTET_WARNED;break;case"actualized":t=de.PORTAL_AM_FORK;break;case"shadowed":t=de.PORTAL_SM_FORK;break;case"decayed":t=de.PORTAL_DECAY;break;default:t="transfiguration.stage.unknown"}return{topic:t,data:l}}const cv=l=>{const t=!!l.artifacts.thumb,n=!!l.artifacts.gif;return e("div",null,{class:"relative w-20 h-20 rounded-lg overflow-hidden bg-muted/50 flex-shrink-0"},[t||n?e("img",{src:n?l.artifacts.gif:l.artifacts.thumb},{alt:i(s=>s.title,[l],"p0.title"),class:"w-full h-full object-cover",loading:"lazy"},null,3,"ma_0"):e("div",null,{class:"w-full h-full flex items-center justify-center text-2xl text-muted-foreground"},"ðŸ“„",3,null),e("div",null,{class:"absolute bottom-1 right-1 flex gap-0.5"},[l.artifacts.clip&&e("span",null,{class:"text-[10px] bg-black/60 text-white px-1 rounded"},"ðŸŽ¬",3,"ma_1"),l.artifacts.mp3&&e("span",null,{class:"text-[10px] bg-black/60 text-white px-1 rounded"},"ðŸŽµ",3,"ma_2")],1,null)],1,"ma_3")},dv=E(p(cv,"s_W3h3EszK4pQ")),pv=l=>{const t=l.keywords.slice(0,4),n=l.keywords.length-4;return e("div",null,{class:"flex flex-wrap gap-1"},[t.map(s=>e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-muted/50 text-muted-foreground"},s,1,s)),n>0&&e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-muted/30 text-muted-foreground"},["+",n],1,"ma_4")],1,"ma_5")},mv=E(p(pv,"s_BarXQTlKTV4")),gv=l=>{W();const t=Qg(l.lead.decision),n=el(l.lead.topic);return e("div",null,{class:"p-4 hover:bg-muted/20 transition-colors border-b border-border/30 last:border-b-0"},e("div",null,{class:"flex gap-4"},[g(dv,{get artifacts(){return l.lead.artifacts},get title(){return l.lead.title},[a]:{artifacts:i(s=>s.lead.artifacts,[l],"p0.lead.artifacts"),title:i(s=>s.lead.title,[l],"p0.lead.title")}},3,"ma_6"),e("div",null,{class:"flex-1 min-w-0"},[e("div",null,{class:"flex items-start justify-between gap-2 mb-1"},[e("div",null,{class:"flex-1 min-w-0"},e("a",null,{href:i(s=>s.lead.url,[l],"p0.lead.url"),target:"_blank",rel:"noopener noreferrer",class:"font-medium text-primary hover:underline line-clamp-1",title:i(s=>s.lead.title,[l],"p0.lead.title")},i(s=>s.lead.title,[l],"p0.lead.title"),3,null),3,null),e("div",null,{class:"flex items-center gap-2 flex-shrink-0"},e("span",{class:`text-xs px-2 py-0.5 rounded border ${t}`},null,i(s=>s.lead.decision,[l],"p0.lead.decision"),3,null),1,null)],1,null),e("div",null,{class:"flex items-center gap-2 text-xs text-muted-foreground mb-2"},[e("span",null,{class:"flex items-center gap-1"},[n,e("span",null,null,i(s=>s.lead.topic,[l],"p0.lead.topic"),3,null)],1,null),e("span",null,{class:"text-muted-foreground/50"},"|",3,null),e("span",null,{class:"font-mono"},l.lead.ts.slice(0,10),1,null),l.lead.priority&&g(ue,{children:[e("span",null,{class:"text-muted-foreground/50"},"|",3,null),e("span",null,{class:i(s=>s.lead.priority===1?"text-red-400":"",[l],'p0.lead.priority===1?"text-red-400":""')},["P",i(s=>s.lead.priority,[l],"p0.lead.priority")],3,null)]},3,"ma_7"),e("span",null,{class:"text-muted-foreground/50"},"|",3,null),e("span",null,{class:"font-mono text-[10px]"},i(s=>s.lead.actor,[l],"p0.lead.actor"),3,null)],1,null),l.lead.keywords.length>0&&e("div",null,{class:"mb-2"},g(mv,{get keywords(){return l.lead.keywords},[a]:{keywords:i(s=>s.lead.keywords,[l],"p0.lead.keywords")}},3,"ma_8"),1,"ma_9"),l.lead.stage&&l.lead.stage!=="raw"&&e("div",null,{class:"mb-2 space-y-2"},[e("div",null,{class:"flex items-center gap-3"},[g(Sv,{get stage(){return l.lead.stage||"raw"},get sophos(){return l.lead.sophos},get sextet(){return l.lead.sextet},[a]:{stage:i(s=>s.lead.stage||"raw",[l],'p0.lead.stage||"raw"'),sophos:i(s=>s.lead.sophos,[l],"p0.lead.sophos"),sextet:i(s=>s.lead.sextet,[l],"p0.lead.sextet")}},3,"ma_10"),l.lead.sextet?.compliance_vector&&g(fv,{get complianceVector(){return l.lead.sextet?.compliance_vector},size:60,[a]:{complianceVector:i(s=>s.lead.sextet?.compliance_vector,[l],"p0.lead.sextet?.compliance_vector"),size:a}},3,"ma_11"),g(wv,{get nodeId(){return l.lead.bohm_node_id},get parentId(){return l.lead.parent_lead_id},get childIds(){return l.lead.child_lead_ids},[a]:{nodeId:i(s=>s.lead.bohm_node_id,[l],"p0.lead.bohm_node_id"),parentId:i(s=>s.lead.parent_lead_id,[l],"p0.lead.parent_lead_id"),childIds:i(s=>s.lead.child_lead_ids,[l],"p0.lead.child_lead_ids")}},3,"ma_12")],1,null),l.lead.sophos?.resolution_status==="resolved"&&g(yv,{get sophos(){return l.lead.sophos},[a]:{sophos:i(s=>s.lead.sophos,[l],"p0.lead.sophos")}},3,"ma_13")],1,"ma_14"),l.lead.notes&&e("p",null,{class:"text-xs text-muted-foreground line-clamp-2 mb-2"},i(s=>s.lead.notes,[l],"p0.lead.notes"),3,"ma_15"),e("div",null,{class:"flex items-center gap-2"},[e("button",null,{class:"text-xs px-2 py-1 rounded bg-primary/10 text-primary hover:bg-primary/20 transition-colors flex items-center gap-1",onClick$:_("s_ETyb44zuHHw",[l])},[e("span",null,null,"ðŸ‘ï¸",3,null),e("span",null,null,"Watch",3,null)],3,null),e("button",null,{class:"text-xs px-2 py-1 rounded bg-violet-500/10 text-violet-400 hover:bg-violet-500/20 transition-colors flex items-center gap-1",disabled:i(s=>s.lead.stage==="actualized",[l],'p0.lead.stage==="actualized"'),onClick$:_("s_lvf6yNMTdZY",[l])},[e("span",null,null,"âš—ï¸",3,null),e("span",null,null,i(s=>s.lead.stage==="actualized"?"Transfigured":"Transfigure",[l],'p0.lead.stage==="actualized"?"Transfigured":"Transfigure"'),3,null)],3,null),e("button",null,{class:"text-xs px-2 py-1 rounded bg-muted/50 text-muted-foreground hover:bg-muted transition-colors flex items-center gap-1",disabled:i(s=>s.lead.archived,[l],"p0.lead.archived"),onClick$:_("s_RYs8lnuLHK0",[l])},[e("span",null,null,"ðŸ“¦",3,null),e("span",null,null,i(s=>s.lead.archived?"Archived":"Archive",[l],'p0.lead.archived?"Archived":"Archive"'),3,null)],3,null),e("div",null,{class:"ml-auto flex items-center gap-1"},[l.lead.decision!=="promote"&&e("button",null,{class:"text-xs px-2 py-1 rounded bg-green-500/10 text-green-400 hover:bg-green-500/20",title:"Promote",onClick$:_("s_GBiQ4DlKh3U",[l])},"â–²",3,"ma_16"),l.lead.decision!=="defer"&&e("button",null,{class:"text-xs px-2 py-1 rounded bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20",title:"Defer",onClick$:_("s_pkkHc5iUEpY",[l])},"â¸",3,"ma_17"),l.lead.decision!=="reject"&&e("button",null,{class:"text-xs px-2 py-1 rounded bg-red-500/10 text-red-400 hover:bg-red-500/20",title:"Reject",onClick$:_("s_k2AOdJXcxAM",[l])},"âœ•",3,"ma_18")],1,null)],1,null)],1,null)],1,null),1,"ma_19")},vv=E(p(gv,"s_bjMYtJVEGm8")),bv=l=>{if(!l.complianceVector)return null;const[t,n,s,r,o,c]=l.complianceVector,u=["P","E","L","R","Q","Î©"],m=(l.size??80)/2,d=m-10,f=(I,T)=>{const z=Math.PI*2*I/6-Math.PI/2,O=T*d;return{x:m+Math.cos(z)*O,y:m+Math.sin(z)*O}},v=l.complianceVector.map((I,T)=>f(T,I)),x=v.map((I,T)=>`${T===0?"M":"L"} ${I.x},${I.y}`).join(" ")+" Z",S=Array.from({length:6},(I,T)=>f(T,.5)).map((I,T)=>`${T===0?"M":"L"} ${I.x},${I.y}`).join(" ")+" Z",M=Array.from({length:6},(I,T)=>f(T,1)).map((I,T)=>`${T===0?"M":"L"} ${I.x},${I.y}`).join(" ")+" Z",$=l.complianceVector.reduce((I,T)=>I+T,0)/6,w=$>=.8?"rgba(16, 185, 129, 0.3)":$>=.5?"rgba(245, 158, 11, 0.3)":"rgba(239, 68, 68, 0.3)",k=$>=.8?"#10b981":$>=.5?"#f59e0b":"#ef4444";return e("div",null,{class:"relative",style:i(I=>({width:`${I.size??80}px`,height:`${I.size??80}px`}),[l],"{width:`${p0.size??80}px`,height:`${p0.size??80}px`}")},[e("svg",null,{width:i(I=>I.size??80,[l],"p0.size??80"),height:i(I=>I.size??80,[l],"p0.size??80"),class:"absolute inset-0"},[e("path",{d:M},{fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"1"},null,3,null),e("path",{d:S},{fill:"none",stroke:"rgba(255,255,255,0.05)","stroke-width":"1"},null,3,null),Array.from({length:6},(I,T)=>{const z=f(T,1);return e("line",{x1:m,y1:m,x2:h(z,"x"),y2:h(z,"y")},{stroke:"rgba(255,255,255,0.1)","stroke-width":"1"},null,3,T)}),e("path",{d:x,fill:w,stroke:k},{"stroke-width":"2"},null,3,null),v.map((I,T)=>e("circle",{cx:h(I,"x"),cy:h(I,"y"),fill:k},{r:"3"},null,3,T))],1,null),u.map((I,T)=>{const z=f(T,1.25);return e("span",{style:{left:`${z.x}px`,top:`${z.y}px`,transform:"translate(-50%, -50%)"}},{class:"absolute text-[8px] font-mono text-muted-foreground"},I,1,T)}),e("span",{style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:k}},{class:"absolute text-[10px] font-bold"},Math.round($*100),1,null)],1,"ma_24")},fv=E(p(bv,"s_h0uT5LbLlOU")),xv=l=>{if(!l.etymonRef)return null;const t=l.etymonRef.startsWith("ASL-"),n=l.etymonRef.startsWith("etymon:"),s=l.etymonRef.replace("ASL-2025:","").replace("etymon:","");return e("span",{class:`text-[9px] px-1.5 py-0.5 rounded font-mono ${t?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":n?"bg-violet-500/20 text-violet-400 border border-violet-500/30":"bg-muted/30 text-muted-foreground"}`},{title:i(r=>`Grounded in: ${r.etymonRef}`,[l],"`Grounded in: ${p0.etymonRef}`")},[t?"âš¡":"â—‰"," ",s],1,"ma_25")},Kl=E(p(xv,"s_sYFxMQokkbI")),hv=l=>{if(W(),!l.sophos||l.sophos.resolution_status==="pending")return null;const t=n=>n?.find(s=>s.startsWith("ASL-")||s.startsWith("etymon:"));return e("div",null,{class:"space-y-2 text-xs"},[l.sophos.thesis&&e("div",null,{class:"flex items-start gap-2 p-2 rounded bg-blue-500/10 border-l-2 border-blue-500"},[e("span",null,{class:"text-blue-400 font-bold"},"T",3,null),e("div",null,{class:"flex-1"},[e("p",null,{class:"text-blue-300/90 line-clamp-2"},i(n=>n.sophos.thesis.text,[l],"p0.sophos.thesis.text"),3,null),e("div",null,{class:"flex items-center gap-2 mt-1"},[e("span",null,{class:"text-[10px] text-blue-400/60"},[Math.round(l.sophos.thesis.confidence*100),"%"],1,null),g(Kl,{etymonRef:t(l.sophos.thesis.sources)},3,"ma_26")],1,null)],1,null)],1,"ma_27"),l.sophos.antithesis&&e("div",null,{class:"flex items-start gap-2 p-2 rounded bg-red-500/10 border-l-2 border-red-500"},[e("span",null,{class:"text-red-400 font-bold"},"A",3,null),e("div",null,{class:"flex-1"},[e("p",null,{class:"text-red-300/90 line-clamp-2"},i(n=>n.sophos.antithesis.text,[l],"p0.sophos.antithesis.text"),3,null),e("div",null,{class:"flex items-center gap-2 mt-1"},[e("span",null,{class:"text-[10px] text-red-400/60"},[Math.round(l.sophos.antithesis.confidence*100),"%"],1,null),g(Kl,{etymonRef:t(l.sophos.antithesis.sources)},3,"ma_28")],1,null)],1,null)],1,"ma_29"),l.sophos.synthesis&&e("div",null,{class:"flex items-start gap-2 p-2 rounded bg-emerald-500/10 border-l-2 border-emerald-500"},[e("span",null,{class:"text-emerald-400 font-bold"},"S",3,null),e("div",null,{class:"flex-1"},[e("p",null,{class:"text-emerald-300/90 line-clamp-2"},i(n=>n.sophos.synthesis.text,[l],"p0.sophos.synthesis.text"),3,null),e("div",null,{class:"flex items-center gap-2 mt-1"},[e("span",null,{class:"text-[10px] text-emerald-400/60"},[Math.round(l.sophos.synthesis.confidence*100),"%"],1,null),g(Kl,{etymonRef:t(l.sophos.synthesis.sources)},3,"ma_30")],1,null)],1,null)],1,"ma_31")],1,"ma_32")},yv=E(p(hv,"s_B6EFfZS65Bs")),_v=l=>{if(!l.nodeId&&!l.parentId&&(!l.childIds||l.childIds.length===0))return null;const t=!!l.parentId,n=l.childIds&&l.childIds.length>0;return e("div",null,{class:"flex items-center gap-1 text-[9px] font-mono text-muted-foreground"},[t&&e("span",null,{class:"px-1 rounded bg-muted/30",title:i(s=>`Parent: ${s.parentId}`,[l],"`Parent: ${p0.parentId}`")},"â†‘",3,"ma_33"),l.nodeId&&e("span",null,{class:"px-1 rounded bg-violet-500/20 text-violet-400",title:i(s=>`Node: ${s.nodeId}`,[l],"`Node: ${p0.nodeId}`")},["â¬¡",l.nodeId.slice(-4)],1,"ma_34"),n&&e("span",null,{class:"px-1 rounded bg-muted/30",title:i(s=>`Children: ${s.childIds.length}`,[l],"`Children: ${p0.childIds.length}`")},["â†“",i(s=>s.childIds.length,[l],"p0.childIds.length")],3,"ma_35")],1,"ma_36")},wv=E(p(_v,"s_uF9dAXhyxyI")),kv=l=>{const t=[{key:"raw",label:"Raw",icon:"â—‹"},{key:"sophos",label:"SOPHOS",icon:"?",phases:["questioning","synthesized"]},{key:"holon",label:"Holon",icon:"â¬¡",phases:["instantiating","validating","transfigured"]},{key:"portal",label:"Portal",icon:"â—Ž",phases:["actualized","shadowed"]}],s=l.stage==="raw"?0:["questioning","synthesized"].includes(l.stage)?1:["instantiating","validating","transfigured"].includes(l.stage)?2:["actualized","shadowed","decayed"].includes(l.stage)?3:0;return e("div",null,{class:"flex items-center gap-1 p-2 bg-muted/20 rounded-lg"},t.map((r,o)=>{const c=o<s,u=o===s,m=c||u&&l.sophos?.resolution_status==="resolved"&&o===1||u&&l.sextet?.verdict?.status==="PASSED"&&o===2?"âœ“":u?"â–¸":"â—‹";return e("div",null,{class:"flex items-center"},[e("div",{class:`flex flex-col items-center ${u?"text-primary":c?"text-emerald-400":"text-muted-foreground/50"}`},null,[e("div",{class:`w-8 h-8 rounded-full flex items-center justify-center text-sm border-2 ${u?"border-primary bg-primary/20":c?"border-emerald-400 bg-emerald-500/20":"border-muted/30 bg-muted/10"}`},null,m,1,null),e("span",null,{class:"text-[9px] mt-1 font-medium"},h(r,"label"),1,null)],1,null),o<t.length-1&&e("div",{class:`w-8 h-0.5 mx-1 ${c?"bg-emerald-400":"bg-muted/30"}`},null,null,3,"ma_37")],1,r.key)}),1,"ma_38")},Sv=E(p(kv,"s_L0j9P8vKZno")),Cv=l=>{const t=uv(l.leads),n=iv(l.leads),s=n.questioning.length+n.synthesized.length,r=n.instantiating.length+n.validating.length+n.transfigured.length;return e("div",null,{class:"space-y-4"},[e("div",null,{class:"flex items-center justify-center gap-2 p-3 rounded-lg bg-muted/20 border border-border/50"},e("div",null,{class:"flex items-center gap-1 text-xs"},[e("span",null,{class:"px-2 py-1 rounded bg-gray-500/20 text-gray-400 font-mono"},["Raw: ",h(n.raw,"length")],1,null),e("span",null,{class:"text-muted-foreground"},"â†’",3,null),e("span",null,{class:"px-2 py-1 rounded bg-blue-500/20 text-blue-400 font-mono"},["SOPHOS: ",s],1,null),e("span",null,{class:"text-muted-foreground"},"â†’",3,null),e("span",null,{class:"px-2 py-1 rounded bg-cyan-500/20 text-cyan-400 font-mono"},["Holon: ",r],1,null),e("span",null,{class:"text-muted-foreground"},"â†’",3,null),e("span",null,{class:"px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-mono"},["AM: ",h(t.AM,"length")],1,null),e("span",null,{class:"text-purple-400"},"/",3,null),e("span",null,{class:"px-2 py-1 rounded bg-purple-500/20 text-purple-400 font-mono"},["SM: ",h(t.SM,"length")],1,null)],1,null),1,null),e("div",null,{class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},[e("div",null,{class:"rounded-lg border-2 border-blue-500/30 bg-blue-500/5"},[e("div",null,{class:"px-4 py-3 border-b border-blue-500/30 bg-blue-500/10"},[e("div",null,{class:"flex items-center justify-between"},[e("h3",null,{class:"font-semibold text-blue-400 flex items-center gap-2"},[e("span",null,{class:"text-lg"},"âš—ï¸",3,null),e("span",null,null,"Pending Transfiguration",3,null)],3,null),e("span",null,{class:"text-sm text-blue-400/70 font-mono"},h(t.pending,"length"),1,null)],1,null),e("p",null,{class:"text-xs text-blue-400/60 mt-1"},"Raw â†’ SOPHOS â†’ Holon validation",3,null)],1,null),e("div",null,{class:"max-h-[350px] overflow-y-auto"},t.pending.length===0?e("div",null,{class:"p-8 text-center text-blue-400/50"},[e("div",null,{class:"text-2xl mb-2"},"â—‡",3,null),e("div",null,{class:"text-xs"},"All leads transfigured",3,null)],3,"ma_42"):t.pending.map(o=>e("div",null,{class:"p-3 border-b border-blue-500/20 last:border-b-0 hover:bg-blue-500/10"},e("div",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-blue-400"},"â—‹",3,null),e("div",null,{class:"flex-1 min-w-0"},[e("a",{href:h(o,"url")},{target:"_blank",class:"text-sm font-medium text-foreground hover:text-blue-400 line-clamp-1"},h(o,"title"),1,null),e("div",null,{class:"flex items-center gap-2 mt-1 text-xs text-muted-foreground"},[e("span",null,null,el(o.topic),1,null),e("span",null,{class:"font-mono text-blue-400/60"},o.stage||"raw",1,null)],1,null)],1,null),e("button",{onClick$:_("s_2PsBO1sTWBc",[o,l])},{class:"text-xs px-2 py-1 rounded bg-violet-500/20 text-violet-400 hover:bg-violet-500/30"},"âš—ï¸",2,null)],1,null),1,o.lead_id)),1,null)],1,null),e("div",null,{class:"rounded-lg border-2 border-emerald-500/30 bg-emerald-500/5"},[e("div",null,{class:"px-4 py-3 border-b border-emerald-500/30 bg-emerald-500/10"},[e("div",null,{class:"flex items-center justify-between"},[e("h3",null,{class:"font-semibold text-emerald-400 flex items-center gap-2"},[e("span",null,{class:"text-lg"},"â–²",3,null),e("span",null,null,"AM: Actualized",3,null)],3,null),e("span",null,{class:"text-sm text-emerald-400/70 font-mono"},h(t.AM,"length"),1,null)],1,null),e("p",null,{class:"text-xs text-emerald-400/60 mt-1"},"Sextet âœ“ â†’ Knowledge Graph",3,null)],1,null),e("div",null,{class:"max-h-[350px] overflow-y-auto"},t.AM.length===0?e("div",null,{class:"p-8 text-center text-emerald-400/50"},[e("div",null,{class:"text-2xl mb-2"},"â—‡",3,null),e("div",null,{class:"text-xs"},"No actualized leads",3,null)],3,"ma_43"):t.AM.map(o=>e("div",null,{class:"p-3 border-b border-emerald-500/20 last:border-b-0 hover:bg-emerald-500/10"},e("div",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-emerald-400"},"â–¸",3,null),e("div",null,{class:"flex-1 min-w-0"},[e("a",{href:h(o,"url")},{target:"_blank",class:"text-sm font-medium text-foreground hover:text-emerald-400 line-clamp-1"},h(o,"title"),1,null),e("div",null,{class:"flex items-center gap-2 mt-1 text-xs text-muted-foreground"},[e("span",null,null,el(o.topic),1,null),e("span",null,{class:"font-mono text-emerald-400/60"},"actualized",3,null),o.sextet&&e("span",null,{class:"text-[10px] px-1 rounded bg-emerald-500/30 text-emerald-300"},"[Pâœ“Eâœ“Lâœ“Râœ“Qâœ“Î©âœ“]",3,"ma_44")],1,null)],1,null)],1,null),1,o.lead_id)),1,null)],1,null),e("div",null,{class:"rounded-lg border-2 border-purple-500/30 bg-purple-500/5"},[e("div",null,{class:"px-4 py-3 border-b border-purple-500/30 bg-purple-500/10"},[e("div",null,{class:"flex items-center justify-between"},[e("h3",null,{class:"font-semibold text-purple-400 flex items-center gap-2"},[e("span",null,{class:"text-lg"},"â—",3,null),e("span",null,null,"SM: Shadowmode",3,null)],3,null),e("span",null,{class:"text-sm text-purple-400/70 font-mono"},h(t.SM,"length"),1,null)],1,null),e("p",null,{class:"text-xs text-purple-400/60 mt-1"},"Sextet âœ“ â†’ Held Potential",3,null)],1,null),e("div",null,{class:"max-h-[350px] overflow-y-auto"},t.SM.length===0?e("div",null,{class:"p-8 text-center text-purple-400/50"},[e("div",null,{class:"text-2xl mb-2"},"â—‘",3,null),e("div",null,{class:"text-xs"},"No shadow potentials",3,null)],3,"ma_45"):t.SM.map(o=>e("div",null,{class:"p-3 border-b border-purple-500/20 last:border-b-0 hover:bg-purple-500/10"},e("div",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-purple-400/50"},"â—¦",3,null),e("div",null,{class:"flex-1 min-w-0"},[e("a",{href:h(o,"url")},{target:"_blank",class:"text-sm font-medium text-foreground/70 hover:text-purple-400 line-clamp-1"},h(o,"title"),1,null),e("div",null,{class:"flex items-center gap-2 mt-1 text-xs text-muted-foreground"},[e("span",null,null,el(o.topic),1,null),e("span",null,{class:"font-mono text-purple-400/60"},"potential",3,null)],1,null)],1,null),e("button",{onClick$:_("s_IEZJKVlNpXc",[o,l])},{class:"text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-400 hover:bg-purple-500/30"},"â†’AM",2,null)],1,null),1,o.lead_id)),1,null)],1,null)],1,null)],1,"ma_46")},$v=E(p(Cv,"s_F1qFBGizVew")),Iv=$v,Tv=()=>{const[l]=b();return Xg(l.leads.value)},Ev=()=>{const[l,t]=b();return{all:t.leads.value.length,promote:l.value.promote.length,defer:l.value.defer.length,reject:l.value.reject.length}},Av=()=>{const[l,t,n,s]=b();let r=t.leads.value;if(l.value!=="all"&&(r=r.filter(o=>o.decision===l.value)),s.value!=="ALL"&&(r=r.filter(o=>o.topic===s.value)),n.value.trim()){const o=n.value.toLowerCase();r=r.filter(c=>c.title.toLowerCase().includes(o)||c.keywords.some(u=>u.toLowerCase().includes(o))||c.notes?.toLowerCase().includes(o))}return r.slice().sort((o,c)=>c.ts.localeCompare(o.ts))},Mv=()=>{const[l]=b(),t=new Set;for(const n of l.leads.value)t.add(n.topic);return Array.from(t).sort()},Ov=(l,t)=>{const[n]=b(),s=(()=>{switch(l){case"watch":return Jl.LEAD_WATCH;case"transfigure":return de.SOPHOS_QUESTION_POSED;case"archive":return Jl.LEAD_ARCHIVE;case"promote":case"defer":case"reject":return Jl.LEAD_DECISION;default:return`strp.lead.action.${l}`}})();if(n.dispatchAction(s,{lead_id:t.lead_id,action:l,lead:t}),l==="transfigure"){const r=rv(t),o=Xt(r);n.dispatchAction(o.topic,{...o.data,source:"leads",action:"complete_transfiguration",pipeline:{thesis:r.sophos?.thesis,antithesis:r.sophos?.antithesis,synthesis:r.sophos?.synthesis,pentad:r.pentad,sextet_verdict:r.sextet?.verdict,metabolic_mode:r.metabolic_mode},open_sophos:!0,sophos_question_id:r.sophos?.question_id}),r.sophos&&n.dispatchAction(de.SOPHOS_SYNTHESIS_COMPLETE,{lead_id:t.lead_id,question_id:r.sophos.question_id,resolution:r.sophos.resolution_status}),r.sextet&&n.dispatchAction(de.SEXTET_VALIDATION_COMPLETE,{lead_id:t.lead_id,sextet_id:r.sextet.sextet_id,verdict:r.sextet.verdict,compliance_vector:r.sextet.compliance_vector})}if(l==="promote"||l==="defer"||l==="reject"){const r=Rn({...t,decision:l}),o=Xt(r);n.dispatchAction(o.topic,{...o.data,source:"leads",transition:`${t.decision} â†’ ${l}`})}},Pv=l=>{W();const t=y("all"),n=y("ALL"),s=y(""),r=y("list"),o=N(p(Tv,"s_olwkbflP9ZY",[l])),c=N(p(Ev,"s_d6pnJanVN64",[o,l])),u=N(p(Av,"s_W0El0PklxFg",[t,l,s,n])),m=N(p(Mv,"s_YSAUQpld28k",[l])),d=p(Ov,"s_7axIw0eze1s",[l]),f=[{id:"all",label:"All",color:"text-foreground"},{id:"promote",label:"Promote",color:"text-green-400"},{id:"defer",label:"Defer",color:"text-yellow-400"},{id:"reject",label:"Reject",color:"text-red-400"}];return e("div",null,{class:"space-y-4"},[e("div",null,{class:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between"},[e("div",null,null,[e("h2",null,{class:"text-lg font-semibold flex items-center gap-2"},[e("span",null,null,"ðŸ“‹",3,null),e("span",null,null,"STRp Leads",3,null),!(l.connected??!0)&&e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-red-500/20 text-red-400"},"Disconnected",3,"ma_47")],1,null),e("p",null,{class:"text-sm text-muted-foreground"},"Curated content from MOTD pipeline",3,null)],1,null),e("div",null,{class:"flex items-center gap-3"},[e("div",null,{class:"flex rounded-md border border-border overflow-hidden"},[e("button",null,{class:i(v=>`text-xs px-3 py-2 transition-colors ${v.value==="list"?"bg-primary/20 text-primary":"bg-background text-muted-foreground hover:bg-muted"}`,[r],'`text-xs px-3 py-2 transition-colors ${p0.value==="list"?"bg-primary/20 text-primary":"bg-background text-muted-foreground hover:bg-muted"}`'),onClick$:_("s_ODcFIgKAoXI",[r])},"â˜° List",3,null),e("button",{class:`text-xs px-3 py-2 transition-colors border-l border-border ${r.value==="metabolic"?"bg-primary/20 text-primary":"bg-background text-muted-foreground hover:bg-muted"}`},{onClick$:_("s_QYbvHN3dcm8",[r])},"â‘‚ AM/SM",3,null)],1,null),e("select",null,{class:"text-xs px-3 py-2 rounded border border-border bg-background",value:i(v=>v.value,[n],"p0.value"),onChange$:_("s_RxSMIpqDYSE",[n])},[e("option",null,{value:"ALL"},"All Topics",3,null),m.value.map(v=>e("option",{value:v},null,`${el(v)} ${v}`,1,v))],1,null),e("input",null,{type:"text",placeholder:"Search leads...",class:"text-xs px-3 py-2 rounded border border-border bg-background w-48",value:i(v=>v.value,[s],"p0.value"),onInput$:_("s_x0F00TNyHto",[s])},null,3,null),e("span",null,{class:"text-sm text-muted-foreground"},[i(v=>v.value.length,[u],"p0.value.length")," / ",i(v=>v.leads.value.length,[l],"p0.leads.value.length")," leads"],3,null)],1,null)],1,null),e("div",null,{class:"flex border-b border-border"},f.map(v=>e("button",{class:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${t.value===v.id?`border-primary ${v.color}`:"border-transparent text-muted-foreground hover:text-foreground"}`,onClick$:_("s_cy8h0G7r9l4",[t,v])},null,[h(v,"label"),e("span",null,{class:"ml-2 text-xs opacity-75"},["(",c.value[v.id],")"],1,null)],0,v.id)),1,null),r.value==="metabolic"&&g(Iv,{get leads(){return u.value},onAction$:d,[a]:{leads:i(v=>v.value,[u],"p0.value"),onAction$:a}},3,"ma_48"),r.value==="list"&&e("div",null,{class:"rounded-lg border border-border bg-card"},u.value.length===0?e("div",null,{class:"p-12 text-center text-muted-foreground"},[e("div",null,{class:"text-4xl mb-4"},"ðŸ“­",3,null),e("div",null,{class:"text-sm"},i(v=>v.leads.value.length===0?"No leads available. Waiting for MOTD pipeline...":"No leads match the current filters.",[l],'p0.leads.value.length===0?"No leads available. Waiting for MOTD pipeline...":"No leads match the current filters."'),3,null)],3,"ma_49"):e("div",null,{class:"divide-y divide-border/30 max-h-[calc(100vh-320px)] overflow-y-auto"},u.value.map(v=>g(vv,{lead:v,onAction$:d,[a]:{onAction$:a}},3,v.lead_id)),1,null),1,"ma_50"),e("div",null,{class:"grid grid-cols-2 md:grid-cols-7 gap-2"},[e("div",null,{class:"rounded-lg border border-border bg-card p-3 text-center"},[e("div",null,{class:"text-2xl font-bold text-foreground"},i(v=>v.value.all,[c],"p0.value.all"),3,null),e("div",null,{class:"text-xs text-muted-foreground"},"Total",3,null)],3,null),e("div",null,{class:"rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-3 text-center"},[e("div",null,{class:"text-2xl font-bold text-emerald-400"},i(v=>v.value.promote,[c],"p0.value.promote"),3,null),e("div",null,{class:"text-xs text-muted-foreground flex items-center justify-center gap-1"},[e("span",null,null,"AM",3,null),e("span",null,{class:"text-[10px] opacity-60"},"â–²",3,null)],3,null)],3,null),e("div",null,{class:"rounded-lg border border-purple-500/30 bg-purple-500/10 p-3 text-center"},[e("div",null,{class:"text-2xl font-bold text-purple-400"},i(v=>v.value.defer,[c],"p0.value.defer"),3,null),e("div",null,{class:"text-xs text-muted-foreground flex items-center justify-center gap-1"},[e("span",null,null,"SM",3,null),e("span",null,{class:"text-[10px] opacity-60"},"â—",3,null)],3,null)],3,null),e("div",null,{class:"rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-center"},[e("div",null,{class:"text-2xl font-bold text-red-400"},i(v=>v.value.reject,[c],"p0.value.reject"),3,null),e("div",null,{class:"text-xs text-muted-foreground flex items-center justify-center gap-1"},[e("span",null,null,"âˆ…",3,null),e("span",null,{class:"text-[10px] opacity-60"},"decay",3,null)],3,null)],3,null),e("div",null,{class:"rounded-lg border border-blue-500/30 bg-blue-500/10 p-3 text-center"},[e("div",null,{class:"text-2xl font-bold text-blue-400"},h(l.leads.value.filter(v=>v.ingested),"length"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},"Portal",3,null)],1,null),e("div",null,{class:"rounded-lg border border-green-500/30 bg-green-500/10 p-3 text-center col-span-2 md:col-span-2"},[e("div",null,{class:"text-xs text-muted-foreground mb-1"},"Metabolic Flow",3,null),e("div",null,{class:"flex items-center justify-center gap-2 text-sm"},[e("span",null,{class:"text-emerald-400"},[i(v=>v.value.promote,[c],"p0.value.promote")," AM"],3,null),e("span",null,{class:"text-muted-foreground"},"â†’",3,null),e("span",null,{class:"text-purple-400"},[i(v=>v.value.defer,[c],"p0.value.defer")," SM"],3,null),e("span",null,{class:"text-muted-foreground"},"â†’",3,null),e("span",null,{class:"text-blue-400"},[h(l.leads.value.filter(v=>v.ingested),"length")," âŠ•"],1,null)],1,null)],1,null)],1,null)],1,"ma_51")},Lv=E(p(Pv,"s_d0ASehyIAuE")),Dv={ok:"text-emerald-400",warn:"text-amber-400",info:"text-cyan-400"},Rv={active:"glass-status-dot-success",partial:"glass-status-dot-warning",idle:"glass-status-dot-info"},Ql={ok:"glass-chip-accent-emerald",warn:"glass-chip-accent-amber",hold:"glass-chip-accent-rose"},Nv=()=>{const[l]=b();return l.events?.value?l.events.value.filter(t=>String(t.topic||"").startsWith("registry.")).slice(-500):[]},jv=()=>{const[l]=b(),t=l.value,n=new Set,s=new Map;let r=0,o=0;for(const u of t){const m=String(u.topic||""),d=m.split(".");if(d.length>=2){const f=d[1];if(n.add(f),s.has(f)||s.set(f,new Set),m.endsWith(".snapshot"))r++;else if(m.endsWith(".entry")){o++;const v=u.data?.entry?.id;v&&s.get(f)?.add(String(v))}}}const c=Array.from(s.values()).reduce((u,m)=>u+m.size,0);return{registryCount:n.size,snapshotCount:r,entryCount:o,totalUniqueEntries:c,registries:Array.from(n)}},zv=()=>{const[l]=b();return l.value.slice(-10).reverse().map((t,n)=>{const s=String(t.topic||""),r=s.split(".").pop()||"unknown",o=s.split(".")[1]||"unknown",c=t.data?.entry?.id,u=c?`${o}.${c}`:o,d=String(t.iso||"").slice(11,19)||"--:--:--";return{id:`evt-${n}`,time:d,action:`registry.${r}`,target:String(u).slice(0,30),status:"ok"}})},Bv=()=>{const[l]=b();return l.value.length>0},Uv=()=>{const[l,t,n]=b(),s=n.value;return l.value?[{label:"Registry Nodes",value:String(s.totalUniqueEntries),delta:`+${s.entryCount}`,tone:"info"},{label:"Registries",value:String(s.registryCount),delta:"+0",tone:"ok"},{label:"Snapshots",value:String(s.snapshotCount),delta:`+${s.snapshotCount}`,tone:"info"},{label:"Events",value:String(t.value.length),delta:"+0",tone:"ok"}]:[{label:"Registry Nodes",value:"2,418",delta:"+82",tone:"info"},{label:"Domains",value:"14",delta:"+1",tone:"ok"},{label:"Live Links",value:"9,204",delta:"+317",tone:"info"},{label:"Drift Alerts",value:"3",delta:"+1",tone:"warn"}]},Fv=()=>{const[l,t]=b(),n=t.value;return l.value&&n.registries.length>0?n.registries.slice(0,4).map(s=>({label:s,count:"?",state:"active"})):[{label:"Agents",count:"42",state:"active"},{label:"Services",count:"128",state:"active"},{label:"Stores",count:"12",state:"partial"},{label:"Pipelines",count:"9",state:"idle"}]},qv=()=>{const[l,t]=b();return l.value&&t.value.length>0?t.value.slice(0,5):[{id:"ev-01",time:"12:03:14",action:"node.register",target:"agent.codex",status:"ok"},{id:"ev-02",time:"12:02:41",action:"link.refresh",target:"services.signal-hub",status:"ok"},{id:"ev-03",time:"12:02:09",action:"policy.warn",target:"stores.rhizome",status:"warn"},{id:"ev-04",time:"12:01:33",action:"edge.drop",target:"zone-3",status:"hold"},{id:"ev-05",time:"12:00:58",action:"merge.queue",target:"registry.atlas",status:"ok"}]},Gv=l=>{Pe("comp:registry-atlas");const t=N(p(Nv,"s_gsd0vcNgLNQ",[l])),n=N(p(jv,"s_t8XduY7ZNfk",[t])),s=N(p(zv,"s_FwAMd9qEx3U",[t])),r=N(p(Bv,"s_blkFvjJ0cms",[t])),o=N(p(Uv,"s_N01a4Pz0dms",[r,t,n])),c=N(p(Fv,"s_08ZBi0NR0Wo",[r,n])),u=[{id:"registry.core",type:"core",region:"global",status:"stable"},{id:"agents.codex",type:"agent",region:"edge",status:"sync"},{id:"services.signal-hub",type:"service",region:"zone-2",status:"hot"},{id:"stores.rhizome",type:"store",region:"zone-1",status:"watch"}],m=[{label:"Node",value:"registry.core"},{label:"Class",value:"primary"},{label:"Owner",value:"nucleus"},{label:"Updated",value:"00:03:21"},{label:"Region",value:"global"},{label:"Links",value:"84 inbound / 57 outbound"}],d=[{label:"ingest",detail:"registry.yaml",state:"ok"},{label:"normalize",detail:"schema v3",state:"ok"},{label:"merge",detail:"falkor",state:"warn"},{label:"publish",detail:"atlas feed",state:"hold"}],f=[{label:"Consistency",value:"99.2%",state:"ok"},{label:"Freshness",value:"8m lag",state:"warn"},{label:"Coverage",value:"87%",state:"ok"},{label:"Latency",value:"24ms",state:"ok"}],v=N(p(qv,"s_NAWo9bU1KsQ",[r,s])),x=[12,28,18,34,22,42,30,26,18,24,36,20];return e("div",null,{class:"space-y-6"},[e("div",null,{class:"glass-surface p-5 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},[e("div",null,{class:"space-y-2"},[e("div",null,{class:"text-[10px] uppercase tracking-[0.35em] text-muted-foreground"},"Registry",3,null),e("h2",null,{class:"text-2xl font-semibold tracking-tight"},"Registry Atlas",3,null),e("p",null,{class:"text-sm text-muted-foreground max-w-2xl"},"Live topology shell for registry domains, lineage, and active signal corridors.",3,null)],3,null),e("div",null,{class:"flex flex-wrap gap-2"},[e("span",null,{class:"glass-chip glass-chip-accent-cyan"},"atlas:active",3,null),e("span",null,{class:"glass-chip"},"scope:global",3,null),r.value?e("span",null,{class:"glass-chip glass-chip-accent-emerald"},"live data",3,"sP_0"):e("span",null,{class:"glass-chip glass-chip-accent-amber"},"static mockup",3,null)],1,null)],1,null),e("div",null,{class:"grid gap-4 md:grid-cols-4"},o.value.map(S=>e("div",null,{class:"glass-panel rounded-xl p-4"},[e("div",null,{class:"text-xs text-muted-foreground"},h(S,"label"),1,null),e("div",{class:`text-2xl font-semibold ${Dv[S.tone]}`},null,h(S,"value"),1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},["delta ",h(S,"delta")],1,null)],1,S.label)),1,null),e("div",null,{class:"grid grid-cols-12 gap-6"},[e("div",null,{class:"col-span-12 lg:col-span-3 space-y-4"},[e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Atlas Controls",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"scopes",3,null)],3,null),e("div",null,{class:"space-y-3"},[e("input",null,{type:"text",placeholder:"Filter registry nodes...",class:"w-full rounded-lg bg-muted/40 border border-border px-3 py-2 text-sm focus:outline-none focus:border-primary"},null,3,null),e("div",null,{class:"grid grid-cols-2 gap-2"},["All","Core","Edge","Drift"].map(S=>e("button",null,{class:"glass-chip w-full justify-center text-[10px] uppercase tracking-[0.2em]"},S,1,S)),1,null)],1,null)],1,null),e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Layers",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"visibility",3,null)],3,null),e("div",null,{class:"space-y-3"},c.value.map(S=>e("div",null,{class:"flex items-center justify-between text-sm"},[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`glass-status-dot ${Rv[S.state]}`},null,null,3,null),e("span",null,null,h(S,"label"),1,null)],1,null),e("span",null,{class:"text-xs text-muted-foreground"},h(S,"count"),1,null)],1,S.label)),1,null)],1,null),e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Pinned Nodes",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"focus",3,null)],3,null),e("div",null,{class:"space-y-3"},u.map(S=>e("div",null,{class:"rounded-lg border border-border/40 bg-muted/20 px-3 py-2"},[e("div",null,{class:"text-xs text-muted-foreground"},h(S,"type"),1,null),e("div",null,{class:"text-sm font-medium"},h(S,"id"),1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},[h(S,"region")," / ",h(S,"status")],1,null)],1,S.id)),1,null)],1,null)],1,null),e("div",null,{class:"col-span-12 lg:col-span-6 space-y-4"},[e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex flex-wrap items-center justify-between gap-3 mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Atlas Canvas",3,null),e("div",null,{class:"flex flex-wrap gap-2"},["Orbit","Trace","Select"].map(S=>e("button",null,{class:"glass-chip text-[10px] uppercase tracking-[0.2em]"},S,1,S)),1,null)],1,null),e("div",null,{class:"relative h-[360px] rounded-xl border border-border/60 overflow-hidden",style:{backgroundImage:"linear-gradient(90deg, rgba(0, 255, 255, 0.08) 1px, transparent 1px), linear-gradient(0deg, rgba(0, 255, 255, 0.08) 1px, transparent 1px)",backgroundSize:"40px 40px"}},[e("div",null,{class:"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-transparent to-purple-500/10"},null,3,null),e("div",null,{class:"absolute left-4 top-4 text-xs text-muted-foreground"},"focus: registry.core",3,null),e("div",null,{class:"absolute right-4 top-4 text-xs text-muted-foreground"},"links: 124",3,null),e("div",null,{class:"absolute left-6 bottom-6 text-xs text-muted-foreground"},"latency: 24ms",3,null),e("div",null,{class:"absolute inset-0 flex items-center justify-center"},e("div",null,{class:"glass-panel-subtle rounded-full px-4 py-2 text-[10px] uppercase tracking-[0.3em] text-muted-foreground"},"atlas renderer pending",3,null),3,null),e("div",null,{class:"absolute left-[18%] top-[30%] h-3 w-3 rounded-full bg-cyan-400/80 shadow-[0_0_10px_rgba(0,255,255,0.6)]"},null,3,null),e("div",null,{class:"absolute left-[45%] top-[55%] h-2.5 w-2.5 rounded-full bg-purple-400/70 shadow-[0_0_10px_rgba(188,19,254,0.5)]"},null,3,null),e("div",null,{class:"absolute left-[65%] top-[25%] h-2 w-2 rounded-full bg-emerald-400/70 shadow-[0_0_8px_rgba(16,185,129,0.6)]"},null,3,null),e("div",null,{class:"absolute left-[72%] top-[62%] h-2 w-2 rounded-full bg-amber-400/70 shadow-[0_0_8px_rgba(245,158,11,0.6)]"},null,3,null)],3,null)],1,null),e("div",null,{class:"grid gap-4 lg:grid-cols-2"},[e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Query Builder",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"draft",3,null)],3,null),e("div",null,{class:"space-y-2 text-xs"},["select registry nodes where class = primary","expand links depth = 2","rank by freshness, coverage"].map((S,M)=>e("div",null,{class:"flex items-start gap-2 rounded-lg border border-border/40 bg-muted/20 px-3 py-2"},[e("span",null,{class:"text-[10px] text-muted-foreground"},String(M+1).padStart(2,"0"),1,null),e("span",null,{class:"leading-relaxed"},S,1,null)],1,S)),1,null)],1,null),e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Coverage Map",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"last 24h",3,null)],3,null),e("div",null,{class:"space-y-3"},[{label:"Global",value:86},{label:"Zone-1",value:92},{label:"Zone-2",value:78},{label:"Zone-3",value:64}].map(S=>e("div",null,{class:"space-y-1"},[e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,null,h(S,"label"),1,null),e("span",null,{class:"text-muted-foreground"},[h(S,"value"),"%"],1,null)],1,null),e("div",null,{class:"h-2 rounded-full bg-muted/40 overflow-hidden"},e("div",{style:{width:`${S.value}%`}},{class:"h-full bg-cyan-400/70"},null,3,null),1,null)],1,S.label)),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"col-span-12 lg:col-span-3 space-y-4"},[e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between"},[e("h3",null,{class:"text-sm font-semibold"},"Inspector",3,null),e("span",null,{class:"glass-chip glass-chip-accent-emerald"},"active",3,null)],3,null),e("div",null,{class:"mt-3 space-y-2 text-xs"},m.map(S=>e("div",null,{class:"flex items-center justify-between border-b border-border/30 pb-2 last:border-b-0 last:pb-0"},[e("span",null,{class:"text-muted-foreground"},h(S,"label"),1,null),e("span",null,{class:"text-right"},h(S,"value"),1,null)],1,S.label)),1,null)],1,null),e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Lineage Trace",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"pipeline",3,null)],3,null),e("div",null,{class:"space-y-2"},d.map(S=>e("div",null,{class:"flex items-center justify-between text-xs"},[e("div",null,{class:"space-y-1"},[e("div",null,{class:"font-medium"},h(S,"label"),1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},h(S,"detail"),1,null)],1,null),e("span",{class:`glass-chip ${Ql[S.state]}`},null,h(S,"state"),1,null)],1,S.label)),1,null)],1,null),e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Health Gates",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"live",3,null)],3,null),e("div",null,{class:"space-y-2"},f.map(S=>e("div",null,{class:"flex items-center justify-between text-xs"},[e("span",null,{class:"text-muted-foreground"},h(S,"label"),1,null),e("span",{class:`glass-chip ${Ql[S.state]}`},null,h(S,"value"),1,null)],1,S.label)),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"grid gap-6 lg:grid-cols-2"},[e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Registry Events",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"last 60 min",3,null)],3,null),e("div",null,{class:"space-y-2"},v.value.map(S=>e("div",null,{class:"flex items-center justify-between rounded-lg border border-border/40 bg-muted/20 px-3 py-2 text-xs"},[e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"text-muted-foreground"},h(S,"time"),1,null),e("span",null,{class:"font-medium"},h(S,"action"),1,null),e("span",null,{class:"text-muted-foreground"},h(S,"target"),1,null)],1,null),e("span",{class:`glass-chip ${Ql[S.status==="ok"?"ok":S.status==="warn"?"warn":"hold"]}`},null,h(S,"status"),1,null)],1,S.id)),1,null)],1,null),e("div",null,{class:"glass-surface p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-sm font-semibold"},"Signal Constellation",3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"sparks",3,null)],3,null),e("div",null,{class:"grid grid-cols-2 gap-3 text-xs"},[{label:"Throughput",value:"6.4k/min"},{label:"Entropy",value:"0.14"},{label:"Backlog",value:"31"},{label:"Route Drift",value:"2.3%"}].map(S=>e("div",null,{class:"rounded-lg border border-border/40 bg-muted/20 px-3 py-2"},[e("div",null,{class:"text-[10px] text-muted-foreground"},h(S,"label"),1,null),e("div",null,{class:"text-sm font-semibold"},h(S,"value"),1,null)],1,S.label)),1,null),e("div",null,{class:"mt-4 h-24 rounded-lg border border-border/40 bg-muted/30 px-3 py-2 flex items-end gap-2"},x.map((S,M)=>e("div",{style:{height:`${S}%`}},{class:"flex-1 rounded-sm bg-cyan-400/70"},null,3,`bar-${M}`)),1,null)],1,null)],1,null)],1,"sP_1")},Vv=E(p(Gv,"s_iAhxMxFmhx4")),Nn={flowMode:"m",providers:{"chatgpt-web":{available:!1,lastCheck:""},"claude-web":{available:!1,lastCheck:""},"gemini-web":{available:!1,lastCheck:""}},fallbackOrder:["chatgpt-web","claude-web","gemini-web"],activeFallback:null,pbpair:{activeRequests:[],pendingProposals:[]},auth:{claudeLoggedIn:!1,geminiCliLoggedIn:!1}};let Hv=0;const wl=()=>`action-${++Hv}-${Date.now().toString(36)}`,jn=["auto","chatgpt-web","claude-web","gemini-web"],zn="pluribus.sota.items.v1",ot=()=>{if(typeof localStorage>"u")return null;try{const l=localStorage.getItem(zn);if(!l)return null;const t=JSON.parse(l);return!t||!Array.isArray(t.items)?null:t}catch{return null}},Bn=(l,t)=>{if(!(typeof localStorage>"u"))try{localStorage.setItem(zn,JSON.stringify({items:l,lastFetch:t}))}catch{}},Wv=async l=>{const[t]=b();if(t.value[l])return;t.value={...t.value,[l]:!0};const n=s=>new Promise(r=>setTimeout(r,s));try{fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:"dashboard.browser.bootstrap.requested",kind:"metric",level:"info",actor:"dashboard",data:{source:l,at:new Date().toISOString()}}),keepalive:!0}).catch(()=>{})}catch{}try{await Promise.race([fetch("/api/browser/bootstrap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actor:"dashboard",wait:!1}),keepalive:!0}).catch(()=>{}),n(3e3)])}catch{}window.__loadingRegistry?.exit("hook:auth")},Yv=()=>{const[l,t]=b();t.authOverlayOpen.value=!0,l("open-overlay")},Jv=async function l(t=!1){const[n,s,r,o,c,u]=b();try{if(window.__loadingRegistry?.entry("hook:sota-data"),!t&&r.value.length===0){const M=ot();M?.items?.length&&(r.value=M.items,!o.value&&M.lastFetch&&(o.value=M.lastFetch),u.value=!0)}const m=t?"/api/sota?rebuild=1":"/api/sota",d=`${m}${m.includes("?")?"&":"?"}ts=${Date.now()}`,f=await fetch(d,{cache:"no-store"}),v=f.headers.get("content-type")||"",x=await f.text();let S=null;try{S=JSON.parse(x)}catch{if(t){const M=x.trim().slice(0,120);throw new Error(`Invalid JSON response (${v||"unknown"}): ${M}`)}else{const M=`/api/falkordb/dashboard/sota?ts=${Date.now()}`,$=await fetch(M,{cache:"no-store"}),w=await $.text();try{S=JSON.parse(w)}catch{const k=x.trim().slice(0,120);throw new Error(`Invalid JSON response (${v||"unknown"}): ${k}`)}if(!$.ok)throw new Error(`HTTP ${$.status}`)}}if(!f.ok&&!S)throw new Error(`HTTP ${f.status}`);if(S.error)throw new Error(String(S.error));r.value=S.items||[],o.value=new Date().toISOString(),s.value=null,c.value=S.rebuilt?S.rebuild_reason||"rebuilt":null,u.value=!1,!t&&r.value.length===0&&!n.value&&(n.value=!0,c.value="empty catalog; refreshing",setTimeout(()=>{l(!0)},600)),r.value.length>0&&Bn(r.value,o.value),window.__loadingRegistry?.exit("hook:sota-data")}catch(m){if(window.__loadingRegistry?.exit("hook:sota-data",String(m)),s.value=m instanceof Error?m.message:String(m),r.value.length>0)u.value=!0;else{const d=ot();d?.items?.length&&(r.value=d.items,!o.value&&d.lastFetch&&(o.value=d.lastFetch),u.value=!0)}console.error("SOTA fetch error",m)}},Kv=()=>{const[l]=b(),t=Array.from(new Set(l.value.fallbackOrder||[])),n=t.filter(s=>s!=="mock");return n.length>0?n:t},Qv=()=>{const[l]=b(),t={},n=l.value?.providers||{};for(const s of Object.keys(n)){const r=n[s]||{};t[s]={available:!!r.available,error:typeof r.error=="string"?r.error:void 0}}return t},Xv=async(l,t)=>{const[n,s,r]=b();r[t.name]="checking";try{const o={topic:`infercell.${l}`,kind:"request",level:"info",actor:"dashboard",data:{moduleName:t.name,moduleFile:t.file,goldenId:t.goldenId,action:l,timestamp:new Date().toISOString()}};try{await fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch{}if(l==="inspect"){const c=await fetch(`/api/module/inspect?file=${encodeURIComponent(t.file)}`);if(c.ok){const u=await c.json();n[t.name]={loaded:!0,lastCheck:new Date().toISOString(),lineCount:u.lineCount,exports:u.exports,imports:u.imports,testStatus:u.testStatus,metrics:u.metrics}}}else if(l==="verify"){const c=await fetch(`/api/module/verify?file=${encodeURIComponent(t.file)}`);if(c.ok){const u=await c.json();r[t.name]=u.success?"ok":"error",n[t.name]={loaded:u.loaded,lastCheck:new Date().toISOString(),testStatus:u.testStatus,errors:u.errors}}}else if(l==="fork"){const c=crypto.randomUUID(),u=crypto.randomUUID();s[t.name]={traceId:c,cellId:u,state:"active",forkReason:`Manual fork from dashboard for ${t.name}`,children:[],workingMemory:{module:t.file,action:l},lastEvent:{topic:"infercell.fork",timestamp:new Date().toISOString(),summary:`Forked context for ${t.name}`}},r[t.name]="forked"}else if(l==="test"){const c=await fetch(`/api/module/test?file=${encodeURIComponent(t.file)}`);if(c.ok){const u=await c.json();n[t.name]={...n[t.name],loaded:!0,lastCheck:new Date().toISOString(),testStatus:u.success?"pass":"fail",errors:u.errors},r[t.name]=u.success?"ok":"error"}}["forked","error"].includes(r[t.name]||"")||(r[t.name]="ok")}catch(o){console.error("InferCell action error:",o),r[t.name]="warn"}},Zv=async l=>{const[t,n,s]=b();s.value=l;try{const r=await fetch(`/api/fs${t.value==="/"?"":t.value}/${l}`);r.ok&&(n.value=await r.text())}catch(r){n.value=`Error loading file: ${r}`}},eb=()=>{const[l]=b();if(l.value==="/")return;const t=l.value.split("/");t.pop(),l.value=t.join("/")||"/"},lb=l=>{const[t]=b();t.value=t.value==="/"?`/${l}`:`${t.value}/${l}`},tb=()=>{const[l,t]=b();t.value;const n=new Set(["chatgpt-web","claude-web","gemini-web"]);return Object.entries(l.value.providers).filter(([r])=>n.has(r))},nb=()=>{const[l,t,n,s]=b();let r=s.value;if(l.value&&(l.value==="error"?r=r.filter(o=>o.level==="error"):l.value==="high-impact"?r=r.filter(o=>{const c=o.semantic;return c?.impact==="high"||c?.impact==="critical"}):r=r.filter(o=>o.kind===l.value)),n.value.trim()){const o=n.value.trim(),c=t.value;r=r.filter(u=>{switch(c){case"glob":{const m=o.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*").replace(/\?/g,".");try{return new RegExp(m,"i").test(u.topic)}catch{return u.topic.includes(o)}}case"regex":{const m=o.match(/^\/(.+)\/([gimsuy]*)$/);try{const d=m?new RegExp(m[1],m[2]||"i"):new RegExp(o,"i");return d.test(u.topic)||d.test(u.actor||"")||d.test(JSON.stringify(u.data||{}))}catch{return u.topic.includes(o)}}case"ltl":if(o.startsWith("â—‡")||o.startsWith("eventually")){const m=o.replace(/^(â—‡|eventually)\s*/,"");return u.topic.includes(m)}if(o.startsWith("â–¡")||o.startsWith("always")){const m=o.replace(/^(â–¡|always)\s*/,"");return u.topic.includes(m)}return u.topic.includes(o);case"actor":return(u.actor||"").toLowerCase().includes(o.toLowerCase());case"topic":return u.topic.toLowerCase().startsWith(o.toLowerCase());default:return u.topic.includes(o)}})}return r},sb=()=>{const[l]=b(),t=l.value.filter(n=>n.topic.startsWith("qa.stack.lane."));return{total:t.length,recent:t.slice(-8).reverse()}},ab=()=>{const[l]=b(),t={};return l.value.forEach(n=>{const s=n.type||"other";t[s]||(t[s]=[]),t[s].push(n)}),t},rb=()=>{const[l,t]=b(),n=new Map;return t.value.forEach(s=>{n.set(s.id,{...s,status:"stopped"})}),l.value.forEach(s=>{const r=n.get(s.service_id);r&&(r.status=s.status,r.instanceId=s.instance_id,r.pid=s.pid)}),Array.from(n.values())},ob=async(l,t,n)=>{const[s]=b(),r=s.value;r&&await r.emit(l,t,n)},ib=({track:l})=>{const[t,n]=b(),s=l(()=>t.flowMode.value);n.value.flowMode!==s&&(n.value={...n.value,flowMode:s})},ub=l=>{const[t,n,s]=b();s.value={...s.value,flowMode:l},n.setFlowMode$(l),t.value&&t.value.emit("dashboard.vps.flow_mode_changed","command",{mode:l})},cb=(l,t)=>{const[n,s,r]=b(),o=wl(),c={id:o,type:l,payload:t,timestamp:Date.now()},u={id:wl(),request:c,result:{id:wl(),requestId:o,status:"pending",outputs:[],events:[],startedAt:Date.now()},collapsed:!1,activeTab:"outputs"};n.unshift(u),n.length>50&&n.pop(),r.value=!0;const m=s.value;if(!m){const v=n.findIndex(x=>x.request.id===o);return v>=0&&n[v].result&&(n[v].result.status="error",n[v].result.error="bus_not_connected",n[v].result.outputs.push({type:"error",content:"Bus not connected: ensure bus-bridge is running and the dashboard is connected before dispatching actions.",timestamp:Date.now()}),n[v].result.completedAt=Date.now()),o}const f=hi(m)[l];return f&&f(c,{onOutput:v=>{const x=n.findIndex(S=>S.request.id===o);x>=0&&n[x].result&&n[x].result.outputs.push(v)},onComplete:v=>{const x=n.findIndex(S=>S.request.id===o);x>=0&&n[x].result&&(v&&(n[x].result.status="error",n[x].result.error=v),!v&&n[x].result.status!=="success"||(n[x].result.completedAt=Date.now()))},onStatusChange:v=>{const x=n.findIndex(S=>S.request.id===o);x>=0&&n[x].result&&(n[x].result.status=v)}}),o},db=l=>{const[t]=b(),n=t.findIndex(s=>s.id===l);n>=0&&(t[n].collapsed=!t[n].collapsed)},pb=()=>{const[l]=b();l.length=0},mb=l=>{const[t,n]=b(),s=l.trim();if(s&&(t.value.includes(s)?t.value=t.value.filter(r=>r!==s):t.value=[...t.value,s],t.value.length===0)){const r=n.value.activeFallback||n.value.fallbackOrder.find(o=>o!=="mock")||"chatgpt-web";t.value=[r]}},gb=()=>{const[l]=b();l.value=!l.value},vb=l=>{const[t]=b();t.value=l},bb=()=>{const[l,t,n]=b();return t.type==="dir"?l(t.name):n(t.name)},fb=()=>{const[l]=b();return l("m")},xb=()=>{const[l]=b();return l("A")},hb=()=>{const[l]=b();return l("curation.trigger",{source:"dashboard"})},yb=()=>{const[l,t]=b();return l("worker.spawn",{provider:t.value.activeFallback||t.value.fallbackOrder.find(n=>n!=="mock")||"chatgpt-web"})},_b=()=>{const[l]=b();return l("verify.run",{})},wb=()=>{const[l]=b();return l("command.send",{topic:"pluribus.status",kind:"request",data:{}})},kb=(l,t)=>{const[n]=b();n.value=t.value},Sb=l=>{const[t,n,s,r]=b();if(l.key==="Enter"){const o=s.value.length>0?s.value:[r.value.activeFallback||r.value.fallbackOrder.find(c=>c!=="mock")||"chatgpt-web"];n("command.send",{topic:"dialogos.submit",kind:"request",data:{mode:"llm",providers:o,prompt:t.value}}),t.value=""}},Cb=()=>{const[l,t,n,s]=b(),r=n.value.length>0?n.value:[s.value.activeFallback||s.value.fallbackOrder.find(o=>o!=="mock")||"chatgpt-web"];t("command.send",{topic:"dialogos.submit",kind:"request",data:{mode:"llm",providers:r,prompt:l.value}}),l.value=""},$b=()=>{const[l]=b();return l.value="webllm"},Ib=()=>{const[l]=b();return l.value="studio"},Tb=()=>{const[l]=b();return l.value="voice"},Eb=(l,t)=>{const[n,s]=b();s.value=l,n.value=t},Ab=()=>{const[l,t]=b();return t(l.id)},Mb=()=>{const[l]=b();l.value="home"},Ob=()=>{W();const l=us(),t=an(dt),n=y(Nn),s=y([]),r=y([]),o=y([]),c=y([]),u=y([]),m=y([]),d=y(null),f=y(null),v=y(null),x=y(!1),S=y(!1),M=y([]),$=y([]),w=y([]),k=y([]),I=y(null);y(null);const T=y({}),z=p(Wv,"s_IcqfqGyQoc8",[T]),O=p(Yv,"s_Ayw3MYPXMSM",[z,t]),J=B([]),ne=y(!1),Z=y(!1);D(_("s_1tgIY6DdJuc",[z])),D(_("s_IUiJVEKI6cU")),D(_("s_b5If9EzbGac",[k,I,$,w,M,d,m,f,v,x])),D(_("s_syRXeyi7S64",[c,s,t,r,m]));const he=p(Jv,"s_eKEIakqUkN8",[S,d,m,f,v,x]),A=(()=>{const C=String(l.url.searchParams.get("view")||"").trim(),G=["home","studio","bus","events","agents","requests","sota","semops","services","rhizome","git","types","terminal","plurichat","webllm","voice","distill","diagnostics","generative","dkin","metatest","leads"];return C==="browser-auth"?"home":G.includes(C)?C:"home"})(),R=y(A),ee=y(null),ge=y(""),we=y("glob"),re=y(!0),ze=y(!0),Be=y(!1),P=y(""),K=y(0),Q=y(0),U=y([]),Le=N(p(Kv,"s_1WgNZYI9Ja4",[n])),Ll=y("auto"),Wn=N(p(Qv,"s_PZ3bVaKmYoo",[n]));D(_("s_TWbZU16Sv2A",[t,Wn])),D(_("s_NJ3T4E8Dszs",[R,z,t])),D(_("s_2ooAPcVQOrY",[R,z,ee,we,ge,t]));const Dl=B({}),rl=B({}),Rl=B({});y(null);const Yn=[{name:"The Lens",file:"lens_collimator.py",icon:"ðŸ”",goldenId:"G1",description:"Neurosymbolic query routing - classifies depth, selects lane, determines context mode and topology"},{name:"The Membrane",file:"agent_bus.py",icon:"ðŸ§«",goldenId:"G2",description:"Bus-first IPC architecture - append-only event bus for all inter-agent communication"},{name:"The Cells",file:"infercell_manager.py",icon:"ðŸ§¬",goldenId:"G3",description:"InferCell fork/merge lattice - context cells with trace correlation and divergence tracking"},{name:"The Fallback",file:"vps_session.py",icon:"ðŸ”„",goldenId:"G4",description:"Provider cascade chains - graceful fallback from primary to secondary providers"},{name:"The Evidence",file:"beam_append.py",icon:"ðŸ“œ",goldenId:"G5",description:"Append-only audit trails - immutable BEAM discourse log for provenance"},{name:"The Topology",file:"strp_topology.py",icon:"ðŸŒ",goldenId:"G6",description:"STRp execution modes - single, star, and peer_debate multi-agent patterns"},{name:"The Vector",file:"rag_vector.py",icon:"ðŸ“Š",goldenId:"G7",description:"RAG hybrid search - BM25 + semantic vector retrieval with sqlite-vec"},{name:"The Guard",file:"iso_git.mjs",icon:"ðŸ›¡ï¸",goldenId:"G8",description:"HGT validation ladder - 6-check guard for safe horizontal gene transfer"},{name:"The Quine",file:"iso_pqc.mjs",icon:"â™¾ï¸",goldenId:"G9",description:"Self-referential constitution - PQC quine architecture with bounded polymorphism"},{name:"The Soul",file:"pluribus_check.py",icon:"âœ¨",goldenId:"G10",description:"Unified agentic substrate - the integrated Pluribus organism heartbeat"}],Nl=[{name:"Lens/Collimator",file:"lens_collimator.py"},{name:"PluriChat",file:"plurichat.py"},{name:"InferCell",file:"infercell_manager.py"},{name:"RAG Vector",file:"rag_vector.py"},{name:"Bus Events",file:"agent_bus.py"},{name:"STRp Topology",file:"strp_topology.py"},{name:"HGT Guard",file:"iso_git.mjs"},{name:"Provider Fallback",file:"vps_session.py"},{name:"BEAM Append",file:"beam_append.py"},{name:"OITERATE",file:"oiterate_operator.py"}],jl=p(Xv,"s_0AQRe6N9Tjw",[Rl,Dl,rl]);D(_("s_Ug0nDyzW0fU",[R,k,I,$,w])),D(_("s_LJ0t0eCGKwY",[R,he]));const De=y("/"),yt=y([]),ol=y(null),zl=y("");D(_("s_P3xOV9uK5f0",[R,De,yt]));const Jn=p(Zv,"s_aTEaPpvRhxg",[De,zl,ol]),Kn=p(eb,"s_5jIkwZ9Ah4s",[De]),Qn=p(lb,"s_gabwRcXGzMw",[De]),Xn=N(p(tb,"s_mCcSxYJ8T1I",[n,Q])),ve=N(p(nb,"s_BTEFTasgvcg",[ee,we,ge,s])),Bl=N(p(sb,"s_l0mWa1wrXw4",[s])),Zn=N(p(ab,"s_WTMK5sma5tU",[m])),Ul=N(p(rb,"s_VYxi7Y07w7c",[o,r])),es=B({socket:null}),il=y(null),ul=p(ob,"s_d0y1ud0Xo0Y",[il]);D(_("s_vinHHbaWwGQ",[J,c,il,Z,s,u,U,o,r,n,m,Q,K,es])),El(p(ib,"s_BOzJmtWrs0s",[t,n]));const _t=p(ub,"s_MI0FbBjZGlo",[il,t,n]),oe=p(cb,"s_HvfjEndLWjo",[J,il,ne]),ls=p(db,"s_dvfEOBKQ6mg",[J]),ts=p(pb,"s_b07Pt162va0",[J]),ns=p(mb,"s_Pw7yTcW6tMs",[U,n]),ss=p(gb,"s_vZxBkAwoS1E",[Be]);return e("div",null,{class:"flex flex-col h-full"},[g(F,{id:"comp:bicameral-nav",children:g(xm,{get activeView(){return R.value},onSelect$:p(vb,"s_8gJ2SDGY4ck",[R]),[a]:{activeView:i(C=>C.value,[R],"p0.value")}},2,"ca_0"),[a]:{id:a}},1,"ca_1"),g(F,{id:"comp:memory-ingest",children:g(Sm,null,3,"ca_2"),[a]:{id:a}},1,"ca_3"),e("main",null,{class:i(C=>`flex-1 min-h-0 relative ${C.value==="terminal"||C.value==="plurichat"||C.value==="webllm"?"overflow-hidden p-0":"overflow-auto p-6"}`,[R],'`flex-1 min-h-0 relative ${p0.value==="terminal"||p0.value==="plurichat"||p0.value==="webllm"?"overflow-hidden p-0":"overflow-auto p-6"}`')},[R.value==="rhizome"&&e("div",null,{class:"grid grid-cols-12 gap-6 h-full"},[e("div",null,{class:"col-span-3 rounded-lg border border-border bg-card flex flex-col h-[calc(100vh-200px)]"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("h3",null,{class:"font-semibold text-sm"},"Explorer",3,null),e("div",null,{class:"text-xs text-muted-foreground mono truncate max-w-[150px]"},i(C=>C.value,[De],"p0.value"),3,null)],3,null),e("div",null,{class:"p-2 border-b border-border"},g(L,{variant:"secondary",onClick$:Kn,get disabled(){return De.value==="/"},class:"w-full justify-start text-xs h-8",children:".. (Up)",[a]:{variant:a,onClick$:a,disabled:i(C=>C.value==="/",[De],'p0.value==="/"'),class:a}},3,"ca_4"),1,null),e("div",null,{class:"flex-1 overflow-auto p-2 space-y-1"},yt.value.map(C=>g(L,{variant:ol.value===C.name?"tonal":"text",onClick$:p(bb,"s_daEHuCcku10",[Qn,C,Jn]),class:"w-full justify-start text-xs font-mono h-8",children:[e("span",null,{class:"mr-2"},C.type==="dir"?"ðŸ“":"ðŸ“„",1,null),e("span",null,{class:"truncate"},h(C,"name"),1,null)],[a]:{class:a}},1,C.name)),1,null)],1,null),e("div",null,{class:"col-span-9 rounded-lg border border-border bg-card flex flex-col h-[calc(100vh-200px)]"},[e("div",null,{class:"p-3 border-b border-border"},e("h3",null,{class:"font-semibold text-sm"},i(C=>C.value||"No file selected",[ol],'p0.value||"No file selected"'),3,null),3,null),e("div",null,{class:"flex-1 overflow-hidden bg-[#08080a]"},ol.value?g(F,{id:"comp:code-viewer",children:g(fu,{get code(){return zl.value},[a]:{code:i(C=>C.value,[zl],"p0.value")}},3,"ca_5"),[a]:{id:a}},1,"ca_6"):e("div",null,{class:"flex items-center justify-center h-full text-muted-foreground"},"Select a file to view content",3,null),1,null)],1,null)],1,"ca_7"),R.value==="git"&&e("div",null,{class:"absolute inset-0 flex flex-col",style:{height:"100%",width:"100%"}},g(Yi,null,3,"ca_8"),1,"ca_9"),R.value==="terminal"&&e("div",null,{class:"absolute inset-0 flex flex-col min-h-0"},g(Gi,null,3,"ca_10"),1,"ca_11"),R.value==="plurichat"&&e("div",null,{class:"absolute inset-0 flex flex-col min-h-0"},g(Hi,null,3,"ca_12"),1,"ca_13"),R.value==="generative"&&e("div",null,{class:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6 h-full overflow-auto"},[e("div",null,{class:"flex flex-col gap-4"},[e("h3",null,{class:"text-sm font-semibold text-muted-foreground"},"Generative Surface",3,null),g(Ki,null,3,"ca_14")],1,null),e("div",null,{class:"flex flex-col gap-4"},[e("h3",null,{class:"text-sm font-semibold text-muted-foreground"},"Interactive Notebooks",3,null),g(F,{id:"comp:marimo",children:g(Ru,null,3,"ca_15"),[a]:{id:a}},1,"ca_16")],1,null)],1,"ca_17"),R.value==="studio"&&g(F,{id:"comp:studio",children:g(T0,{session:n,events:s,agents:c,requests:u,onOpenAuth$:O,[a]:{session:a,events:a,agents:a,requests:a,onOpenAuth$:a}},3,"ca_18"),[a]:{id:a}},1,"ca_19"),R.value==="voice"&&e("div",null,{class:"h-full flex flex-col gap-6"},[g(F,{id:"comp:auralux",children:g(eu,{session:n,emitBus$:ul,[a]:{session:a,emitBus$:a}},3,"ca_20"),[a]:{id:a}},1,"ca_21"),e("div",null,{class:"border-t border-border pt-6"},[e("h3",null,{class:"text-sm font-semibold text-muted-foreground mb-4 px-2"},"LEGACY FALLBACK",3,null),g(F,{id:"comp:voice-speech",children:g(N0,{session:n,emitBus$:ul,[a]:{session:a,emitBus$:a}},3,"ca_22"),[a]:{id:a}},1,"ca_23")],1,null),g(vn,null,3,"ca_24")],1,"ca_25"),R.value==="webllm"&&e("div",null,{class:"absolute inset-0 flex flex-col min-h-0 p-4 gap-4"},[g(F,{id:"comp:edge-inference",children:g(Ou,null,3,"ca_26"),[a]:{id:a}},1,"ca_27"),g(F,{id:"comp:edge-catalog",children:g(Lu,null,3,"ca_28"),[a]:{id:a}},1,"ca_29"),g(F,{id:"comp:local-llm",children:g(Rt,null,3,"ca_30"),[a]:{id:a}},1,"ca_31"),e("div",null,{class:"flex-1 min-h-0"},g(Xi,{fullScreen:!0,[a]:{fullScreen:a}},3,"ca_32"),1,null)],1,"ca_33"),R.value==="home"&&e("div",null,{class:"space-y-6 glass-panel p-6"},[e("div",null,{class:"grid gap-6 lg:grid-cols-3"},[e("div",null,{class:"space-y-6"},[e("div",null,{class:"glass-surface glass-surface-1 p-4 glass-hover-lift",style:{"--stagger":0}},[e("md-elevation",null,null,null,3,null),e("h3",null,{class:"glass-section-header -mx-4 -mt-4 mb-3"},"FLOW MODE",3,null),e("div",null,{class:"flex gap-2"},[g(L,{get variant(){return n.value.flowMode==="m"?"tonal":"secondary"},onClick$:p(fb,"s_uchTQrwi7A8",[_t]),class:`flex-1 py-3 rounded-lg font-medium transition-all ${n.value.flowMode==="m"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50":"bg-muted/30 text-muted-foreground hover:bg-muted/50"}`,children:[e("md-ripple",null,null,null,3,null),e("div",null,{class:"text-lg"},"[m]",3,null),e("div",null,{class:"text-xs"},"Monitor",3,null)],[a]:{variant:i(C=>C.value.flowMode==="m"?"tonal":"secondary",[n],'p0.value.flowMode==="m"?"tonal":"secondary"'),onClick$:a}},3,"ca_34"),g(L,{get variant(){return n.value.flowMode==="A"?"tonal":"secondary"},onClick$:p(xb,"s_H0TR5EadZWg",[_t]),class:`flex-1 py-3 rounded-lg font-medium transition-all ${n.value.flowMode==="A"?"bg-green-500/20 text-green-400 border border-green-500/50":"bg-muted/30 text-muted-foreground hover:bg-muted/50"}`,children:[e("md-ripple",null,null,null,3,null),e("div",null,{class:"text-lg"},"[A]",3,null),e("div",null,{class:"text-xs"},"Auto",3,null)],[a]:{variant:i(C=>C.value.flowMode==="A"?"tonal":"secondary",[n],'p0.value.flowMode==="A"?"tonal":"secondary"'),onClick$:a}},3,"ca_35")],1,null)],1,null),e("div",null,{class:"glass-surface glass-surface-1 p-4"},[e("h3",null,{class:"glass-section-header -mx-4 -mt-4 mb-3"},"ACTIONS",3,null),e("div",null,{class:"grid grid-cols-2 gap-2"},[g(L,{variant:"tonal",onClick$:p(hb,"s_FaoW3Xn5OT4",[oe]),class:"p-3 rounded-lg glass-status-ok hover:opacity-90 transition-all text-sm font-medium",children:[e("div",null,null,"ðŸ”„",3,null),e("div",null,null,"Curate",3,null)],[a]:{variant:a,onClick$:a,class:a}},3,"ca_36"),g(L,{variant:"tonal",onClick$:p(yb,"s_z9kxPpWsf9g",[oe,n]),class:"p-3 rounded-lg bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 transition-all text-sm font-medium",children:[e("div",null,null,"ðŸ‘·",3,null),e("div",null,null,"Worker",3,null)],[a]:{variant:a,onClick$:a,class:a}},3,"ca_37"),g(L,{variant:"tonal",onClick$:p(_b,"s_j4MjFglaEww",[oe]),class:"p-3 rounded-lg bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 transition-all text-sm font-medium",children:[e("div",null,null,"âœ“",3,null),e("div",null,null,"Verify",3,null)],[a]:{variant:a,onClick$:a,class:a}},3,"ca_38"),g(L,{variant:"tonal",onClick$:p(wb,"s_O9uy00mptmw",[oe]),class:"p-3 rounded-lg bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 transition-all text-sm font-medium",children:[e("div",null,null,"ðŸ“Š",3,null),e("div",null,null,"Status",3,null)],[a]:{variant:a,onClick$:a,class:a}},3,"ca_39")],1,null)],1,null),J.length>0&&e("div",null,{class:"glass-surface glass-surface-1 p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-muted-foreground"},"DIALOGOS STREAM",3,null),e("button",null,{class:"text-xs text-primary hover:underline",onClick$:_("s_pRpGYxqMnN4",[R])},"Expand",3,null)],3,null),e("div",null,{class:"space-y-2"},J.slice(0,3).map(C=>e("div",null,{class:"p-2 rounded bg-muted/30 flex items-center gap-2"},[e("div",{class:`w-2 h-2 rounded-full ${C.result?.status==="success"?"bg-green-500":C.result?.status==="error"?"bg-red-500":"bg-yellow-500 animate-pulse"}`},null,null,3,null),e("span",null,{class:"text-xs font-mono"},h(C.request,"type"),1,null),e("span",null,{class:"text-xs text-muted-foreground ml-auto"},[C.result?.outputs.length||0," outputs"],1,null)],1,C.id)),1,null)],1,"ca_40"),e("div",null,{class:"glass-surface glass-surface-1 p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-muted-foreground"},"INFERCELL",3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded glass-status-ok"},"Context: [New]",3,null)],3,null),e("div",null,{class:"flex flex-wrap gap-2 mb-3"},Le.value.map(C=>e("label",null,{class:"flex items-center gap-1 text-xs text-muted-foreground bg-muted/30 px-2 py-1 rounded border border-border/50"},[e("input",{checked:U.value.includes(C),onChange$:_("s_b8GYuR9v6Lo",[C,ns])},{type:"checkbox"},null,2,null),e("span",null,{class:"mono"},C,1,null)],1,C)),1,null),e("div",null,{class:"flex gap-2"},[g(V,{label:"Command",get value(){return P.value},placeholder:"Interject command to selected providers...",class:"flex-1",onInput$:p(kb,"s_QVqQVwtT0Ns",[P]),onKeyDown$:p(Sb,"s_xwVnebrVmpU",[P,oe,U,n]),[a]:{label:a,value:i(C=>C.value,[P],"p0.value"),placeholder:a,class:a,onInput$:a,onKeyDown$:a}},3,"ca_41"),g(L,{onClick$:p(Cb,"s_XmgEVWkRRws",[P,oe,U,n]),children:"Send",[a]:{onClick$:a}},3,"ca_42")],1,null),e("div",null,{class:"text-xs text-muted-foreground mt-2"},"Interjects prompt to selected inference engines (via `dialogosd`).",3,null)],1,null)],1,null),e("div",null,{class:"space-y-6"},[e("div",null,{class:"glass-surface glass-surface-1 p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-muted-foreground"},"PROVIDERS",3,null),g(L,{variant:"tonal",onClick$:O,class:"text-[10px] px-2 py-1 flex items-center gap-1",title:"Open the Auth overlay (cloud icon)",children:[e("span",null,{class:"w-1.5 h-1.5 rounded-full bg-cyan-400/70"},null,3,null),"Auth"],[a]:{variant:a,onClick$:a,class:a,title:a}},3,"ca_43")],1,null),e("div",null,{class:"space-y-2"},Xn.value.map(([C,G])=>{W();const j=["chatgpt-web","claude-web","gemini-web"].includes(C),ke=G.error?.toLowerCase().includes("login")||G.error?.toLowerCase().includes("needs_login"),be=G.error?.toLowerCase().includes("bot")||G.error?.toLowerCase().includes("challenge"),Ue=G.error?.toLowerCase().includes("onboarding"),Se=j&&!G.available&&(ke||be||Ue);return e("div",{class:`p-3 rounded-lg border transition-all ${G.available?"border-green-500/30 bg-green-500/10":Se?"border-amber-500/30 bg-amber-500/10":"border-border bg-muted/20"}`},null,[e("div",null,{class:"flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`status-dot ${G.available?"available":Se?"warning":"unavailable"}`},null,null,3,null),e("span",null,{class:"font-medium mono text-sm"},C,1,null),j&&e("span",null,{class:"text-[9px] px-1 py-0.5 rounded bg-purple-500/20 text-purple-400 border border-purple-500/30"},"WEB",3,"ca_44")],1,null),e("div",null,{class:"flex items-center gap-1"},[Se&&e("span",{class:`text-[9px] px-1.5 py-0.5 rounded ${be?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-amber-500/20 text-amber-400 border border-amber-500/30"}`},null,be?"ðŸ¤– BOT BLOCKED":Ue?"ðŸŽ¯ ONBOARD":"ðŸ” AUTH REQUIRED",1,"ca_45"),G.model&&e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-primary/20 text-primary"},h(G,"model"),1,"ca_46")],1,null)],1,null),(G.note||G.error)&&e("div",{class:`text-xs mt-1 ml-5 ${Se?"text-amber-400/80":"text-muted-foreground"}`},null,G.available?G.note:G.error,1,"ca_47"),Se&&e("div",null,{class:"mt-1 ml-5 space-y-2"},[e("div",null,{class:"text-[10px] text-muted-foreground italic"},be?"Bot challenge detected â€” open Auth overlay to complete it":ke?"OAuth login required â€” open Auth overlay":"Onboarding required â€” open Auth overlay",1,null),e("div",null,{class:"flex flex-wrap gap-2"},g(L,{variant:"tonal",onClick$:O,class:"text-[10px] px-2 py-1 text-amber-300 border-amber-500/30 hover:bg-amber-500/30",title:"Open the Auth overlay (VNC + noVNC + controls)",children:"Open Auth",[a]:{variant:a,onClick$:a,class:a,title:a}},3,"ca_48"),1,null)],1,"ca_49")],1,C)}),1,null)],1,null),e("div",null,{class:"glass-surface glass-surface-1 p-4"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-muted-foreground mb-3"},"FALLBACK CHAIN",3,null),e("div",null,{class:"flex flex-wrap gap-1 items-center"},n.value.fallbackOrder.filter(C=>C!=="mock").map((C,G)=>{const j=n.value.providers[C],be=["chatgpt-web","claude-web","gemini-web"].includes(C)&&!j?.available&&(j?.error?.toLowerCase().includes("login")||j?.error?.toLowerCase().includes("bot")||j?.error?.toLowerCase().includes("challenge")),Ue=j?.available,Se=C===n.value.activeFallback;return e("span",null,{class:"flex items-center gap-1"},[G>0&&e("span",null,{class:"text-muted-foreground text-xs"},"â†’",3,"ca_50"),e("span",{class:`text-xs px-2 py-1 rounded relative ${Se?"bg-primary text-primary-foreground ring-2 ring-primary/50":be?"bg-amber-500/20 text-amber-400 border border-amber-500/30 opacity-60":Ue?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-muted/50 text-muted-foreground opacity-60"}`,title:be?"Auth required - OAuth login needed":j?.error||""},null,[be&&e("span",null,{class:"mr-0.5"},"ðŸ”",3,"ca_51"),C],1,null)],1,C)}),1,null),n.value.activeFallback&&e("div",null,{class:"mt-2 text-xs text-muted-foreground"},["Active: ",e("span",null,{class:"text-primary font-medium"},i(C=>C.value.activeFallback,[n],"p0.value.activeFallback"),3,null),["chatgpt-web","claude-web","gemini-web"].some(C=>n.value.fallbackOrder.indexOf(C)<n.value.fallbackOrder.indexOf(n.value.activeFallback||""))&&e("span",null,{class:"ml-2 text-amber-400/80"},"(web providers bypassed - need auth)",3,"ca_52")],1,"ca_53")],1,null),e("div",null,{class:"glass-surface glass-surface-1 p-4"},[e("div",null,{class:"flex items-center justify-between gap-3"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-muted-foreground"},"EDGE INFERENCE",3,null),g(L,{variant:"text",onClick$:p($b,"s_jjBSPmnL5yo",[R]),class:"text-xs text-primary hover:underline p-0 h-auto min-h-0",children:"Open WebLLM",[a]:{variant:a,onClick$:a,class:a}},3,"ca_54")],1,null),e("div",null,{class:"text-xs text-muted-foreground mt-2"},"Server inference is always on; browser WebLLM is always-on unless disabled.",3,null),e("div",null,{class:"mt-3"},g(F,{id:"comp:local-llm",children:g(Rt,null,3,"ca_55"),[a]:{id:a}},1,"ca_56"),1,null),e("div",null,{class:"mt-3 flex flex-wrap gap-2"},[g(L,{variant:"tonal",onClick$:p(Ib,"s_bzNt4c4CxCc",[R]),class:"text-[10px] px-2 py-1",children:"ðŸ§ª Studio",[a]:{variant:a,onClick$:a,class:a}},3,"ca_57"),g(L,{variant:"tonal",onClick$:p(Tb,"s_tr6jK5ARd7U",[R]),class:"text-[10px] px-2 py-1",children:"ðŸŽ™ï¸ Voice",[a]:{variant:a,onClick$:a,class:a}},3,"ca_58"),g(L,{variant:"tonal",onClick$:O,class:"text-[10px] px-2 py-1",children:"ðŸŒ Browser Auth",[a]:{variant:a,onClick$:a,class:a}},3,"ca_59")],1,null)],1,null)],1,null),e("div",null,{class:"space-y-6"},[g(F,{id:"comp:bus-pulse",children:g(zp,{get events(){return s.value},title:"LIVE PULSE",heightClass:"h-[500px]",[a]:{events:i(C=>C.value,[s],"p0.value"),title:a,heightClass:a}},3,"ca_60"),[a]:{id:a}},1,"ca_61"),g(F,{id:"comp:pb-lanes",children:g(Fg,{refreshIntervalMs:3e4,maxLanes:8,events:s,[a]:{refreshIntervalMs:a,maxLanes:a,events:a}},3,"ca_62"),[a]:{id:a}},1,"ca_63"),e("div",null,{class:"glass-surface glass-surface-1 p-4"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("div",null,{class:"flex items-center gap-2"},[e("h3",null,{class:"text-xs font-bold uppercase tracking-widest text-muted-foreground"},"QA LANES",3,null),e("span",null,{class:"text-[10px] px-2 py-0.5 rounded glass-status-ok"},i(C=>C.value.total,[Bl],"p0.value.total"),3,null)],3,null),e("button",null,{class:"text-[10px] px-2 py-1 rounded bg-muted/30 hover:bg-muted/50",onClick$:_("s_J4wLNW6GUpE")},"View All",3,null)],3,null),Bl.value.recent.length===0?e("div",null,{class:"text-xs text-muted-foreground"},"No QA lane messages yet.",3,"ca_64"):e("div",null,{class:"space-y-2"},Bl.value.recent.map((C,G)=>{const j=C.data||{},ke=typeof j.lane=="string"&&j.lane||typeof j.lane_id=="string"&&j.lane_id||typeof j.laneId=="string"&&j.laneId||typeof j.lane_name=="string"&&j.lane_name||typeof j.laneName=="string"&&j.laneName||"lane",be=typeof j.stage=="string"&&j.stage||typeof j.phase=="string"&&j.phase||typeof j.step=="string"&&j.step||typeof j.status=="string"&&j.status||"",Ue=typeof j.summary=="string"&&j.summary||typeof j.message=="string"&&j.message||typeof j.msg=="string"&&j.msg||typeof j.text=="string"&&j.text||typeof j.note=="string"&&j.note||typeof j.body=="string"&&j.body||(Object.keys(j).length>0?JSON.stringify(j).slice(0,160):"No payload"),Se=ke.trim().toUpperCase().slice(0,1),as={S:"bg-cyan-500/20 text-cyan-300 border-cyan-500/30",O:"bg-emerald-500/20 text-emerald-300 border-emerald-500/30",Q:"bg-amber-500/20 text-amber-300 border-amber-500/30",D:"bg-purple-500/20 text-purple-300 border-purple-500/30",T:"bg-rose-500/20 text-rose-300 border-rose-500/30"}[Se]||"bg-muted/40 text-muted-foreground border-border/50";return e("div",null,{class:"rounded-md border border-border/60 bg-muted/20 p-2"},[e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`text-[10px] px-1.5 py-0.5 rounded border ${as}`},null,ke,1,null),be&&e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-muted/50 text-muted-foreground border border-border/50"},be,1,"ca_65"),e("span",null,{class:"ml-auto text-[10px] text-muted-foreground"},C.iso?.slice(11,19)||"",1,null)],1,null),e("div",null,{class:"mt-1 text-xs text-muted-foreground line-clamp-2"},Ue,1,null)],1,`${C.id||C.ts}-${G}`)}),1,null)],1,null)],1,null)],1,null),g(F,{id:"comp:supermotd",children:g(mu,{get connected(){return Z.value},get events(){return s.value},get session(){return n.value},emitBus$:ul,[a]:{connected:i(C=>C.value,[Z],"p0.value"),events:i(C=>C.value,[s],"p0.value"),session:i(C=>C.value,[n],"p0.value"),emitBus$:a}},3,"ca_66"),[a]:{id:a}},1,"ca_67"),g(F,{id:"comp:agent-telemetry",children:g(qc,{get events(){return s.value},maxHeight:"320px",[a]:{events:i(C=>C.value,[s],"p0.value"),maxHeight:a}},3,"ca_68"),[a]:{id:a}},1,"ca_69")],1,"ca_70"),R.value==="bus"&&g(F,{id:"comp:bus-observatory",children:g(xp,{get connected(){return Z.value},events:s,agents:c,requests:u,session:n,emitBus$:ul,[a]:{connected:i(C=>C.value,[Z],"p0.value"),events:a,agents:a,requests:a,session:a,emitBus$:a}},3,"ca_71"),[a]:{id:a}},1,"ca_72"),R.value==="events"&&g(F,{id:"comp:event-viz",children:e("div",null,{class:"space-y-4"},[e("div",null,{class:"flex flex-col lg:flex-row gap-4"},[e("div",null,{class:"flex-1"},g(gc,{onSearch$:p(Eb,"s_jwkFKrZL5Io",[we,ge]),placeholder:"Search: strp.*, /error|warn/i, â—‡response, @claude...",[a]:{placeholder:a}},2,"ca_73"),1,null),e("div",null,{class:"flex items-center gap-2"},[e("button",{class:`text-xs px-3 py-2 rounded-lg border transition-colors ${ze.value?"bg-primary/20 text-primary border-primary/30":"bg-muted/30 text-muted-foreground border-border hover:bg-muted/50"}`},{onClick$:_("s_aCbxJmIlmPs",[ze])},"ðŸ“ˆ Timeline",3,null),e("button",{class:`text-xs px-3 py-2 rounded-lg border transition-colors ${re.value?"bg-purple-500/20 text-purple-400 border-purple-500/30":"bg-muted/30 text-muted-foreground border-border hover:bg-muted/50"}`},{onClick$:_("s_VoXdhc0QZcA",[re])},"ðŸ”— Flowmap",3,null),e("button",{class:`text-xs px-3 py-2 rounded-lg border transition-colors ${Be.value?"bg-cyan-500/20 text-cyan-400 border-cyan-500/30":"bg-muted/30 text-muted-foreground border-border hover:bg-muted/50"}`},{onClick$:ss},"ðŸ“‹ NDJSON",3,null)],1,null)],1,null),e("div",null,{class:"flex flex-wrap items-center gap-2 text-xs"},[e("span",null,{class:"text-muted-foreground"},"Quick:",3,null),e("button",{class:`px-2 py-1 rounded border transition-colors ${we.value==="topic"&&ge.value.toLowerCase().startsWith("qa.")?"bg-cyan-500/20 text-cyan-300 border-cyan-500/30":"bg-muted/30 text-muted-foreground border-border hover:bg-muted/50"}`},{onClick$:_("s_ZJynZQ27IWA",[ee,we,ge])},"qa.",3,null)],1,null),e("div",null,{class:"grid grid-cols-2 md:grid-cols-6 gap-2"},[e("div",null,{class:i(C=>`rounded-lg border border-border bg-card p-3 text-center cursor-pointer hover:bg-muted/50 transition-colors ${C.value?"":"ring-2 ring-primary"}`,[ee],'`rounded-lg border border-border bg-card p-3 text-center cursor-pointer hover:bg-muted/50 transition-colors ${!p0.value?"ring-2 ring-primary":""}`'),onClick$:_("s_xH5ViTF65UA",[ee])},[e("div",null,{class:"text-2xl font-bold text-primary"},i(C=>C.value.length,[s],"p0.value.length"),3,null),e("div",null,{class:"text-xs text-muted-foreground"},"Total Events",3,null)],3,null),e("div",{class:`rounded-lg border border-green-500/30 bg-green-500/10 p-3 text-center cursor-pointer hover:bg-green-500/20 transition-colors ${ee.value==="metric"?"ring-2 ring-green-500":""}`},{onClick$:_("s_eX0fZKxetOc",[ee])},[e("div",null,{class:"text-2xl font-bold text-green-400"},h(s.value.filter(C=>C.kind==="metric"),"length"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},"Metrics",3,null)],1,null),e("div",{class:`rounded-lg border border-blue-500/30 bg-blue-500/10 p-3 text-center cursor-pointer hover:bg-blue-500/20 transition-colors ${ee.value==="request"?"ring-2 ring-blue-500":""}`},{onClick$:_("s_6WMcp2T68mw",[ee])},[e("div",null,{class:"text-2xl font-bold text-blue-400"},h(s.value.filter(C=>C.kind==="request"),"length"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},"Requests",3,null)],1,null),e("div",{class:`rounded-lg border border-purple-500/30 bg-purple-500/10 p-3 text-center cursor-pointer hover:bg-purple-500/20 transition-colors ${ee.value==="artifact"?"ring-2 ring-purple-500":""}`},{onClick$:_("s_Gj95tyDpci0",[ee])},[e("div",null,{class:"text-2xl font-bold text-purple-400"},h(s.value.filter(C=>C.kind==="artifact"),"length"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},"Artifacts",3,null)],1,null),e("div",{class:`rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-center cursor-pointer hover:bg-red-500/20 transition-colors ${ee.value==="error"?"ring-2 ring-red-500":""}`},{onClick$:_("s_zuWEvTA92rE",[ee])},[e("div",null,{class:"text-2xl font-bold text-red-400"},h(s.value.filter(C=>C.level==="error"),"length"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},"Errors",3,null)],1,null),e("div",{class:`rounded-lg border border-yellow-500/30 bg-yellow-500/10 p-3 text-center cursor-pointer hover:bg-yellow-500/20 transition-colors ${ee.value==="high-impact"?"ring-2 ring-yellow-500":""}`},{onClick$:_("s_fXlkopC0P08",[ee])},[e("div",null,{class:"text-2xl font-bold text-yellow-400"},h(s.value.filter(C=>C.semantic?.impact==="high"||C.semantic?.impact==="critical"),"length"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},"High Impact",3,null)],1,null)],1,null),g(Ic,{get events(){return ve.value},[a]:{events:i(C=>C.value,[ve],"p0.value")}},3,"ca_74"),(ze.value||re.value)&&e("div",null,{class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},[ze.value&&g(hc,{get events(){return ve.value},buckets:60,height:60,width:400,[a]:{events:i(C=>C.value,[ve],"p0.value"),buckets:a,height:a,width:a}},3,"ca_75"),re.value&&g(wc,{get events(){return ve.value},maxNodes:16,height:180,[a]:{events:i(C=>C.value,[ve],"p0.value"),maxNodes:a,height:a}},3,"ca_76")],1,"ca_77"),e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-3"},[e("h2",null,{class:"font-semibold"},i(C=>C.value?"NDJSON Raw Feed":"Event Profiler",[Be],'p0.value?"NDJSON Raw Feed":"Event Profiler"'),3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-primary/20 text-primary"},"Live Feed",3,null),ge.value&&e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-cyan-500/20 text-cyan-400 font-mono"},[i(C=>C.value,[we],"p0.value"),": ",i(C=>C.value,[ge],"p0.value")],3,"ca_78")],1,null),e("span",null,{class:"text-sm text-muted-foreground"},[i(C=>C.value.length,[ve],"p0.value.length")," items"],3,null)],1,null),Be.value?e("div",null,{class:"p-2 overflow-auto h-[calc(100vh-520px)] bg-black/50 font-mono text-[10px]"},[ve.value.slice().reverse().slice(0,100).map((C,G)=>e("div",{class:`p-1.5 border-b border-white/5 hover:bg-white/5 ${C.level==="error"?"text-red-400":C.level==="warn"?"text-yellow-400":C.kind==="artifact"?"text-purple-400":"text-gray-400"}`},null,JSON.stringify(C),1,G)),ve.value.length===0&&e("div",null,{class:"p-8 text-center text-muted-foreground"},"No events to display",3,"ca_79")],1,"ca_80"):e("div",null,{class:"p-4 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 overflow-auto h-[calc(100vh-520px)] content-start"},[ve.value.slice().reverse().map((C,G)=>g(Sc,{event:C,index:G,showLTL:!0,showVectors:!0,showKG:!0,[a]:{showLTL:a,showVectors:a,showKG:a}},3,G)),ve.value.length===0&&e("div",null,{class:"col-span-full p-12 text-center text-muted-foreground border-2 border-dashed border-white/5 rounded-xl"},[e("div",null,{class:"text-4xl mb-4"},"ðŸ“­",3,null),"No events match the active filter.",ge.value&&e("div",null,{class:"mt-2 text-xs"},["Search: ",e("code",null,{class:"bg-muted/30 px-1 rounded"},i(C=>C.value,[ge],"p0.value"),3,null)],3,"ca_81")],1,"ca_82")],1,null)],1,null)],1,null),[a]:{id:a}},1,"ca_83"),R.value==="agents"&&e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border"},[e("h2",null,{class:"font-semibold"},"Agent Status",3,null),e("p",null,{class:"text-sm text-muted-foreground"},"VOR metrics and health from pluribus.check.report",3,null)],3,null),e("div",null,{class:"overflow-auto"},e("table",null,{class:"w-full text-sm"},[e("thead",null,{class:"bg-muted/30"},e("tr",null,null,[e("th",null,{class:"text-left p-3 font-medium"},"Actor",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Status",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Health",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Queue",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Task",3,null),e("th",null,{class:"text-left p-3 font-medium"},"VOR CDI",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Last Seen",3,null)],3,null),3,null),e("tbody",null,null,c.value.length===0?e("tr",null,null,e("td",null,{colSpan:7,class:"p-8 text-center text-muted-foreground"},"No agent reports received yet",3,null),3,"ca_84"):c.value.map(C=>e("tr",null,{class:"border-b border-border/30 hover:bg-muted/20"},[e("td",null,{class:"p-3 font-mono"},h(C,"actor"),1,null),e("td",null,{class:"p-3"},e("span",{class:`px-2 py-0.5 rounded text-xs ${C.status==="idle"?"bg-green-500/20 text-green-400":C.status==="working"?"bg-blue-500/20 text-blue-400":"bg-muted text-muted-foreground"}`},null,h(C,"status"),1,null),1,null),e("td",null,{class:"p-3"},e("span",{class:C.health==="ok"?"text-green-400":"text-yellow-400"},null,h(C,"health"),1,null),1,null),e("td",null,{class:"p-3"},h(C,"queue_depth"),1,null),e("td",null,{class:"p-3 text-muted-foreground max-w-[200px] truncate"},C.current_task||"-",1,null),e("td",null,{class:"p-3 font-mono"},C.vor_cdi?.toFixed(2)||"-",1,null),e("td",null,{class:"p-3 text-xs text-muted-foreground"},C.last_seen_iso?.slice(11,19),1,null)],1,C.actor)),1,null)],1,null),1,null)],1,"ca_85"),R.value==="requests"&&e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border"},[e("h2",null,{class:"font-semibold"},"Pending Requests",3,null),e("p",null,{class:"text-sm text-muted-foreground"},"STRp pipeline requests",3,null)],3,null),e("div",null,{class:"overflow-auto"},e("table",null,{class:"w-full text-sm"},[e("thead",null,{class:"bg-muted/30"},e("tr",null,null,[e("th",null,{class:"text-left p-3 font-medium"},"ID",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Time",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Kind",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Actor",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Goal",3,null),e("th",null,{class:"text-left p-3 font-medium"},"Status",3,null)],3,null),3,null),e("tbody",null,null,u.value.length===0?e("tr",null,null,e("td",null,{colSpan:6,class:"p-8 text-center text-muted-foreground"},"No pending requests",3,null),3,"ca_86"):u.value.slice().reverse().map(C=>e("tr",null,{class:"border-b border-border/30 hover:bg-muted/20"},[e("td",null,{class:"p-3 font-mono text-xs"},C.id?.slice(0,8),1,null),e("td",null,{class:"p-3 text-xs text-muted-foreground"},C.created_iso?.slice(11,19),1,null),e("td",null,{class:"p-3"},h(C,"kind"),1,null),e("td",null,{class:"p-3 font-mono"},h(C,"actor"),1,null),e("td",null,{class:"p-3 max-w-[300px] truncate"},h(C,"goal"),1,null),e("td",null,{class:"p-3"},e("span",{class:`px-2 py-0.5 rounded text-xs ${C.status==="completed"?"bg-green-500/20 text-green-400":C.status==="pending"?"bg-yellow-500/20 text-yellow-400":C.status==="failed"?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`},null,h(C,"status"),1,null),1,null)],1,C.id)),1,null)],1,null),1,null)],1,"ca_87"),R.value==="sota"&&e("div",null,{class:"space-y-6"},[e("div",null,{class:"flex items-center justify-between"},[e("div",null,null,[e("h2",null,{class:"text-lg font-semibold"},"SOTA Catalog",3,null),e("p",null,{class:"text-sm text-muted-foreground"},"Curated tools, sources, and research feeds",3,null),d.value&&e("p",null,{class:"text-xs text-red-400 mt-1"},["SOTA fetch failed: ",i(C=>C.value,[d],"p0.value")],3,"ca_88")],1,null),e("div",null,{class:"flex items-center gap-3"},[e("select",null,{class:"px-3 py-2 rounded bg-muted/50 border border-border text-sm",value:i(C=>C.value,[Ll],"p0.value"),onChange$:_("s_7AckUp2wbw4",[Ll])},jn.map(C=>e("option",{value:C},null,C,1,C)),1,null),e("button",null,{class:"px-3 py-2 rounded bg-muted/50 border border-border text-sm text-muted-foreground hover:bg-muted/70",title:"Refresh SOTA catalog",onClick$:_("s_QHX3zrCAwgI",[he])},"Refresh",3,null),e("button",null,{class:"px-3 py-2 rounded bg-muted/50 border border-border text-sm text-muted-foreground hover:bg-muted/70",title:"Rebuild SOTA index",onClick$:_("s_MvD3HAuhiXs",[he])},"Rebuild",3,null),e("div",null,{class:"text-sm text-muted-foreground"},[i(C=>C.value.length,[m],"p0.value.length")," items"],3,null),f.value&&e("div",null,{class:"text-xs text-muted-foreground"},f.value.slice(11,19),1,"ca_89"),x.value&&e("div",null,{class:"text-xs text-amber-400"},"cached",3,"ca_90"),v.value&&e("div",null,{class:"text-xs text-amber-400"},["rebuilt: ",i(C=>C.value,[v],"p0.value")],3,"ca_91")],1,null)],1,null),Object.entries(Zn.value).map(([C,G])=>e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-primary"},C==="rss"?"ðŸ“°":C==="repo"?"ðŸ“¦":C==="blog"?"ðŸ“":C==="site"?"ðŸŒ":"ðŸ“„",1,null),e("h3",null,{class:"font-semibold capitalize"},C,1,null),e("span",null,{class:"text-xs text-muted-foreground"},["(",h(G,"length"),")"],1,null)],1,null),e("div",null,{class:"divide-y divide-border/30"},G.map(j=>e("div",null,{class:"p-4 hover:bg-muted/20 transition-colors"},[e("div",null,{class:"flex items-start justify-between gap-4"},[e("div",null,{class:"flex-1"},[e("a",{href:h(j,"url")},{target:"_blank",rel:"noopener",class:"font-medium text-primary hover:underline"},h(j,"title"),1,null),e("div",null,{class:"text-sm text-muted-foreground mt-1"},[h(j,"org")," â€¢ ",h(j,"region")],1,null),j.notes&&e("div",null,{class:"text-xs text-muted-foreground mt-2"},h(j,"notes"),1,"ca_92")],1,null),e("div",null,{class:"flex flex-col items-end gap-2"},[e("span",{class:`text-xs px-2 py-0.5 rounded ${j.priority===1?"bg-red-500/20 text-red-400":j.priority===2?"bg-yellow-500/20 text-yellow-400":"bg-muted text-muted-foreground"}`},null,["P",h(j,"priority")],1,null),j.distill_status&&e("span",{class:`text-xs px-2 py-0.5 rounded ${j.distill_status==="completed"?"bg-green-500/20 text-green-400":j.distill_status==="failed"?"bg-red-500/20 text-red-400":j.distill_status==="running"?"bg-blue-500/20 text-blue-400":j.distill_status==="queued"?"bg-yellow-500/20 text-yellow-400":"bg-muted text-muted-foreground"}`},null,h(j,"distill_status"),1,"ca_93"),e("div",null,{class:"flex gap-1 flex-wrap justify-end"},j.tags.slice(0,3).map(ke=>e("span",null,{class:"text-xs px-1.5 py-0.5 rounded bg-muted/50 text-muted-foreground"},ke,1,ke)),1,null),e("button",{onClick$:_("s_5BOsxwiK7jc",[oe,j,Ll])},{class:"text-xs text-primary hover:underline mt-1"},"Distill",2,null),e("button",{onClick$:_("s_Kaj32JL30Ic",[oe,j])},{class:"text-xs text-primary hover:underline"},"KG",2,null)],1,null)],1,null),j.distill_artifact_path&&e("div",null,{class:"mt-3 rounded bg-muted/30 border border-border/50 p-3"},[e("div",null,{class:"text-xs text-muted-foreground"},["Distillation artifact: ",e("span",null,{class:"mono text-primary"},h(j,"distill_artifact_path"),1,null)],1,null),j.distill_snippet&&e("pre",null,{class:"mono text-xs whitespace-pre-wrap mt-2 max-h-40 overflow-auto"},h(j,"distill_snippet"),1,"ca_94")],1,"ca_95")],1,j.id)),1,null)],1,C)),m.value.length===0&&e("div",null,{class:"rounded-lg border border-border bg-card p-8 text-center text-muted-foreground"},"No SOTA items loaded. Check /api/sota or rebuild the index.",3,"ca_96")],1,"ca_97"),R.value==="services"&&e("div",null,{class:"grid gap-6 lg:grid-cols-2"},[e("div",null,{class:"space-y-6"},[e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-primary"},"âš¡",3,null),e("h3",null,{class:"font-semibold"},"Port Services",3,null),e("span",null,{class:"text-xs text-muted-foreground"},"(HTTP/WS, MCP, APIs)",3,null)],3,null),e("div",null,{class:"divide-y divide-border/30"},Ul.value.filter(C=>C.kind==="port").map(C=>e("div",null,{class:"p-4 flex items-center justify-between hover:bg-muted/20"},[e("div",null,{class:"flex items-center gap-3"},[e("span",{class:`status-dot ${C.status==="running"?"available pulse":"unavailable"}`},null,null,3,null),e("div",null,null,[e("div",null,{class:"font-medium"},h(C,"name"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},h(C,"description"),1,null)],1,null)],1,null),e("div",null,{class:"flex items-center gap-3"},[C.port&&e("span",null,{class:"mono text-sm text-primary"},[":",h(C,"port")],1,"ca_98"),e("div",null,{class:"flex gap-1"},[e("button",{class:`px-3 py-1 rounded text-xs font-medium ${C.status==="running"?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`,onClick$:_("s_eMUyclwC6pM",[oe,C])},null,C.status==="running"?"Stop":"Start",0,null),e("button",{onClick$:_("s_ThNtZI6m0TY",[oe,C])},{class:"px-2 py-1 rounded text-xs font-medium bg-muted/50 text-muted-foreground hover:bg-muted"},"Logs",2,null)],1,null)],1,null)],1,C.id)),1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-primary"},"ðŸ”„",3,null),e("h3",null,{class:"font-semibold"},"Process Services",3,null),e("span",null,{class:"text-xs text-muted-foreground"},"(Workers, Daemons, TUIs)",3,null)],3,null),e("div",null,{class:"divide-y divide-border/30"},Ul.value.filter(C=>C.kind==="process").map(C=>e("div",null,{class:"p-4 flex items-center justify-between hover:bg-muted/20"},[e("div",null,{class:"flex items-center gap-3"},[e("span",{class:`status-dot ${C.status==="running"?"available pulse":"unavailable"}`},null,null,3,null),e("div",null,null,[e("div",null,{class:"font-medium"},h(C,"name"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},h(C,"description"),1,null)],1,null)],1,null),e("div",null,{class:"flex items-center gap-3"},[e("div",null,{class:"flex gap-1"},(C.tags||[]).slice(0,2).map(G=>e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-muted/50"},G,1,G)),1,null),e("div",null,{class:"flex gap-1"},[e("button",{class:`px-3 py-1 rounded text-xs font-medium ${C.status==="running"?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`,onClick$:_("s_vb0DffkmcEQ",[oe,C])},null,C.status==="running"?"Stop":"Start",0,null),e("button",{onClick$:_("s_KdgSB2KC0Bk",[oe,C])},{class:"px-2 py-1 rounded text-xs font-medium bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30"},"Restart",2,null)],1,null)],1,null)],1,C.id)),1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-primary"},"ðŸ”—",3,null),e("h3",null,{class:"font-semibold"},"Compositions",3,null),e("span",null,{class:"text-xs text-muted-foreground"},"(Pipelines, Workflows)",3,null)],3,null),e("div",null,{class:"divide-y divide-border/30"},Ul.value.filter(C=>C.kind==="composition").map(C=>e("div",null,{class:"p-4 flex items-center justify-between hover:bg-muted/20"},[e("div",null,{class:"flex items-center gap-3"},[e("span",{class:`status-dot ${C.status==="running"?"available pulse":"unavailable"}`},null,null,3,null),e("div",null,null,[e("div",null,{class:"font-medium"},h(C,"name"),1,null),e("div",null,{class:"text-xs text-muted-foreground"},h(C,"description"),1,null)],1,null)],1,null),e("button",{onClick$:_("s_8yiBger05FY",[oe,C])},{class:"px-3 py-1 rounded text-xs font-medium bg-purple-500/20 text-purple-400 hover:bg-purple-500/30"},"Run",2,null)],1,C.id)),1,null)],1,null)],1,null),e("div",null,{class:"rounded-lg border border-border bg-card flex flex-col h-[calc(100vh-200px)]"},[e("div",null,{class:"p-4 border-b border-border flex items-center justify-between flex-shrink-0"},[e("h3",null,{class:"font-semibold"},"Dialogos",3,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-xs text-muted-foreground"},[i(C=>C.length,[J],"p0.length")," actions"],3,null),J.length>0&&e("button",null,{class:"text-xs px-2 py-1 rounded bg-muted/50 hover:bg-muted text-muted-foreground",onClick$:ts},"Clear",3,"ca_99")],1,null)],1,null),e("div",null,{class:"flex-1 overflow-auto p-4 space-y-4"},J.length===0?e("div",null,{class:"text-center py-8 text-muted-foreground"},[e("div",null,{class:"text-4xl mb-3"},"ðŸ’¬",3,null),e("div",null,null,"Dialogos Stream Empty",3,null),e("div",null,{class:"text-xs mt-1"},"Interject commands to begin the dialogue.",3,null)],3,"ca_100"):J.map(C=>g(zi,{cell:C,onToggleCollapse$:p(Ab,"s_Oxx1WQ433vc",[C,ls])},2,C.id)),1,null)],1,null)],1,"ca_101"),R.value==="distill"&&e("div",null,{class:"space-y-6"},[e("div",null,{class:"grid grid-cols-2 md:grid-cols-4 gap-4"},[e("div",null,{class:"rounded-lg border border-green-500/30 bg-green-500/10 p-4"},[e("div",null,{class:"text-3xl font-bold text-green-400"},"10/10",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Generations Complete",3,null)],3,null),e("div",null,{class:"rounded-lg border border-blue-500/30 bg-blue-500/10 p-4"},[e("div",null,{class:"text-3xl font-bold text-blue-400"},"102",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"BEAM Entries",3,null)],3,null),e("div",null,{class:"rounded-lg border border-purple-500/30 bg-purple-500/10 p-4"},[e("div",null,{class:"text-3xl font-bold text-purple-400"},"651",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"GOLDEN Lines",3,null)],3,null),e("div",null,{class:"rounded-lg border border-yellow-500/30 bg-yellow-500/10 p-4"},[e("div",null,{class:"text-3xl font-bold text-yellow-400"},"92%",3,null),e("div",null,{class:"text-sm text-muted-foreground"},"Verified (93/101)",3,null)],3,null)],3,null),g(F,{id:"comp:infer-cell",children:e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-2xl"},"ðŸ†",3,null),e("h3",null,{class:"font-semibold"},"GOLDEN Synthesis (G1-G10)",3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-green-500/20 text-green-400"},"INTERACTIVE",3,null),e("span",null,{class:"text-xs text-muted-foreground ml-auto"},"Click to expand â€¢ Trigger actions",3,null)],3,null),e("div",null,{class:"p-4 space-y-2"},Yn.map(C=>g(hn,{module:C,status:rl[C.name]||"idle",session:Dl[C.name],liveData:Rl[C.name],onTrigger$:jl,compact:!1,[a]:{onTrigger$:a,compact:a}},3,C.goldenId)),1,null)],1,null),[a]:{id:a}},1,"ca_102"),g(F,{id:"comp:infer-cell",children:e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-2xl"},"âœ…",3,null),e("h3",null,{class:"font-semibold"},"Subsystem Verification Matrix",3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-green-500/20 text-green-400"},[h(Object.values(rl).filter(C=>C==="ok"),"length"),"/",h(Nl,"length")," VERIFIED"],1,null),e("button",{onClick$:_("s_Lo2FAYMrNrE",[jl,Nl])},{class:"text-xs px-3 py-1 rounded border border-cyan-500/30 bg-cyan-500/10 hover:bg-cyan-500/20 ml-auto"},"ðŸ”„ Verify All",2,null)],1,null),e("div",null,{class:"p-4"},g(su,{modules:Nl,statuses:rl,sessions:Dl,liveData:Rl,onTrigger$:jl,compact:!0,columns:5,[a]:{statuses:a,sessions:a,liveData:a,onTrigger$:a,compact:a,columns:a}},3,"ca_103"),1,null)],1,null),[a]:{id:a}},1,"ca_104"),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-2xl"},"ðŸ”",3,null),e("h3",null,{class:"font-semibold"},"Lens/Collimator Routing",3,null)],3,null),e("div",null,{class:"p-4 space-y-3"},[e("div",null,{class:"flex items-center justify-between p-2 rounded bg-muted/20"},[e("span",null,{class:"text-sm"},"Depth Classification",3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-blue-500/20 text-blue-400"},"narrow | deep",3,null)],3,null),e("div",null,{class:"flex items-center justify-between p-2 rounded bg-muted/20"},[e("span",null,{class:"text-sm"},"Lane Selection",3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-400"},"dialogos | pbpair",3,null)],3,null),e("div",null,{class:"flex items-center justify-between p-2 rounded bg-muted/20"},[e("span",null,{class:"text-sm"},"Context Mode",3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-green-500/20 text-green-400"},"min | lite | full",3,null)],3,null),e("div",null,{class:"flex items-center justify-between p-2 rounded bg-muted/20"},[e("span",null,{class:"text-sm"},"Topology",3,null),e("span",null,{class:"text-xs px-2 py-0.5 rounded bg-orange-500/20 text-orange-400"},"single | star | peer_debate",3,null)],3,null)],3,null)],3,null),e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-2xl"},"ðŸ“‹",3,null),e("h3",null,{class:"font-semibold"},"DKIN Protocol v12",3,null)],3,null),e("div",null,{class:"p-4 space-y-2 text-sm"},[e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v1",3,null),e("span",null,null,"Minimal check-in",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v2",3,null),e("span",null,null,"Drift guards",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v3",3,null),e("span",null,null,"Enhanced dashboard",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v4",3,null),e("span",null,null,"ITERATE operator",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v5",3,null),e("span",null,null,"Silent monitoring",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v6",3,null),e("span",null,null,"Shared-ledger sync",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v7",3,null),e("span",null,null,"Gap detection",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v8",3,null),e("span",null,null,"OITERATE omega-loop",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v9",3,null),e("span",null,null,"DKIN alias established",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v10",3,null),e("span",null,null,"Intelligent membrane",3,null)],3,null),e("div",null,{class:"flex gap-2"},[e("span",null,{class:"text-muted-foreground w-8"},"v11",3,null),e("span",null,null,"MCP interop observability",3,null)],3,null),e("div",null,{class:"flex gap-2 text-primary font-medium"},[e("span",null,{class:"w-8"},"v12",3,null),e("span",null,null,"Parallel agent isolation (PAIP)",3,null)],3,null)],3,null)],3,null)],3,null),e("div",null,{class:"rounded-lg border border-border bg-card"},[e("div",null,{class:"p-4 border-b border-border flex items-center gap-3"},[e("span",null,{class:"text-2xl"},"ðŸ“",3,null),e("h3",null,{class:"font-semibold"},"BEAM Discourse Summary",3,null),e("span",null,{class:"text-xs text-muted-foreground"},"102 entries across 10 iterations",3,null)],3,null),e("div",null,{class:"p-4"},[e("div",null,{class:"grid grid-cols-5 md:grid-cols-10 gap-2"},[1,2,3,4,5,6,7,8,9,10].map(C=>e("div",null,{class:"rounded border border-border bg-muted/20 p-2 text-center"},[e("div",null,{class:"text-xs text-muted-foreground"},"Iter",3,null),e("div",null,{class:"text-lg font-bold text-primary"},C,1,null),e("div",null,{class:"text-xs text-green-400"},"~10",3,null)],1,C)),1,null),e("div",null,{class:"mt-4 flex gap-4 text-sm"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-3 h-3 rounded bg-green-500"},null,3,null),e("span",null,null,"V - Verified",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-3 h-3 rounded bg-blue-500"},null,3,null),e("span",null,null,"R - Reported",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-3 h-3 rounded bg-purple-500"},null,3,null),e("span",null,null,"I - Intent",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"w-3 h-3 rounded bg-yellow-500"},null,3,null),e("span",null,null,"G - Gap",3,null)],3,null)],3,null)],1,null)],1,null)],1,"ca_105"),R.value==="diagnostics"&&g(F,{id:"comp:diagnostics",children:g(rc,null,3,"ca_106"),[a]:{id:a}},1,"ca_107"),R.value==="semops"&&g(F,{id:"comp:semops-editor",children:g(np,null,3,"ca_108"),[a]:{id:a}},1,"ca_109"),R.value==="dkin"&&g(F,{id:"comp:dkin-monitor",children:e("div",null,{class:"h-full flex flex-col"},g(v0,{get events(){return s.value},[a]:{events:i(C=>C.value,[s],"p0.value")}},3,"ca_110"),1,null),[a]:{id:a}},1,"ca_111"),R.value==="metatest"&&g(F,{id:"comp:metatest",children:e("div",null,{class:"h-full flex flex-col p-4"},[e("div",null,{class:"mb-4"},[e("h1",null,{class:"text-xl font-bold text-foreground"},"METATEST Dashboard",3,null),e("p",null,{class:"text-sm text-muted-foreground"},"Comprehensive Test Inventory & Coverage Analysis",3,null)],3,null),e("div",null,{class:"flex-1 overflow-auto"},g(Kg,{refreshIntervalMs:3e4,maxItems:60,[a]:{refreshIntervalMs:a,maxItems:a}},3,"ca_112"),1,null)],1,null),[a]:{id:a}},1,"ca_113"),R.value==="browser-auth"&&g(F,{id:"comp:vnc-auth",children:e("div",null,{class:"h-full flex flex-col p-4"},g(cn,{fullScreen:!0,[a]:{fullScreen:a}},3,"ca_114"),1,null),[a]:{id:a}},1,"ca_115"),R.value==="types"&&g(F,{id:"comp:types-tree",children:e("div",null,{class:"h-full overflow-y-auto p-4"},g(cm,{onClose$:p(Mb,"s_H7SxzPkwjJA",[R])},2,"ca_116"),1,null),[a]:{id:a}},1,"ca_117"),R.value==="leads"&&g(F,{id:"comp:leads",children:e("div",null,{class:"h-full overflow-y-auto p-4"},g(Lv,{leads:M,dispatchAction:oe,get connected(){return Z.value},[a]:{leads:a,dispatchAction:a,connected:i(C=>C.value,[Z],"p0.value")}},3,"ca_118"),1,null),[a]:{id:a}},1,"ca_119"),R.value==="registry-atlas"&&g(F,{id:"comp:registry-atlas",children:e("div",null,{class:"h-full overflow-y-auto p-6"},g(Vv,{events:s,[a]:{events:a}},3,"ca_120"),1,null),[a]:{id:a}},1,"ca_121"),g(F,{id:"comp:code-segment",children:g(Sg,null,3,"ca_122"),[a]:{id:a}},1,"ca_123"),g(F,{id:"comp:notifications",children:g(rg,null,3,"ca_124"),[a]:{id:a}},1,"ca_125")],1,null)],1,"ca_126")},Pb=E(p(Ob,"s_s97WeDWZP44")),Lb={title:"Pluribus Control Center",meta:[{name:"description",content:"Unified isomorphic control center for Pluribus multi-agent orchestration"}]},Db=Object.freeze(Object.defineProperty({__proto__:null,_auto_SOTA_PROVIDER_OPTIONS:jn,_auto_defaultSession:Nn,_auto_generateActionId:wl,_auto_loadSotaCache:ot,_auto_saveSotaCache:Bn,default:Pb,head:Lb},Symbol.toStringTag,{value:"Module"})),Rb=async({json:l})=>{const n=[{id:"ls-tower",status:"ok",label:"LearningTower",detail:"L8",meta:"neurosymbolic",uncertainty:.05},{id:"ls-meta",status:"ok",label:"MetaLearner",detail:"Bayesian",meta:"âš¡ active-inf",uncertainty:.12},{id:"ls-opt",status:"ok",label:"OptimizationL",detail:"telemetry",meta:"levers",uncertainty:.02},{id:"ls-portal",status:"ok",label:"Portal",detail:"AM/SM",meta:"metabolic",uncertainty:.01},{id:"ls-ingest",status:"ok",label:"MetaIngest",detail:"busâ†’repo",meta:"streaming",uncertainty:0},{id:"ls-graphiti",status:"ok",label:"Graphiti",detail:"KG",meta:"causal",uncertainty:.08},{id:"ls-mem0",status:"ok",label:"Mem0",detail:"episodic",meta:"agents",uncertainty:.15}].map(s=>({...s,uncertainty:Math.max(0,Math.min(1,s.uncertainty+(Math.random()*.05-.025)))}));l(200,{timestamp:new Date().toISOString(),systems:n})},Nb=Object.freeze(Object.defineProperty({__proto__:null,onGet:Rb},Symbol.toStringTag,{value:"Module"})),Un={ONTOLOGY_EVOLVER:"/pluribus/nucleus/tools/ontology_evolver.py",METAINGEST_PIPELINE:"/pluribus/nucleus/tools/metaingest_pipeline.py"},jb="/pluribus",zb=3e4;async function Fn(l,t,n={}){const{timeout:s=zb,cwd:r=jb,env:o,stdin:c}=n;return new Promise((u,m)=>{let d="",f="",v=!1;const x=ut("python3",[l,...t],{cwd:r,env:{...process.env,...o},stdio:["pipe","pipe","pipe"]}),S=setTimeout(()=>{v=!0,x.kill("SIGTERM"),m(new Error(`CLI timeout after ${s}ms: ${l} ${t.join(" ")}`))},s);x.stdout?.on("data",M=>{d+=M.toString()}),x.stderr?.on("data",M=>{f+=M.toString()}),x.on("close",M=>{clearTimeout(S),v||u({stdout:d.trim(),stderr:f.trim(),exitCode:M??0})}),x.on("error",M=>{clearTimeout(S),v||m(new Error(`CLI spawn error: ${M.message}`))}),c&&x.stdin&&(x.stdin.write(c),x.stdin.end())})}function Ml(l){if(l.exitCode!==0)throw new $l(`CLI exited with code ${l.exitCode}`,l.exitCode,l.stderr);try{return JSON.parse(l.stdout)}catch(t){throw new $l(`Failed to parse JSON output: ${t instanceof Error?t.message:"Unknown error"}`,0,l.stdout.substring(0,200))}}function Bb(l){try{return Ml(l)}catch{return null}}class $l extends Error{constructor(t,n,s){super(t),this.exitCode=n,this.stderr=s,this.name="CLIError"}toJSON(){return{name:this.name,message:this.message,exitCode:this.exitCode,stderr:this.stderr}}}function Ub(l){return l instanceof Error&&l.message.includes("timeout")}async function Il(l,t=[],n){return Fn(Un.ONTOLOGY_EVOLVER,[l,...t],n)}async function Fb(l,t=[],n){return Fn(Un.METAINGEST_PIPELINE,[l,...t],n)}function Qe(l,t,n){return{success:!0,data:l,meta:{timestamp:new Date().toISOString(),duration_ms:Date.now()-t,trace_id:n}}}function Je(l,t,n,s){return{success:!1,error:{code:l,message:t,details:n},meta:{timestamp:new Date().toISOString(),duration_ms:s?Date.now()-s:0}}}function Ol(l,t){return Ub(l)?Je("CLI_TIMEOUT","Python CLI execution timed out",{message:l.message},t):l instanceof $l?Je("CLI_ERROR",`CLI execution failed: ${l.message}`,{exitCode:l.exitCode,stderr:l.stderr},t):l instanceof Error?Je("INTERNAL_ERROR",l.message,{stack:void 0},t):Je("INTERNAL_ERROR","An unknown error occurred",{raw:String(l)},t)}function it(l,t){if(typeof l!="string"||l.trim()==="")throw new ll(`${t} is required and must be a non-empty string`);return l.trim()}function Zt(l,t,n,s,r){if(l==null||l==="")return r;const o=typeof l=="number"?l:parseInt(String(l),10);if(isNaN(o))throw new ll(`${t} must be a number`);if(o<n||o>s)throw new ll(`${t} must be between ${n} and ${s}`);return o}function qb(l,t){return l==null||l===""?t:typeof l=="boolean"?l:l==="true"||l==="1"?!0:l==="false"||l==="0"?!1:t}function Gb(l,t,n,s){if(l==null||l==="")return s;if(!t.includes(l))throw new ll(`${n} must be one of: ${t.join(", ")}`);return l}class ll extends Error{constructor(t){super(t),this.name="ValidationError"}}function xt(l){return l instanceof ll}function ht(l,t){return Je("VALIDATION_FAILED",l.message,void 0,t)}function Vb(){return gs()}function al(l){return l.get("x-trace-id")||l.get("x-request-id")||Vb()}const Hb=async({json:l,request:t})=>{const n=Date.now(),s=al(t.headers);try{const r=await Fb("health",["--json"]),o=Ml(r),c=Wb(o),u={gate:o.gate_status==="idle"||o.gate_status==="complete",tracker:!o.tracker_status.includes("error"),ingestor:o.ingestor_status==="connected"||o.ingestor_status==="fallback",falkordb:o.falkordb_available};l(c==="healthy"||c==="degraded"?200:503,Qe({status:c,health:o,components:u},n,s))}catch(r){r instanceof $l?l(503,Qe({status:"unhealthy",health:{healthy:!1,gate_status:"unknown",tracker_status:"unknown",ingestor_status:"unknown",falkordb_available:!1,last_processed:null,total_processed:0,errors_last_hour:1},components:{gate:!1,tracker:!1,ingestor:!1,falkordb:!1}},n,s)):l(500,Ol(r,n))}};function Wb(l){if(l.healthy)return"healthy";const t=[l.gate_status==="error",l.errors_last_hour>10],n=[!l.falkordb_available,l.errors_last_hour>5,l.ingestor_status==="fallback"];return t.some(Boolean)?"unhealthy":n.some(Boolean)?"degraded":"healthy"}const Yb=Object.freeze(Object.defineProperty({__proto__:null,onGet:Hb},Symbol.toStringTag,{value:"Module"})),Jb=["active","superseded","all"],Kb=async({query:l,json:t,request:n})=>{const s=Date.now(),r=al(n.headers);try{const o=Gb(l.get("status"),Jb,"status","all"),c=Zt(l.get("min_fitness"),"min_fitness",0,1,0),u=Zt(l.get("limit"),"limit",1,200,50),m=await Il("status",["--json"]),d=Ml(m),f=await Il("terms",["--limit",String(u*2)]),x={terms:Qb(f.stdout,o,c,u),total_terms:d.total_terms,active_terms:d.active_terms,superseded_terms:d.superseded_terms};t(200,Qe(x,s,r))}catch(o){xt(o)?t(400,ht(o,s)):t(500,Ol(o,s))}};function Qb(l,t,n,s){const r=[],o=l.split(`
`);for(const c of o){const u=c.match(/^\s*[â–ˆâ–‘]{10}\s+(\d+\.\d+)\s+(\S+)/);if(u){const m=parseFloat(u[1]),d=u[2],f="active";if(m>=n&&(t==="all"||t===f)&&r.push({term:d,fitness:m,status:f}),r.length>=s)break}}return r}const Xb=Object.freeze(Object.defineProperty({__proto__:null,onGet:Kb},Symbol.toStringTag,{value:"Module"})),Zb=async({params:l,json:t,request:n})=>{const s=Date.now(),r=al(n.headers);try{const o=it(l.term,"term"),c=await n.json(),u=it(c.context,"context"),m=qb(c.force,!1),d=[o,"--context",u,"--json"];m&&d.push("--force");const f=await Il("evolve",d),v=Bb(f);let x;v?"evolved"in v&&v.evolved===!1?x={evolved:!1,reason:v.reason}:x={evolved:!0,record:v}:f.stdout.includes("No evolution needed")?x={evolved:!1,reason:"fitness above threshold"}:f.stdout.includes("Evolution occurred")?x={evolved:!0,record:ef(f.stdout,o)}:x={evolved:!1,reason:f.stdout||"Unknown result"},t(200,Qe(x,s,r))}catch(o){xt(o)?t(400,ht(o,s)):t(500,Ol(o,s))}};function ef(l,t){const n=l.split(`
`);let s="mutation",r=t,o=0,c=0,u="";for(const m of n){if(m.includes("Evolution occurred:")){const d=m.match(/Evolution occurred:\s*(\w+)/);d&&(s=d[1].toLowerCase())}if(m.includes("Target:")){const d=m.match(/Target:\s*(\S+)/);d&&(r=d[1])}if(m.includes("Fitness:")){const d=m.match(/Fitness:\s*([\d.]+)\s*->\s*([\d.]+)/);d&&(o=parseFloat(d[1]),c=parseFloat(d[2]))}if(m.includes("Attestation:")){const d=m.match(/Attestation:\s*(\w+)/);d&&(u=d[1])}}return{evolution_id:`evo_${Date.now().toString(36)}`,evolution_type:s,source_term:t,target_term:r,fitness_before:o,fitness_after:c,context:"Extracted from CLI output",lineage_attestation:u,timestamp:new Date().toISOString()}}const lf=Object.freeze(Object.defineProperty({__proto__:null,onPost:Zb},Symbol.toStringTag,{value:"Module"})),tf=async({params:l,json:t,request:n})=>{const s=Date.now(),r=al(n.headers);try{const o=it(l.term,"term"),c=await Il("fitness",[o,"--json"]),u=Ml(c),m={term:o,status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),fitness:u,usage_count:Math.round(u.usage_frequency*100),contexts:[],avg_drift:1-u.semantic_coherence,lineage:[o],evolution_count:Math.round((1-u.evolution_stability)*5)};t(200,Qe(m,s,r))}catch(o){if(xt(o))t(400,ht(o,s));else{const c=String(o);c.includes("not found")||c.includes("unknown")?t(404,Je("TERM_NOT_FOUND",`Term "${l.term}" not found in ontology`,{term:l.term},s)):t(500,Ol(o,s))}}},nf=Object.freeze(Object.defineProperty({__proto__:null,onGet:tf},Symbol.toStringTag,{value:"Module"}));function sf(l){return!l.success&&l.error!==void 0}function af(l){return l.success&&l.data!==void 0}const rf=async({json:l,request:t})=>{const n=Date.now(),s=al(t.headers);l(200,Qe({name:"MetaIngest API",version:"1.0.0",protocol:"metaingest/v1",endpoints:[{group:"Ontology",base:"/api/metaingest/ontology",description:"Ontology term management with fitness-gated evolution",routes:["GET /api/metaingest/ontology","GET /api/metaingest/ontology/[term]","POST /api/metaingest/ontology/[term]/evolve","GET /api/metaingest/ontology/[term]/lineage"]},{group:"Drift",base:"/api/metaingest/drift",description:"Semantic drift tracking and alerts",routes:["GET /api/metaingest/drift","GET /api/metaingest/drift/[term]","GET /api/metaingest/drift/alerts"]},{group:"Knowledge Graph",base:"/api/metaingest/knowledge",description:"FalkorDB knowledge graph operations",routes:["GET /api/metaingest/knowledge/stats","POST /api/metaingest/knowledge/query","GET /api/metaingest/knowledge/neighbors/[node]"]},{group:"SOTA",base:"/api/metaingest/sota",description:"SOTA pattern ingestion and mutation",routes:["GET /api/metaingest/sota/patterns","POST /api/metaingest/sota/ingest","POST /api/metaingest/sota/generate","POST /api/metaingest/sota/validate"]},{group:"Pipeline",base:"/api/metaingest",description:"Pipeline operations and monitoring",routes:["GET /api/metaingest/health","POST /api/metaingest/process","GET /api/metaingest/stats"]}],documentation:"/api/metaingest/API_SPECIFICATION.md"},n,s))},of=Object.freeze(Object.defineProperty({__proto__:null,isAPIError:sf,isAPISuccess:af,onGet:rf},Symbol.toStringTag,{value:"Module"}));async function uf(){return new Promise(l=>{const t=[],n=setTimeout(()=>l(t),1500);try{const s=ut("python3",["/pluribus/nucleus/tools/pbskills_operator.py","list","--json"],{cwd:"/pluribus",env:{...process.env,PYTHONUNBUFFERED:"1"}});let r="";s.stdout?.on("data",o=>{r+=o.toString()}),s.on("close",()=>{clearTimeout(n);try{const o=JSON.parse(r);if(Array.isArray(o))for(const c of o)t.push({id:c.id||"unknown",name:c.name||c.id||"Skill",description:c.description||"",source:"pbskills",tower_level:c.tower_level||1,mastery:c.mastery?.score||0,tags:c.tags||[],paradigms:c.paradigms||[],status:(c.mastery?.score||0)>.6?"ok":"warn"})}catch{}l(t)}),s.on("error",()=>{clearTimeout(n),l(t)})}catch{clearTimeout(n),l(t)}})}async function cf(){return new Promise(l=>{const t=[],n=setTimeout(()=>l(t),1500);try{const s=ut("python3",["/pluribus/nucleus/tools/registry_emitter.py","emit","--registry","semops","--registry","cagent_registry","--registry","effects_registry","--dry-run"],{cwd:"/pluribus",env:{...process.env,PYTHONUNBUFFERED:"1"}});let r="";s.stdout?.on("data",o=>{r+=o.toString()}),s.on("close",()=>{clearTimeout(n);try{const o=JSON.parse(r);for(const[c,u]of Object.entries(o)){const m=u?.entry_count||0;t.push({id:`registry:${c}`,name:c.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase()),description:`${m} entries from ${c} registry`,source:c==="semops"?"semops":c==="cagent_registry"?"cagent":"effects",tags:["registry",c],status:m>0?"ok":"wait"})}}catch{}l(t)}),s.on("error",()=>{clearTimeout(n),l(t)})}catch{clearTimeout(n),l(t)}})}async function df(){const l=[],t=[".agent/skills",".codex/skills",".gemini/skills",".github/skills","membrane/oss-skills"];for(const n of t)try{const{readdirSync:s,existsSync:r,statSync:o}=await import("fs"),c=`/pluribus/${n}`;if(!r(c))continue;const u=s(c);for(const m of u){const d=`${c}/${m}`;o(d).isDirectory()&&l.push({id:`oss:${n}:${m}`,name:m.replace(/-/g," ").replace(/\b\w/g,f=>f.toUpperCase()),description:`OSS skill from ${n}`,source:"oss",tags:["oss",n.split("/")[0]],status:"ok"})}}catch{}return l}const pf=async({json:l})=>{const[t,n,s]=await Promise.all([uf(),cf(),df()]),r=[...t,...n,...s],o={timestamp:new Date().toISOString(),total:r.length,sources:{pbskills:t.length,registries:n.length,oss:s.length},skills:r.slice(0,50)};l(200,o)},mf=Object.freeze(Object.defineProperty({__proto__:null,onGet:pf},Symbol.toStringTag,{value:"Module"})),gf=l=>{const t=y(),n=y(""),s=y(!1),r=y("Disconnected"),o=y({cols:80,rows:24});return D(_("s_wZBwn0qV9e8",[o,s,n,l,r,t])),e("div",null,{class:"h-full w-full bg-[#0c0c0e] flex flex-col term-crt overflow-hidden rounded-lg border border-[var(--glass-border)] shadow-2xl"},[e("div",null,{class:"flex items-center justify-between px-4 py-2 border-b border-[var(--glass-border)] bg-white/5 backdrop-blur"},[e("div",null,{class:"flex items-center gap-3"},[e("div",null,{class:"flex gap-1.5"},[e("span",null,{class:"w-3 h-3 rounded-full bg-red-500"},null,3,null),e("span",null,{class:"w-3 h-3 rounded-full bg-yellow-500"},null,3,null),e("span",null,{class:"w-3 h-3 rounded-full bg-green-500"},null,3,null)],3,null),e("span",null,{class:"text-green-400 font-mono text-sm font-medium"},i(c=>c.title??"WebSSH (Tmux)",[l],'p0.title??"WebSSH (Tmux)"'),3,null),e("span",{class:`text-xs px-2 py-0.5 rounded ${r.value==="Connected"?"bg-green-900/50 text-green-400":r.value==="Connecting..."?"bg-yellow-900/50 text-yellow-400":"bg-red-900/50 text-red-400"}`},null,i(c=>c.value,[r],"p0.value"),3,null),e("span",null,{class:"text-xs text-gray-500 font-mono"},[i(c=>c.value.cols,[o],"p0.value.cols"),"Ã—",i(c=>c.value.rows,[o],"p0.value.rows")],3,null)],1,null),!s.value&&e("div",null,{class:"flex gap-2 items-center"},[e("input",null,{type:"password",placeholder:"PIN",class:"w-20 bg-gray-900 border border-gray-700 rounded px-2 py-1 text-xs font-mono focus:border-green-500 focus:outline-none",value:n,onInput$:_("s_x9TmvvrV10Y",[n]),onKeyDown$:_("s_NyTJSlTW5XU",[s,n])},null,3,null),e("button",null,{class:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors",onClick$:_("s_h7cbb3IjA0o",[s,n])},"Connect",3,null)],3,"vG_0")],1,null),s.value?e("div",{ref:t},{class:"w-full p-1 overflow-hidden",style:{flex:"1 1 0%",minHeight:"300px",height:"100%"}},null,3,"vG_1"):e("div",null,{class:"flex-1 flex items-center justify-center text-gray-500 bg-[#0d1117]"},e("div",null,{class:"text-center"},[e("div",null,{class:"text-6xl mb-4"},"ðŸ”",3,null),e("div",null,{class:"text-lg font-medium mb-2"},"Secure Terminal",3,null),e("div",null,{class:"text-sm text-gray-600"},"Enter PIN to connect",3,null)],3,null),3,null)],1,"vG_2")},vf=E(p(gf,"s_68lv5SRLGjE")),bf=()=>{const[l]=b();l.value=!l.value},ff=()=>{const l=y(!1),t=y("checking");D(_("s_ulwDHXGBTas",[t]));const n=p(bf,"s_zi65czTP3Dw",[l]),s=`
# Charmbracelet Crush CLI (mods v1.8.1) - DKIN v19 Integration
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  CRUSH - LLM CLI with Pluribus Bus Integration               â•‘"
echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
echo "â•‘  Direct:   crush 'your prompt here'                          â•‘"
echo "â•‘  Adapter:  python3 /pluribus/nucleus/tools/crush_adapter.py  â•‘"
echo "â•‘  Operator: python3 /pluribus/nucleus/tools/crush_operator.py â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
crush --version 2>/dev/null || echo '[crush not available]'
glow --version 2>/dev/null || echo '[glow not available]'
`.trim();return e("div",null,{class:"h-full flex flex-col"},[e("div",null,{class:"flex items-center justify-between px-3 py-2 bg-zinc-900 border-b border-zinc-700"},[e("div",null,{class:"flex items-center gap-3"},[e("span",null,{class:"text-amber-400 font-mono text-sm"},"CRUSH",3,null),e("span",null,{class:"text-zinc-500 text-xs"},"Charmbracelet Mods + Bus Integration",3,null),t.value==="checking"&&e("span",null,{class:"text-yellow-500 text-xs animate-pulse"},"checking...",3,"Bo_0"),t.value==="ready"&&e("span",null,{class:"text-green-500 text-xs"},"â— ready",3,"Bo_1"),t.value==="unavailable"&&e("span",null,{class:"text-red-500 text-xs"},"â— unavailable",3,"Bo_2")],1,null),e("button",null,{class:"text-xs text-zinc-400 hover:text-zinc-200 px-2 py-1 rounded bg-zinc-800 hover:bg-zinc-700",onClick$:n},i(r=>r.value?"Hide Help":"Show Help",[l],'p0.value?"Hide Help":"Show Help"'),3,null)],1,null),l.value&&e("div",null,{class:"px-3 py-2 bg-zinc-800 border-b border-zinc-700 text-xs font-mono"},[e("div",null,{class:"grid grid-cols-2 gap-4"},[e("div",null,null,[e("div",null,{class:"text-amber-400 mb-1"},"Direct Usage:",3,null),e("div",null,{class:"text-zinc-300"},'crush "explain this code"',3,null),e("div",null,{class:"text-zinc-300"},'cat file.py | crush "review"',3,null),e("div",null,{class:"text-zinc-300"},'crush -m gpt-4 "prompt"',3,null)],3,null),e("div",null,null,[e("div",null,{class:"text-amber-400 mb-1"},"Operator (Bus Events):",3,null),e("div",null,{class:"text-zinc-300"},'crush_operator.py --query "..."',3,null),e("div",null,{class:"text-zinc-300"},"crush_operator.py --review file.py",3,null),e("div",null,{class:"text-zinc-300"},'crush_operator.py --explain "topic"',3,null)],3,null),e("div",null,null,[e("div",null,{class:"text-amber-400 mb-1"},"Adapter (Full Bus):",3,null),e("div",null,{class:"text-zinc-300"},'crush_adapter.py -p "prompt"',3,null),e("div",null,{class:"text-zinc-300"},"crush_adapter.py -i (interactive)",3,null),e("div",null,{class:"text-zinc-300"},"crush_adapter.py --stream-bus",3,null)],3,null),e("div",null,null,[e("div",null,{class:"text-amber-400 mb-1"},"Utilities:",3,null),e("div",null,{class:"text-zinc-300"},"glow README.md (render markdown)",3,null),e("div",null,{class:"text-zinc-300"},"charm (account management)",3,null),e("div",null,{class:"text-zinc-300"},"crush --list (saved chats)",3,null)],3,null)],3,null),e("div",null,{class:"mt-2 text-zinc-500"},"Bus topics: crush.session.* | crush.prompt.* | crush.response.* | operator.crush.*",3,null)],3,"Bo_3"),e("div",null,{class:"flex-1 min-h-0"},g(vf,{endpoint:"/crush",title:"Crush (Agentic Editor)",initCommand:s,[a]:{endpoint:a,title:a}},3,"Bo_4"),1,null)],1,"Bo_5")},xf=E(p(ff,"s_IpK50zVPmv0")),hf=()=>e("div",null,{class:"h-screen w-screen flex flex-col min-h-0 p-2 bg-[#0c0c0e]"},g(xf,null,3,"0y_0"),1,"0y_1"),yf=E(p(hf,"s_XV7faCPBYp8")),_f=Object.freeze(Object.defineProperty({__proto__:null,default:yf},Symbol.toStringTag,{value:"Module"})),Y={audit_date:"2025-12-31",protocol:"DKIN v28 Empirical Audit",verified:{"nucleus/tools":{exists:!0,loc:131119,files:282,claim:"100+",verdict:"VERIFIED_EXCESS",coverage:11.3},"nucleus/specs":{exists:!0,loc:26639,files:122,claim:"30+",verdict:"VERIFIED",coverage:0},"nucleus/mcp":{exists:!0,loc:3164,files:13,claim:"6",verdict:"VERIFIED_EXCESS",coverage:0},"nucleus/dashboard":{exists:!0,loc:5e4,files:198,claim:"Qwik",verdict:"VERIFIED",coverage:14.1},"nucleus/deploy":{exists:!0,loc:2e3,files:36,claim:"15+",verdict:"VERIFIED_EXCESS",coverage:0},"nucleus/art_dept":{exists:!0,loc:8e3,files:131,claim:"curator",verdict:"VERIFIED",coverage:5},"nucleus/auralux":{exists:!0,loc:3e3,files:17,claim:"pipeline",verdict:"PARTIAL",coverage:0},"nucleus/edge":{exists:!0,loc:1500,files:6,claim:"HAL",verdict:"VERIFIED",coverage:20},"nucleus/ribosome":{exists:!0,loc:2500,files:12,claim:"DNA",verdict:"VERIFIED",coverage:0},"nucleus/orchestration":{exists:!0,loc:500,files:3,claim:"resilience",verdict:"PARTIAL",coverage:0}},ghosts:[{path:"neurosymbolic_adapters/",claim:"Neural-symbolic bridge",status:"MISSING",priority:"P2"},{path:"nexus_bridge/",claim:"Cross-system integration",status:"CONFIG_ONLY",priority:"P3"},{path:"hystersis/",claim:"State persistence",status:"MISSING",priority:"P3"},{path:"pluribus_next/",claim:"Experimental features",status:"MISSING",priority:"P2"},{path:"models_archive/",claim:"Model artifacts",status:"MISSING",priority:"P4"},{path:"mountpoints/",claim:"External mounts",status:"MISSING",priority:"P4"},{path:"nucleus/proto/",claim:"Protocol defs",status:"MINIMAL",priority:"P3"},{path:"nucleus/bootstrap/",claim:"Agent bootstrap",status:"SCATTERED",priority:"P2"},{path:"nucleus/compositions/",claim:"Workflows",status:"MISSING",priority:"P3"},{path:"nucleus/meta/",claim:"Metaprogramming",status:"MISSING",priority:"P4"},{path:"nucleus/tui/",claim:"Terminal UI",status:"STUB",priority:"P3"},{path:"nucleus/secops/",claim:"Security ops",status:"README_ONLY",priority:"P1"}],membrane:{graphiti:{fork_size_mb:21,integration:"MCP_WRAPPER",imports:2,verdict:"SHALLOW"},maestro:{fork_size_mb:41,integration:"SUBPROCESS_CLI",imports:0,verdict:"SHALLOW"},"mem0-fork":{fork_size_mb:34,integration:"MCP_WRAPPER",imports:1,verdict:"SHALLOW"},"agent-s":{fork_size_mb:4.4,integration:"SUBPROCESS_CLI",imports:2,verdict:"SHALLOW"},agent0:{fork_size_mb:35,integration:"SUBPROCESS_CLI",imports:0,verdict:"SHALLOW"}},bus:{total_events:87615,tools_emitting:218,tools_total:313,bus_coverage:69.6},operators:{verified:["pbtest","pbdeep","pbflush","pblock","pblanes","pbhygiene","pbcmaster"],daemons:["oiterate","codemaster","browser_session","catalog","art_curator"],parsers:["axiom_parser","axiom_operator","semops_lexer","lens_collimator"]},services:{"pluribus-omega":"UP","pluribus-dashboard":"UP","pluribus-codemaster":"UP","pluribus-dialogosd":"UP","pluribus-art-curator":"IDLE","pluribus-hygiene.timer":"UP"},dsl:{semops_operators:96,axiom_declarations:19,omega_motifs:16,dkin_versions:12},coverage:{python_test_files:2650,actual_tests:172,coverage_percent:6.5,e2e_tests:18,verdict:"CRITICAL_LOW"},providers:{verified:["Claude","Codex","Gemini","Vertex","Ollama","vLLM","TensorZero","GitHub"],smoke_tests:14,auth_checks:8}},wf=l=>{const t=Math.round(l.percent/10),n=10-t,s="â–ˆ".repeat(t)+"â–‘".repeat(n),r=(l.color??"green")==="red"?"text-red-500":(l.color??"green")==="yellow"?"text-yellow-500":"text-green-500";return e("span",{class:r},null,[s," ",l.percent.toFixed(1),"%"],1,"a9_0")},kl=E(p(wf,"s_BV57Lf2AHW8")),kf=l=>{const n={VERIFIED:"bg-green-900 text-green-400",VERIFIED_EXCESS:"bg-emerald-900 text-emerald-300",PARTIAL:"bg-yellow-900 text-yellow-400",SHALLOW:"bg-orange-900 text-orange-400",MISSING:"bg-red-900 text-red-400",GHOST:"bg-purple-900 text-purple-400",UP:"bg-green-900 text-green-400",IDLE:"bg-zinc-700 text-zinc-400",DOWN:"bg-red-900 text-red-400"}[l.status]||"bg-zinc-800 text-zinc-400";return e("span",{class:`px-2 py-0.5 rounded text-xs font-mono ${n}`},null,i(s=>s.status,[l],"p0.status"),3,"a9_1")},Ze=E(p(kf,"s_fz02fPn4c1k")),Sf=()=>Y.ghosts.length,Cf=()=>Object.values(Y.membrane).filter(l=>l.verdict==="SHALLOW").length,$f=()=>Object.keys(Y.verified).length,If=()=>{W();const l=y("overview"),t=N(p(Sf,"s_ymayHvRc02Y")),n=N(p(Cf,"s_LXYtCK1Eer4")),s=N(p($f,"s_Znhgc0j62TA"));return e("div",null,{class:"min-h-screen bg-black text-green-400 font-mono p-4"},[e("header",null,{class:"border-b border-green-900 pb-4 mb-6"},[e("h1",null,{class:"text-2xl font-bold flex items-center gap-2"},[e("span",null,{class:"text-purple-500"},"OMEGA",3,null)," ARCH-AUDIT DASHBOARD",e("span",null,{class:"text-xs text-zinc-500"},["[",Y.audit_date,"]"],3,null)],3,null),e("p",null,{class:"text-sm text-zinc-500 mt-1"},["Protocol: ",Y.protocol," | Empirical filesystem analysis | Live test aggregation"],3,null)],3,null),e("div",null,{class:"grid grid-cols-2 md:grid-cols-6 gap-2 mb-6 text-xs"},[e("div",null,{class:"bg-zinc-900 p-3 rounded border border-green-900"},[e("div",null,{class:"text-green-500 text-xl font-bold"},i(r=>r.value,[s],"p0.value"),3,null),e("div",null,{class:"text-zinc-500"},"Verified Components",3,null)],3,null),e("div",null,{class:"bg-zinc-900 p-3 rounded border border-red-900"},[e("div",null,{class:"text-red-500 text-xl font-bold"},i(r=>r.value,[t],"p0.value"),3,null),e("div",null,{class:"text-zinc-500"},"Ghost/Phantom",3,null)],3,null),e("div",null,{class:"bg-zinc-900 p-3 rounded border border-orange-900"},[e("div",null,{class:"text-orange-500 text-xl font-bold"},i(r=>r.value,[n],"p0.value"),3,null),e("div",null,{class:"text-zinc-500"},"Shallow Integrations",3,null)],3,null),e("div",null,{class:"bg-zinc-900 p-3 rounded border border-yellow-900"},[e("div",null,{class:"text-yellow-500 text-xl font-bold"},[Y.coverage.coverage_percent,"%"],3,null),e("div",null,{class:"text-zinc-500"},"Test Coverage",3,null)],3,null),e("div",null,{class:"bg-zinc-900 p-3 rounded border border-blue-900"},[e("div",null,{class:"text-blue-400 text-xl font-bold"},Y.bus.total_events.toLocaleString(),1,null),e("div",null,{class:"text-zinc-500"},"Bus Events",3,null)],1,null),e("div",null,{class:"bg-zinc-900 p-3 rounded border border-purple-900"},[e("div",null,{class:"text-purple-400 text-xl font-bold"},Y.dsl.semops_operators,3,null),e("div",null,{class:"text-zinc-500"},"SemOps Operators",3,null)],3,null)],1,null),e("nav",null,{class:"flex gap-2 mb-6 border-b border-zinc-800 pb-2"},["overview","ghosts","membrane","coverage","remediation"].map(r=>e("button",{class:`px-4 py-2 rounded-t text-sm ${l.value===r?"bg-green-900 text-green-400 border border-green-700 border-b-0":"bg-zinc-900 text-zinc-500 hover:text-green-400"}`,onClick$:_("s_Hxfc4gk7N0o",[l,r])},null,r.toUpperCase(),0,r)),1,null),e("main",null,{class:"space-y-6"},[l.value==="overview"&&e("div",null,{class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},[e("section",null,{class:"border border-green-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-green-400 mb-4 border-b border-green-900 pb-2"},"VERIFIED COMPONENTS (Empirical LOC)",3,null),e("div",null,{class:"space-y-3"},Object.entries(Y.verified).map(([r,o])=>e("div",null,{class:"flex items-center justify-between text-sm"},[e("div",null,{class:"flex-1"},[e("span",null,{class:"text-blue-400"},r,1,null),e("span",null,{class:"text-zinc-600 ml-2"},["(",h(o,"files")," files, ",o.loc.toLocaleString()," LOC)"],1,null)],1,null),e("div",null,{class:"flex items-center gap-2"},[g(kl,{get percent(){return o.coverage},color:o.coverage<10?"red":o.coverage<30?"yellow":"green",[a]:{percent:Me(o,"coverage")}},3,"a9_2"),g(Ze,{get status(){return o.verdict},[a]:{status:Me(o,"verdict")}},3,"a9_3")],1,null)],1,r)),1,null)],1,null),e("section",null,{class:"border border-purple-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-purple-400 mb-4 border-b border-purple-900 pb-2"},"OPERATORS & DAEMONS (PB* Suite)",3,null),e("div",null,{class:"mb-4"},[e("h3",null,{class:"text-sm text-zinc-500 mb-2"},"CLI Operators",3,null),e("div",null,{class:"flex flex-wrap gap-2"},Y.operators.verified.map(r=>e("span",null,{class:"px-2 py-1 bg-purple-900/50 text-purple-300 rounded text-xs"},[r,"_operator.py"],1,r)),1,null)],1,null),e("div",null,{class:"mb-4"},[e("h3",null,{class:"text-sm text-zinc-500 mb-2"},"Daemons",3,null),e("div",null,{class:"flex flex-wrap gap-2"},Y.operators.daemons.map(r=>e("span",null,{class:"px-2 py-1 bg-blue-900/50 text-blue-300 rounded text-xs"},[r,"_daemon.py"],1,r)),1,null)],1,null),e("div",null,null,[e("h3",null,{class:"text-sm text-zinc-500 mb-2"},"Parsers/Compilers",3,null),e("div",null,{class:"flex flex-wrap gap-2"},Y.operators.parsers.map(r=>e("span",null,{class:"px-2 py-1 bg-cyan-900/50 text-cyan-300 rounded text-xs"},[r,".py"],1,r)),1,null)],1,null),e("div",null,{class:"mt-4 pt-4 border-t border-zinc-700"},[e("h3",null,{class:"text-sm text-zinc-500 mb-2"},"Service Status",3,null),e("div",null,{class:"space-y-1"},Object.entries(Y.services).map(([r,o])=>e("div",null,{class:"flex justify-between text-xs"},[e("span",null,{class:"text-zinc-400"},r,1,null),g(Ze,{status:o},3,"a9_4")],1,r)),1,null)],1,null)],1,null),e("section",null,{class:"border border-cyan-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-cyan-400 mb-4 border-b border-cyan-900 pb-2"},"DSL & SCHEMAS (Semantic Layer)",3,null),e("div",null,{class:"grid grid-cols-2 gap-4 text-sm"},[e("div",null,{class:"text-center p-4 bg-zinc-800 rounded"},[e("div",null,{class:"text-3xl font-bold text-cyan-400"},Y.dsl.semops_operators,3,null),e("div",null,{class:"text-zinc-500 text-xs mt-1"},"SemOps Operators",3,null),e("div",null,{class:"text-zinc-600 text-xs"},"(claimed 25+)",3,null)],3,null),e("div",null,{class:"text-center p-4 bg-zinc-800 rounded"},[e("div",null,{class:"text-3xl font-bold text-yellow-400"},Y.dsl.axiom_declarations,3,null),e("div",null,{class:"text-zinc-500 text-xs mt-1"},"Axiom Declarations",3,null),e("div",null,{class:"text-zinc-600 text-xs"},"(claimed 23)",3,null)],3,null),e("div",null,{class:"text-center p-4 bg-zinc-800 rounded"},[e("div",null,{class:"text-3xl font-bold text-purple-400"},Y.dsl.omega_motifs,3,null),e("div",null,{class:"text-zinc-500 text-xs mt-1"},"Omega Motifs",3,null),e("div",null,{class:"text-zinc-600 text-xs"},"(claimed 20+)",3,null)],3,null),e("div",null,{class:"text-center p-4 bg-zinc-800 rounded"},[e("div",null,{class:"text-3xl font-bold text-green-400"},Y.dsl.dkin_versions,3,null),e("div",null,{class:"text-zinc-500 text-xs mt-1"},"DKIN Versions",3,null),e("div",null,{class:"text-zinc-600 text-xs"},"(v18-v28)",3,null)],3,null)],3,null)],3,null),e("section",null,{class:"border border-blue-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-blue-400 mb-4 border-b border-blue-900 pb-2"},"BUS CONNECTIVITY (Event-Driven)",3,null),e("div",null,{class:"space-y-4"},[e("div",null,null,[e("div",null,{class:"flex justify-between text-sm mb-1"},[e("span",null,null,"Tools Emitting to Bus",3,null),e("span",null,{class:"text-blue-400"},[Y.bus.tools_emitting,"/",Y.bus.tools_total],3,null)],3,null),g(kl,{get percent(){return Y.bus.bus_coverage},color:"green",[a]:{percent:a,color:a}},3,"a9_5")],1,null),e("div",null,{class:"text-center p-4 bg-blue-900/20 rounded"},[e("div",null,{class:"text-2xl font-bold text-blue-400"},Y.bus.total_events.toLocaleString(),1,null),e("div",null,{class:"text-zinc-500 text-xs"},"Total Bus Events (.pluribus/bus/events.ndjson)",3,null)],1,null),e("div",null,{class:"text-xs text-zinc-500"},"218/313 tools emit bus events (69.6% bus integration)",3,null)],1,null)],1,null)],1,"a9_6"),l.value==="ghosts"&&e("section",null,{class:"border border-red-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-red-400 mb-4 border-b border-red-900 pb-2"},"GHOST/PHANTOM COMPONENTS (Claimed but Missing or Stub)",3,null),e("p",null,{class:"text-sm text-zinc-500 mb-4"},"These components are referenced in ARCH-TOP-TO-SUBTREES.md but do not exist or are minimal stubs.",3,null),e("table",null,{class:"w-full text-sm"},[e("thead",null,{class:"text-zinc-500 border-b border-zinc-700"},e("tr",null,null,[e("th",null,{class:"text-left py-2"},"Path",3,null),e("th",null,{class:"text-left py-2"},"Claimed Purpose",3,null),e("th",null,{class:"text-left py-2"},"Actual Status",3,null),e("th",null,{class:"text-left py-2"},"Priority",3,null)],3,null),3,null),e("tbody",null,null,Y.ghosts.map(r=>e("tr",null,{class:"border-b border-zinc-800"},[e("td",null,{class:"py-2 text-red-400"},h(r,"path"),1,null),e("td",null,{class:"py-2 text-zinc-400"},h(r,"claim"),1,null),e("td",null,{class:"py-2"},g(Ze,{get status(){return r.status},[a]:{status:Me(r,"status")}},3,"a9_7"),1,null),e("td",null,{class:"py-2"},e("span",{class:`px-2 py-0.5 rounded text-xs ${r.priority==="P1"?"bg-red-900 text-red-400":r.priority==="P2"?"bg-orange-900 text-orange-400":r.priority==="P3"?"bg-yellow-900 text-yellow-400":"bg-zinc-700 text-zinc-400"}`},null,h(r,"priority"),1,null),1,null)],1,r.path)),1,null)],1,null),e("div",null,{class:"mt-4 p-3 bg-red-900/20 rounded text-xs text-red-400"},[e("strong",null,null,"CRITICAL:",3,null)," SecOps is P1 - exists only as README stub, no enforcement. 12 ghost components total - architecture doc overstates reality."],3,null)],1,"a9_8"),l.value==="membrane"&&e("section",null,{class:"border border-orange-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-orange-400 mb-4 border-b border-orange-900 pb-2"},"MEMBRANE INTEGRATIONS (External SOTA Forks)",3,null),e("p",null,{class:"text-sm text-zinc-500 mb-4"},["All membrane forks use ",e("strong",null,null,"subprocess wrapper pattern",3,null)," - CLI invocation, NOT deep code integration."],3,null),e("table",null,{class:"w-full text-sm"},[e("thead",null,{class:"text-zinc-500 border-b border-zinc-700"},e("tr",null,null,[e("th",null,{class:"text-left py-2"},"Fork",3,null),e("th",null,{class:"text-left py-2"},"Size",3,null),e("th",null,{class:"text-left py-2"},"Integration Type",3,null),e("th",null,{class:"text-left py-2"},"Direct Imports",3,null),e("th",null,{class:"text-left py-2"},"Verdict",3,null)],3,null),3,null),e("tbody",null,null,Object.entries(Y.membrane).map(([r,o])=>e("tr",null,{class:"border-b border-zinc-800"},[e("td",null,{class:"py-2 text-blue-400"},["membrane/",r],1,null),e("td",null,{class:"py-2 text-zinc-400"},[h(o,"fork_size_mb")," MB"],1,null),e("td",null,{class:"py-2"},e("span",{class:`px-2 py-0.5 rounded text-xs ${o.integration==="MCP_WRAPPER"?"bg-blue-900 text-blue-400":"bg-orange-900 text-orange-400"}`},null,h(o,"integration"),1,null),1,null),e("td",null,{class:"py-2 text-zinc-400"},[h(o,"imports")," files"],1,null),e("td",null,{class:"py-2"},g(Ze,{get status(){return o.verdict},[a]:{status:Me(o,"verdict")}},3,"a9_9"),1,null)],1,r)),1,null)],1,null),e("div",null,{class:"mt-4 p-3 bg-orange-900/20 rounded text-xs text-orange-400"},[e("strong",null,null,"ARCHITECTURE REALITY:",3,null)," All 5 membrane forks are CLI-wrapped or MCP-isolated. Zero deep Python imports from fork code. Integration is at process boundary only."],3,null)],1,"a9_10"),l.value==="coverage"&&e("section",null,{class:"border border-yellow-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-yellow-400 mb-4 border-b border-yellow-900 pb-2"},"TEST COVERAGE REALITY (Empirical Analysis)",3,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},[e("div",null,{class:"text-center p-4 bg-red-900/20 rounded border border-red-900"},[e("div",null,{class:"text-4xl font-bold text-red-400"},[Y.coverage.coverage_percent,"%"],3,null),e("div",null,{class:"text-zinc-500 text-sm mt-1"},"Overall Test Coverage",3,null),e("div",null,{class:"text-red-500 text-xs mt-2"},"CRITICAL LOW",3,null)],3,null),e("div",null,{class:"text-center p-4 bg-zinc-800 rounded"},[e("div",null,{class:"text-2xl font-bold text-zinc-400"},Y.coverage.python_test_files,3,null),e("div",null,{class:"text-zinc-500 text-sm mt-1"},"Python Test Files",3,null)],3,null),e("div",null,{class:"text-center p-4 bg-zinc-800 rounded"},[e("div",null,{class:"text-2xl font-bold text-green-400"},Y.coverage.actual_tests,3,null),e("div",null,{class:"text-zinc-500 text-sm mt-1"},"Files with def test_",3,null)],3,null)],3,null),e("div",null,{class:"space-y-4"},[e("h3",null,{class:"text-sm text-zinc-500"},"Coverage by Component",3,null),Object.entries(Y.verified).map(([r,o])=>e("div",null,{class:"flex items-center gap-4"},[e("span",null,{class:"text-sm text-blue-400 w-40"},r.replace("nucleus/",""),1,null),e("div",null,{class:"flex-1"},g(kl,{get percent(){return o.coverage},color:o.coverage<10?"red":o.coverage<30?"yellow":"green",[a]:{percent:Me(o,"coverage")}},3,"a9_11"),1,null)],1,r))],1,null),e("div",null,{class:"mt-6 p-4 bg-yellow-900/20 rounded"},[e("h3",null,{class:"text-yellow-400 font-bold mb-2"},"Coverage Gaps",3,null),e("ul",null,{class:"list-disc list-inside text-sm text-yellow-300 space-y-1"},[e("li",null,null,"nucleus/mcp: 0% - 13 MCP servers with NO dedicated tests",3,null),e("li",null,null,"nucleus/specs: 0% - Specs are documentation, no test validation",3,null),e("li",null,null,"nucleus/auralux: 0% - Audio pipeline completely untested",3,null),e("li",null,null,"nucleus/ribosome: 0% - Code generation untested",3,null),e("li",null,null,"E2E tests: 18 specs covering dashboard routes only",3,null)],3,null)],3,null)],1,"a9_12"),l.value==="remediation"&&e("section",null,{class:"border border-purple-900 p-4 bg-zinc-900/50 rounded"},[e("h2",null,{class:"text-lg font-bold text-purple-400 mb-4 border-b border-purple-900 pb-2"},"REMEDIATION PRIORITY QUEUE",3,null),e("div",null,{class:"space-y-4"},[e("div",null,{class:"border border-red-800 rounded p-4 bg-red-900/10"},[e("h3",null,{class:"text-red-400 font-bold mb-3"},"P1 - CRITICAL (Security/Integrity)",3,null),e("ul",null,{class:"space-y-2 text-sm"},[e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-red-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-red-400"},"SecOps is a ghost",3,null),e("p",null,{class:"text-zinc-500"},"nucleus/secops/ exists only as README stub. No enforcement, no audit trails, no security automation.",3,null)],3,null)],3,null),e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-red-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-red-400"},"Test coverage at 6.5%",3,null),e("p",null,{class:"text-zinc-500"},"93.5% of code is untested. MCP servers, auralux, ribosome have 0% coverage.",3,null)],3,null)],3,null)],3,null)],3,null),e("div",null,{class:"border border-orange-800 rounded p-4 bg-orange-900/10"},[e("h3",null,{class:"text-orange-400 font-bold mb-3"},"P2 - HIGH (Architecture Misalignment)",3,null),e("ul",null,{class:"space-y-2 text-sm"},[e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-orange-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-orange-400"},"Membrane integrations are shallow",3,null),e("p",null,{class:"text-zinc-500"},'All 5 forks (graphiti, maestro, mem0, agent-s, agent0) are subprocess/MCP wrappers. Reclassify in docs as "CLI dependencies" not "integrations".',3,null)],3,null)],3,null),e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-orange-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-orange-400"},"6 claimed directories don't exist",3,null),e("p",null,{class:"text-zinc-500"},"neurosymbolic_adapters/, pluribus_next/, hystersis/, nexus_bridge/, mountpoints/, models_archive/ - remove from architecture doc or implement.",3,null)],3,null)],3,null),e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-orange-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-orange-400"},"nucleus/bootstrap scattered",3,null),e("p",null,{class:"text-zinc-500"},"CAGENT bootstrap code lives in tools/ not dedicated bootstrap/ directory. Consolidate or update docs.",3,null)],3,null)],3,null)],3,null)],3,null),e("div",null,{class:"border border-yellow-800 rounded p-4 bg-yellow-900/10"},[e("h3",null,{class:"text-yellow-400 font-bold mb-3"},"P3 - MEDIUM (Documentation Debt)",3,null),e("ul",null,{class:"space-y-2 text-sm"},[e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-yellow-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-yellow-400"},"Update ARCH counts",3,null),e("p",null,{class:"text-zinc-500"},"Most counts are underclaimed: tools=282 (not 100+), semops=96 (not 25+), services=36 (not 15+). Update to actual values.",3,null)],3,null)],3,null),e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-yellow-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-yellow-400"},"TUI has minimal implementation",3,null),e("p",null,{class:"text-zinc-500"},'nucleus/tui/ has README and strp_dashboard but no functional TUI. Either implement or mark as "planned".',3,null)],3,null)],3,null),e("li",null,{class:"flex items-start gap-2"},[e("span",null,{class:"text-yellow-500"},"*",3,null),e("div",null,null,[e("strong",null,{class:"text-yellow-400"},"Omega motifs undercounted",3,null),e("p",null,{class:"text-zinc-500"},"omega_motifs.json has 16 motifs (claimed 20+). Add missing motifs or correct claim.",3,null)],3,null)],3,null)],3,null)],3,null),e("div",null,{class:"border border-green-800 rounded p-4 bg-green-900/10"},[e("h3",null,{class:"text-green-400 font-bold mb-3"},"STRENGTHS (No Remediation Needed)",3,null),e("ul",null,{class:"space-y-1 text-sm text-green-300"},[e("li",null,null,"+ nucleus/tools: 282 files, 131K LOC - robust operator suite",3,null),e("li",null,null,"+ Bus coverage: 69.6% of tools emit events - strong event-driven architecture",3,null),e("li",null,null,"+ MCP servers: 13 servers (exceeded 6 claimed) - mature infra",3,null),e("li",null,null,"+ DKIN protocols: 12 versions documented - comprehensive evolution",3,null),e("li",null,null,"+ Providers: 8 integrations with smoke tests - multi-model support solid",3,null),e("li",null,null,"+ Systemd services: 36 services - production-grade daemon coverage",3,null)],3,null)],3,null)],3,null)],3,"a9_13")],1,null),e("footer",null,{class:"mt-8 pt-4 border-t border-zinc-800 text-xs text-zinc-600"},[e("p",null,null,["ARCH-AUDIT v28 | Empirical filesystem scan | ",Y.audit_date," | Protocol: ",Y.protocol],3,null),e("p",null,{class:"mt-1"},"Source: /pluribus/ARCH-TOP-TO-SUBTREES.md | Validation: python3 nucleus/tools/repl_header_audit.py",3,null)],3,null)],1,"a9_14")},Tf=E(p(If,"s_j62tiKr9Rls")),Ef=Object.freeze(Object.defineProperty({__proto__:null,_auto_EMPIRICAL_DATA:Y,_auto_StatusBadge:Ze,_auto_WipMeter:kl,default:Tf},Symbol.toStringTag,{value:"Module"})),ce={AM:{label:"Actualized-Mode",icon:"sun",color:"text-amber-300",bgColor:"bg-amber-500/10",borderColor:"border-amber-500/30",description:"Direct integration. The fragment becomes part of the actualized world model immediately.",destination:"World Model -> Entelexis Layer -> Knowledge Graph"},SM:{label:"Shadowmode",icon:"moon",color:"text-purple-300",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/30",description:"Deferred processing. The fragment enters the hysteresis buffer for later consideration.",destination:"Hysteresis Buffer -> Shadow Potentials -> Review Queue"},AUTO:{label:"Auto",icon:"zap",color:"text-cyan-300",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/30",description:"Let the system decide based on confidence score and texture density.",destination:"Confidence Analysis -> Metabolic Fork -> Dynamic Path"}};function xl(l){return Math.round(Math.max(0,Math.min(1,l))*100)}function en(l){return l>=.8?"text-green-400":l>=.6?"text-cyan-400":l>=.4?"text-yellow-400":"text-red-400"}function ln(l){return l>=.8?"bg-green-400":l>=.6?"bg-cyan-400":l>=.4?"bg-yellow-400":"bg-red-400"}function Af(l){return l<1024?`${l} B`:l<1048576?`${(l/1024).toFixed(1)} KB`:`${(l/1048576).toFixed(2)} MB`}function Mf(){return{overall:.65,semantic_clarity:.7,model_alignment:.6,source_trust:.7,noise_floor:.25}}const Of=l=>{const t=[{key:"semantic_clarity",label:"Semantic Clarity",value:l.score.semantic_clarity},{key:"model_alignment",label:"Model Alignment",value:l.score.model_alignment},{key:"source_trust",label:"Source Trust",value:l.score.source_trust},{key:"noise_floor",label:"Noise Floor",value:l.score.noise_floor,invert:!0}];return e("div",null,{class:"space-y-3"},[e("div",null,{class:"flex items-center justify-between"},[e("span",null,{class:"text-sm text-muted-foreground"},"Overall Confidence",3,null),e("span",{class:`text-lg font-bold mono ${en(l.score.overall)}`},null,[xl(l.score.overall),"%"],1,null)],1,null),e("div",null,{class:"h-2 bg-muted/30 rounded-full overflow-hidden"},e("div",{class:`h-full transition-all duration-500 ${ln(l.score.overall)}`,style:{width:`${xl(l.score.overall)}%`}},null,null,3,null),1,null),e("div",null,{class:"grid grid-cols-2 gap-2 mt-4"},t.map(n=>{const s=n.invert?1-n.value:n.value;return e("div",null,{class:"px-2 py-1.5 rounded border border-border/50 bg-muted/20"},[e("div",null,{class:"flex items-center justify-between text-[10px]"},[e("span",null,{class:"text-muted-foreground"},h(n,"label"),1,null),e("span",{class:`mono ${en(s)}`},null,[xl(s),"%"],1,null)],1,null),e("div",null,{class:"h-1 bg-muted/30 rounded-full mt-1 overflow-hidden"},e("div",{class:`h-full ${ln(s)}`,style:{width:`${xl(s)}%`}},null,null,3,null),1,null)],1,n.key)}),1,null)],1,"Ny_0")},Pf=E(p(Of,"s_EZAqTNiQRf4")),Lf=l=>e("button",{class:`
        relative flex flex-col p-4 rounded-lg border-2 transition-all duration-200
        hover:scale-[1.02] hover:shadow-lg
        ${l.selected?`${ce[l.mode].borderColor} ${ce[l.mode].bgColor} ring-2 ring-offset-2 ring-offset-background ring-${ce[l.mode].color.replace("text-","")}`:"border-border/50 bg-muted/10 hover:border-border"}
      `,onClick$:l.onSelect$},{type:"button","data-testid":i(t=>`portal-mode-${t.mode.toLowerCase()}`,[l],"`portal-mode-${p0.mode.toLowerCase()}`")},[l.recommended&&e("div",null,{class:"absolute -top-2 -right-2 px-2 py-0.5 text-[10px] font-bold rounded bg-green-500/20 text-green-400 border border-green-500/30"},"RECOMMENDED",3,"Ny_1"),e("div",null,{class:"flex items-center gap-3 mb-3"},[e("div",{class:`w-10 h-10 rounded-full flex items-center justify-center ${ce[l.mode].bgColor}`},null,[l.mode==="AM"&&e("svg",{class:`w-5 h-5 ${ce[l.mode].color}`},{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("circle",null,{cx:"12",cy:"12",r:"5","stroke-width":"2"},null,3,null),e("path",null,{"stroke-width":"2",d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,3,null)],3,"Ny_2"),l.mode==="SM"&&e("svg",{class:`w-5 h-5 ${ce[l.mode].color}`},{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"},null,3,null),3,"Ny_3"),l.mode==="AUTO"&&e("svg",{class:`w-5 h-5 ${ce[l.mode].color}`},{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,3,null),3,"Ny_4")],1,null),e("div",null,null,[e("h3",{class:`font-semibold ${ce[l.mode].color}`},null,h(ce[l.mode],"label"),1,null),e("span",null,{class:"text-[10px] text-muted-foreground mono"},["(",i(t=>t.mode,[l],"p0.mode"),")"],3,null)],1,null)],1,null),e("p",null,{class:"text-xs text-muted-foreground mb-3 text-left"},h(ce[l.mode],"description"),1,null),e("div",null,{class:"mt-auto pt-3 border-t border-border/30"},e("div",null,{class:"flex items-center gap-2 text-[10px]"},[e("svg",null,{class:"w-3 h-3 text-muted-foreground",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M13 5l7 7-7 7M5 5l7 7-7 7"},null,3,null),3,null),e("span",null,{class:"text-muted-foreground mono"},h(ce[l.mode],"destination"),1,null)],1,null),1,null),l.selected&&e("div",null,{class:"absolute top-2 left-2"},e("svg",{class:`w-5 h-5 ${ce[l.mode].color}`},{fill:"currentColor",viewBox:"0 0 24 24"},e("path",null,{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,3,null),3,null),1,"Ny_5")],0,"Ny_6"),Xl=E(p(Lf,"s_PM0CfJ84VDM")),Df=()=>{const[l]=b();return l.selectedMode==="AM"?100:l.selectedMode==="SM"?0:Math.round(l.confidence.overall*100)},Rf=()=>{const[l]=b();return 100-l.value},Nf=l=>{const t=N(p(Df,"s_CXhzsRJXOpA",[l])),n=N(p(Rf,"s_GXnmhZ3oEA4",[t]));return e("div",null,{class:"p-4 rounded-lg border border-border/50 bg-muted/10"},[e("h4",null,{class:"text-sm font-semibold text-muted-foreground mb-3"},"Metabolic Fork Preview",3,null),e("div",null,{class:"relative h-24"},[e("div",null,{class:"absolute left-1/2 top-0 -translate-x-1/2 w-8 h-8 rounded-full bg-white/10 border-2 border-[var(--glass-border-hover)] flex items-center justify-center"},e("svg",null,{class:"w-4 h-4 text-white/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"},null,3,null),3,null),3,null),e("svg",null,{class:"absolute inset-0 w-full h-full",viewBox:"0 0 200 100",preserveAspectRatio:"none"},[e("path",null,{d:"M100,15 Q100,50 40,85",fill:"none",stroke:i(s=>s.selectedMode==="AM"||s.selectedMode==="AUTO"&&s.confidence.overall>=.6?"rgb(253,224,71)":"rgba(253,224,71,0.2)",[l],'p0.selectedMode==="AM"||p0.selectedMode==="AUTO"&&p0.confidence.overall>=.6?"rgb(253,224,71)":"rgba(253,224,71,0.2)"'),"stroke-width":"2","stroke-dasharray":i(s=>s.selectedMode==="AM"?"none":"5,5",[l],'p0.selectedMode==="AM"?"none":"5,5"')},null,3,null),e("path",null,{d:"M100,15 Q100,50 160,85",fill:"none",stroke:i(s=>s.selectedMode==="SM"||s.selectedMode==="AUTO"&&s.confidence.overall<.6?"rgb(192,132,252)":"rgba(192,132,252,0.2)",[l],'p0.selectedMode==="SM"||p0.selectedMode==="AUTO"&&p0.confidence.overall<.6?"rgb(192,132,252)":"rgba(192,132,252,0.2)"'),"stroke-width":"2","stroke-dasharray":i(s=>s.selectedMode==="SM"?"none":"5,5",[l],'p0.selectedMode==="SM"?"none":"5,5"')},null,3,null)],3,null),e("div",{class:`
          absolute left-4 bottom-0 px-3 py-1.5 rounded border text-xs
          ${l.selectedMode==="AM"||l.selectedMode==="AUTO"&&l.confidence.overall>=.6?"border-amber-500/50 bg-amber-500/20 text-amber-300":"border-border/30 bg-muted/10 text-muted-foreground"}
        `},null,[e("span",null,{class:"font-semibold"},"AM",3,null),e("span",null,{class:"text-[10px] ml-1"},"Entelexis",3,null)],3,null),e("div",{class:`
          absolute right-4 bottom-0 px-3 py-1.5 rounded border text-xs
          ${l.selectedMode==="SM"||l.selectedMode==="AUTO"&&l.confidence.overall<.6?"border-purple-500/50 bg-purple-500/20 text-purple-300":"border-border/30 bg-muted/10 text-muted-foreground"}
        `},null,[e("span",null,{class:"font-semibold"},"SM",3,null),e("span",null,{class:"text-[10px] ml-1"},"Hysteresis",3,null)],3,null)],1,null),e("div",null,{class:"mt-4"},[e("div",null,{class:"flex items-center justify-between text-[10px] text-muted-foreground mb-1"},[e("span",null,null,"Actualized",3,null),e("span",null,null,"Shadowed",3,null)],3,null),e("div",null,{class:"h-2 flex rounded-full overflow-hidden"},[e("div",null,{class:"bg-amber-400 transition-all duration-500",style:i(s=>({width:`${s.value}%`}),[t],"{width:`${p0.value}%`}")},null,3,null),e("div",null,{class:"bg-purple-400 transition-all duration-500",style:i(s=>({width:`${s.value}%`}),[n],"{width:`${p0.value}%`}")},null,3,null)],3,null),e("div",null,{class:"flex items-center justify-between text-[10px] mt-1"},[e("span",null,{class:"text-amber-400 mono"},[i(s=>s.value,[t],"p0.value"),"%"],3,null),e("span",null,{class:"text-purple-400 mono"},[i(s=>s.value,[n],"p0.value"),"%"],3,null)],3,null)],3,null)],1,"Ny_7")},jf=E(p(Nf,"s_qQugcFeVPjE")),zf=()=>{const[l]=b();return l.value.overall>=.7?"AM":l.value.overall<=.4?"SM":"AUTO"},Bf=l=>{const[t]=b();t.value=l},Uf=async()=>{const[l,t,n,s]=b();if(s.value){t.value=!0;try{const r={topic:"portal.ingress.mode_selected",kind:"action",level:"info",actor:"portal-ingress-selector",data:{fragment_id:n.fragment.id,mode:s.value,confidence:l.value,source_type:n.fragment.source_type,source_uri:n.fragment.source_uri,source_ref:n.fragment.asset_id?`portal://asset/${n.fragment.asset_id}`:n.fragment.source_uri,asset_id:n.fragment.asset_id,byte_size:n.fragment.byte_size,selected_at:new Date().toISOString()}};await fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(()=>{}),n.onModeSelected$&&n.onModeSelected$(s.value,n.fragment)}finally{t.value=!1}}},Ff=()=>{const[l]=b();l.onCancel$&&l.onCancel$()},qf=()=>{const[l]=b();return l("AM")},Gf=()=>{const[l]=b();return l("SM")},Vf=()=>{const[l]=b();return l("AUTO")},Hf=l=>{const t=y(null),n=y(l.confidence||Mf()),s=y(!1),r=y(!1),o=N(p(zf,"s_QwFyWM01O88",[n]));D(_("s_kGmubzN8YuY",[r]));const c=p(Bf,"s_i30vSbkGVWE",[t]),u=p(Uf,"s_tvYkFSIRT94",[n,s,l,t]),m=p(Ff,"s_S1wYHkgTLu0",[l]);return e("div",null,{class:i(d=>`
        p-6 rounded-xl border border-border/50 bg-card/80 backdrop-blur-sm
        shadow-xl max-w-3xl mx-auto
        ${d.class||""}
      `,[l],`\`
        p-6 rounded-xl border border-border/50 bg-card/80 backdrop-blur-sm
        shadow-xl max-w-3xl mx-auto
        \${p0.class||""}
      \``),"data-testid":"portal-ingress-selector"},[e("div",null,{class:"flex items-center justify-between mb-6"},[e("div",null,null,[e("h2",null,{class:"text-lg font-bold text-foreground"},"Portal Ingress",3,null),e("p",null,{class:"text-sm text-muted-foreground"},"Select integration mode for incoming content",3,null)],3,null),e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:i(d=>`w-2 h-2 rounded-full ${d.value?"bg-green-400":"bg-red-400"}`,[r],'`w-2 h-2 rounded-full ${p0.value?"bg-green-400":"bg-red-400"}`')},null,3,null),e("span",null,{class:"text-[10px] text-muted-foreground"},i(d=>d.value?"BUS CONNECTED":"BUS OFFLINE",[r],'p0.value?"BUS CONNECTED":"BUS OFFLINE"'),3,null)],3,null)],3,null),e("div",null,{class:"mb-6 p-4 rounded-lg border border-border/30 bg-muted/10"},e("div",null,{class:"flex items-start gap-3"},[e("div",null,{class:"w-10 h-10 rounded-lg bg-muted/30 flex items-center justify-center"},[l.fragment.source_type==="url"&&e("svg",null,{class:"w-5 h-5 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",null,{"stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"},null,3,null),e("path",null,{"stroke-width":"2",d:"M10.172 13.828a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},null,3,null)],3,"Ny_8"),l.fragment.source_type==="file"&&e("svg",null,{class:"w-5 h-5 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,3,null),3,"Ny_9"),l.fragment.source_type==="arxiv"&&e("svg",null,{class:"w-5 h-5 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,3,null),3,"Ny_10"),l.fragment.source_type==="github"&&e("svg",null,{class:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24"},e("path",null,{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"},null,3,null),3,"Ny_11"),l.fragment.source_type==="text"&&e("svg",null,{class:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M4 6h16M4 12h16m-7 6h7"},null,3,null),3,"Ny_12")],1,null),e("div",null,{class:"flex-1 min-w-0"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-[10px] px-1.5 py-0.5 rounded bg-muted/40 text-muted-foreground uppercase"},i(d=>d.fragment.source_type,[l],"p0.fragment.source_type"),3,null),e("span",null,{class:"text-[10px] text-muted-foreground mono"},Af(l.fragment.byte_size),1,null),l.fragment.texture_density!==void 0&&e("span",null,{class:"text-[10px] text-muted-foreground"},["density: ",(l.fragment.texture_density*100).toFixed(1),"%"],1,"Ny_13")],1,null),e("p",null,{class:"text-sm text-foreground mt-1 line-clamp-2"},i(d=>d.fragment.content_preview,[l],"p0.fragment.content_preview"),3,null),l.fragment.source_uri&&e("p",null,{class:"text-[10px] text-muted-foreground mono mt-1 truncate"},i(d=>d.fragment.source_uri,[l],"p0.fragment.source_uri"),3,"Ny_14")],1,null)],1,null),1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},[e("div",null,{class:"p-4 rounded-lg border border-border/50 bg-muted/10"},[e("h4",null,{class:"text-sm font-semibold text-muted-foreground mb-3"},"Confidence Analysis",3,null),g(Pf,{get score(){return n.value},[a]:{score:i(d=>d.value,[n],"p0.value")}},3,"Ny_15")],1,null),g(jf,{get selectedMode(){return t.value},get confidence(){return n.value},[a]:{selectedMode:i(d=>d.value,[t],"p0.value"),confidence:i(d=>d.value,[n],"p0.value")}},3,"Ny_16")],1,null),e("div",null,{class:"mb-6"},[e("h4",null,{class:"text-sm font-semibold text-muted-foreground mb-3"},"Select Integration Mode",3,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-4"},[g(Xl,{mode:"AM",get selected(){return t.value==="AM"},get recommended(){return o.value==="AM"},onSelect$:p(qf,"s_c9ZvWH60y5M",[c]),[a]:{mode:a,selected:i(d=>d.value==="AM",[t],'p0.value==="AM"'),recommended:i(d=>d.value==="AM",[o],'p0.value==="AM"'),onSelect$:a}},3,"Ny_17"),g(Xl,{mode:"SM",get selected(){return t.value==="SM"},get recommended(){return o.value==="SM"},onSelect$:p(Gf,"s_SwVTvAME6RE",[c]),[a]:{mode:a,selected:i(d=>d.value==="SM",[t],'p0.value==="SM"'),recommended:i(d=>d.value==="SM",[o],'p0.value==="SM"'),onSelect$:a}},3,"Ny_18"),g(Xl,{mode:"AUTO",get selected(){return t.value==="AUTO"},get recommended(){return o.value==="AUTO"},onSelect$:p(Vf,"s_hfJHlaHmCjA",[c]),[a]:{mode:a,selected:i(d=>d.value==="AUTO",[t],'p0.value==="AUTO"'),recommended:i(d=>d.value==="AUTO",[o],'p0.value==="AUTO"'),onSelect$:a}},3,"Ny_19")],1,null)],1,null),(l.autoSelectEnabled??!1)&&e("div",null,{class:"mb-6 p-3 rounded border border-cyan-500/30 bg-cyan-500/10"},e("div",null,{class:"flex items-center gap-2 text-sm text-cyan-300"},[e("svg",null,{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",null,{"stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,3,null),3,null),e("span",null,null,["Auto-select enabled: Confidence above ",((l.autoSelectThreshold??.85)*100).toFixed(0),"% will auto-route to AM"],1,null)],1,null),1,"Ny_20"),e("div",null,{class:"flex items-center justify-end gap-3"},[e("button",null,{type:"button",class:"px-4 py-2 text-sm rounded border border-border hover:bg-muted/30 transition-colors",onClick$:m},"Cancel",3,null),e("button",{class:`
            px-6 py-2 text-sm font-semibold rounded transition-all
            ${t.value?"bg-primary text-primary-foreground hover:opacity-90":"bg-muted/30 text-muted-foreground cursor-not-allowed"}
          `},{type:"button",disabled:i((d,f)=>!f.value||d.value,[s,t],"!p1.value||p0.value"),"data-testid":"portal-confirm-button",onClick$:u},s.value?e("span",null,{class:"flex items-center gap-2"},[e("svg",null,{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",null,{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,3,null),e("path",null,{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,3,null)],3,null),"Processing..."],3,"Ny_21"):g(ue,{children:["Confirm ",i(d=>d.value||"Selection",[t],'p0.value||"Selection"')]},3,"Ny_22"),1,null)],1,null)],1,"Ny_23")},Wf=E(p(Hf,"s_8IgpyMBbD0Q")),Yf=[{id:"kb-main",name:"Knowledge Base",type:"knowledge_base",description:"Primary knowledge repository",icon:"[K]",available:!0},{id:"sota-catalog",name:"SOTA Catalog",type:"sota_catalog",description:"State-of-the-art research catalog",icon:"[S]",available:!0},{id:"memory-short",name:"Short-term Memory",type:"memory_bank",description:"Ephemeral working memory",icon:"[M]",available:!0},{id:"memory-long",name:"Long-term Memory",type:"memory_bank",description:"Persistent memory storage",icon:"[L]",available:!0},{id:"archive",name:"Archive",type:"archive",description:"Cold storage archive",icon:"[A]",available:!0}],Jf=l=>{const[t]=b();t.value=l},Kf=async()=>{const[l,t,n,s]=b();if(!s.value||!n)return;t.value=!0;const r={destinationId:s.value,contentId:l,timestamp:new Date().toISOString()};await n(r),t.value=!1},Qf=l=>{const{contentId:t,contentTitle:n,destinations:s=Yf,onSelect$:r,onCancel$:o,compact:c=!1}=l,u=y(null),m=y(!1),d=p(Jf,"s_pHxagIblUME",[u]),f=p(Kf,"s_pR0n1yYOnQA",[t,m,r,u]),v={knowledge_base:"border-blue-500/30 bg-blue-500/10",sota_catalog:"border-purple-500/30 bg-purple-500/10",memory_bank:"border-green-500/30 bg-green-500/10",archive:"border-gray-500/30 bg-gray-500/10",custom:"border-orange-500/30 bg-orange-500/10"};return e("div",{class:`rounded-lg border border-border bg-card ${c?"p-3":"p-4"}`},null,[e("div",null,{class:"flex items-center justify-between mb-4"},[e("div",null,null,[e("h3",{class:`font-semibold ${c?"text-sm":""}`},null,"Select Ingress Destination",3,null),n&&e("p",null,{class:"text-xs text-muted-foreground mt-1 truncate max-w-xs"},n,1,"EM_0")],1,null),o&&e("button",{onClick$:o},{class:"text-xs px-2 py-1 rounded bg-muted/50 text-muted-foreground hover:bg-muted transition-colors"},"Cancel",2,"EM_1")],1,null),e("div",{class:`grid ${c?"grid-cols-2 gap-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"}`},null,s.map(x=>e("button",{disabled:!x.available,class:`
              p-3 rounded-lg border text-left transition-all
              ${u.value===x.id?"border-primary bg-primary/10 ring-2 ring-primary/30":v[x.type]}
              ${x.available?"hover:border-primary/50 cursor-pointer":"opacity-50 cursor-not-allowed"}
            `,onClick$:_("s_H6n5aOBkS0s",[x,d])},null,[e("div",null,{class:"flex items-center gap-2 mb-1"},[e("span",null,{class:"font-mono text-xs"},h(x,"icon"),1,null),e("span",{class:`font-medium ${c?"text-xs":"text-sm"}`},null,h(x,"name"),1,null)],1,null),!c&&x.description&&e("p",null,{class:"text-xs text-muted-foreground"},h(x,"description"),1,"EM_2")],0,x.id)),1,null),e("div",null,{class:"mt-4 flex justify-end"},e("button",{class:`
            px-4 py-2 rounded text-sm font-medium transition-colors
            ${u.value&&!m.value?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-muted text-muted-foreground cursor-not-allowed"}
          `},{disabled:i((x,S)=>!S.value||x.value,[m,u],"!p1.value||p0.value"),onClick$:f},i(x=>x.value?"Ingesting...":"Confirm Ingress",[m],'p0.value?"Ingesting...":"Confirm Ingress"'),3,null),1,null)],1,"EM_3")},Xf=E(p(Qf,"s_50ZOPffSHUI")),qn="pluribus.portal.assets.v1",tn="pluribus.portal.session.v1",Zf=864e5,nn=200,ex="pluribus_portal_assets",lx=1,Tl="assets",Pl=()=>typeof window<"u",Sl=()=>new Date().toISOString(),Cl=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`asset_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;function tx(){if(!Pl()||typeof localStorage>"u")return Cl();try{const l=localStorage.getItem(tn);if(l)return l;const t=Cl();return localStorage.setItem(tn,t),t}catch{return Cl()}}function Gn(){const l={assets:[],updated_at:Sl()};if(!Pl()||typeof localStorage>"u")return l;try{const t=localStorage.getItem(qn);if(!t)return l;const n=JSON.parse(t);return Array.isArray(n)?{assets:n,updated_at:Sl()}:n&&Array.isArray(n.assets)?{assets:n.assets,updated_at:n.updated_at||Sl()}:l}catch{return l}}function nx(l){if(!(!Pl()||typeof localStorage>"u"))try{localStorage.setItem(qn,JSON.stringify(l))}catch{}}function sx(l){const n=Gn().assets.filter(r=>r.id!==l.id);n.push(l),n.sort((r,o)=>Date.parse(r.created_iso)-Date.parse(o.created_iso)),n.length>nn&&n.splice(0,n.length-nn);const s={assets:n,updated_at:Sl()};return nx(s),s}const ax=async()=>{if(!Pl()||typeof indexedDB>"u")throw new Error("IndexedDB not available");return new Promise((l,t)=>{const n=indexedDB.open(ex,lx);n.onerror=()=>t(n.error),n.onupgradeneeded=s=>{const r=s.target.result;r.objectStoreNames.contains(Tl)||r.createObjectStore(Tl,{keyPath:"id"})},n.onsuccess=()=>l(n.result)})},rx=async l=>{const t=await ax();await new Promise((n,s)=>{const r=t.transaction(Tl,"readwrite");r.oncomplete=()=>n(),r.onerror=()=>s(r.error),r.objectStore(Tl).put(l)})};async function ox(l,t){if(!(typeof fetch>"u"))try{await fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:l,kind:"artifact",level:"info",actor:"portal-ingest",data:t})})}catch{}}async function ix(l,t={}){const n=Date.now(),s=t.ttlMs??Zf,r=t.sessionId||tx(),o=Cl(),c=new Date(n+s).toISOString(),u={id:o,name:l.name||`asset-${o}`,mime:l.type||"application/octet-stream",byte_size:l.size||0,created_iso:new Date(n).toISOString(),expires_at:c,status:"staged",storage:"indexeddb",session_id:r,source_type:"file",source_uri:l.name||void 0};return await rx({id:o,blob:l,mime:u.mime,byte_size:u.byte_size,created_ms:n,expires_ms:n+s}),sx(u),t.emitBus!==!1&&await ox("portal.ingest.asset_staged",{asset_id:u.id,name:u.name,mime:u.mime,byte_size:u.byte_size,created_iso:u.created_iso,expires_at:u.expires_at,session_id:u.session_id,source_type:u.source_type,source_uri:u.source_uri,storage:u.storage}),u}const Vn=l=>{if(!Number.isFinite(l)||l<=0)return"0 B";const t=["B","KB","MB","GB"];let n=0,s=l;for(;s>=1024&&n<t.length-1;)s/=1024,n+=1;return`${s.toFixed(s>=10||n===0?0:1)} ${t[n]}`},ux=async l=>{const[t,n,s]=b(),r=Array.from(l);if(r.length!==0){n.value=null;for(const o of r)try{const c=await ix(o);if(t.value=Gn().assets,s.onStage$){const u={id:c.id,content_preview:`${c.name} (${Vn(c.byte_size)})`,source_type:"file",source_uri:c.name,byte_size:c.byte_size,created_iso:c.created_iso,asset_id:c.id};await s.onStage$(u,c)}}catch(c){n.value=String(c)}}},cx=l=>{const[t,n]=b();l.preventDefault(),n.value=!1,l.dataTransfer?.files?.length&&t(l.dataTransfer.files)},dx=l=>{const[t]=b(),n=l.target;n?.files&&(t(n.files),n.value="")},px=l=>{const t=y([]),n=y(!1),s=y(null),r=y();D(_("s_RhJpJKayFvs",[t]));const o=p(ux,"s_hqLgfAv0CF4",[t,s,l]),c=p(cx,"s_quDJo5RE00c",[o,n]),u=p(dx,"s_v6XY8EFEvuQ",[o]);return e("div",null,{class:"space-y-2"},[e("div",{class:["rounded-lg border border-dashed px-3 py-2 transition-colors","bg-card/70 backdrop-blur-sm",n.value?"border-cyan-400/80 bg-cyan-500/10":"border-border/60"]},{onDragOver$:_("s_kyuBTF2QsuY",[n]),onDragLeave$:_("s_gedbi0GkCB4",[n]),onDrop$:c},[e("input",{ref:r},{type:"file",multiple:!0,class:"hidden",onChange$:u},null,3,null),e("div",null,{class:"flex items-center justify-between gap-3"},[e("div",null,null,[e("p",null,{class:"text-xs font-semibold text-muted-foreground"},"Drop assets for Portal ingest",3,null),e("p",null,{class:"text-[10px] text-muted-foreground/70"},"Stored in browser cache, announced on bus, pulled into 24h analysis cache.",3,null)],3,null),e("button",null,{class:"text-[10px] px-2 py-1 rounded glass-chip glass-chip-accent-cyan uppercase tracking-widest",onClick$:_("s_GcrNXeLpsOM",[r])},"Select",3,null)],3,null)],1,null),s.value&&e("div",null,{class:"text-[10px] text-red-400"},i(m=>m.value,[s],"p0.value"),3,"Uv_0"),e("div",null,{class:"flex items-center justify-between text-[10px] text-muted-foreground"},[e("span",null,null,["staged assets: ",i(m=>m.value.length,[t],"p0.value.length")],3,null),t.value.length>0&&e("span",null,null,["latest: ",i(m=>m.value[m.value.length-1].name,[t],"p0.value[p0.value.length-1].name")],3,"Uv_1")],1,null),t.value.length>0&&e("div",null,{class:"space-y-1"},t.value.slice(-3).map(m=>e("div",null,{class:"flex items-center justify-between rounded-md border border-border/40 px-2 py-1 text-[10px]"},[e("span",null,{class:"truncate"},h(m,"name"),1,null),e("span",null,{class:"text-muted-foreground"},[Vn(m.byte_size)," Â· ",h(m,"status")],1,null)],1,m.id)),1,"Uv_2")],1,"Uv_3")},mx=E(p(px,"s_eEEatsTlftM")),gx=["portal.ingress","portal.inception","portal.ingest","portal.a2ui","strp.lead.action.ingest"],Zl={AM:{label:"Actualized",color:"amber"},SM:{label:"Shadow",color:"purple"},AUTO:{label:"Auto",color:"cyan"}};function Ae(l,t){for(const n of t){const s=l[n];if(typeof s=="string"&&s.trim().length>0)return s.trim()}}function et(l,t){for(const n of t){const s=l[n];if(typeof s=="number"&&Number.isFinite(s))return s}}function vx(l,t){const n=l.source_type;if(n==="url"||n==="file"||n==="text"||n==="arxiv"||n==="github")return n;const s=(t||"").toLowerCase();return s.startsWith("http")?"url":s.includes("arxiv")?"arxiv":s.includes("github.com")?"github":s?"file":"text"}function bx(l){if(!l)return"Awaiting portal ingress signal.";const t=l.data||{},n=t.fragment||{},s=Ae(t,["content_preview","content","text","summary","message","prompt","name"])||Ae(n,["content","content_preview"])||l.topic;return s.length>140?`${s.slice(0,137)}...`:s}function fx(l){for(let t=l.length-1;t>=0;t-=1){const n=l[t];if(gx.some(s=>n.topic.startsWith(s)))return n}}function xx(l){const t=l?.data||{},n=t.fragment||{},s=Ae(t,["source_uri","source_ref","url"])||Ae(n,["source_uri"]),r=bx(l),o=et(t,["byte_size","length_bytes","size"])||et(n,["length_bytes","byte_size"])||r.length,c=Ae(t,["fragment_id","ingress_id","req_id"])||Ae(n,["id"])||l?.id||"fragment-unknown",u=Ae(t,["asset_id"])||Ae(n,["asset_id"]),m=l?.iso||new Date().toISOString();return{id:c,content_preview:r,source_type:vx(t,s),source_uri:s,texture_density:et(t,["texture_density"]),byte_size:o,created_iso:m,asset_id:u}}const hx=()=>{const[l]=b();return fx(l.events)},yx=()=>{const[l,t]=b();return t.value??xx(l.value)},_x=()=>{const[l]=b();return l.value.source_uri||l.value.content_preview},wx=l=>{const[t,n,s,r]=b();s.value=l,t.value=null,n.value=null,r.value&&typeof window<"u"&&(window.clearTimeout(r.value),r.value=null)},kx=l=>{const[t]=b();t.value=l},Sx=async l=>{const[t,n,s,r]=b(),o={topic:"portal.ingress.select",kind:"action",level:"info",actor:"portal-destination-selector",data:{selection:l,fragment:t.value,mode:n.value,selected_at:new Date().toISOString()}};await fetch("/api/emit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(()=>{}),r.value&&typeof window<"u"&&window.clearTimeout(r.value),s.value=`Destination queued: ${l.destinationId}`,typeof window<"u"&&(r.value=window.setTimeout(()=>{s.value=null,r.value=null},3e3))},Cx=l=>{W();const t=N(p(hx,"s_csiGrN97CYs",[l])),n=y(null),s=y(null),r=y(null),o=y(null),c=N(p(yx,"s_uDrzYR4KqHk",[t,n])),u=N(p(_x,"s_EWdaxtigSEA",[c])),m=p(wx,"s_rK8Ygm9xS1s",[s,r,n,o]),d=p(kx,"s_dKMJYU9WBqw",[s]),f=p(Sx,"s_mH3ZnjHhS7o",[c,s,r,o]);return D(_("s_gPBxYMuxtQc",[c,s,r,o])),e("div",null,{class:"space-y-3"},[e("div",null,{class:"flex items-center justify-between"},[e("div",null,null,[g(q,{level:"h3",color:"magenta",size:"sm",animation:"flicker",children:"Portal Ingest",[a]:{level:a,color:a,size:a,animation:a}},3,"MA_0"),e("p",null,{class:"text-[10px] text-muted-foreground mt-1"},i(v=>v.value?`Last signal: ${v.value.topic}`:"No portal ingest events yet.",[t],'p0.value?`Last signal: ${p0.value.topic}`:"No portal ingest events yet."'),3,null)],1,null),g(X,{color:"cyan",glow:!0,children:"ingest",[a]:{color:a,glow:a}},3,"MA_1")],1,null),g(mx,{onStage$:m,[a]:{onStage$:a}},3,"MA_2"),g(Wf,{get fragment(){return c.value},onModeSelected$:d,[a]:{fragment:i(v=>v.value,[c],"p0.value"),onModeSelected$:a}},3,"MA_3"),g(ct,{title:"Destination",color:"cyan",size:"xs",[a]:{title:a,color:a,size:a}},3,"MA_4"),s.value?e("div",null,{class:"flex items-center gap-2 -mt-2 mb-2 text-[10px] uppercase tracking-[0.2em] text-muted-foreground"},[e("span",null,null,"Mode",3,null),g(X,{get color(){return Zl[s.value].color},glow:!0,children:h(Zl[s.value],"label"),[a]:{color:Me(Zl[s.value],"color"),glow:a}},1,"MA_5")],1,"MA_6"):e("div",null,{class:"text-[10px] text-muted-foreground -mt-2 mb-2"},"No ingress mode selected.",3,null),s.value?g(Xf,{get contentId(){return c.value.id},get contentTitle(){return u.value},onSelect$:f,[a]:{contentId:i(v=>v.value.id,[c],"p0.value.id"),contentTitle:i(v=>v.value,[u],"p0.value"),onSelect$:a}},3,"MA_7"):e("div",null,{class:"rounded-lg border border-border/40 bg-muted/10 p-3 text-xs text-muted-foreground"},"Select an ingress mode to unlock destination routing.",3,null),r.value&&e("div",null,{class:"rounded-md border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200"},i(v=>v.value,[r],"p0.value"),3,"MA_8")],1,"MA_9")},$x=E(p(Cx,"s_JAO3b1LCFNo")),Ix=["portal.inception"];function Hn(l,t){for(const n of t){const s=l[n];if(typeof s=="string"&&s.trim().length>0)return s.trim()}}function Tx(l){const t=l.data||{};return Hn(t,["goal","plan","intent","summary","message"])||l.topic}function Ex(l){const t=l.data||{};return Hn(t,["req_id","inception_id","ingress_id","fragment_id"])||l.id||l.topic}const Ax=()=>{const[l]=b();return l.events.filter(n=>Ix.some(s=>n.topic.startsWith(s))).slice(-(l.limit??6)).reverse()},Mx=l=>{const t=N(p(Ax,"s_3h75AieNunY",[l]));return e("div",null,{class:"glass-surface-elevated p-4 glass-hover-lift"},[e("md-elevation",null,null,null,3,null),e("div",null,{class:"flex items-center justify-between mb-3"},[e("div",null,{class:"flex items-center gap-2"},[g(q,{level:"h3",color:"purple",size:"sm",animation:"flicker",children:"Inception",[a]:{level:a,color:a,size:a,animation:a}},3,"QN_0"),g(X,{color:"purple",glow:!0,children:i(n=>n.value.length,[t],"p0.value.length"),[a]:{color:a,glow:a}},3,"QN_1")],1,null),e("span",null,{class:"text-[10px] text-muted-foreground"},"portal.inception.*",3,null)],1,null),t.value.length===0?e("div",null,{class:"text-xs text-muted-foreground"},"No inception events yet.",3,"QN_2"):e("div",null,{class:"space-y-2"},t.value.map((n,s)=>e("div",null,{class:"rounded-md border border-border/50 bg-muted/20 p-2"},[e("div",null,{class:"flex items-center justify-between text-[10px]"},[e("span",null,{class:"font-mono text-foreground/80"},Ex(n),1,null),e("span",null,{class:"text-muted-foreground"},n.iso?.slice(11,19)||"",1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},h(n,"actor"),1,null),e("div",null,{class:"text-xs text-foreground/80 line-clamp-2"},Tx(n),1,null)],1,`${n.id||n.ts}-${s}`)),1,null)],1,"QN_3")},Ox=E(p(Mx,"s_6J7IllChJjc"));function sn(l,t=10){const n=Math.max(0,Math.min(100,l)),s=Math.round(n/100*t),r=t-s;return"â–ˆ".repeat(s)+"â–‘".repeat(r)}function lt(l){return l<1e3?`${Math.round(l)}ms`:l<6e4?`${(l/1e3).toFixed(1)}s`:`${(l/6e4).toFixed(1)}m`}function We(l){return l>=90?"text-emerald-400":l>=70?"text-cyan-400":l>=50?"text-amber-400":"text-red-400"}function Px(l){const t={total:0,am:0,sm:0,rejected:0,pruned:0},n={potential:0,actualizing:0,actualized:0,decaying:0,conversionRate:0},s={totalInteractions:0,approvals:0,rejections:0,pending:0,avgResponseTimeMs:0},r=[],o={total:0,passed:0,failed:0,warnings:0,passRate:0,gateBreakdown:{P:{passed:0,failed:0},E:{passed:0,failed:0},L:{passed:0,failed:0},R:{passed:0,failed:0},Q:{passed:0,failed:0},omega:{passed:0,failed:0}}},c=[],u=l.slice(-1e3);for(const S of u){const M=S.data,$=S.topic;if(($.startsWith("portal.")||$.startsWith("entelexis.")||$.startsWith("hysteresis."))&&(t.total++,$==="entelexis.actualize"||M?.mode==="AM"?t.am++:($==="hysteresis.shadow"||M?.mode==="SM")&&t.sm++,M?.status==="rejected"?t.rejected++:M?.status==="pruned"&&t.pruned++,typeof M?.processing_time_ms=="number"?r.push(M.processing_time_ms):typeof M?.duration_ms=="number"&&r.push(M.duration_ms)),$.startsWith("holon.")){const w=S.entelexis?.phase||M?.phase;w==="potential"||$==="holon.potential"?n.potential++:w==="actualizing"||$==="holon.actualizing"?n.actualizing++:w==="actualized"||$==="holon.created"||$==="holon.actualized"?n.actualized++:(w==="decaying"||$==="holon.decaying")&&n.decaying++}if(($.startsWith("hitl.")||$.startsWith("pbpair.")||$==="user.approve"||$==="user.reject")&&(s.totalInteractions++,$.includes("approve")||M?.action==="approve"?s.approvals++:$.includes("reject")||M?.action==="reject"?s.rejections++:($.includes("pending")||M?.status==="pending")&&s.pending++,typeof M?.response_time_ms=="number"&&c.push(M.response_time_ms)),$.startsWith("sextet.")||$.startsWith("gate.")||$.startsWith("verify.")){o.total++;const w=M?.verdict||M?.result||S.level;w==="passed"||w==="pass"||w==="info"?o.passed++:w==="failed"||w==="fail"||w==="error"?o.failed++:(w==="warn"||w==="warning")&&o.warnings++;const k=M?.gate||"";k==="P"||$.includes(".provenance")?w==="passed"||w==="pass"?o.gateBreakdown.P.passed++:o.gateBreakdown.P.failed++:k==="E"||$.includes(".effects")?w==="passed"||w==="pass"?o.gateBreakdown.E.passed++:o.gateBreakdown.E.failed++:k==="L"||$.includes(".liveness")?w==="passed"||w==="pass"?o.gateBreakdown.L.passed++:o.gateBreakdown.L.failed++:k==="R"||$.includes(".recovery")?w==="passed"||w==="pass"?o.gateBreakdown.R.passed++:o.gateBreakdown.R.failed++:k==="Q"||$.includes(".quality")?w==="passed"||w==="pass"?o.gateBreakdown.Q.passed++:o.gateBreakdown.Q.failed++:(k==="omega"||k==="O"||$.includes(".omega"))&&(w==="passed"||w==="pass"?o.gateBreakdown.omega.passed++:o.gateBreakdown.omega.failed++)}}n.conversionRate=n.potential>0?Math.round(n.actualized/n.potential*100):0,o.passRate=o.total>0?Math.round(o.passed/o.total*100):0,s.avgResponseTimeMs=c.length>0?Math.round(c.reduce((S,M)=>S+M,0)/c.length):0;const m=[...r].sort((S,M)=>S-M),d={avgTimeMs:r.length>0?Math.round(r.reduce((S,M)=>S+M,0)/r.length):0,minTimeMs:m[0]||0,maxTimeMs:m[m.length-1]||0,p95TimeMs:m[Math.floor(m.length*.95)]||0,throughputPerMin:0},v=Date.now()-6e4,x=u.filter(S=>S.ts*1e3>v&&(S.topic.startsWith("portal.")||S.topic.startsWith("entelexis.")||S.topic.startsWith("hysteresis.")));return d.throughputPerMin=x.length,{ingestStats:t,holonStats:n,hitlStats:s,processingStats:d,qualityGateStats:o}}const Lx=()=>{const[l]=b();return Px(l.events)},Dx=l=>{const t=y("overview"),n=y("");D(_("s_PNeRpB5MlZU",[n,l]));const s=N(p(Lx,"s_j6V6I0tFhCo",[l])),r=s.value.ingestStats.total>0?Math.round(s.value.ingestStats.am/s.value.ingestStats.total*100):0;return e("div",null,{class:"rounded-lg border border-border bg-card overflow-hidden"},[e("div",null,{class:"p-3 border-b border-border flex items-center justify-between"},[e("div",null,{class:"flex items-center gap-2"},[e("span",null,{class:"text-lg"},"Portal Metrics",3,null),e("span",null,{class:"text-[9px] px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-400 border border-purple-500/30"},[i(o=>o.value.ingestStats.total,[s],"p0.value.ingestStats.total")," ingests"],3,null),e("span",null,{class:"text-[9px] px-1.5 py-0.5 rounded bg-cyan-500/20 text-cyan-400 border border-cyan-500/30"},[i(o=>o.value.processingStats.throughputPerMin,[s],"p0.value.processingStats.throughputPerMin"),"/min"],3,null)],3,null),e("span",null,{class:"text-[10px] text-muted-foreground font-mono"},i(o=>o.value,[n],"p0.value"),3,null)],3,null),e("div",null,{class:"px-3 py-2 border-b border-border/50 flex gap-1"},["overview","gates","holon","hitl"].map(o=>e("button",{class:`text-[10px] px-2 py-1 rounded transition-colors capitalize ${t.value===o?"bg-primary/20 text-primary border border-primary/30":"bg-muted/30 text-muted-foreground hover:bg-muted/50"}`,onClick$:_("s_utkzUHLnn98",[t,o])},null,o,0,o)),1,null),e("div",null,{class:"p-3"},[t.value==="overview"&&e("div",null,{class:"space-y-4"},[e("div",null,{class:"p-3 rounded-lg border border-border/50 bg-muted/10"},[e("div",null,{class:"text-[11px] text-muted-foreground uppercase tracking-wide mb-2"},"Ingest Mode Breakdown",3,null),e("div",null,{class:"flex items-center gap-3 mb-2"},[e("div",null,{class:"flex-1"},[e("div",null,{class:"flex justify-between text-[10px] mb-1"},[e("span",null,{class:"text-emerald-400"},"AM (Actualized)",3,null),e("span",null,{class:"text-emerald-400"},i(o=>o.value.ingestStats.am,[s],"p0.value.ingestStats.am"),3,null)],3,null),e("div",null,{class:"h-2 bg-muted/30 rounded overflow-hidden"},e("div",{style:{width:`${r}%`}},{class:"h-full bg-emerald-500 transition-all duration-300"},null,3,null),1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},[r,"%"],1,null)],1,null),e("div",null,{class:"flex items-center gap-3"},[e("div",null,{class:"flex-1"},[e("div",null,{class:"flex justify-between text-[10px] mb-1"},[e("span",null,{class:"text-purple-400"},"SM (Shadow)",3,null),e("span",null,{class:"text-purple-400"},i(o=>o.value.ingestStats.sm,[s],"p0.value.ingestStats.sm"),3,null)],3,null),e("div",null,{class:"h-2 bg-muted/30 rounded overflow-hidden"},e("div",{style:{width:`${100-r}%`}},{class:"h-full bg-purple-500 transition-all duration-300"},null,3,null),1,null)],1,null),e("div",null,{class:"text-[10px] text-muted-foreground"},[100-r,"%"],1,null)],1,null),e("div",null,{class:"flex gap-2 mt-2 text-[9px]"},[e("span",null,{class:"px-1.5 py-0.5 rounded bg-red-500/10 text-red-400"},[i(o=>o.value.ingestStats.rejected,[s],"p0.value.ingestStats.rejected")," rejected"],3,null),e("span",null,{class:"px-1.5 py-0.5 rounded bg-amber-500/10 text-amber-400"},[i(o=>o.value.ingestStats.pruned,[s],"p0.value.ingestStats.pruned")," pruned"],3,null)],3,null)],1,null),e("div",null,{class:"grid grid-cols-2 gap-3"},[e("div",null,{class:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5"},[e("div",null,{class:"text-[10px] text-muted-foreground uppercase mb-1"},"Holon Conversion",3,null),e("div",{class:`text-xl font-bold ${We(s.value.holonStats.conversionRate)}`},null,[i(o=>o.value.holonStats.conversionRate,[s],"p0.value.holonStats.conversionRate"),"%"],3,null),e("div",null,{class:"text-[9px] text-muted-foreground"},[i(o=>o.value.holonStats.actualized,[s],"p0.value.holonStats.actualized")," / ",i(o=>o.value.holonStats.potential,[s],"p0.value.holonStats.potential")," potential"],3,null)],1,null),e("div",null,{class:"p-3 rounded-lg border border-cyan-500/30 bg-cyan-500/5"},[e("div",null,{class:"text-[10px] text-muted-foreground uppercase mb-1"},"Gate Pass Rate",3,null),e("div",{class:`text-xl font-bold ${We(s.value.qualityGateStats.passRate)}`},null,[i(o=>o.value.qualityGateStats.passRate,[s],"p0.value.qualityGateStats.passRate"),"%"],3,null),e("div",null,{class:"text-[9px] text-muted-foreground"},[i(o=>o.value.qualityGateStats.passed,[s],"p0.value.qualityGateStats.passed")," / ",i(o=>o.value.qualityGateStats.total,[s],"p0.value.qualityGateStats.total")," checks"],3,null)],1,null),e("div",null,{class:"p-3 rounded-lg border border-amber-500/30 bg-amber-500/5"},[e("div",null,{class:"text-[10px] text-muted-foreground uppercase mb-1"},"Avg Processing",3,null),e("div",null,{class:"text-xl font-bold text-amber-400"},lt(s.value.processingStats.avgTimeMs),1,null),e("div",null,{class:"text-[9px] text-muted-foreground"},["p95: ",lt(s.value.processingStats.p95TimeMs)],1,null)],1,null),e("div",null,{class:"p-3 rounded-lg border border-purple-500/30 bg-purple-500/5"},[e("div",null,{class:"text-[10px] text-muted-foreground uppercase mb-1"},"HITL Interactions",3,null),e("div",null,{class:"text-xl font-bold text-purple-400"},i(o=>o.value.hitlStats.totalInteractions,[s],"p0.value.hitlStats.totalInteractions"),3,null),e("div",null,{class:"text-[9px] text-muted-foreground"},[i(o=>o.value.hitlStats.pending,[s],"p0.value.hitlStats.pending")," pending"],3,null)],3,null)],1,null)],1,"ts_0"),t.value==="gates"&&e("div",null,{class:"space-y-3"},[e("div",null,{class:"p-3 rounded-lg border border-border/50 bg-muted/10"},[e("div",null,{class:"flex items-center justify-between mb-3"},[e("span",null,{class:"text-[11px] text-muted-foreground uppercase tracking-wide"},"Sextet Gate Status",3,null),e("span",{class:`text-sm font-bold ${We(s.value.qualityGateStats.passRate)}`},null,[i(o=>o.value.qualityGateStats.passRate,[s],"p0.value.qualityGateStats.passRate"),"% overall"],3,null)],1,null),e("div",null,{class:"space-y-2"},[{key:"P",name:"Provenance",desc:"Lineage validation"},{key:"E",name:"Effects",desc:"Side effect bounds"},{key:"L",name:"Liveness",desc:"Timing feasibility"},{key:"R",name:"Recovery",desc:"Rollback capability"},{key:"Q",name:"Quality",desc:"Test coverage"},{key:"omega",name:"Omega",desc:"ASL alignment"}].map(o=>{const c=s.value.qualityGateStats.gateBreakdown[o.key],u=c.passed+c.failed,m=u>0?Math.round(c.passed/u*100):100;return e("div",null,{class:"flex items-center gap-2"},[e("div",null,{class:"w-16 text-[10px]"},[e("span",null,{class:"font-bold text-primary"},o.key==="omega"?"Î©":o.key,1,null),e("span",null,{class:"text-muted-foreground ml-1"},h(o,"name"),1,null)],1,null),e("div",null,{class:"flex-1"},e("code",{class:`text-[10px] font-mono ${We(m)}`},null,sn(m,12),1,null),1,null),e("div",{class:`text-[10px] font-mono w-10 text-right ${We(m)}`},null,[m,"%"],1,null),e("div",null,{class:"text-[9px] text-muted-foreground w-12 text-right"},[h(c,"passed"),"/",u],1,null)],1,o.key)}),1,null)],1,null),e("div",null,{class:"flex gap-2 text-[9px]"},[e("span",null,{class:"px-2 py-1 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"},[i(o=>o.value.qualityGateStats.passed,[s],"p0.value.qualityGateStats.passed")," passed"],3,null),e("span",null,{class:"px-2 py-1 rounded bg-red-500/10 text-red-400 border border-red-500/20"},[i(o=>o.value.qualityGateStats.failed,[s],"p0.value.qualityGateStats.failed")," failed"],3,null),e("span",null,{class:"px-2 py-1 rounded bg-amber-500/10 text-amber-400 border border-amber-500/20"},[i(o=>o.value.qualityGateStats.warnings,[s],"p0.value.qualityGateStats.warnings")," warnings"],3,null)],3,null)],1,"ts_1"),t.value==="holon"&&e("div",null,{class:"space-y-3"},[e("div",null,{class:"p-3 rounded-lg border border-border/50 bg-muted/10"},[e("div",null,{class:"text-[11px] text-muted-foreground uppercase tracking-wide mb-3"},"Holon State Distribution",3,null),e("div",null,{class:"space-y-2"},[{phase:"potential",icon:"â—‹",color:"text-blue-400 bg-blue-500"},{phase:"actualizing",icon:"â—”",color:"text-amber-400 bg-amber-500"},{phase:"actualized",icon:"â—",color:"text-emerald-400 bg-emerald-500"},{phase:"decaying",icon:"â—Œ",color:"text-red-400 bg-red-500"}].map(o=>{const c=s.value.holonStats[o.phase],u=s.value.holonStats.potential+s.value.holonStats.actualizing+s.value.holonStats.actualized+s.value.holonStats.decaying,m=u>0?Math.round(c/u*100):0;return e("div",null,{class:"flex items-center gap-2"},[e("span",{class:`text-sm ${o.color.split(" ")[0]}`},null,h(o,"icon"),1,null),e("span",null,{class:"w-20 text-[10px] capitalize text-muted-foreground"},h(o,"phase"),1,null),e("div",null,{class:"flex-1 h-2 bg-muted/30 rounded overflow-hidden"},e("div",{class:`h-full transition-all duration-300 ${o.color.split(" ")[1]}`,style:{width:`${m}%`}},null,null,3,null),1,null),e("span",null,{class:"text-[10px] font-mono w-8 text-right text-muted-foreground"},c,1,null)],1,o.phase)}),1,null)],1,null),e("div",null,{class:"p-3 rounded-lg border border-emerald-500/30 bg-emerald-500/5"},[e("div",null,{class:"text-[11px] text-muted-foreground uppercase tracking-wide mb-2"},"Potential to Actualized Conversion",3,null),e("div",null,{class:"flex items-center gap-3"},[e("div",null,{class:"text-2xl font-bold text-emerald-400"},[i(o=>o.value.holonStats.conversionRate,[s],"p0.value.holonStats.conversionRate"),"%"],3,null),e("div",null,{class:"flex-1 text-[10px] text-muted-foreground"},[i(o=>o.value.holonStats.actualized,[s],"p0.value.holonStats.actualized")," of ",i(o=>o.value.holonStats.potential,[s],"p0.value.holonStats.potential")," holons fully actualized"],3,null)],3,null)],3,null)],1,"ts_2"),t.value==="hitl"&&e("div",null,{class:"space-y-3"},[e("div",null,{class:"p-3 rounded-lg border border-border/50 bg-muted/10"},[e("div",null,{class:"text-[11px] text-muted-foreground uppercase tracking-wide mb-3"},"Human-In-The-Loop Metrics",3,null),e("div",null,{class:"grid grid-cols-2 gap-3"},[e("div",null,{class:"p-2 rounded bg-muted/20"},[e("div",null,{class:"text-[9px] text-muted-foreground uppercase"},"Total Interactions",3,null),e("div",null,{class:"text-lg font-bold text-purple-400"},i(o=>o.value.hitlStats.totalInteractions,[s],"p0.value.hitlStats.totalInteractions"),3,null)],3,null),e("div",null,{class:"p-2 rounded bg-muted/20"},[e("div",null,{class:"text-[9px] text-muted-foreground uppercase"},"Avg Response Time",3,null),e("div",null,{class:"text-lg font-bold text-cyan-400"},lt(s.value.hitlStats.avgResponseTimeMs),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"p-3 rounded-lg border border-border/50 bg-muted/10"},[e("div",null,{class:"text-[11px] text-muted-foreground uppercase tracking-wide mb-2"},"Decision Breakdown",3,null),e("div",null,{class:"flex gap-2"},[e("div",null,{class:"flex-1 p-2 rounded bg-emerald-500/10 border border-emerald-500/20 text-center"},[e("div",null,{class:"text-lg font-bold text-emerald-400"},i(o=>o.value.hitlStats.approvals,[s],"p0.value.hitlStats.approvals"),3,null),e("div",null,{class:"text-[9px] text-muted-foreground"},"Approved",3,null)],3,null),e("div",null,{class:"flex-1 p-2 rounded bg-red-500/10 border border-red-500/20 text-center"},[e("div",null,{class:"text-lg font-bold text-red-400"},i(o=>o.value.hitlStats.rejections,[s],"p0.value.hitlStats.rejections"),3,null),e("div",null,{class:"text-[9px] text-muted-foreground"},"Rejected",3,null)],3,null),e("div",null,{class:"flex-1 p-2 rounded bg-amber-500/10 border border-amber-500/20 text-center"},[e("div",null,{class:"text-lg font-bold text-amber-400"},i(o=>o.value.hitlStats.pending,[s],"p0.value.hitlStats.pending"),3,null),e("div",null,{class:"text-[9px] text-muted-foreground"},"Pending",3,null)],3,null)],3,null)],3,null),s.value.hitlStats.totalInteractions>0&&e("div",null,{class:"p-3 rounded-lg border border-purple-500/30 bg-purple-500/5"},[e("div",null,{class:"text-[11px] text-muted-foreground uppercase tracking-wide mb-1"},"Approval Rate",3,null),e("div",null,{class:"flex items-center gap-3"},[e("div",{class:`text-xl font-bold ${We(Math.round(s.value.hitlStats.approvals/(s.value.hitlStats.approvals+s.value.hitlStats.rejections||1)*100))}`},null,[Math.round(s.value.hitlStats.approvals/(s.value.hitlStats.approvals+s.value.hitlStats.rejections||1)*100),"%"],1,null),e("code",null,{class:"text-[10px] font-mono text-purple-400"},sn(Math.round(s.value.hitlStats.approvals/(s.value.hitlStats.approvals+s.value.hitlStats.rejections||1)*100),12),1,null)],1,null)],1,"ts_3")],1,"ts_4")],1,null)],1,"ts_5")},Rx=E(p(Dx,"s_OtWcaUO924c")),Nx=()=>{const l=y([]),t=y(!1);return D(_("s_0hC90C2JnRk",[t,l])),e("div",null,{class:"min-h-screen p-6 space-y-6"},[e("header",null,{class:"flex items-center justify-between"},[e("div",null,null,[e("h1",null,{class:"text-xl font-semibold tracking-wide text-foreground"},"Portal",3,null),e("p",null,{class:"text-xs text-muted-foreground"},"Ingress routing and destination selection.",3,null)],3,null),e("span",{class:`text-[10px] px-2 py-1 rounded border ${t.value?"border-emerald-500/40 text-emerald-300 bg-emerald-500/10":"border-border/60 text-muted-foreground bg-muted/20"}`},null,i(n=>n.value?"bus live":"bus offline",[t],'p0.value?"bus live":"bus offline"'),3,null)],1,null),e("div",null,{class:"grid gap-6 lg:grid-cols-3"},[e("div",null,{class:"lg:col-span-2"},g(F,{id:"comp:portal-ingress-route",children:e("div",null,{class:"glass-surface glass-surface-1 p-4 glass-hover-lift"},g($x,{get events(){return l.value},[a]:{events:i(n=>n.value,[l],"p0.value")}},3,"o8_0"),1,null),[a]:{id:a}},1,"o8_1"),1,null),e("div",null,{class:"space-y-6"},[g(F,{id:"comp:portal-inception",children:g(Ox,{get events(){return l.value},[a]:{events:i(n=>n.value,[l],"p0.value")}},3,"o8_2"),[a]:{id:a}},1,"o8_3"),g(F,{id:"comp:portal-metrics",children:g(Rx,{get events(){return l.value},[a]:{events:i(n=>n.value,[l],"p0.value")}},3,"o8_4"),[a]:{id:a}},1,"o8_5")],1,null)],1,null)],1,"o8_6")},jx=E(p(Nx,"s_tc8oP7ME3ls")),zx=Object.freeze(Object.defineProperty({__proto__:null,default:jx},Symbol.toStringTag,{value:"Module"})),Bx=async()=>{const[l,t,n,s]=b();try{const[r,o]=await Promise.all([fetch("/api/evolution/motifs"),fetch("/api/evolution/meta-motifs")]);if(r.ok){const c=await r.json();s.value=c.motifs||[]}if(o.ok){const c=await o.json();n.value=c.meta_motifs||[]}}catch(r){l.value=String(r)}finally{t.value=!1}},Ux=async()=>{const[l,t]=b();l.value=!0;try{if((await fetch("/api/evolution/motifs/extract",{method:"POST"})).ok){const s=await fetch("/api/evolution/motifs");if(s.ok){const r=await s.json();t.value=r.motifs||[]}}}finally{l.value=!1}},Fx=()=>{const l=y([]),t=y([]),n=y(!0),s=y(null),r=y(!1);El(p(Bx,"s_zrFnvanlzPI",[s,n,t,l]));const o=p(Ux,"s_cA4jHgN7TLk",[r,l]),c=u=>u>=.8?"var(--color-success)":u>=.5?"var(--color-warning)":"var(--color-text-muted)";return e("div",null,{class:"motif-visualization"},[e("div",null,{class:"motif-header"},[e("h3",null,null,"Ï‰-Motif Discovery",3,null),e("button",null,{disabled:i(u=>u.value,[r],"p0.value"),class:"btn-primary",onClick$:o},i(u=>u.value?"Extracting...":"Extract Motifs",[r],'p0.value?"Extracting...":"Extract Motifs"'),3,null)],3,null),n.value&&e("div",null,{class:"loading"},"Loading motifs...",3,"hf_0"),s.value&&e("div",null,{class:"error"},i(u=>u.value,[s],"p0.value"),3,"hf_1"),e("div",null,{class:"motif-grid"},[e("div",null,{class:"motif-section"},[e("h4",null,null,["First-Order Motifs (",i(u=>u.value.length,[l],"p0.value.length"),")"],3,null),e("div",null,{class:"motif-list"},l.value.map(u=>e("div",null,{class:"motif-card"},[e("div",null,{class:"motif-id"},[u.motif_id.slice(0,8),"..."],1,null),e("div",null,{class:"motif-topics"},u.topic_sequence.map((m,d)=>e("span",null,{class:"topic-badge"},m,1,d)),1,null),e("div",null,{class:"motif-stats"},[e("span",null,{class:"occurrences"},["Ã—",h(u,"occurrence_count")],1,null),e("span",{style:{color:c(u.stability_score)}},{class:"stability"},["Ï†=",u.stability_score.toFixed(2)],1,null),u.buchi_accepted&&e("span",null,{class:"buchi-badge",title:"BÃ¼chi Accepted (Recurring Forever)"},"Ï‰",3,"hf_2")],1,null)],1,u.motif_id)),1,null)],1,null),e("div",null,{class:"motif-section"},[e("h4",null,null,["Meta-Motifs (E13: Second-Order) (",i(u=>u.value.length,[t],"p0.value.length"),")"],3,null),e("div",null,{class:"motif-list"},t.value.map(u=>e("div",null,{class:"motif-card meta"},[e("div",null,{class:"motif-id"},[u.meta_id.slice(0,8),"..."],1,null),e("div",null,{class:"constituent-motifs"},u.constituent_motifs.map((m,d)=>e("span",null,{class:"constituent-badge"},m.slice(0,6),1,d)),1,null),e("div",null,{class:"motif-stats"},[e("span",null,{class:"occurrences"},["Ã—",h(u,"occurrence_count")],1,null),e("span",null,{class:"emergence"},["E=",u.emergence_score.toFixed(2)],1,null),u.buchi_accepted&&e("span",null,{class:"buchi-badge",title:"Meta-Truth (BÃ¼chi Accepted)"},"Î©",3,"hf_3")],1,null)],1,u.meta_id)),1,null)],1,null)],1,null),e("style",null,null,`
        .motif-visualization {
          padding: 1rem;
          background: var(--color-surface);
          border-radius: 8px;
        }
        .motif-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1rem;
        }
        .motif-header h3 {
          margin: 0;
          color: var(--color-text);
        }
        .btn-primary {
          background: var(--color-primary);
          color: white;
          border: none;
          padding: 0.5rem 1rem;
          border-radius: 4px;
          cursor: pointer;
        }
        .btn-primary:disabled {
          opacity: 0.5;
        }
        .motif-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }
        .motif-section h4 {
          color: var(--color-text-muted);
          margin-bottom: 0.5rem;
        }
        .motif-list {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }
        .motif-card {
          background: var(--color-surface-elevated);
          padding: 0.75rem;
          border-radius: 6px;
          border: 1px solid var(--color-border);
        }
        .motif-card.meta {
          border-left: 3px solid var(--color-accent);
        }
        .motif-id {
          font-family: monospace;
          font-size: 0.75rem;
          color: var(--color-text-muted);
        }
        .motif-topics, .constituent-motifs {
          display: flex;
          flex-wrap: wrap;
          gap: 0.25rem;
          margin: 0.5rem 0;
        }
        .topic-badge, .constituent-badge {
          background: var(--color-primary-muted);
          padding: 0.125rem 0.375rem;
          border-radius: 3px;
          font-size: 0.7rem;
        }
        .motif-stats {
          display: flex;
          gap: 0.5rem;
          font-size: 0.75rem;
        }
        .buchi-badge {
          background: var(--color-success);
          color: white;
          padding: 0.125rem 0.375rem;
          border-radius: 3px;
          font-weight: bold;
        }
      `,3,null)],1,"hf_4")},qx=E(p(Fx,"s_dgj9HgeeamA")),Gx=async()=>{const[l,t,n]=b();try{const[s,r]=await Promise.all([fetch("/api/evolution/entropy"),fetch("/api/evolution/cmp/timeline")]);if(s.ok&&(t.value=await s.json()),r.ok){const o=await r.json();l.value=o.timeline||[]}}catch(s){console.error("Failed to fetch evolution data:",s)}finally{n.value=!1}},Vx=()=>{W();const l=y(null),t=y([]),n=y(!0),s=y("entropy");El(p(Gx,"s_0hwtJrstS0E",[t,l,n]));const r=o=>{switch(o){case"equilibrium":return"var(--color-success)";case"transmuting":return"var(--color-warning)";case"chaos":return"var(--color-error)";default:return"var(--color-text-muted)"}};return e("div",null,{class:"refinery-view"},[e("header",null,{class:"refinery-header"},[e("h1",null,null,"ðŸ”® Refinery",3,null),e("p",null,{class:"subtitle"},"DUALITY-BIND Evolution Observatory",3,null)],3,null),e("nav",null,{class:"refinery-tabs"},[e("button",null,{class:i(o=>`tab ${o.value==="entropy"?"active":""}`,[s],'`tab ${p0.value==="entropy"?"active":""}`'),onClick$:_("s_LPvJkj0LJrc",[s])},"Entropy",3,null),e("button",null,{class:i(o=>`tab ${o.value==="motifs"?"active":""}`,[s],'`tab ${p0.value==="motifs"?"active":""}`'),onClick$:_("s_Q5OmYWJwX54",[s])},"Motifs",3,null),e("button",null,{class:i(o=>`tab ${o.value==="seeds"?"active":""}`,[s],'`tab ${p0.value==="seeds"?"active":""}`'),onClick$:_("s_BclpoPAQIEA",[s])},"Near-Novel",3,null),e("button",null,{class:i(o=>`tab ${o.value==="promotion"?"active":""}`,[s],'`tab ${p0.value==="promotion"?"active":""}`'),onClick$:_("s_S2sx3DMpmmg",[s])},"Promotion",3,null)],3,null),e("main",null,{class:"refinery-content"},[s.value==="entropy"&&e("div",null,{class:"entropy-panel"},n.value?e("div",null,{class:"loading"},"Loading entropy state...",3,"I0_0"):l.value?g(ue,{children:[e("div",null,{class:"entropy-gauges"},[e("div",null,{class:"gauge"},[e("div",null,{class:"gauge-label"},"Entropy (Chaos)",3,null),e("div",null,{class:"gauge-bar"},e("div",null,{class:"gauge-fill entropy",style:i(o=>({width:`${o.value.entropy*100}%`}),[l],"{width:`${p0.value.entropy*100}%`}")},null,3,null),3,null),e("div",null,{class:"gauge-value"},[(l.value.entropy*100).toFixed(1),"%"],1,null)],1,null),e("div",null,{class:"gauge"},[e("div",null,{class:"gauge-label"},"Negentropy (Order)",3,null),e("div",null,{class:"gauge-bar"},e("div",null,{class:"gauge-fill negentropy",style:i(o=>({width:`${o.value.negentropy*100}%`}),[l],"{width:`${p0.value.negentropy*100}%`}")},null,3,null),3,null),e("div",null,{class:"gauge-value"},[(l.value.negentropy*100).toFixed(1),"%"],1,null)],1,null)],1,null),e("div",null,{class:"phase-indicator"},[e("span",null,{class:"phase-label"},"Transmutation Phase:",3,null),e("span",{style:{color:r(l.value.phase)}},{class:"phase-value"},l.value.phase.toUpperCase(),1,null)],1,null),e("div",null,{class:"cmp-chart"},[e("h4",null,null,"CMP Evolution Timeline",3,null),e("div",null,{class:"chart-placeholder"},t.value.length>0?e("div",null,{class:"mini-chart"},t.value.slice(-20).map((o,c)=>e("div",{style:{height:`${o.cmp*100}%`},title:`CMP: ${o.cmp.toFixed(3)} at ${o.ts}`},{class:"chart-bar"},null,3,c)),1,"I0_1"):e("p",null,null,"No CMP data available",3,null),1,null)],1,null)]},1,"I0_2"):e("div",null,{class:"error"},"Failed to load entropy state",3,null),1,"I0_3"),s.value==="motifs"&&g(qx,null,3,"I0_4"),s.value==="seeds"&&e("div",null,{class:"seeds-panel"},[e("h3",null,null,"Near-but-Novel Exploration Seeds (E14)",3,null),e("p",null,null,"Edge-of-chaos exploration candidates will appear here.",3,null)],3,"I0_5"),s.value==="promotion"&&e("div",null,{class:"promotion-panel"},[e("h3",null,null,"Hexisâ†’Entelechy Promotion (E12)",3,null),e("p",null,null,"Pattern promotion candidates will appear here.",3,null)],3,"I0_6")],1,null),e("style",null,null,`
        .refinery-view {
          min-height: 100vh;
          background: var(--color-background);
          color: var(--color-text);
          padding: 2rem;
        }
        .refinery-header {
          margin-bottom: 2rem;
        }
        .refinery-header h1 {
          margin: 0;
          font-size: 2rem;
        }
        .subtitle {
          color: var(--color-text-muted);
          margin: 0.5rem 0 0;
        }
        .refinery-tabs {
          display: flex;
          gap: 0.5rem;
          margin-bottom: 1.5rem;
          border-bottom: 1px solid var(--color-border);
          padding-bottom: 0.5rem;
        }
        .tab {
          background: transparent;
          border: none;
          color: var(--color-text-muted);
          padding: 0.5rem 1rem;
          cursor: pointer;
          border-radius: 4px 4px 0 0;
          transition: all 0.2s;
        }
        .tab:hover {
          background: var(--color-surface);
        }
        .tab.active {
          background: var(--color-primary);
          color: white;
        }
        .entropy-panel {
          display: flex;
          flex-direction: column;
          gap: 1.5rem;
        }
        .entropy-gauges {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 2rem;
        }
        .gauge {
          background: var(--color-surface);
          padding: 1rem;
          border-radius: 8px;
        }
        .gauge-label {
          font-size: 0.875rem;
          color: var(--color-text-muted);
          margin-bottom: 0.5rem;
        }
        .gauge-bar {
          height: 24px;
          background: var(--color-surface-elevated);
          border-radius: 12px;
          overflow: hidden;
        }
        .gauge-fill {
          height: 100%;
          border-radius: 12px;
          transition: width 0.5s ease;
        }
        .gauge-fill.entropy {
          background: linear-gradient(90deg, #f59e0b, #ef4444);
        }
        .gauge-fill.negentropy {
          background: linear-gradient(90deg, #10b981, #3b82f6);
        }
        .gauge-value {
          text-align: right;
          margin-top: 0.25rem;
          font-family: monospace;
        }
        .phase-indicator {
          background: var(--color-surface);
          padding: 1rem;
          border-radius: 8px;
          text-align: center;
        }
        .phase-value {
          font-size: 1.5rem;
          font-weight: bold;
          margin-left: 1rem;
        }
        .cmp-chart {
          background: var(--color-surface);
          padding: 1rem;
          border-radius: 8px;
        }
        .cmp-chart h4 {
          margin: 0 0 1rem;
        }
        .mini-chart {
          display: flex;
          align-items: flex-end;
          height: 100px;
          gap: 2px;
        }
        .chart-bar {
          flex: 1;
          background: var(--color-primary);
          border-radius: 2px 2px 0 0;
          min-height: 4px;
        }
        .seeds-panel, .promotion-panel {
          background: var(--color-surface);
          padding: 1.5rem;
          border-radius: 8px;
        }
      `,3,null)],1,"I0_7")},Hx=E(p(Vx,"s_5aJqAUL9YsM")),Wx=Object.freeze(Object.defineProperty({__proto__:null,default:Hx},Symbol.toStringTag,{value:"Module"})),Yx=()=>e("div",null,{class:"space-y-6"},[e("div",null,{class:"p-4 border-b border-border flex items-center justify-between"},[e("div",null,null,[e("h1",null,{class:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent"},"Decentralized Spine",3,null),e("p",null,{class:"text-sm text-muted-foreground"},"Identity (DID), Domains (.crypto/.eth), and AgentFi",3,null)],3,null),e("span",null,{class:"px-2 py-1 rounded bg-purple-500/20 text-purple-400 text-xs font-mono"},"RFC: decentralized_spine.md",3,null)],3,null),e("div",null,{class:"grid gap-6 md:grid-cols-2"},[e("div",null,{class:"rounded-lg border border-border bg-card p-6"},[e("h2",null,{class:"text-xl font-semibold mb-4"},"Self-Sovereign Identity",3,null),e("div",null,{class:"space-y-4"},[e("div",null,{class:"p-3 rounded bg-muted/30 border border-border/50"},[e("div",null,{class:"text-xs text-muted-foreground mb-1"},"Active DID (Session)",3,null),e("div",null,{class:"font-mono text-sm text-green-400"},"did:key:z6MkhaXgBZDvotDkL5257...",3,null)],3,null),e("div",null,{class:"p-3 rounded bg-muted/30 border border-border/50"},[e("div",null,{class:"text-xs text-muted-foreground mb-1"},"Host Identity",3,null),e("div",null,{class:"font-mono text-sm text-blue-400"},"did:web:kroma.live",3,null)],3,null)],3,null)],3,null),e("div",null,{class:"rounded-lg border border-border bg-card p-6"},[e("h2",null,{class:"text-xl font-semibold mb-4"},"Name Resolution",3,null),e("div",null,{class:"flex gap-2 mb-4"},[e("input",null,{type:"text",placeholder:"agent.eth or name.crypto",class:"flex-1 bg-black/20 border border-border rounded px-3 py-2 text-sm font-mono"},null,3,null),e("button",null,{class:"px-4 py-2 bg-primary/20 text-primary rounded hover:bg-primary/30"},"Resolve",3,null)],3,null),e("div",null,{class:"text-xs text-muted-foreground text-center italic"},"Resolver daemon not connected.",3,null)],3,null)],3,null)],3,"ob_0"),Jx=E(p(Yx,"s_aDxnan8Vnww")),Kx=Object.freeze(Object.defineProperty({__proto__:null,default:Jx},Symbol.toStringTag,{value:"Module"})),Qx=`
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float iEntropy;
uniform float iRate;
uniform vec3 iMood;

void main() {
  vec3 c;
  float l, z = iTime;
  for(int i=0; i<3; i++) {
    vec2 uv, p = gl_FragCoord.xy / iResolution.xy;
    uv = p;
    p -= 0.5;
    p.x *= iResolution.x / iResolution.y;
    z += 0.07;
    l = length(p);
    uv += p / l * (sin(z) + 1.0) * abs(sin(l * 9.0 - z - z));
    c[i] = 0.01 / length(mod(uv, 1.0) - 0.5);
  }
  gl_FragColor = vec4(c / l, 1.0);
}
`,Xx=l=>{typeof window<"u"&&new URLSearchParams(window.location.search).has("noshade");const t=y(),n=y(typeof l.entropy=="number"?l.entropy:.08),s=y(0),r=y(l.mood??"calm"),o=y(Qx),c=y(!1),u=y(!1);if(D(_("s_Z1pm6JEzLE0",[t,n,c,u,r,l,s,o])),u.value)return null;const m=.7+n.value*.3;return g(ue,{children:[e("style",null,null,`
                .gen-bg-fade {
                    opacity: 0 !important;
                }
            `,3,null),e("canvas",{ref:t,style:{opacity:m}},{class:i(d=>`fixed inset-0 pointer-events-none z-0 transition-opacity duration-[3000ms] ease-out ${d.value?"gen-bg-fade":""}`,[c],'`fixed inset-0 pointer-events-none z-0 transition-opacity duration-[3000ms] ease-out ${p0.value?"gen-bg-fade":""}`')},null,3,null)]},1,"Zn_0")},Zx=E(p(Xx,"s_UmgAg6hOENw")),eh=()=>e("div",null,{class:"h-screen w-screen relative overflow-hidden bg-transparent flex items-center justify-center"},[g(Zx,{entropy:.9,mood:"anxious",[a]:{entropy:a,mood:a}},3,"Yr_0"),e("div",null,{class:"glass-card p-12 text-center max-w-lg mx-4 z-10 border-red-500/30 shadow-[0_0_50px_rgba(239,68,68,0.2)]"},[e("h1",null,{class:"text-9xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-red-500 to-purple-900 mb-4 animate-pulse"},"404",3,null),e("div",null,{class:"text-2xl text-red-400 font-mono mb-8 tracking-widest uppercase"},"Signal Lost",3,null),e("p",null,{class:"text-muted-foreground mb-8"},["The requested trajectory has collapsed. The Art Dept suggests you return to the ",e("a",null,{href:"/",class:"text-cyan-400 hover:text-cyan-300 underline decoration-cyan-500/30"},"Substrate",3,null),"."],3,null),e("div",null,{class:"text-xs font-mono text-white/20 border-t border-[var(--glass-border-subtle)] pt-4"},["ERROR_CODE: NULL_POINTER_EXCEPTION",e("br",null,null,null,3,null),"SECTOR: UNKNOWN"],3,null)],3,null)],1,"Yr_1"),lh=E(p(eh,"s_WnNDnEXB81c")),th=Object.freeze(Object.defineProperty({__proto__:null,default:lh},Symbol.toStringTag,{value:"Module"})),nh=[],ie=()=>fi,sh=[["/",[ie,()=>Db],"/",["layout.js","index2.js"]],["api/learning/status/",[ie,()=>Nb],"/api/learning/status/",["layout.js"]],["api/metaingest/health/",[ie,()=>Yb],"/api/metaingest/health/",["layout.js"]],["api/metaingest/ontology/",[ie,()=>Xb],"/api/metaingest/ontology/",["layout.js"]],["api/metaingest/ontology/[term]/evolve/",[ie,()=>lf],"/api/metaingest/ontology/[term]/evolve/",["layout.js"]],["api/metaingest/ontology/[term]/",[ie,()=>nf],"/api/metaingest/ontology/[term]/",["layout.js"]],["api/metaingest/",[ie,()=>of],"/api/metaingest/",["layout.js"]],["api/skills/",[ie,()=>mf],"/api/skills/",["layout.js"]],["terminals/crush/",[ie,()=>_f],"/terminals/crush/",["layout.js","index3.js"]],["audit/",[ie,()=>Ef],"/audit/",["layout.js","index4.js"]],["portal/",[ie,()=>zx],"/portal/",["layout.js","index5.js"]],["refinery/",[ie,()=>Wx],"/refinery/",["layout.js","index6.js"]],["web3/",[ie,()=>Kx],"/web3/",["layout.js","index7.js"]],["[...catchall]",[ie,()=>th],"/[...catchall]",["layout.js","index8.js"]]],ah=[],rh=!0,oh="/",ih=!0,Rh={routes:sh,serverPlugins:nh,menus:ah,trailingSlash:rh,basePathname:oh,cacheModules:ih};export{oh as basePathname,ih as cacheModules,Rh as default,ah as menus,sh as routes,nh as serverPlugins,rh as trailingSlash};
//# sourceMappingURL=@qwik-city-plan.js.map
